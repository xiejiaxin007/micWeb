(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f5391cc2"],{1629:function(t,e,n){"use strict";n("f64f")},"6a18":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("23f7"),i={getIsrelationContractData:function(t){return a.axios.get("/backend-api/expand/ex-contract-custom-cate-condition/get-is-relation-contract",{params:t})},getConstractList:function(t){return a.axios.get("/backend-api/expand/ex-contract-custom-cate-condition/index",{params:t})},setConditionCategoryData:function(t){return a.axios.post("/backend-api/expand/ex-contract-custom-cate-condition/edit",t)},getConditionCategoryData:function(t){return a.axios.get("/backend-api/expand/ex-contract-custom-cate-condition/edit",{params:{id:t}})},deleteConstractCategory:function(t){return a.axios.get("/backend-api/expand/ex-contract-custom-cate-condition/delete",{params:{id:t}})},getCitys:function(t){return a.axios.get("/backend-api/select2/select2/get-all-city-code",{params:{q:t}})}};e.default=i},"720a":function(t,e,n){"use strict";n.r(e);var a=n("8f0f"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e.default=i.a},"8f0f":function(t,e,n){"use strict";var a=n("4ea4");n("7db0"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("a434"),n("b0c0"),n("498a"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),r=a(n("6a18")),o={name:"EditConfig",data:function(){return{breabcrubName:"新增",confForm:{name:"",options:[{value:""},{value:""},{value:""}],citys:[]},cityOps:[],nameRule:{required:!0,message:"此项为必填项！",trigger:"blur"},optionRule:[{required:!0,message:"此项为必填项！",trigger:"blur"},{max:20,message:"最多输入20个汉字",trigger:"blur"}],cityRule:[{required:!0,message:"此项为必填项！",trigger:"change"}]}},created:function(){this.id=this.$route.query.id,this.suitCityArrSelect=[],this.conditionOptionsArrSelect=[],this.getApplyCity(),""!==this.id&&(this.breabcrubName="编辑",document.title="编辑",this.getConditionCategoryInfo())},methods:{getConditionCategoryInfo:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n,a,i,o,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.default.getConditionCategoryData(t.id);case 3:n=e.sent,a=n.data,i=a.code,o=a.data,c=a.msg,0===i?(s=t.confForm,t.updateDatetimeCheck=o.update_datetime_check,s.name=o.category_name,t.confForm.citys=o.suitCityArrSelect.map((function(e){return t.suitCityArrSelect.push({id:e.id,value:e.city_id}),e.city_id})),t.confForm.options=[],o.conditionOptionsArrSelect.forEach((function(e){t.conditionOptionsArrSelect.push({id:e.id,value:e.option_name}),t.confForm.options.push({value:e.option_name,id:e.id})}))):t.$message(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},getSaveData:function(){var t=this,e=this.confForm.options.map((function(t,e){return{option_name:t.value.trim(),id:t.id||""}})),n=this.confForm.citys.map((function(e,n){var a={id:"",city_id:e};return t.suitCityArrSelect&&void 0!==t.suitCityArrSelect.find((function(t){return t.value===e.value}))&&(a.id=t.suitCityArrSelect[n].id),a}));return{id:this.id,category_name:this.confForm.name.trim(),conditionOptionsArr:e,suitCityArr:n,update_datetime_check:this.updateDatetimeCheck}},saveConditionCategoryInfo:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n,a,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.getSaveData(),e.next=4,r.default.setConditionCategoryData(n);case 4:a=e.sent,i=a.data,o=i.code,c=i.msg,0===o?(t.$message(c),t.$router.push("/payment/contractClassifyConfigList")):t.$message(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},addMoreOption:function(){this.confForm.options.length>=20?this.$message.warning("系统限制最多可添加20个选项值，如有问题请联系产品！"):this.confForm.options.push({value:""})},delOption:function(t){this.confForm.options.length<=1?this.$alert("选项值至少存在一个","提示",{confirmButtonText:"确定"}):this.confForm.options.splice(t,1)},getApplyCity:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n,a,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.default.getCitys();case 3:n=e.sent,a=n.data,i=a.code,o=a.data,c=a.msg,0===i?t.cityOps=o:t.$message.error(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},saveConfig:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$message.error("请完善必填项后提交！"),!1;var n=e.validOpsValue(),a=n.isRepeat,i=n.repeatIdxArr;if(a){var r=i.map((function(t){return t.map((function(t){return"选项值".concat(t+1)})).join("、")})).join("，");e.$message({message:"".concat(r,"存在重复，请修改后保存！"),duration:5e3})}else e.saveConditionCategoryInfo()}))},validOpsValue:function(){for(var t=this.confForm.options.map((function(t){return t.value.trim()})),e=[],n=[],a=0;a<t.length;a++){var i=t[a];if(!n.includes(i)){for(var r=[a],o=a+1;o<t.length;o++){i===t[o]&&(r.push(o),n.push(i))}r.length>1&&e.push(r)}}return{isRepeat:e.length>0,repeatIdxArr:e}},handleCancle:function(){var t=this;this.$confirm("是否放弃编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("/payment/contractClassifyConfigList")}))}}};e.default=o},"90f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-config"},[n("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",[n("a",{attrs:{href:"/"}},[t._v("首页")])]),n("el-breadcrumb-item",{attrs:{to:{path:"/payment/contractClassifyConfigList"}}},[t._v(" 合同分类条件配置列表 ")]),n("el-breadcrumb-item",[t._v(t._s(t.breabcrubName))])],1),n("el-form",{ref:"confForm",staticClass:"conf-form",attrs:{model:t.confForm,"label-width":"140px","label-position":"right"}},[n("el-form-item",{staticClass:"form-item",attrs:{label:"合同分类条件名称",prop:"name",rules:t.nameRule}},[n("el-input",{attrs:{clearable:"",maxlength:10},model:{value:t.confForm.name,callback:function(e){t.$set(t.confForm,"name",e)},expression:"confForm.name"}}),n("div",{staticClass:"warning-msg indent"},[n("i",{staticClass:"el-icon-question",attrs:{"aria-hidden":"true"}}),t._v(" 合同是按照何种条件进行分类的，请高度总结下分类的名称！名称最多录入10个汉字！ 如：合同是按照客户社保是否在某地的有无来进行分类的，则可命名为“客户社保归属地”。 ")])],1),t._l(t.confForm.options,(function(e,a){return n("el-form-item",{key:a,attrs:{label:"选项值"+(a+1),prop:"options."+a+".value",rules:t.optionRule}},[n("el-input",{attrs:{maxlength:20,clearable:""},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}}),n("el-button",{staticClass:"btn-del",attrs:{type:"text",size:"medium"},on:{click:function(e){return t.delOption(a)}}},[t._v(" 删除 ")]),0===a?n("div",{staticClass:"warning-msg"},[n("i",{staticClass:"el-icon-question",attrs:{"aria-hidden":"true"}}),t._v(" 此分类条件下有开发商时如何分类的，请总结分类依次添加！选项值必须简单易懂易于区分， 字数最多可输入20个汉字。如：开发商时按照客户户口是否在某某本地进行分类，选项值可添加2个：“户口在某某”，“户口不在某某” ")]):t._e()],1)})),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.addMoreOption}},[t._v(" 增加更多选项值 ")])],1),n("el-form-item",{staticClass:"two-level",attrs:{label:"适用城市",prop:"citys",rules:t.cityRule,required:""}},[n("el-select",{ref:"bandSlt",attrs:{multiple:"",filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.confForm.citys,callback:function(e){t.$set(t.confForm,"citys",e)},expression:"confForm.citys"}},t._l(t.cityOps,(function(t){return n("el-option",{key:t.id,attrs:{label:t.text,value:t.id}})})),1),n("div",{staticClass:"warning-msg indent"},[n("i",{staticClass:"el-icon-question",attrs:{"aria-hidden":"true"}}),t._v(" 该分类条件适用于那些楼盘的城市！ ")])],1),n("el-form-item",[n("el-button",{on:{click:t.handleCancle}},[t._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveConfig("confForm")}}},[t._v(" 保存 ")])],1)],2)],1)},i=[]},a15b:function(t,e,n){"use strict";var a=n("23e7"),i=n("44ad"),r=n("fc6a"),o=n("a640"),c=[].join,s=i!=Object,u=o("join",",");a({target:"Array",proto:!0,forced:s||!u},{join:function(t){return c.call(r(this),void 0===t?",":t)}})},a947:function(t,e,n){(e=n("24fb")(!1)).push([t.i,".edit-config[data-v-7f524b54]{padding:20px 30px 0}.edit-config .conf-form[data-v-7f524b54]{margin-top:20px;padding:15px 20px;background-color:#fff}.edit-config .conf-form .btn-del[data-v-7f524b54]{height:40px;margin-left:10px;color:red}.edit-config[data-v-7f524b54] .el-form-item__content{display:-webkit-box;display:-ms-flexbox;display:flex}.edit-config[data-v-7f524b54] .el-form-item__content .el-input{width:300px}.edit-config .warning-msg[data-v-7f524b54]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;line-height:26px;margin-left:25px;color:#e6a23c}.edit-config .warning-msg.indent[data-v-7f524b54]{margin-left:65px}.edit-config .warning-msg .el-icon-question[data-v-7f524b54]{font-size:18px;margin-top:5px;margin-right:6px;color:#e89b28}",""]),t.exports=e},caad:function(t,e,n){"use strict";var a=n("23e7"),i=n("4d64").includes,r=n("44d2");a({target:"Array",proto:!0,forced:!n("ae40")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")},f0d2:function(t,e,n){"use strict";n.r(e);var a=n("90f4"),i=n("720a");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("1629");var o=n("2877"),c=Object(o.a)(i.default,a.a,a.b,!1,null,"7f524b54",null);e.default=c.exports},f64f:function(t,e,n){var a=n("a947");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n("499e").default)("2e8333aa",a,!0,{sourceMap:!1,shadowMode:!1})}}]);