(window.webpackJsonp=window.webpackJsonp||[]).push([["CapacityHandRoomEdit"],{"06ae":function(e,t,a){"use strict";a.r(t);var n=a("8286"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},"076c":function(e,t,a){"use strict";a.r(t);var n=a("708f"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},"095a":function(e,t,a){var n=a("b82b");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("37f559f5",n,!0,{sourceMap:!1,shadowMode:!1})},"0ae8":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".btn-danger[data-v-a741eac4]{color:#f56c6c}.construct-info[data-v-a741eac4]{padding:0 10px}.table-wrap-box[data-v-a741eac4]{padding:15px 0}.table-wrap-box[data-v-a741eac4] .el-form-item{margin-bottom:0}.table-wrap-box .mult-select[data-v-a741eac4]{width:278px}.table-wrap-box .mult-select[data-v-a741eac4] .el-select__tags{position:relative;-webkit-transform:translateY(0);transform:translateY(0);z-index:11;min-height:40px;padding:3px 0}.table-wrap-box .mult-select[data-v-a741eac4] .el-input{position:absolute;z-index:10;top:0;height:100%}.table-wrap-box .mult-select[data-v-a741eac4] .el-input .el-input__inner{height:100%!important}.btn-box[data-v-a741eac4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:5px}",""]),e.exports=t},"0ce4":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stageing-info"},[e._m(0),a("div",{staticClass:"table-wrap-box"},[a("el-form",{ref:"stageingForm",attrs:{model:e.model}},[e.model.tableData?a("el-table",{attrs:{data:e.model.tableData,border:""}},[0===e.model.tableData.length||e.tableItemShows.staging_name?a("el-table-column",{attrs:{"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",[a("el-input",{attrs:{maxlength:20,placeholder:"可输入1-20个字"},model:{value:t.row.staging_name.field_value,callback:function(a){e.$set(t.row.staging_name,"field_value",a)},expression:"scope.row.staging_name.field_value"}})],1)]}}],null,!1,912856935)},[a("template",{slot:"header"},[e._v(" 分期名称 ")])],2):e._e(),0===e.model.tableData.length||"1"==e.tableColStatus.staging_name?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"origin-arr":e.infoSource,"other-val":e.stageNameSelect.otherVal},on:{change:function(t,a){return e.changeAllSource("staging_name",t,a)},"update:otherVal":function(t){return e.$set(e.stageNameSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.stageNameSelect,"otherVal",t)}},model:{value:e.stageNameSelect.value,callback:function(t){e.$set(e.stageNameSelect,"value",t)},expression:"stageNameSelect.value"}})]}},{key:"default",fn:function(t){return t.row.staging_name?[a("info-source-dialog",{attrs:{"other-val":t.row.staging_name.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.staging_name,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.staging_name,"belong_other",a)}},model:{value:t.row.staging_name.belong_role,callback:function(a){e.$set(t.row.staging_name,"belong_role",a)},expression:"scope.row.staging_name.belong_role"}})]:void 0}}],null,!0)}):e._e(),0===e.model.tableData.length||e.tableItemShows.staging_sale_status?a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.staging_sale_status.field_value,callback:function(a){e.$set(t.row.staging_sale_status,"field_value",a)},expression:"scope.row.staging_sale_status.field_value"}},e._l(e.saleStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1)]}}],null,!1,2653323438)},[a("template",{slot:"header"},[e._v(" 分期销售状态 ")])],2):e._e(),0===e.model.tableData.length||"1"==e.tableColStatus.staging_sale_status?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"origin-arr":e.infoSource,"other-val":e.stageStatusSelect.otherVal},on:{change:function(t,a){return e.changeAllSource("staging_sale_status",t,a)},"update:otherVal":function(t){return e.$set(e.stageStatusSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.stageStatusSelect,"otherVal",t)}},model:{value:e.stageStatusSelect.value,callback:function(t){e.$set(e.stageStatusSelect,"value",t)},expression:"stageStatusSelect.value"}})]}},{key:"default",fn:function(t){return 1==t.row.staging_sale_status.is_show_belong_role?[a("info-source-dialog",{attrs:{"other-val":t.row.staging_sale_status.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.staging_sale_status,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.staging_sale_status,"belong_other",a)}},model:{value:t.row.staging_sale_status.belong_role,callback:function(a){e.$set(t.row.staging_sale_status,"belong_role",a)},expression:"scope.row.staging_sale_status.belong_role"}})]:void 0}}],null,!0)}):e._e(),0===e.model.tableData.length||e.tableItemShows.relation_buildings?a("el-table-column",{attrs:{"min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.relation_buildings?[a("select-building",{staticClass:"mult-select",attrs:{options:e.buildRelative},on:{change:e.relatedListChange,"remove-tag":e.removeTag},model:{value:t.row.relation_buildings.field_value,callback:function(a){e.$set(t.row.relation_buildings,"field_value",a)},expression:"scope.row.relation_buildings.field_value"}})]:void 0}}],null,!0)},[a("template",{slot:"header"},[e._v(" 关联楼栋 ")])],2):e._e(),0===e.model.tableData.length||"1"==e.tableColStatus.relation_buildings?a("el-table-column",{attrs:{width:"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"other-val":e.relatedBuildingSelect.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("relation_buildings",t,a)},"update:otherVal":function(t){return e.$set(e.relatedBuildingSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.relatedBuildingSelect,"otherVal",t)}},model:{value:e.relatedBuildingSelect.value,callback:function(t){e.$set(e.relatedBuildingSelect,"value",t)},expression:"relatedBuildingSelect.value"}})]}},{key:"default",fn:function(t){return 1==t.row.relation_buildings.is_show_belong_role?[a("info-source-dialog",{attrs:{"other-val":t.row.relation_buildings.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.relation_buildings,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.relation_buildings,"belong_other",a)}},model:{value:t.row.relation_buildings.belong_role,callback:function(a){e.$set(t.row.relation_buildings,"belong_role",a)},expression:"scope.row.relation_buildings.belong_role"}})]:void 0}}],null,!0)}):e._e(),e.model.tableData.length>0?a("el-table-column",{key:"last",attrs:{width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn-danger",attrs:{type:"text"},on:{click:function(a){return e.delectBuilding(t.row,t.$index)}}},[e._v(" 删除 ")])]}}],null,!1,306967008)},[a("template",{slot:"header"},[e._v(" 操作 ")])],2):e._e()],1):e._e()],1),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addStageing}},[e._v(" 新增分期 ")]),e.allData.length>2?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showMoreInfo()}}},[e._v(" "+e._s(e.hasShowAllData?"收起查看更多":"查看更多分期")+" ")]):e._e()],1)],1)])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("分期情况")])])}]},"0f55":function(e,t,a){var n=a("9c6b");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("472ec6c7",n,!0,{sourceMap:!1,shadowMode:!1})},1067:function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=n(a("1da1")),o=n(a("8fa0")),l={data:function(){return{isProjectShow:"",isSubmiting:!1}},mounted:function(){this.getProjectInfo()},methods:{getProjectInfo:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,n,i,l,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.default.getProjectInfoById({project_id:e.$route.query.projectId,fields:"is_show"});case 3:a=t.sent,n=a.data,i=n.code,l=n.msg,r=n.data,0===i?e.isProjectShow=r.is_show:e.$message.error(l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},autoSetDynamic:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,n,i,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.isSubmiting){t.next=3;break}return t.abrupt("return");case 3:return e.isSubmiting=!0,t.next=6,o.default.autoCreat({project_id:e.$route.query.projectId});case 6:a=t.sent,n=a.data,i=n.code,l=n.msg,0===i?(e.isSubmiting=!1,e.$message({type:"success",message:l})):(e.$message({type:"warning",message:l}),e.isSubmiting=!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),e.isSubmiting=!1,console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}}};t.default=l},1371:function(e,t,a){"use strict";a.r(t);var n=a("dbf4"),i=a("6b74");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("759e");var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"24546e74",null);t.default=r.exports},"18bb":function(e,t,a){var n=a("bcfa");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("2b432e2d",n,!0,{sourceMap:!1,shadowMode:!1})},"195c":function(e,t,a){var n=a("f331");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("cd10a112",n,!0,{sourceMap:!1,shadowMode:!1})},"1d34":function(e,t,a){"use strict";var n=a("4ea4");a("c740"),a("4160"),a("caad"),a("d81d"),a("fb6a"),a("a434"),a("a9e3"),a("b64b"),a("2532"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=n(a("1da1")),o=n(a("2909")),l=n(a("5f6d")),r=a("7223"),s=n(a("54d1")),u=a("4c3a"),c=n(a("7b19")),d={name:"ChildModuleSatgeingSituation",components:{InfoSourceDialog:l.default,SelectBuilding:c.default},props:{saleStatus:{type:Array,default:function(){return[]}},initData:{type:Array,default:function(){return[]}},infoSource:{type:Array,default:function(){return[]}},relatedBuilding:{type:Array,default:function(){return[]}},emptyStructureData:{type:Object,default:function(){}}},created:function(){this.initNecessayData(),this.initStageingInfo()},mounted:function(){this.relatedBuildingCopy=r.commonFun.deepClone(this.relatedBuilding),this.initEmptyStructureData()},data:function(){return{hasShowAllData:!1,stageNameSelect:{value:"",otherVal:""},stageStatusSelect:{value:"",otherVal:""},relatedBuildingSelect:{value:"",otherVal:""},model:{tableData:[]},tableColStatus:{},tableItemShows:{},relatedBuildingCopy:[],allRelationBuild:[]}},computed:{buildRelative:function(){var e=this;return this.relatedBuildingCopy.map((function(t){var a=Object.assign({},t);return e.allRelationBuild.includes(t.id)&&(a.disabled=!0),a}))}},watch:{initData:function(e){this.initStageingInfo()},relatedBuilding:function(e){this.relatedBuildingCopy=r.commonFun.deepClone(e)},emptyStructureData:function(e){this.initEmptyStructureData()}},methods:{initNecessayData:function(){this.projectId=this.$route.query.projectId,this.taskId=this.$route.query.taskId,this.confirmMsg=u.confirmMsg,this.isRequiredInfoOrigin=u.isRequiredInfoOrigin,this.orgLen=0},initEmptyStructureData:function(){var e=this,t=r.commonFun.deepClone(this.emptyStructureData);Object.keys(t).forEach((function(a){e.tableColStatus[a]=t[a].is_show_belong_role,e.tableItemShows[a]=!0}))},initStageingInfo:function(){var e=this;this.originInitData=r.commonFun.deepClone(this.initData);var t=r.commonFun.deepClone(this.initData),a=["staging_sale_status"],n=t.map((function(t,n){var i,l={};return Object.keys(t).forEach((function(i){0===n&&(e.tableColStatus[i]=t[i].is_show_belong_role,e.tableItemShows[i]=!0),"1"==t[i].is_show_belong_role&&(t[i].belong_role=t[i].belong_role||""),a.includes(i)&&(t[i].field_value=Number(t[i].field_value)?Number(t[i].field_value):"");var o=t[i];l[i]={field_id:o.field_id,field_name:o.field_name,field_value:o.field_value,field_desc:o.field_desc,table_id:o.table_id,belong_role:o.belong_role,belong_other:o.belong_other,is_show_belong_role:o.is_show_belong_role}})),(i=e.allRelationBuild).push.apply(i,(0,o.default)(t.relation_buildings.field_value)),l}));this.model.tableData=n.slice(0,2),this.allData=n},relatedListChange:function(e){var t=this;e.forEach((function(e){t.allRelationBuild.includes(e)||t.allRelationBuild.push(e)}))},removeTag:function(e){var t=this.allRelationBuild.findIndex((function(t){return t===e}));void 0!==t&&this.allRelationBuild.splice(t,1)},disableList:function(e,t){e.forEach((function(e){t.includes(e.id)&&(e.disabled=!0)}))},addStageing:function(){var e=(0,u.getNecessaryData)(this.emptyStructureData);this.allData.splice(0,0,e),this.orgLen++,this.model.tableData=this.allData,this.hasShowAllData=!0},showGotoDialog:function(e){this.$emit("goToAlert",e)},changeAllSource:function(e,t,a){this.allData.forEach((function(n){Object.keys(n).forEach((function(i){e===i&&(n[i].belong_role=t,n[i].belong_other=a)}))}))},showMoreInfo:function(){this.hasShowAllData?this.model.tableData=this.allData.slice(0,2):this.model.tableData=this.allData,this.hasShowAllData=!this.hasShowAllData},delectBuilding:function(e,t){var a=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var i,o,l,r,u,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.confirmMsg("一旦删除则数据无法恢复，请确认是否删除！");case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:if(!e.id.isNew){n.next=12;break}return a.allData.splice(t,1),e.relation_buildings.field_value.forEach((function(e){a.removeTag(e)})),a.orgLen--,a.hasShowAllData?a.model.tableData=a.allData:a.model.tableData=a.allData.slice(0,2),n.abrupt("return");case 12:return i={project_id:a.projectId,task_id:a.taskId,id:e.id.field_value},n.next=15,s.default.delectStageingInfoById(i);case 15:o=n.sent,l=o.data,r=l.code,u=l.msg,a.$message(u),0===r&&(a.allData.splice(t,1),a.hasShowAllData?a.model.tableData=a.allData:a.model.tableData=a.allData.slice(0,2),(c=t-a.orgLen)>=0&&(a.originInitData.splice(c,1),e.relation_buildings.field_value.forEach((function(e){a.removeTag(e)})))),n.next=26;break;case 23:n.prev=23,n.t0=n.catch(0),console.log(n.t0);case 26:case"end":return n.stop()}}),n,null,[[0,23]])})))()},getData:function(e,t){var a=!1;if(this.$refs[e].validate((function(e){a=!!e})),a){for(var n=this.allData.length,i=this.originInitData.length,o=(0,u.getNecessaryData)(this.emptyStructureData),l=0;l<n-i;l++)this.originInitData.unshift(o);if(this.isRequiredInfoOrigin(this.originInitData,this.allData,!0,t))return this.allData}else this.$message("请检查必填信息是否填写完整!")}}};t.default=d},"1ebe":function(e,t,a){var n=a("0ae8");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("b7413a0c",n,!0,{sourceMap:!1,shadowMode:!1})},2469:function(e,t,a){"use strict";var n=a("4ea4");a("c740"),a("4160"),a("caad"),a("d81d"),a("fb6a"),a("a434"),a("a9e3"),a("b64b"),a("2532"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=n(a("1da1")),o=n(a("2909")),l=n(a("5f6d")),r=a("7223"),s=n(a("54d1")),u=a("4c3a"),c=n(a("7b19")),d={name:"ChildModuleConstructSituation",components:{InfoSourceDialog:l.default,SelectBuilding:c.default},props:{constructStage:{type:Array,default:function(){return[]}},initData:{type:Array,default:function(){return[]}},infoSource:{type:Array,default:function(){return[]}},relatedBuilding:{type:Array,default:function(){return[]}},emptyStructureData:{type:Object,default:function(){}}},created:function(){this.initNecessayData(),this.initConstructInfo(),this.initEmptyStructureData(),this.relatedBuildingCopy=r.commonFun.deepClone(this.relatedBuilding)},data:function(){return{hasShowAllData:!1,stageNameSelect:{value:"",otherVal:""},stageStatusSelect:{value:"",otherVal:""},relatedBuildingSelect:{value:"",otherVal:""},model:{tableData:[]},tableColStatus:{},tableItemShows:{},relatedBuildingCopy:[],allRelationBuild:[]}},computed:{buildRelative:function(){var e=this;return this.relatedBuildingCopy.map((function(t){var a=Object.assign({},t);return e.allRelationBuild.includes(t.id)&&(a.disabled=!0),a}))}},watch:{initData:function(e){this.initConstructInfo()},relatedBuilding:function(e){this.relatedBuildingCopy=r.commonFun.deepClone(e)},emptyStructureData:function(e){var t=this,a=r.commonFun.deepClone(e);Object.keys(a).forEach((function(e){t.tableColStatus[e]=a[e].is_show_belong_role,t.tableItemShows[e]=!0}))}},methods:{initNecessayData:function(){this.projectId=this.$route.query.projectId,this.taskId=this.$route.query.taskId,this.confirmMsg=u.confirmMsg,this.isRequiredInfoOrigin=u.isRequiredInfoOrigin,this.orgLen=0},initEmptyStructureData:function(){var e=this,t=r.commonFun.deepClone(this.emptyStructureData);Object.keys(t).forEach((function(a){e.tableColStatus[a]=t[a].is_show_belong_role,e.tableItemShows[a]=!0}))},initConstructInfo:function(){var e=this;this.originInitData=r.commonFun.deepClone(this.initData);var t=r.commonFun.deepClone(this.initData),a=["construction_stage"],n=t.map((function(t,n){var i,l={};return Object.keys(t).forEach((function(i){0===n&&(e.tableColStatus[i]=t[i].is_show_belong_role,e.tableItemShows[i]=!0),"1"==t[i].is_show_belong_role&&(t[i].belong_role=t[i].belong_role||""),a.includes(i)&&(t[i].field_value=Number(t[i].field_value)?Number(t[i].field_value):"");var o=t[i];l[i]={field_id:o.field_id,field_name:o.field_name,field_value:o.field_value,field_desc:o.field_desc,belong_role:o.belong_role,belong_other:o.belong_other,is_show_belong_role:o.is_show_belong_role,table_id:o.table_id}})),(i=e.allRelationBuild).push.apply(i,(0,o.default)(t.relation_buildings.field_value)),l}));this.model.tableData=n.slice(0,2),this.allData=n},relatedListChange:function(e){var t=this;e.forEach((function(e){t.allRelationBuild.includes(e)||t.allRelationBuild.push(e)}))},removeTag:function(e){var t=this.allRelationBuild.findIndex((function(t){return t===e}));void 0!==t&&this.allRelationBuild.splice(t,1)},disableList:function(e,t){e.forEach((function(e){e.disabled=!1,t.includes(e.id)&&(e.disabled=!0)}))},addStageing:function(){var e=(0,u.getNecessaryData)(this.emptyStructureData);this.allData.splice(0,0,e),this.orgLen++,this.model.tableData=this.allData,this.hasShowAllData=!0},addConstruct:function(e){this.orgLen++,this.model.tableData=this.allData,this.hasShowAllData=!0},showGotoDialog:function(e){this.$emit("goToAlert",e)},changeAllSource:function(e,t,a){this.allData.forEach((function(n){Object.keys(n).forEach((function(i){e===i&&(n[i].belong_role=t,n[i].belong_other=a)}))}))},showMoreInfo:function(){this.hasShowAllData?this.model.tableData=this.allData.slice(0,2):this.model.tableData=this.allData,this.hasShowAllData=!this.hasShowAllData},delectBuilding:function(e,t){var a=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var i,o,l,r,u,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.confirmMsg("一旦删除则数据无法恢复，请确认是否删除！");case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:if(!e.id.isNew){n.next=12;break}return a.allData.splice(t,1),e.relation_buildings.field_value.forEach((function(e){a.removeTag(e)})),a.orgLen--,a.hasShowAllData?a.model.tableData=a.allData:a.model.tableData=a.allData.slice(0,2),n.abrupt("return");case 12:return i={project_id:a.projectId,task_id:a.taskId,construction_phase_id:e.id.field_value},n.next=15,s.default.delectConstructInfoById(i);case 15:o=n.sent,l=o.data,r=l.code,u=l.msg,a.$message(u),0===r&&(a.allData.splice(t,1),a.hasShowAllData?a.model.tableData=a.allData:a.model.tableData=a.allData.slice(0,2),(c=t-a.orgLen)>=0&&(a.originInitData.splice(c,1),e.relation_buildings.field_value.forEach((function(e){a.removeTag(e)})))),n.next=26;break;case 23:n.prev=23,n.t0=n.catch(0),console.log(n.t0);case 26:case"end":return n.stop()}}),n,null,[[0,23]])})))()},getData:function(e,t){var a=!1;if(this.$refs[e].validate((function(e){a=!!e})),a){for(var n=this.allData.length,i=this.originInitData.length,o=(0,u.getNecessaryData)(this.emptyStructureData),l=0;l<n-i;l++)this.originInitData.splice(0,0,o);if(this.isRequiredInfoOrigin(this.originInitData,this.allData,!0,t))return this.allData}else this.$message("请检查必填信息是否填写完整!")}}};t.default=d},"25cc":function(e,t,a){"use strict";a("0f55")},"2bfd":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-source"},[10!==e.originValue?a("el-select",{staticClass:"source-val",attrs:{"popper-append-to-body":!1,placeholder:"请选择来源",clearable:""},on:{focus:e.handFocus,clear:e.clearOriginVal},model:{value:e.originValue,callback:function(t){e.originValue=t},expression:"originValue"}},e._l(e.originList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1):a("el-input",{attrs:{readonly:""},on:{focus:e.handFocus},model:{value:e.otherValue,callback:function(t){e.otherValue=t},expression:"otherValue"}},[a("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix","aria-hidden":"true"},on:{click:e.clearOriginVal},slot:"suffix"})]),a("el-dialog",{staticClass:"source-dialog",attrs:{title:"信息来源",center:"",width:"680px",visible:e.dialogFormVisible},on:{close:e.closeDialog,open:e.openDialog,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-radio-group",{staticClass:"radio-group",on:{change:e.radioChange},model:{value:e.originValue,callback:function(t){e.originValue=t},expression:"originValue"}},[e._l(e.originList,(function(t,n){return a("el-radio",{key:n,staticClass:"origin-radio",attrs:{label:t.id}},[e._v(" "+e._s(t.text)+" ")])})),a("el-input",{directives:[{name:"show",rawName:"v-show",value:10==e.originValue,expression:"originValue == 10"}],staticClass:"other-origin",attrs:{size:"small"},model:{value:e.otherValue,callback:function(t){e.otherValue=t},expression:"otherValue"}})],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.checkedCurVal}},[e._v(" 提交 ")])],1)],1)],1)},i=[]},"3b40":function(e,t,a){"use strict";a.r(t);var n=a("cb6b3"),i=a("ca8f");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("62f1");var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"6acdc162",null);t.default=r.exports},"45e5":function(e,t,a){"use strict";a.r(t);var n=a("1d34"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},"53ec":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this.$createElement,t=this._self._c||e;return this.isProjectShow&&"1"===this.isProjectShow&&!this.$route.query.taskId?t("el-button",{attrs:{type:"warning"},on:{click:this.autoSetDynamic}},[this._v(" 自动生成动态 ")]):this._e()},i=[]},"54d1":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("23f7"),i={getCapacityHandRoomInfo:function(e){return n.axios.get("/backend-api/project/cj-project-volume-living/get-info",{params:e})},deleteVolumeInfoById:function(e){return n.axios.post("/backend-api/project/cj-project-volume-living/delete-volume",e)},saveCapacityHandroomInfo:function(e){return n.axios.post("/backend-api/project/cj-project-volume-living/save-info",e)},delectStageingInfoById:function(e){return n.axios.post("/backend-api/project/cj-project-volume-living/delete-staging",e)},delectHandroomInfoById:function(e){return n.axios.post("/backend-api/project/cj-project-volume-living/delete-living",e)},delectConstructInfoById:function(e){return n.axios.post("/backend-api/project/cj-project-volume-living/delete-construction-phase",e)}};t.default=i},"5a27":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"dynamic-sale"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",[a("a",{on:{click:e.goToListPage}},[e._v(e._s(e.breadText))])]),a("el-breadcrumb-item",[e._v("放量&交房")]),a("el-breadcrumb-item",[e._v(e._s(e.isEdit?"编辑":"查看"))])],1),a("div",{staticClass:"dynamic-sale-main"},[a("div",{staticClass:"head-line"},[a("h4",[e._v(e._s(e.getProjectNameAndTypes())+" 放量&交房")]),2!=e.getEditAuth||e.isEdit?e._e():a("div",[a("auto-set-dynamic"),a("el-button",{attrs:{type:"primary"},on:{click:e.editInfo}},[e._v(" 编辑 ")])],1)]),e.isEdit?a("div",[e.capacityPlanData?a("child-module-capacity-plan",{ref:"capacityPlan",attrs:{"related-building":e.relatedBuilding,"info-source":e.getConfigList.qd_source_list,"volume-type":e.getConfigList.volume_type,"empty-structure-data":e.capacityPlanEmptyData,"init-data":e.capacityPlanData},on:{goToAlert:e.showHrefDialog}}):e._e(),e.stageSituationData?a("child-module-stageing-situation",{ref:"stageingSituation",attrs:{"empty-structure-data":e.stageSituationEmptyData,"related-building":e.relatedBuilding,"info-source":e.getConfigList.qd_source_list,"sale-status":e.getConfigList.sale_status,"init-data":e.stageSituationData},on:{goToAlert:e.showHrefDialog}}):e._e(),e.handRoomData?a("child-module-handroom-time",{ref:"handroomTime",attrs:{"empty-structure-data":e.handRoomEmptyData,"related-building":e.relatedBuilding,"handroom-type":e.getConfigList.new_live_date_type,"info-source":e.getConfigList.qd_source_list,"init-data":e.handRoomData},on:{goToAlert:e.showHrefDialog}}):e._e(),e.constructStageData?a("child-module-construct-stage",{ref:"constructStage",attrs:{"empty-structure-data":e.constructStageEmptyData,"related-building":e.relatedBuilding,"construct-stage":e.getConfigList.construct_stage,"info-source":e.getConfigList.qd_source_list,"init-data":e.constructStageData},on:{goToAlert:e.showHrefDialog}}):e._e(),a("div",{staticClass:"btn-box"},[a("el-button",{on:{click:e.cancleEdit}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveInfo}},[e._v(" 保 存 ")])],1)],1):a("div",[a("capacity-hand-room-detail",{attrs:{"capacity-data":e.capacityPlanData,"stageing-data":e.stageSituationData,"handroom-data":e.handRoomData,"construct-data":e.constructStageData}})],1)]),a("div",{staticClass:"dialog-box"},[a("msg-dialog",{attrs:{title:"保存跳转提示",width:"270px","dialog-show":e.dialogVisible},on:{closeDialog:e.closeHrefDiag}},[a("p",[e._v("当前页面信息还没有保存，请确认")]),a("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.goToPage(!0)}}},[e._v(" 保存当前信息并进行跳转 ")]),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.goToPage(!1)}}},[e._v(" 不保存当前信息并进行跳转 ")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1)])],1),a("el-dialog",{attrs:{visible:e.selfConsistentDialogvisible,title:"不自洽提示",width:"400px",center:""},on:{"update:visible":function(t){e.selfConsistentDialogvisible=t}}},[a("span",[e._v(e._s(e.selfConsistentMessage))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editBuildingStatus}},[e._v(" 修改分期销售状态 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editProjectStatus}},[e._v(" 修改楼盘销售状态 ")])],1)])],1)},i=[]},"5cb2":function(e,t,a){"use strict";var n=a("4ea4");a("99af"),a("4de4"),a("7db0"),a("4160"),a("a630"),a("caad"),a("d3b7"),a("6062"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("2909"));a("96cf");var o=n(a("1da1")),l=n(a("5530")),r=n(a("8a84")),s=n(a("69d1")),u=n(a("1371")),c=n(a("d677")),d=n(a("63d5")),f=n(a("54d1")),g=n(a("8fa0")),h=a("7223"),_=n(a("f149")),p=n(a("65ba")),m=a("4c3a"),v=a("2f62"),b=a("f8fe"),y={name:"CapacityHandRoomEdit",components:{ChildModuleCapacityPlan:r.default,ChildModuleStageingSituation:s.default,ChildModuleHandroomTime:u.default,ChildModuleConstructStage:c.default,MsgDialog:_.default,CapacityHandRoomDetail:d.default,AutoSetDynamic:p.default},computed:(0,l.default)({},(0,v.mapState)({getConfigList:function(e){return e.buildingDictionary.projectConfiglist},host:function(e){return e.buildingDictionary.ossOriginHost},getEditAuth:function(e){return e.buildingDictionary.isAuditorAuth}})),watch:{$route:{handler:function(e,t){this.isEdit=!!this.$route.query.isEdit,"3"===this.$route.query.positionTab&&("1"!==e.query.isEdit||t.query.isEdit||this.getProjectInfo(),e.query.isEdit||"1"!==t.query.isEdit||this.getInitInfo())}}},data:function(){return{dialogVisible:!1,pageLoading:!1,isSubmiting:!1,capacityPlanData:[],stageSituationData:[],handRoomData:[],constructStageData:[],capacityPlanEmptyData:{},stageSituationEmptyData:{},handRoomEmptyData:{},constructStageEmptyData:{},isEdit:!1,relatedBuilding:[],breadText:"楼盘列表",selfConsistentDialogvisible:!1,selfConsistentMessage:"",getProjectNameAndTypes:m.getProjectNameAndTypes}},created:function(){this.toRouterLink=m.toRouterLink,this.projectId=this.$route.query.projectId,this.taskId=this.$route.query.taskId,this.isEdit="1"===this.$route.query.isEdit,this.confirmMsg=m.confirmMsg,this.confirmDefindMsg=m.confirmDefindMsg,this.getHrefUrl=m.getHrefUrl,this.getInitInfo(),this.getEmptyInitData(),this.getBuildList(),this.isOperation(),this.getProjectInfo()},methods:{handleShortCut:function(){if(this.$route.query.isEdit&&"1"===this.$route.query.isEdit){if(this.dialogVisible)return this.isGo=!0,void this.saveInfo();this.saveInfo()}else 2==this.getEditAuth&&this.editInfo()},showHrefDialog:function(e){this.dialogVisible=!0,this.hrefMsg=e},closeHrefDiag:function(){this.dialogVisible=!1,this.isGo=!1},goToPage:function(e){if(e)return this.isGo=!0,void this.saveInfo();this.goToNewPage(),this.dialogVisible=!1,this.toRouterLink("3")},goToNewPage:function(){var e=this.hrefMsg,t=e.path,a=e.isEdit,n=void 0===a?"":a,i=e.id,o=e.idName,l=e.buildingName,r=this.$route.query,s=r.projectId,u=void 0===s?"":s,c=r.taskId,d=void 0===c?"":c,f=r.cityId,g=void 0===f?"":f,h=r.projectName,_=void 0===h?"":h,p=r.buildingType,m=void 0===p?"":p,v=r.role,b=void 0===v?"":v,y=i?"&".concat(o,"=").concat(i):"",w="/dist/building/".concat(t,"?projectId=").concat(u,"&taskId=").concat(d).concat(y,"&projectName=").concat(_,"&buildingType=").concat(m,"&isEdit=").concat(n,"&role=").concat(b);"houseTypeId"!==o?i||"buildingId"!==o||""===l?window.open(w):window.open("".concat(w,"&buildingName=").concat(l)):window.open("".concat(w,"&cityId=").concat(g))},editInfo:function(){this.toRouterLink("3","1")},getProjectInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,n,i,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.projectId,task_id:e.taskId},t.next=4,g.default.getProjectBaseInfo(a);case 4:n=t.sent,i=n.data,o=i.code,l=i.data,0===o&&(e.saleStatus=l.status),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getEmptyInitData:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,n,i,o,l,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={page_id:3,task_id:e.$route.query.taskId||""},t.next=4,g.default.getPageModuleData(a);case 4:n=t.sent,i=n.data,o=i.code,l=i.data,r=i.msg,0===o?(e.capacityPlanEmptyData=l.volume_living_volume_info.data||{},e.stageSituationEmptyData=l.volume_living_stage_info.data||{},e.handRoomEmptyData=l.volume_living_info.data||{},e.constructStageEmptyData=l.volume_living_construction.data||{}):e.$message(r),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},getInitInfo:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){var a,n,i,o,l,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.pageLoading=!0,a={project_id:t.projectId,task_id:t.taskId},e.next=5,f.default.getCapacityHandRoomInfo(a);case 5:n=e.sent,i=n.data,o=i.code,l=i.data,r=i.msg,0===o?(t.capacityPlanData=l.volume_living_volume_info.data||[],t.stageSituationData=l.volume_living_stage_info.data||[],t.handRoomData=l.volume_living_info.data||[],t.constructStageData=l.volume_living_construction.data||[],t.$nextTick((function(){t.pageLoading=!1}))):(t.pageLoading=!1,t.$message(r)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t.pageLoading=!1,console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},getBuildList:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,n,i,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.projectId,task_id:e.taskId},t.next=4,g.default.getProjectBuildingListdata(a);case 4:n=t.sent,i=n.data,o=i.code,l=i.data,0===o&&(e.relatedBuilding=l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},editBuildingStatus:function(){(0,m.setTrack)(b.trackIdList.stageing,{error_type:"4",role:7==this.getConfigList.current_role_source?"2":"1",frompage:"4",topage:"4"}),this.selfConsistentDialogvisible=!1},editProjectStatus:function(){(0,m.setTrack)(b.trackIdList.project,{error_type:"4",role:7==this.getConfigList.current_role_source?"2":"1",frompage:"4",topage:"1"}),this.selfConsistentDialogvisible=!1,window.open(this.getHrefUrl(2,1))},cancleEdit:function(){this.toRouterLink("3")},isOperation:function(){"operation"===this.$route.query.role?this.breadText="楼盘列表":"expand"===this.$route.query.role&&(this.breadText="楼盘任务列表")},goToListPage:function(){"operation"===this.$route.query.role?window.location.href="/index.php?r=yw-projects/index":"expand"===this.$route.query.role&&this.$router.push({path:"/building/ExpandTaskList"})},checkFieldRepeat:function(e,t,a){for(var n=!1,i=!0,o=0;o<e.length;o++){for(var l=o+1;l<e.length;l++){var r=e[o][t].field_value,s=e[l][t].field_value,u=void 0,c=void 0;if("volume_date_year"===a){var d=e[o],f=d.volume_date_year.field_value,g=d.volume_date_month.field_value,h=d.volume_date_day.field_value,_=d.volume_date_ten.field_value,p=e[l],v=p.volume_date_year.field_value,b=p.volume_date_month.field_value,y=p.volume_date_day.field_value,w=p.volume_date_ten.field_value;u=(0,m.getComputedTimeByTenData)({year:f,month:g,day:h,ten:_}),c=(0,m.getComputedTimeByTenData)({year:v,month:b,day:y,ten:w})}if("live_date_year"===a){var x=e[o],D=x.live_date_year.field_value,S=x.live_date_month.field_value,k=x.live_date_day.field_value,C=x.live_date_ten.field_value,I=e[l],$=I.live_date_year.field_value,V=I.live_date_month.field_value,j=I.live_date_day.field_value,T=I.live_date_ten.field_value;u=(0,m.getComputedTimeByTenData)({year:D,month:S,day:k,ten:C}),c=(0,m.getComputedTimeByTenData)({otherYear:$,otherMonth:V,otherDay:j,otherTen:T})}if(a){if(r===s&&u===c){n=!0,i=!1;break}}else if(r===s&&""!==r){n=!0,i=!1;break}}if(!i)break}return n},saveInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,n,o,l,r,s,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.$refs.capacityPlan?e.$refs.capacityPlan.getData("capacityForm","放量计划模块："):[],n=e.$refs.stageingSituation?e.$refs.stageingSituation.getData("stageingForm","分期情况模块："):[],o=e.$refs.handroomTime?e.$refs.handroomTime.getData("handroomForm","交房时间模块："):[],l=e.$refs.constructStage?e.$refs.constructStage.getData("constructForm","建设阶段模块："):[],a&&n&&o&&l){t.next=6;break}return t.abrupt("return");case 6:if(0!==a.length||0!==n.length||0!==o.length||0!==l.length){t.next=9;break}return e.$message("不可添加空数据，请至少添加一条数据！"),t.abrupt("return");case 9:if(0!==a.length||2!==e.saleStatus){t.next=15;break}return t.next=12,e.confirmDefindMsg({msg:"在售楼盘的放量计划为空，系统不推荐保存，请确定是否需要添加放量计划信息！",confirmText:"不添加",cancleText:"添加"});case 12:if(t.sent){t.next=15;break}return t.abrupt("return");case 15:if(!e.checkFieldRepeat(a,"volume_type","volume_date_year")){t.next=18;break}return e.confirmDefindMsg({msg:"录入的【放量计划】存在可合并的数据，请仔细核对，系统不支持拆分提交",confirmText:"确定",cancleText:"取消"}),t.abrupt("return");case 18:if(!e.checkFieldRepeat(n,"staging_name")){t.next=21;break}return e.confirmDefindMsg({msg:"录入的【分期情况】存在可合并的数据，请仔细核对，系统不支持拆分提交",confirmText:"确定",cancleText:"取消"}),t.abrupt("return");case 21:if(!e.checkFieldRepeat(o,"live_date_type","live_date_year")){t.next=24;break}return e.confirmDefindMsg({msg:"录入的【交房时间】存在可合并的数据，请仔细核对，系统不支持拆分提交",confirmText:"确定",cancleText:"取消"}),t.abrupt("return");case 24:if(!e.checkFieldRepeat(l,"construction_stage")){t.next=27;break}return e.confirmDefindMsg({msg:"录入的【建设阶段】存在可合并的数据，请仔细核对，系统不支持拆分提交",confirmText:"确定",cancleText:"取消"}),t.abrupt("return");case 27:if(r=[],s=!1,o.forEach((function(e){var t;2==e.live_date_type.field_value&&(s=!0,(t=r).push.apply(t,(0,i.default)(e.relation_buildings.field_value)))})),r=Array.from(new Set(r)),u=l.find((function(e){return 1==e.construction_stage.field_value})),!s||u){t.next=45;break}return t.next=35,e.confirmDefindMsg({msg:"交房时间小于等于现在时间是否需要增加现房建设阶段！",confirmText:"确定",cancleText:"取消"});case 35:if(!t.sent){t.next=45;break}return(c=h.commonFun.deepClone(e.constructStageEmptyData)).construction_stage.field_value=1,c.id.isNew=!0,c.relation_buildings.field_value=r,l.forEach((function(e){if(2==e.construction_stage.field_value){var t=e.relation_buildings.field_value.filter((function(e){return!r.includes(e)}));e.relation_buildings.field_value=t}})),l.push(c),e.$refs.constructStage.addConstruct(l),t.abrupt("return");case 45:e.saveDynamicInfo({volume_living_volume_info:{data:a},volume_living_stage_info:{data:n},volume_living_info:{data:o},volume_living_construction:{data:l}});case 46:case"end":return t.stop()}}),t)})))()},saveDynamicInfo:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var n,i,o,l,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!t.isSubmiting){a.next=3;break}return a.abrupt("return");case 3:return t.isSubmiting=!0,t.pageLoading=!0,n={project_id:t.projectId,task_id:t.taskId},Object.assign(n,e),a.next=9,f.default.saveCapacityHandroomInfo({data:JSON.stringify(n)});case 9:i=a.sent,o=i.data,l=o.code,r=o.msg,t.isSubmiting=!1,t.pageLoading=!1,0===l?(t.isGo&&(t.closeHrefDiag(),t.goToNewPage()),t.$message("保存成功"),t.toRouterLink("3")):20021===l?(t.selfConsistentMessage=r,t.selfConsistentDialogvisible=!0):t.$message(r),a.next=22;break;case 18:a.prev=18,a.t0=a.catch(0),t.pageLoading=!1,console.log(a.t0);case 22:case"end":return a.stop()}}),a,null,[[0,18]])})))()}}};t.default=y},"5f6d":function(e,t,a){"use strict";a.r(t);var n=a("2bfd"),i=a("076c");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("7b5e");var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"57c49484",null);t.default=r.exports},"62f1":function(e,t,a){"use strict";a("18bb")},"63d5":function(e,t,a){"use strict";a.r(t);var n=a("683e"),i=a("ce86");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("e9d6");var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"3c09aec1",null);t.default=r.exports},6466:function(e,t,a){"use strict";a("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={methods:{toPlan:function(){if("1"===this.$route.query.isEdit)this.$emit("toUrl");else{var e=this.$route.query,t=e.projectId,a=void 0===t?"":t,n=e.taskId,i=void 0===n?"":n,o=e.projectName,l=void 0===o?"":o,r=e.buildingType,s=void 0===r?"":r,u=e.role,c=void 0===u?"":u,d="/dist/building/capacityPlan?projectId=".concat(a,"&taskId=").concat(i,"&projectName=").concat(l,"&buildingType=").concat(s,"&isEdit=1&role=").concat(c);window.open(d)}}}};t.default=n},"65ba":function(e,t,a){"use strict";a.r(t);var n=a("53ec"),i=a("85db");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"19f1d1d2",null);t.default=r.exports},"683e":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-detail"},[e.capacityData?a("div",[e._m(0),a("div",{staticClass:"info-content-wrap"},[a("el-table",{attrs:{data:e.capacityData,border:""}},[0===e.capacityData.length||e.capacityTableCol.volume_type?a("el-table-column",{attrs:{fixed:"",label:"放量时间类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"main-content"},[e._v(e._s(e.getValueOrText(t.row.volume_type)))]),e.$route.query.taskId||1!=t.row.volume_type.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.volume_type))+" ")])]}}],null,!1,3272711709)}):e._e(),0===e.capacityData.length||e.capacityTableCol.volume_date_year?a("el-table-column",{attrs:{label:"放量时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"main-content"},[e._v(e._s(e.createDate(t.row,"1")))]),e.$route.query.taskId||1!=t.row.volume_date_year.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.volume_date_year))+" ")])]}}],null,!1,2709648716)}):e._e(),0===e.capacityData.length||e.capacityTableCol.relation_house_types?a("el-table-column",{attrs:{label:"关联户型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.relation_house_types.field_text.join(",")))]),e.$route.query.taskId||1!=t.row.relation_house_types.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.relation_house_types))+" ")])]}}],null,!1,1593809832)}):e._e(),0===e.capacityData.length||e.capacityTableCol.relation_buildings?a("el-table-column",{attrs:{label:"关联楼栋"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.relation_buildings.field_text.join(",")))]),e.$route.query.taskId||1!=t.row.relation_buildings.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.relation_buildings))+" ")])]}}],null,!1,1613784061)}):e._e()],1),a("add-capacity-plan-btn",{staticClass:"add-plan-btn",on:{toUrl:function(t){return e.showGotoDialog({path:"capacityPlan",isEdit:1})}}})],1)]):e._e(),e.stageingData?a("div",[e._m(1),a("div",{staticClass:"info-content-wrap"},[a("el-table",{attrs:{data:e.stageingData,border:""}},[0===e.stageingData.length||e.stageingTableCol.staging_name?a("el-table-column",{attrs:{label:"分期名称"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.staging_name?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.staging_name.field_value))]),e.$route.query.taskId||1!=t.row.staging_name.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.staging_name))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.stageingData.length||e.stageingTableCol.staging_sale_status?a("el-table-column",{attrs:{label:"分期销售状态"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.staging_sale_status?[a("div",{staticClass:"main-content"},[e._v(e._s(e.getValueOrText(t.row.staging_sale_status)))]),e.$route.query.taskId||1!=t.row.staging_sale_status.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.staging_sale_status))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.stageingData.length||e.stageingTableCol.relation_buildings?a("el-table-column",{attrs:{label:"关联楼栋"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.relation_buildings?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.relation_buildings.field_text.join(",")))]),e.$route.query.taskId||1!=t.row.relation_buildings.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.relation_buildings))+" ")])]:void 0}}],null,!0)}):e._e()],1)],1)]):e._e(),e.handroomData?a("div",[e._m(2),a("div",{staticClass:"info-content-wrap"},[a("el-table",{attrs:{data:e.handroomData,border:""}},[0===e.handroomData.length||e.handroomTableCol.live_date_type?a("el-table-column",{attrs:{label:"交房时间类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"main-content"},[e._v(e._s(e.getValueOrText(t.row.live_date_type)))]),e.$route.query.taskId||1!=t.row.live_date_type.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.live_date_type))+" ")])]}}],null,!1,3522246152)}):e._e(),0===e.handroomData.length||e.handroomTableCol.live_date_year?a("el-table-column",{attrs:{label:"交房时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"main-content"},[e._v(e._s(e.createDate(t.row,"2")))]),e.$route.query.taskId||1!=t.row.live_date_year.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.live_date_year))+" ")])]}}],null,!1,823994895)}):e._e(),0===e.handroomData.length||e.handroomTableCol.relation_buildings?a("el-table-column",{attrs:{label:"关联楼栋"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.relation_buildings.field_text.join(",")))]),e.$route.query.taskId||1!=t.row.relation_buildings.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.relation_buildings))+" ")])]}}],null,!1,1613784061)}):e._e()],1)],1)]):e._e(),e.constructData?a("div",[e._m(3),a("div",{staticClass:"info-content-wrap"},[a("el-table",{attrs:{data:e.constructData,border:""}},[0===e.constructData.length||e.constructTableCol.construction_stage?a("el-table-column",{attrs:{label:"建设阶段"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.construction_stage?[a("div",{staticClass:"main-content"},[e._v(e._s(e.getValueOrText(t.row.construction_stage)))]),e.$route.query.taskId||1!=t.row.construction_stage.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.construction_stage))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.constructData.length||e.constructTableCol.relation_buildings?a("el-table-column",{attrs:{label:"关联楼栋"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.relation_buildings?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.relation_buildings.field_text.join(",")))]),e.$route.query.taskId||1!=t.row.relation_buildings.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.relation_buildings))+" ")])]:void 0}}],null,!0)}):e._e()],1)],1)]):e._e()])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("放量计划")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("分期情况")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("交房时间")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("建设阶段")])])}]},"69d1":function(e,t,a){"use strict";a.r(t);var n=a("0ce4"),i=a("45e5");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("e668");var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"4ccd39f2",null);t.default=r.exports},"6b74":function(e,t,a){"use strict";a.r(t);var n=a("b8aa"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},"700f":function(e,t,a){"use strict";a("c975"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("7223"),i={name:"select-building",props:{value:{type:Array,default:function(){return[]}},options:{type:Array,default:function(){return[]}}},watch:{value:{handler:function(e,t){this.buildings=this.value},immediate:!0},buildings:{handler:function(e,t){this.$emit("input",this.buildings)}},options:{handler:function(e,t){this.buildingOptions=n.commonFun.deepClone(e)},deep:!0,immediate:!0}},data:function(){return{buildings:[],buildingOptions:[]}},methods:{changeBuildings:function(e){if("-1"===e[e.length-1]){for(var t=[],a=0;a<this.buildingOptions.length;a++){var n=this.buildingOptions[a];n.disabled&&-1!==this.buildings.indexOf(n.id)&&t.push(n.id),n.disabled||t.push(n.id)}this.buildings=t,this.$emit("change",t),this.$refs.relationBuilds.blur()}else this.$emit("change",e)},removeBuildings:function(e){this.$emit("remove-tag",e)}}};t.default=i},"708f":function(e,t,a){"use strict";a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("7223"),i={name:"InfoOrigin",props:{value:{type:[String,Number],default:""},otherVal:{type:[String,Number],default:""},originArr:{type:Array,default:function(){return[]}}},data:function(){return{dialogFormVisible:!1,originList:n.commonFun.deepClone(this.originArr),originValue:this.value,otherValue:this.otherVal,hasSubmit:!1}},watch:{value:function(e){this.originValue=e},otherVal:function(e){this.otherValue=e},originArr:function(e){this.originList=n.commonFun.deepClone(e)}},methods:{clearOriginVal:function(){this.originValue="",this.otherValue="",this.$emit("input",this.originValue),this.$emit("update:otherVal",this.otherValue),this.$emit("change",this.originValue,this.otherValue)},openDialog:function(){this.hasSubmit=!1},closeDialog:function(){this.hasSubmit||(this.originValue=this.value,this.otherValue=this.otherVal)},radioChange:function(e){this.otherValue=""},checkedCurVal:function(){if(this.hasSubmit=!0,10===this.originValue&&""===this.otherValue)return this.$message.error("请输入来源为其他对应的值"),void(this.hasSubmit=!1);this.$emit("input",this.originValue),this.$emit("update:otherVal",this.otherValue),this.$emit("change",this.originValue,this.otherValue),this.dialogFormVisible=!1},handFocus:function(){return this.dialogFormVisible=!0,!1}}};t.default=i},"759e":function(e,t,a){"use strict";a("a1c8")},"7b19":function(e,t,a){"use strict";a.r(t);var n=a("9f18"),i=a("fa72");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,null,null);t.default=r.exports},"7b5e":function(e,t,a){"use strict";a("88ce")},8260:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".dynamic-sale[data-v-0dc567be]{font-size:14px;padding:15px 15px 0;background-color:#fff;border-radius:8px}.dynamic-sale[data-v-0dc567be] .mult-select .el-tag.el-tag--info{width:auto;max-width:310px;white-space:inherit;height:auto}.dynamic-sale-main[data-v-0dc567be]{margin:15px 0}.dynamic-sale-main .head-line[data-v-0dc567be]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;min-height:40px;padding-bottom:15px;font-size:16px}.dynamic-sale-main .head-line h4[data-v-0dc567be]{-webkit-box-flex:1;-ms-flex:1;flex:1;padding-right:20px}.dynamic-sale-main[data-v-0dc567be] .el-form-item__error{position:relative}.project-mark[data-v-0dc567be]{padding:0 10px 20px;margin-top:20px}.project-mark-title[data-v-0dc567be]{position:relative;padding:0 10px 10px;border-bottom:1px solid #dcdfe6;margin-bottom:20px}.project-mark-title .title-content[data-v-0dc567be]{font-size:15px;font-weight:700}.mark-form[data-v-0dc567be]{text-align:center}.dialog-box[data-v-0dc567be] .el-button{width:200px;margin-left:0;margin-bottom:10px}.btn-box[data-v-0dc567be]{text-align:center;padding-bottom:20px}",""]),e.exports=t},8286:function(e,t,a){"use strict";var n=a("4ea4");a("c740"),a("4160"),a("caad"),a("d81d"),a("fb6a"),a("a434"),a("a9e3"),a("b64b"),a("2532"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=n(a("1da1")),o=n(a("2909")),l=n(a("5f6d")),r=a("7223"),s=n(a("54d1")),u=n(a("8fa0")),c=a("4c3a"),d=n(a("3b40")),f=n(a("7b19")),g=n(a("b742")),h={name:"ChildModuleCapacityPlan",components:{InfoSourceDialog:l.default,DatePickerTenday:d.default,SelectBuilding:f.default,AddCapacityPlanBtn:g.default},props:{volumeType:{type:Array,default:function(){return[]}},initData:{type:Array,default:function(){return[]}},infoSource:{type:Array,default:function(){return[]}},relatedBuilding:{type:Array,default:function(){return[]}},emptyStructureData:{type:Object,default:function(){}}},created:function(){this.initNecessayData(),this.getHouseListById(),this.initCapacityInfo(),this.initEmptyStructureData()},data:function(){return{hasShowAllData:!1,capacaityPlanSelect:{value:"",otherVal:""},relativeHouseSelect:{value:"",otherVal:""},relatedBuildingSelect:{value:"",otherVal:""},model:{tableData:[]},tableColStatus:{},tableItemShows:{},relatedHouseTypeList:[],relatedBuildingCopy:[],allRelationBuild:[],allRelationHouse:[]}},computed:{buildRelative:function(){return r.commonFun.deepClone(this.relatedBuilding)},houseTypeRelative:function(){return this.relatedHouseTypeList},planTypeRule:function(){return function(e){var t=e.volume_type.field_value,a=e.volume_date_year,n=a.field_value,i=a.tendayVal,o=e.volume_date_month.field_value,l=e.volume_date_day.field_value,r=e.volume_date_ten.field_value;return l=l||(3==r?(0,c.getCurMonthDays)(o):10*r),""!==i?{validator:function(e,a,i){if(""===a)i(new Error("请选择放量计划类型"));else{var r=l?new Date(n,o-1,l):new Date(n,o,l);if([1,2].includes(t)&&r>new Date)return void i(new Error("当前放量时间与选择的放量计划类型不匹配"));if([3,4].includes(t)&&r<=new Date)return void i(new Error("当前放量时间与选择的放量计划类型不匹配"));i()}},trigger:"change"}:{required:!1}}},planTimeRule:function(){return function(e){var t=e.volume_type.field_value,a=e.volume_date_year.field_value,n=e.volume_date_month.field_value,i=e.volume_date_day.field_value,o=e.volume_date_ten.field_value;return i=i||(3==o?(0,c.getCurMonthDays)(n):10*o),""!==t?{validator:function(e,o,l){if(""===o)l(new Error("请输入放量时间"));else{var r=i?new Date(a,n-1,i):new Date(a,n,i);if([1,2].includes(t)&&r>new Date)return void l(new Error("当前放量计划类型下放量时间不得大于当前日期"));if([3,4].includes(t)&&r<=new Date)return void l(new Error("当前放量计划类型下放量时间必须大于当前日期"));l()}},trigger:"change"}:{required:!1}}}},watch:{initData:function(e){this.initCapacityInfo()},emptyStructureData:function(e){var t=this,a=r.commonFun.deepClone(e);Object.keys(a).forEach((function(e){t.tableColStatus[e]=a[e].is_show_belong_role,t.tableItemShows[e]=!0}))}},methods:{initNecessayData:function(){this.projectId=this.$route.query.projectId,this.taskId=this.$route.query.taskId,this.confirmMsg=c.confirmMsg,this.isRequiredInfoOrigin=c.isRequiredInfoOrigin},initEmptyStructureData:function(){var e=this,t=r.commonFun.deepClone(this.emptyStructureData);Object.keys(t).forEach((function(a){e.tableColStatus[a]=t[a].is_show_belong_role,e.tableItemShows[a]=!0}))},initCapacityInfo:function(){var e=this;this.originInitData=r.commonFun.deepClone(this.initData);var t=r.commonFun.deepClone(this.initData),a=["volume_type","volume_date_year","volume_date_month","volume_date_day"],n=t.map((function(t,n){var i,l,r={};return Object.keys(t).forEach((function(i){0===n&&(e.tableColStatus[i]=t[i].is_show_belong_role,e.tableItemShows[i]=!0),"1"==t[i].is_show_belong_role&&(t[i].belong_role=t[i].belong_role||""),a.includes(i)&&(t[i].field_value=Number(t[i].field_value)?Number(t[i].field_value):"");var o=t[i];r[i]={field_id:o.field_id,field_name:o.field_name,field_value:o.field_value,field_desc:o.field_desc,belong_role:o.belong_role,belong_other:o.belong_other,table_id:o.table_id,is_show_belong_role:o.is_show_belong_role},"volume_date_year"===i&&(r[i].tendayVal="")})),(i=e.allRelationBuild).push.apply(i,(0,o.default)(t.relation_buildings.field_value)),(l=e.allRelationHouse).push.apply(l,(0,o.default)(t.relation_house_types.field_value)),r}));this.model.tableData=n.slice(0,2),this.allData=n},getHouseListById:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,n,i,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.projectId,task_id:e.taskId,select_false:0},t.next=4,u.default.getHouseTypeListData(a);case 4:n=t.sent,i=n.data,o=i.code,l=i.data,0===o&&(e.relatedHouseTypeList=l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},clearType:function(e){e.volume_date_year.field_value="",e.volume_date_month.field_value="",e.volume_date_day.field_value="",e.volume_date_ten.field_value="",e.volume_date_year.tendayVal=""},changeTenDate:function(e,t,a){var n=a.volume_date_year,i=a.volume_date_month,o=a.volume_date_day,l=a.volume_date_ten;n.belong_role=e,i.belong_role=e,o.belong_role=e,l.belong_role=e,n.belong_other=t,i.belong_other=t,o.belong_other=t,l.belong_other=t},relatedListChange:function(e,t){var a=this;"1"===e?t.forEach((function(e){a.allRelationHouse.includes(e)||a.allRelationHouse.push(e)})):"2"===e&&t.forEach((function(e){a.allRelationBuild.includes(e)||a.allRelationBuild.push(e)}))},removeTag:function(e,t){if("1"===t){var a=this.allRelationHouse.findIndex((function(t){return t===e}));void 0!==a&&this.allRelationHouse.splice(a,1)}else if("2"===t){var n=this.allRelationBuild.findIndex((function(t){return t===e}));void 0!==n&&this.allRelationBuild.splice(n,1)}},disableList:function(e,t){e.forEach((function(e){e.disabled=!1,t.includes(e.id)&&(e.disabled=!0)}))},tendayChange:function(e,t){setTimeout((function(){e.tenday&&(t.field_value="")}),200)},showGotoDialog:function(e){this.$emit("goToAlert",e)},changeAllSource:function(e,t,a){this.allData.forEach((function(n){Object.keys(n).forEach((function(i){if(e===i){if("volume_date_year"===e){["volume_date_month","volume_date_day","volume_date_ten"].forEach((function(e){n[e].belong_role=t,n[e].belong_other=a}))}n[i].belong_role=t,n[i].belong_other=a}}))}))},showMoreInfo:function(){var e=this;this.hasShowAllData?this.$refs.capacityForm.validate((function(t){t&&(e.model.tableData=e.allData.slice(0,2),e.hasShowAllData=!e.hasShowAllData)})):(this.model.tableData=this.allData,this.hasShowAllData=!this.hasShowAllData)},delectBuilding:function(e,t){var a=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var i,o,l,r,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.confirmMsg("一旦删除则数据无法恢复，请确认是否删除！");case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:return i={project_id:a.projectId,task_id:a.taskId,id:e.id.field_value},n.next=9,s.default.deleteVolumeInfoById(i);case 9:o=n.sent,l=o.data,r=l.code,u=l.msg,a.$message(u),0===r&&(a.allData.splice(t,1),a.hasShowAllData?a.model.tableData=a.allData:a.model.tableData=a.allData.slice(0,2),a.originInitData.splice(t,1),e.relation_buildings.field_value.forEach((function(e){a.removeTag(e,"2")})),e.relation_house_types.field_value.forEach((function(e){a.removeTag(e,"1")}))),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),console.log(n.t0);case 20:case"end":return n.stop()}}),n,null,[[0,17]])})))()},getData:function(e,t){var a=!1;if(this.$refs[e].validate((function(e){a=!!e})),a){if(this.isRequiredInfoOrigin(this.originInitData,this.allData,!0,t))return this.allData}else this.$message("请检查必填信息是否填写完整!")}}};t.default=h},"84e8":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".info-source[data-v-57c49484]{padding:0;display:block;line-height:1}.info-source[data-v-57c49484] .el-input{padding:0}.radio-group[data-v-57c49484]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:32px;overflow:initial}.radio-group .origin-radio.el-radio[data-v-57c49484]{margin-right:20px}.radio-group .origin-radio.el-radio[data-v-57c49484] .el-radio__label{padding-left:2px}.radio-group .other-origin[data-v-57c49484]{width:150px}.source-val[data-v-57c49484],.source-val[data-v-57c49484] .el-input{padding:0}.source-val[data-v-57c49484] .el-input .el-input__suffix{right:15px}.source-dialog[data-v-57c49484] .el-dialog{display:block!important}.source-dialog[data-v-57c49484] .el-dialog>div{display:block}.source-dialog[data-v-57c49484] .el-dialog .el-dialog__body{padding:25px 20px}",""]),e.exports=t},"85db":function(e,t,a){"use strict";a.r(t);var n=a("1067"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},"88ce":function(e,t,a){var n=a("84e8");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("5cc11136",n,!0,{sourceMap:!1,shadowMode:!1})},"8a84":function(e,t,a){"use strict";a.r(t);var n=a("c882"),i=a("06ae");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("e9e7");var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"78fa34aa",null);t.default=r.exports},"8f99":function(e,t,a){"use strict";a.r(t);var n=a("aa32"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},"94e5":function(e,t,a){"use strict";var n=a("4ea4");a("7db0"),a("4160"),a("caad"),a("a9e3"),a("b64b"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("4c3a"),o=a("f8fe"),l={name:"CapacityHandRoomDetail",components:{AddCapacityPlanBtn:n(a("b742")).default},props:{capacityData:{type:Array,default:function(){return[]}},stageingData:{type:Array,default:function(){return[]}},handroomData:{type:Array,default:function(){return[]}},constructData:{type:Array,default:function(){return[]}}},data:function(){return{getOriginOperateInfo:i.getOriginOperateInfo,capacityTableCol:{},stageingTableCol:{},handroomTableCol:{},constructTableCol:{}}},watch:{capacityData:function(){this.getDataField("capacityData","capacityTableCol")},stageingData:function(){this.getDataField("stageingData","stageingTableCol")},handroomData:function(){this.getDataField("handroomData","handroomTableCol")},constructData:function(){this.getDataField("constructData","constructTableCol")}},created:function(){this.getDataField("capacityData","capacityTableCol"),this.getDataField("stageingData","stageingTableCol"),this.getDataField("handroomData","handroomTableCol"),this.getDataField("constructData","constructTableCol")},methods:{getDataField:function(e,t){var a=this,n=this[e][0]||{};Object.keys(n).forEach((function(e){a[t][e]=!0}))},createDate:function(e,t){var a,n,i,l;if("1"===t){var r=e.volume_date_year.field_value,s=e.volume_date_month.field_value,u=e.volume_date_day.field_value,c=e.volume_date_ten.field_value;a=r,n=s,i=u,l=c}else if("2"===t){var d=e.live_date_year.field_value,f=e.live_date_month.field_value,g=e.live_date_day.field_value,h=e.live_date_ten.field_value;a=d,n=f,i=g,l=h}return(a=a&&"".concat(a,"年"))+(n=Number(n)?"".concat(n,"月"):"")+(i=Number(i)?"".concat(i,"日"):"")+(l=Number(l)?"".concat(o.tendayList.find((function(e){return e.value==l})).text):"")},getValueOrText:function(e){var t=e.field_value;return["current_rate","price_min","price_max"].includes(e.field_name)&&(t="".concat(e.field_value," 万元")),["volume_type","staging_sale_status","live_date_type","construction_stage"].includes(e.field_name)&&(t=e.field_text),t}}};t.default=l},"9c6b":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".capacity-box[data-v-39b65bf5]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.capacity-box .msg-box[data-v-39b65bf5]{color:#f78f0f;margin-left:10px}",""]),e.exports=t},"9f18":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"relationBuilds",staticClass:"no-shake-select",attrs:{multiple:"",placeholder:"请选择"},on:{change:e.changeBuildings,"remove-tag":e.removeBuildings},model:{value:e.buildings,callback:function(t){e.buildings=t},expression:"buildings"}},[e.buildingOptions&&e.buildingOptions.length>0?a("el-option",{attrs:{label:"全部",value:"-1"}}):e._e(),e._l(e.buildingOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,disabled:e.disabled,value:e.id}})}))],2)},i=[]},a1c8:function(e,t,a){var n=a("b168");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("6d1a61e6",n,!0,{sourceMap:!1,shadowMode:!1})},a3cd:function(e,t,a){"use strict";a("ff48")},aa32:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"MsgDialog",data:function(){return{dialogVisble:this.dialogShow}},props:{width:{type:String,default:"30%"},dialogShow:{type:Boolean,default:!1},center:{type:Boolean,default:!0},title:{type:String,default:"提示"}},watch:{dialogShow:function(e){this.dialogVisble=e}},methods:{dialogConfirm:function(){this.$emit("confirm")},close:function(){this.$emit("closeDialog")}}};t.default=n},aa7a:function(e,t,a){var n=a("dc22");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("4b2e9068",n,!0,{sourceMap:!1,shadowMode:!1})},af86:function(e,t,a){"use strict";a("7db0"),a("a9e3"),a("d3b7"),a("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("f8fe"),i=(new Date).getFullYear(),o={name:"DatePickerTenday",props:{minYear:{type:Number,default:1970,validator:function(e){return e>=1970}},maxYear:{type:Number,default:2050,validator:function(e){return e>=1970}},type:{type:String,default:"1"},value:{type:String,default:""},year:{type:[String,Number],default:""},month:{type:[String,Number],default:""},day:{type:[String,Number],default:""},tenday:{type:[String,Number],default:""}},created:function(){this.initDate()},computed:{monthRule:function(){return"1"===this.type?[{required:!0,message:"请选择月份",trigger:"change"}]:{required:!1}},propYear:function(){var e=this.year;return e?Number(e)<1970?(this.$message.error("year年份需大于等于1970年"),1970):e:""},propMonth:function(){var e=this.month;return e?Number(e)<1||Number(e)>12?(this.$message.error("请传入有效的月份1-12月"),""):e:""},propDay:function(){var e=this.day;return e?Number(e)<1||Number(e)>31?(this.$message.error("请传入有效的天数1-31天"),""):e:""}},watch:{value:function(e){this.dateValue=e}},data:function(){return{dateValue:this.value,selectDialogVisible:!1,yearList:[],monthList:[],dayList:[],tendayList:n.tendayList,dateForm:{year:"",month:"",day:"",tenday:""}}},methods:{initDate:function(){this.dateForm.year=this.propYear||"",this.dateForm.month=this.propMonth||"",this.dateForm.day=this.propDay||"",this.dateForm.tenday=Number(this.tenday)||"",this.joinDateStr(this.dateForm),this.dateForm.year=this.propYear||i,this.yearList=this.createYearList(),this.monthList=[1,2,3,4,5,6,7,8,9,10,11,12],this.dayList=this.createDays(this.propMonth)},createYearList:function(){for(var e=Number(this.minYear)<1970?1970:Number(this.minYear),t=Number(this.maxYear)<1970?2050:Number(this.maxYear),a=[],n=e;n<=t;n++)a.push(n);return a},getCurMonthDays:function(e){if(!e)return!1;var t=this.dateForm.year.toString(),a=new Date(t,e.toString()).getTime()-864e5;return new Date(a).getDate()},createDays:function(e){var t=[],a=this.getCurMonthDays(e);if(!a)return[];for(var n=1;n<=a;n++){var i=n;t.push(i)}return t},changeMonth:function(e){this.dayList=this.createDays(e),this.dateForm.day=""},changeDay:function(e){if(""!==e){if(""===this.dateForm.month)return this.$message.warning("请先选择月份！"),void(this.dateForm.day="");this.$refs.dateForm.clearValidate("tenday"),this.dateForm.tenday=""}},changeTenday:function(e){if(""!==e){if(""===this.dateForm.month)return this.$message.warning("请先选择月份！"),void(this.dateForm.tenday="");this.$refs.dateForm.clearValidate("day"),this.dateForm.day=""}},handleOpenSelect:function(){this.dateForm.year=this.propYear||i,this.dateForm.month=this.propMonth||"",this.dateForm.day=this.propDay||"",this.dateForm.tenday=Number(this.tenday)||"",this.dateForm.tenday&&(this.dateForm.day=""),this.selectDialogVisible=!0},joinDateStr:function(e){var t=e.year,a=e.month,n=e.day,i=e.tenday,o=t&&"".concat(t,"年"),l=a&&"".concat(a,"月"),r=Number(n)&&"".concat(n,"日"),s=this.tendayList.find((function(e){return e.value==i})),u=i&&s&&s.text;t&&(this.dateValue=o+l+(r||u),this.$emit("input",this.dateValue))},submitDate:function(){var e=this;this.$refs.dateForm.validate((function(t){if(!t)return!1;e.joinDateStr(e.dateForm),e.dateForm.tenday&&(3!==e.dateForm.tenday?e.dateForm.day=10*e.dateForm.tenday:e.dateForm.day=e.getCurMonthDays(e.dateForm.month)||""),e.$emit("input",e.dateValue),e.$emit("update:year",e.dateForm.year),e.$emit("update:month",e.dateForm.month),e.$emit("update:day",e.dateForm.day),e.$emit("update:tenday",e.dateForm.tenday),e.$emit("change",e.dateForm),e.selectDialogVisible=!1}))}}};t.default=o},b168:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".btn-danger[data-v-24546e74]{color:#f56c6c}.hand-room-info[data-v-24546e74]{padding:0 10px}.table-wrap-box[data-v-24546e74]{padding:15px 0}.table-wrap-box[data-v-24546e74] .el-form-item{margin-bottom:0}.table-wrap-box .mult-select[data-v-24546e74]{width:278px}.table-wrap-box .mult-select[data-v-24546e74] .el-select__tags{position:relative;-webkit-transform:translateY(0);transform:translateY(0);z-index:11;min-height:40px;padding:3px 0}.table-wrap-box .mult-select[data-v-24546e74] .el-input{position:absolute;z-index:10;top:0;height:100%}.table-wrap-box .mult-select[data-v-24546e74] .el-input .el-input__inner{height:100%!important}.btn-box[data-v-24546e74]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:5px}",""]),e.exports=t},b742:function(e,t,a){"use strict";a.r(t);var n=a("d42f"),i=a("d0cc");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("25cc");var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"39b65bf5",null);t.default=r.exports},b82b:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".btn-danger[data-v-78fa34aa]{color:#f56c6c}.capacity-info[data-v-78fa34aa]{padding:0 10px}.table-wrap-box[data-v-78fa34aa]{padding:15px 0}.table-wrap-box[data-v-78fa34aa] .el-form-item{margin-bottom:0}.table-wrap-box .mult-select[data-v-78fa34aa]{width:278px}.table-wrap-box .mult-select[data-v-78fa34aa] .el-select__tags{position:relative;-webkit-transform:translateY(0);transform:translateY(0);z-index:11;min-height:40px;padding:3px 0}.table-wrap-box .mult-select[data-v-78fa34aa] .el-input{position:absolute;z-index:10;top:0;height:100%}.table-wrap-box .mult-select[data-v-78fa34aa] .el-input .el-input__inner{height:100%!important}.table-wrap-box[data-v-78fa34aa] .el-form-item__error{position:relative}.btn-box[data-v-78fa34aa]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:5px}",""]),e.exports=t},b8aa:function(e,t,a){"use strict";var n=a("4ea4");a("c740"),a("4160"),a("caad"),a("d81d"),a("fb6a"),a("a434"),a("a9e3"),a("b64b"),a("2532"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=n(a("1da1")),o=n(a("2909")),l=n(a("5f6d")),r=a("7223"),s=n(a("54d1")),u=n(a("8fa0")),c=a("4c3a"),d=n(a("3b40")),f=n(a("7b19")),g={name:"ChildModuleHandroomTime",components:{InfoSourceDialog:l.default,DatePickerTenday:d.default,SelectBuilding:f.default},props:{handroomType:{type:Array,default:function(){return[]}},initData:{type:Array,default:function(){return[]}},infoSource:{type:Array,default:function(){return[]}},relatedBuilding:{type:Array,default:function(){return[]}},emptyStructureData:{type:Object,default:function(){}}},created:function(){this.initNecessayData(),this.getHouseListById(),this.initHandRoomInfo()},mounted:function(){this.relatedBuildingCopy=r.commonFun.deepClone(this.relatedBuilding),this.initEmptyStructureData()},data:function(){return{hasShowAllData:!1,handroomTimeSelect:{value:"",otherVal:""},relatedBuildingSelect:{value:"",otherVal:""},model:{tableData:[]},tableColStatus:{},tableItemShows:{},relatedHouseTypeList:[],relatedBuildingCopy:[],allRelationBuild:[]}},computed:{buildRelative:function(){var e=this;return this.relatedBuildingCopy.map((function(t){var a=Object.assign({},t);return e.allRelationBuild.includes(t.id)&&(a.disabled=!0),a}))},typeRule:function(){return function(e){var t=e.live_date_type.field_value,a=e.live_date_year,n=a.field_value,i=a.tendayVal,o=e.live_date_month.field_value,l=e.live_date_day.field_value,r=e.live_date_ten.field_value;return o=o||12,l=l||(3==r?(0,c.getCurMonthDays)(o):10*r),""!==i?{validator:function(e,a,i){if(""===a)i(new Error("请选择交房时间类型"));else{var r=l?new Date(n,o-1,l,23,59,59):new Date(n,o,l,23,59,59);if([2].includes(Number(t))&&r>new Date)return void i(new Error("当前交房时间与选择的交房时间类型不匹配"));if([1].includes(Number(t))&&r<=new Date)return void i(new Error("当前交房时间与选择的交房时间类型不匹配"));i()}},trigger:"change"}:{required:!1}}},timeRule:function(){return function(e){var t=e.live_date_type.field_value,a=e.live_date_year.field_value,n=e.live_date_month.field_value,i=e.live_date_day.field_value,o=e.live_date_ten.field_value;return n=n||12,i=i||(3==o?(0,c.getCurMonthDays)(n):10*o),""!==t?{validator:function(e,o,l){if(""===o)l(new Error("请输入交房时间"));else{var r=i?new Date(a,n-1,i,23,59,59):new Date(a,n,i,23,59,59);if([2].includes(Number(t))&&r>new Date)return void l(new Error("当前交房时间类型对应的时间需小于等于当前时间！"));if([1].includes(Number(t))&&r<=new Date)return void l(new Error("当前交房时间类型对应的时间需大于当前时间！"));l()}},trigger:"change"}:{required:!1}}}},watch:{initData:function(e){this.initHandRoomInfo()},emptyStructureData:function(e){this.initEmptyStructureData()},relatedBuilding:function(e){this.relatedBuildingCopy=r.commonFun.deepClone(e)}},methods:{initNecessayData:function(){this.projectId=this.$route.query.projectId,this.taskId=this.$route.query.taskId,this.confirmMsg=c.confirmMsg,this.isRequiredInfoOrigin=c.isRequiredInfoOrigin,this.orgLen=0},initEmptyStructureData:function(){var e=this,t=r.commonFun.deepClone(this.emptyStructureData);Object.keys(t).forEach((function(a){e.tableColStatus[a]=t[a].is_show_belong_role,e.tableItemShows[a]=!0}))},initHandRoomInfo:function(){var e=this;this.originInitData=r.commonFun.deepClone(this.initData);var t=r.commonFun.deepClone(this.initData),a=["live_date_type","live_date_year","live_date_month","live_date_day"],n=t.map((function(t,n){var i,l={};return Object.keys(t).forEach((function(i){0===n&&(e.tableColStatus[i]=t[i].is_show_belong_role,e.tableItemShows[i]=!0),"1"==t[i].is_show_belong_role&&(t[i].belong_role=t[i].belong_role||""),a.includes(i)&&(t[i].field_value=Number(t[i].field_value));var o=t[i];l[i]={field_id:o.field_id,field_name:o.field_name,field_value:o.field_value,field_desc:o.field_desc,table_id:o.table_id,belong_role:o.belong_role,belong_other:o.belong_other,is_show_belong_role:o.is_show_belong_role},"live_date_year"===i&&(l[i].tendayVal="")})),(i=e.allRelationBuild).push.apply(i,(0,o.default)(t.relation_buildings.field_value)),l}));this.model.tableData=n.slice(0,2),this.allData=n},relatedListChange:function(e){var t=this;e.forEach((function(e){t.allRelationBuild.includes(e)||t.allRelationBuild.push(e)}))},removeTag:function(e){var t=this.allRelationBuild.findIndex((function(t){return t===e}));void 0!==t&&this.allRelationBuild.splice(t,1)},disableList:function(e,t){e.forEach((function(e){e.disabled=!1,t.includes(e.id)&&(e.disabled=!0)}))},addStageing:function(){var e=(0,c.getNecessaryData)(this.emptyStructureData);this.allData.splice(0,0,e),this.orgLen++,this.model.tableData=this.allData,this.hasShowAllData=!0},getHouseListById:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,n,i,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.projectId,task_id:e.taskId},t.next=4,u.default.getHouseTypeListData(a);case 4:n=t.sent,i=n.data,o=i.code,l=i.data,0===o&&(e.relatedHouseTypeList=l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},clearType:function(e){e.live_date_year.field_value="",e.live_date_month.field_value="",e.live_date_day.field_value="",e.live_date_ten.field_value="",e.live_date_year.tendayVal=""},tendayChange:function(e,t){setTimeout((function(){e.tenday&&(t.field_value="")}),200)},showGotoDialog:function(e){this.$emit("goToAlert",e)},changeAllSource:function(e,t,a){this.allData.forEach((function(n){Object.keys(n).forEach((function(i){if(e===i){if("live_date_year"===e){["live_date_month","live_date_day","live_date_ten","live_date_type"].forEach((function(e){n[e].belong_role=t,n[e].belong_other=a}))}n[i].belong_role=t,n[i].belong_other=a}}))}))},showMoreInfo:function(){this.hasShowAllData?this.model.tableData=this.allData.slice(0,2):this.model.tableData=this.allData,this.hasShowAllData=!this.hasShowAllData},changeTenDate:function(e,t,a){var n=a.live_date_year,i=a.live_date_month,o=a.live_date_day,l=a.live_date_ten;n.belong_role=e,i.belong_role=e,o.belong_role=e,l.belong_role=e,n.belong_other=t,i.belong_other=t,o.belong_other=t,l.belong_other=t},delectBuilding:function(e,t){var a=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var i,o,l,r,u,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.confirmMsg("一旦删除则数据无法恢复，请确认是否删除！");case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:if(!e.id.isNew){n.next=12;break}return a.allData.splice(t,1),e.relation_buildings.field_value.forEach((function(e){a.removeTag(e)})),a.orgLen--,a.hasShowAllData?a.model.tableData=a.allData:a.model.tableData=a.allData.slice(0,2),n.abrupt("return");case 12:return i={project_id:a.projectId,task_id:a.taskId,live_id:e.id.field_value},n.next=15,s.default.delectHandroomInfoById(i);case 15:o=n.sent,l=o.data,r=l.code,u=l.msg,a.$message(u),0===r&&(a.allData.splice(t,1),a.hasShowAllData?a.model.tableData=a.allData:a.model.tableData=a.allData.slice(0,2),(c=t-a.orgLen)>=0&&(a.originInitData.splice(c,1),e.relation_buildings.field_value.forEach((function(e){a.removeTag(e)})))),n.next=26;break;case 23:n.prev=23,n.t0=n.catch(0),console.log(n.t0);case 26:case"end":return n.stop()}}),n,null,[[0,23]])})))()},getData:function(e,t){var a=!1;if(this.$refs[e].validate((function(e){a=!!e})),a){for(var n=this.allData.length,i=this.originInitData.length,o=(0,c.getNecessaryData)(this.emptyStructureData),l=0;l<n-i;l++)this.originInitData.unshift(o);if(this.isRequiredInfoOrigin(this.originInitData,this.allData,!0,t))return this.allData}else this.$message("请检查必填信息是否填写完整!")}}};t.default=g},bcfa:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".select[data-v-6acdc162]{width:160px}",""]),e.exports=t},c882:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-info"},[e._m(0),a("div",{staticClass:"table-wrap-box"},[a("el-form",{ref:"capacityForm",attrs:{model:e.model}},[e.model.tableData?a("el-table",{attrs:{data:e.model.tableData,border:""}},[e.tableItemShows.volume_type?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"tableData."+t.$index+".volume_type.field_value",rules:e.planTypeRule(t.row)}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(a){return e.clearType(t.row)},clear:function(a){return e.clearType(t.row)}},model:{value:t.row.volume_type.field_value,callback:function(a){e.$set(t.row.volume_type,"field_value",a)},expression:"scope.row.volume_type.field_value"}},e._l(e.volumeType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1)]}}],null,!1,3466295136)},[a("template",{slot:"header"},[e._v(" 放量时间类型 ")])],2):e._e(),"1"==e.tableColStatus.volume_type?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"origin-arr":e.infoSource,"other-val":e.capacaityPlanSelect.otherVal},on:{"update:otherVal":function(t){return e.$set(e.capacaityPlanSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.capacaityPlanSelect,"otherVal",t)},change:function(t,a){return e.changeAllSource("volume_type",t,a)}},model:{value:e.capacaityPlanSelect.value,callback:function(t){e.$set(e.capacaityPlanSelect,"value",t)},expression:"capacaityPlanSelect.value"}})]}},{key:"default",fn:function(t){return[a("info-source-dialog",{attrs:{"other-val":t.row.volume_type.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.volume_type,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.volume_type,"belong_other",a)}},model:{value:t.row.volume_type.belong_role,callback:function(a){e.$set(t.row.volume_type,"belong_role",a)},expression:"scope.row.volume_type.belong_role"}})]}}],null,!1,1797433107)}):e._e(),e.tableItemShows.volume_date_year?a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v(" 放量时间 ")]}},{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"tableData."+t.$index+".volume_date_year.field_value",rules:e.planTimeRule(t.row)}},[a("date-picker-tenday",{attrs:{type:"1",year:t.row.volume_date_year.field_value,month:t.row.volume_date_month.field_value,day:t.row.volume_date_day.field_value,tenday:t.row.volume_date_ten.field_value},on:{change:function(a){return e.tendayChange(a,t.row.volume_date_day)},"update:year":function(a){return e.$set(t.row.volume_date_year,"field_value",a)},"update:month":function(a){return e.$set(t.row.volume_date_month,"field_value",a)},"update:day":function(a){return e.$set(t.row.volume_date_day,"field_value",a)},"update:tenday":function(a){return e.$set(t.row.volume_date_ten,"field_value",a)}},model:{value:t.row.volume_date_year.tendayVal,callback:function(a){e.$set(t.row.volume_date_year,"tendayVal",a)},expression:"scope.row.volume_date_year.tendayVal"}})],1)]}}],null,!1,2645970131)}):e._e(),"1"==e.tableColStatus.volume_date_year?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"origin-arr":e.infoSource,"other-val":e.capacaityPlanSelect.otherVal},on:{change:function(t,a){return e.changeAllSource("volume_date_year",t,a)},"update:otherVal":function(t){return e.$set(e.capacaityPlanSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.capacaityPlanSelect,"otherVal",t)}},model:{value:e.capacaityPlanSelect.value,callback:function(t){e.$set(e.capacaityPlanSelect,"value",t)},expression:"capacaityPlanSelect.value"}})]}},{key:"default",fn:function(t){return 1==t.row.relation_house_types.is_show_belong_role?[a("info-source-dialog",{attrs:{"other-val":t.row.volume_date_year.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.volume_date_year,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.volume_date_year,"belong_other",a)},change:function(a,n){return e.changeTenDate(a,n,t.row)}},model:{value:t.row.volume_date_year.belong_role,callback:function(a){e.$set(t.row.volume_date_year,"belong_role",a)},expression:"scope.row.volume_date_year.belong_role"}})]:void 0}}],null,!0)}):e._e(),e.tableItemShows.relation_house_types?a("el-table-column",{attrs:{"min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticClass:"mult-select",attrs:{multiple:"",placeholder:"请选择"},on:{change:function(t){return e.relatedListChange("1",t)},"remove-tag":function(t){return e.removeTag(t,"1")}},model:{value:t.row.relation_house_types.field_value,callback:function(a){e.$set(t.row.relation_house_types,"field_value",a)},expression:"scope.row.relation_house_types.field_value"}},e._l(e.houseTypeRelative,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,disabled:e.disabled,value:e.id}})})),1)]}}],null,!1,1832595815)},[a("template",{slot:"header"},[e._v(" 关联户型 ")])],2):e._e(),"1"==e.tableColStatus.relation_house_types?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"other-val":e.relativeHouseSelect.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("relation_house_types",t,a)},"update:otherVal":function(t){return e.$set(e.relativeHouseSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.relativeHouseSelect,"otherVal",t)}},model:{value:e.relativeHouseSelect.value,callback:function(t){e.$set(e.relativeHouseSelect,"value",t)},expression:"relativeHouseSelect.value"}})]}},{key:"default",fn:function(t){return 1==t.row.relation_house_types.is_show_belong_role?[a("info-source-dialog",{attrs:{"other-val":t.row.relation_house_types.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.relation_house_types,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.relation_house_types,"belong_other",a)}},model:{value:t.row.relation_house_types.belong_role,callback:function(a){e.$set(t.row.relation_house_types,"belong_role",a)},expression:"scope.row.relation_house_types.belong_role"}})]:void 0}}],null,!0)}):e._e(),e.tableItemShows.relation_buildings?a("el-table-column",{attrs:{"min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("select-building",{staticClass:"mult-select",attrs:{options:e.buildRelative},on:{change:function(t){return e.relatedListChange("2",t)},"remove-tag":function(t){return e.removeTag(t,"2")}},model:{value:t.row.relation_buildings.field_value,callback:function(a){e.$set(t.row.relation_buildings,"field_value",a)},expression:"scope.row.relation_buildings.field_value"}})]}}],null,!1,3992317036)},[a("template",{slot:"header"},[e._v(" 关联楼栋 ")])],2):e._e(),"1"==e.tableColStatus.relation_buildings?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"other-val":e.relatedBuildingSelect.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("relation_buildings",t,a)},"update:otherVal":function(t){return e.$set(e.relatedBuildingSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.relatedBuildingSelect,"otherVal",t)}},model:{value:e.relatedBuildingSelect.value,callback:function(t){e.$set(e.relatedBuildingSelect,"value",t)},expression:"relatedBuildingSelect.value"}})]}},{key:"default",fn:function(t){return 1==t.row.relation_buildings.is_show_belong_role?[a("info-source-dialog",{attrs:{"other-val":t.row.relation_buildings.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.relation_buildings,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.relation_buildings,"belong_other",a)}},model:{value:t.row.relation_buildings.belong_role,callback:function(a){e.$set(t.row.relation_buildings,"belong_role",a)},expression:"scope.row.relation_buildings.belong_role"}})]:void 0}}],null,!0)}):e._e(),e.model.tableData.length>0?a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showGotoDialog({path:"capacityPlan",id:t.row.id.field_value,idName:"volumeId"})}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showGotoDialog({path:"capacityPlan",id:t.row.id.field_value,idName:"volumeId",isEdit:1})}}},[e._v(" 编辑 ")]),a("el-button",{staticClass:"btn-danger",attrs:{type:"text"},on:{click:function(a){return e.delectBuilding(t.row,t.$index)}}},[e._v(" 删除 ")])]}}],null,!1,1126883138)},[a("template",{slot:"header"},[e._v(" 操作 ")])],2):e._e()],1):e._e()],1),a("div",{staticClass:"btn-box"},[a("add-capacity-plan-btn",{on:{toUrl:function(t){return e.showGotoDialog({path:"capacityPlan",isEdit:1})}}}),e.allData.length>2?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showMoreInfo()}}},[e._v(" "+e._s(e.hasShowAllData?"收起查看更多":"查看更多放量")+" ")]):e._e()],1)],1)])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("放量计划")])])}]},ca8f:function(e,t,a){"use strict";a.r(t);var n=a("af86"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},cb6b3:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-wrap-box"},[a("el-input",{staticClass:"select-input",attrs:{placeholder:"点击选择日期",readonly:""},on:{focus:e.handleOpenSelect},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),a("div",{staticClass:"dialog-wrap-select"},[a("el-dialog",{attrs:{"append-to-body":!0,title:"日期选择弹窗",visible:e.selectDialogVisible,width:"744px",center:""},on:{"update:visible":function(t){e.selectDialogVisible=t}}},[a("div",{staticClass:"select-wrap"},[a("el-form",{ref:"dateForm",staticClass:"date-form",attrs:{model:e.dateForm,inline:!0}},[a("el-form-item",{attrs:{rules:[{required:!0,message:"请选择年份",trigger:"change"}],prop:"year"}},[a("el-select",{staticClass:"year select",attrs:{clearable:"",placeholder:"年"},on:{change:function(t){return e.changeMonth(e.dateForm.month)}},model:{value:e.dateForm.year,callback:function(t){e.$set(e.dateForm,"year",t)},expression:"dateForm.year"}},e._l(e.yearList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{rules:e.monthRule,prop:"month"}},[a("el-select",{staticClass:"month select",attrs:{clearable:"",placeholder:"月"},on:{change:e.changeMonth},model:{value:e.dateForm.month,callback:function(t){e.$set(e.dateForm,"month",t)},expression:"dateForm.month"}},e._l(e.monthList,(function(e){return a("el-option",{key:e,attrs:{label:1===String(e).length?String("0"+e):String(e),value:e}})})),1)],1),a("el-form-item",{attrs:{prop:"day"}},[a("el-select",{staticClass:"day select",attrs:{clearable:"",placeholder:"日"},on:{change:e.changeDay},model:{value:e.dateForm.day,callback:function(t){e.$set(e.dateForm,"day",t)},expression:"dateForm.day"}},e._l(e.dayList,(function(e){return a("el-option",{key:e,attrs:{label:1===String(e).length?String("0"+e):String(e),value:e}})})),1)],1),a("el-form-item",{attrs:{prop:"tenday"}},[a("el-select",{staticClass:"ten-day-period select",attrs:{clearable:"",placeholder:"旬"},on:{change:e.changeTenday},model:{value:e.dateForm.tenday,callback:function(t){e.$set(e.dateForm,"tenday",t)},expression:"dateForm.tenday"}},e._l(e.tendayList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.selectDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitDate}},[e._v(" 确 定 ")])],1)])],1)],1)},i=[]},cca6c:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"construct-info"},[e._m(0),a("div",{staticClass:"table-wrap-box"},[a("el-form",{ref:"constructForm",attrs:{model:e.model}},[e.model.tableData?a("el-table",{attrs:{data:e.model.tableData,border:""}},[0===e.model.tableData.length||e.tableItemShows.construction_stage?a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.construction_stage.field_value,callback:function(a){e.$set(t.row.construction_stage,"field_value",a)},expression:"scope.row.construction_stage.field_value"}},e._l(e.constructStage,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1)]}}],null,!1,990788856)},[a("template",{slot:"header"},[e._v(" 建设阶段 ")])],2):e._e(),0===e.model.tableData.length||"1"==e.tableColStatus.construction_stage?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"origin-arr":e.infoSource,"other-val":e.stageStatusSelect.otherVal},on:{change:function(t,a){return e.changeAllSource("construction_stage",t,a)},"update:otherVal":function(t){return e.$set(e.stageStatusSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.stageStatusSelect,"otherVal",t)}},model:{value:e.stageStatusSelect.value,callback:function(t){e.$set(e.stageStatusSelect,"value",t)},expression:"stageStatusSelect.value"}})]}},{key:"default",fn:function(t){return 1==t.row.construction_stage.is_show_belong_role?[a("info-source-dialog",{attrs:{"other-val":t.row.construction_stage.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.construction_stage,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.construction_stage,"belong_other",a)}},model:{value:t.row.construction_stage.belong_role,callback:function(a){e.$set(t.row.construction_stage,"belong_role",a)},expression:"scope.row.construction_stage.belong_role"}})]:void 0}}],null,!0)}):e._e(),0===e.model.tableData.length||e.tableItemShows.relation_buildings?a("el-table-column",{attrs:{"min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("select-building",{staticClass:"mult-select",attrs:{options:e.buildRelative},on:{change:e.relatedListChange,"remove-tag":e.removeTag},model:{value:t.row.relation_buildings.field_value,callback:function(a){e.$set(t.row.relation_buildings,"field_value",a)},expression:"scope.row.relation_buildings.field_value"}})]}}],null,!1,3227802892)},[a("template",{slot:"header"},[e._v(" 关联楼栋 ")])],2):e._e(),0===e.model.tableData.length||"1"==e.tableColStatus.relation_buildings?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"other-val":e.relatedBuildingSelect.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("relation_buildings",t,a)},"update:otherVal":function(t){return e.$set(e.relatedBuildingSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.relatedBuildingSelect,"otherVal",t)}},model:{value:e.relatedBuildingSelect.value,callback:function(t){e.$set(e.relatedBuildingSelect,"value",t)},expression:"relatedBuildingSelect.value"}})]}},{key:"default",fn:function(t){return 1==t.row.relation_buildings.is_show_belong_role?[a("info-source-dialog",{attrs:{"other-val":t.row.relation_buildings.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.relation_buildings,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.relation_buildings,"belong_other",a)}},model:{value:t.row.relation_buildings.belong_role,callback:function(a){e.$set(t.row.relation_buildings,"belong_role",a)},expression:"scope.row.relation_buildings.belong_role"}})]:void 0}}],null,!0)}):e._e(),e.allData.length>0?a("el-table-column",{key:"last",attrs:{"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn-danger",attrs:{type:"text"},on:{click:function(a){return e.delectBuilding(t.row,t.$index)}}},[e._v(" 删除 ")])]}}],null,!1,306967008)},[a("template",{slot:"header"},[e._v(" 操作 ")])],2):e._e()],1):e._e()],1),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addStageing}},[e._v(" 新增建设阶段 ")]),e.allData.length>2?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showMoreInfo()}}},[e._v(" "+e._s(e.hasShowAllData?"收起查看更多":"查看更多建设阶段")+" ")]):e._e()],1)],1)])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("建设阶段")])])}]},ce86:function(e,t,a){"use strict";a.r(t);var n=a("94e5"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},d0cc:function(e,t,a){"use strict";a.r(t);var n=a("6466"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},d42f:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"capacity-box"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.toPlan}},[e._v(" 新增放量计划 ")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right-start"}},[a("ul",{attrs:{slot:"content"},slot:"content"},[a("li",{staticClass:"msg-list"},[a("p",{staticClass:"focus"},[e._v("· 同一个开盘/加推时间：")]),a("p",[e._v("从预计开盘变为已开盘，或从预计加推变为已加推，直接在原有的放量计划上更改，不另加新的放量计划")])]),a("li",{staticClass:"msg-list"},[a("p",{staticClass:"focus"},[e._v("· 不同的开盘/加推时间：")]),a("p",[a("span",[e._v("有多少个开盘/加推时间就有多少个放量计划")])]),a("p",{staticClass:"focus"},[e._v("· 排号字段：")]),a("p",[a("span",[e._v("放量计划有排号且有排号时间的，需要更新排号相关信息，可以关联户型和楼栋的需要关联户型和楼栋")])]),a("p",{staticClass:"focus"},[e._v("· 放量计划补充：")]),a("p",[a("span",[e._v("对于缺失放量计划的非售罄楼盘在维护到的时候要做相应的补充， 补充时只新增一条最新的放量时间即可(加推时间和开盘时间有其一即可)")])]),a("p",{staticClass:"focus"},[e._v("· 销售状态变更的影响：")]),a("p",[a("span",[e._v("无论是在售变为待售，在售变为售罄，还是待售变为售罄，楼盘的放量计划保留不删")])])])]),a("div",{staticClass:"msg-box"},[a("i",{staticClass:"el-icon-warning",attrs:{"aria-hidden":"true"}})])])],1)},i=[]},d677:function(e,t,a){"use strict";a.r(t);var n=a("cca6c"),i=a("f83c");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("e2a9");var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"a741eac4",null);t.default=r.exports},dbf4:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hand-room-info"},[e._m(0),a("div",{staticClass:"table-wrap-box"},[a("el-form",{ref:"handroomForm",attrs:{model:e.model}},[e.model.tableData?a("el-table",{attrs:{data:e.model.tableData,border:""}},[0===e.model.tableData.length||e.tableItemShows.live_date_type?a("el-table-column",{attrs:{width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"tableData."+t.$index+".live_date_type.field_value",rules:e.typeRule(t.row)}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(a){return e.clearType(t.row)},clear:function(a){return e.clearType(t.row)}},model:{value:t.row.live_date_type.field_value,callback:function(a){e.$set(t.row.live_date_type,"field_value",a)},expression:"scope.row.live_date_type.field_value"}},e._l(e.handroomType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1)]}}],null,!1,1473662087)},[a("template",{slot:"header"},[e._v(" 交房时间类型 ")])],2):e._e(),0===e.model.tableData.length||e.tableItemShows.live_date_year?a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"tableData."+t.$index+".live_date_year.field_value",rules:e.timeRule(t.row)}},[a("date-picker-tenday",{attrs:{type:"2",year:t.row.live_date_year.field_value,month:t.row.live_date_month.field_value,day:t.row.live_date_day.field_value,tenday:t.row.live_date_ten.field_value},on:{change:function(a){return e.tendayChange(a,t.row.live_date_day)},"update:year":function(a){return e.$set(t.row.live_date_year,"field_value",a)},"update:month":function(a){return e.$set(t.row.live_date_month,"field_value",a)},"update:day":function(a){return e.$set(t.row.live_date_day,"field_value",a)},"update:tenday":function(a){return e.$set(t.row.live_date_ten,"field_value",a)}},model:{value:t.row.live_date_year.tendayVal,callback:function(a){e.$set(t.row.live_date_year,"tendayVal",a)},expression:"scope.row.live_date_year.tendayVal"}})],1)]}}],null,!1,3610284387)},[a("template",{slot:"header"},[e._v(" 交房时间 ")])],2):e._e(),0===e.model.tableData.length||"1"==e.tableColStatus.live_date_year?a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"origin-arr":e.infoSource,"other-val":e.handroomTimeSelect.otherVal},on:{change:function(t,a){return e.changeAllSource("live_date_year",t,a)},"update:otherVal":function(t){return e.$set(e.handroomTimeSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.handroomTimeSelect,"otherVal",t)}},model:{value:e.handroomTimeSelect.value,callback:function(t){e.$set(e.handroomTimeSelect,"value",t)},expression:"handroomTimeSelect.value"}})]}},{key:"default",fn:function(t){return[a("info-source-dialog",{attrs:{"other-val":t.row.live_date_year.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.live_date_year,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.live_date_year,"belong_other",a)},change:function(a,n){return e.changeTenDate(a,n,t.row)}},model:{value:t.row.live_date_year.belong_role,callback:function(a){e.$set(t.row.live_date_year,"belong_role",a)},expression:"scope.row.live_date_year.belong_role"}})]}}],null,!1,1205587533)}):e._e(),0===e.model.tableData.length||e.tableItemShows.relation_buildings?a("el-table-column",{attrs:{"min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("select-building",{staticClass:"mult-select",attrs:{options:e.buildRelative},on:{change:e.relatedListChange,"remove-tag":e.removeTag},model:{value:t.row.relation_buildings.field_value,callback:function(a){e.$set(t.row.relation_buildings,"field_value",a)},expression:"scope.row.relation_buildings.field_value"}})]}}],null,!1,3227802892)},[a("template",{slot:"header"},[e._v(" 关联楼栋 ")])],2):e._e(),0===e.model.tableData.length||"1"==e.tableColStatus.relation_buildings?a("el-table-column",{attrs:{"min-width":"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"other-val":e.relatedBuildingSelect.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("relation_buildings",t,a)},"update:otherVal":function(t){return e.$set(e.relatedBuildingSelect,"otherVal",t)},"update:other-val":function(t){return e.$set(e.relatedBuildingSelect,"otherVal",t)}},model:{value:e.relatedBuildingSelect.value,callback:function(t){e.$set(e.relatedBuildingSelect,"value",t)},expression:"relatedBuildingSelect.value"}})]}},{key:"default",fn:function(t){return 1==t.row.relation_buildings.is_show_belong_role?[a("info-source-dialog",{attrs:{"other-val":t.row.relation_buildings.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.relation_buildings,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.relation_buildings,"belong_other",a)}},model:{value:t.row.relation_buildings.belong_role,callback:function(a){e.$set(t.row.relation_buildings,"belong_role",a)},expression:"scope.row.relation_buildings.belong_role"}})]:void 0}}],null,!0)}):e._e(),e.model.tableData.length>0?a("el-table-column",{key:"last",attrs:{"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn-danger",attrs:{type:"text"},on:{click:function(a){return e.delectBuilding(t.row,t.$index)}}},[e._v(" 删除 ")])]}}],null,!1,306967008)},[a("template",{slot:"header"},[e._v(" 操作 ")])],2):e._e()],1):e._e()],1),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addStageing}},[e._v(" 新增交房 ")]),e.allData.length>2?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showMoreInfo()}}},[e._v(" "+e._s(e.hasShowAllData?"收起查看更多":"查看更多交房")+" ")]):e._e()],1)],1)])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("交房时间")])])}]},dc22:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".btn-danger[data-v-4ccd39f2]{color:#f56c6c}.stageing-info[data-v-4ccd39f2]{padding:0 10px}.table-wrap-box[data-v-4ccd39f2]{padding:15px 0}.table-wrap-box[data-v-4ccd39f2] .el-form-item{margin-bottom:0}.table-wrap-box .mult-select[data-v-4ccd39f2]{width:278px}.table-wrap-box .mult-select[data-v-4ccd39f2] .el-select__tags{position:relative;-webkit-transform:translateY(0);transform:translateY(0);z-index:11;min-height:40px;padding:3px 0}.table-wrap-box .mult-select[data-v-4ccd39f2] .el-input{position:absolute;z-index:10;top:0;height:100%}.table-wrap-box .mult-select[data-v-4ccd39f2] .el-input .el-input__inner{height:100%!important}.btn-box[data-v-4ccd39f2]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:5px}",""]),e.exports=t},e1e3:function(e,t,a){"use strict";a.r(t);var n=a("5cb2"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},e2a9:function(e,t,a){"use strict";a("1ebe")},e5ba:function(e,t,a){"use strict";a.r(t);var n=a("5a27"),i=a("e1e3");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("a3cd");var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"0dc567be",null);t.default=r.exports},e668:function(e,t,a){"use strict";a("aa7a")},e686:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisble,width:e.width,center:e.center},on:{"update:visible":function(t){e.dialogVisble=t},close:e.close}},[e._t("default"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.$scopedSlots.footer?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.dialogConfirm}},[e._v("确认")]),e._t("footer")],2)],2)},i=[]},e9d6:function(e,t,a){"use strict";a("195c")},e9e7:function(e,t,a){"use strict";a("095a")},f149:function(e,t,a){"use strict";a.r(t);var n=a("e686"),i=a("8f99");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);var l=a("2877"),r=Object(l.a)(i.default,n.a,n.b,!1,null,"1153158b",null);t.default=r.exports},f331:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".flex-box[data-v-3c09aec1]{display:-webkit-box;display:-ms-flexbox;display:flex}.info-detail[data-v-3c09aec1]{padding:0 10px}.info-content-wrap[data-v-3c09aec1]{margin-bottom:15px;padding:15px 0}.form-left-box .filed-value[data-v-3c09aec1]{padding-right:25px}.info-source[data-v-3c09aec1]{color:#bbb}[data-v-3c09aec1] .el-table th.gutter{display:table-cell!important}.add-plan-btn[data-v-3c09aec1]{padding-top:10px}",""]),e.exports=t},f83c:function(e,t,a){"use strict";a.r(t);var n=a("2469"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},f8fe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileTypeList=t.trackIdList=t.roleNumList=t.tendayList=t.buildingConf=t.herfLinks=void 0;t.herfLinks={addHouse:""};t.buildingConf={fileType:[".xls",".xlsx"],sizeLimit:10};t.tendayList=[{text:"上旬",value:1},{text:"中旬",value:2},{text:"下旬",value:3}];t.roleNumList={yunYing:7,tuoZhan:1};t.trackIdList={project:6482,houseType:6483,building:6484,stageing:6485};t.fileTypeList={doc:"doc",docx:"doc",txt:"txt",jpg:"image",jpeg:"image",png:"image",xls:"excel",xlsx:"excel",csv:"excel",pdf:"pdf",ppt:"ppt",pptx:"ppt",zip:"zip",rar:"zip",mp3:"audio",mp4:"audio",wmv:"video",avi:"video",mpeg:"video",mpg:"video",rm:"video",rmvb:"video",flv:"video","3gp":"video",mov:"video",mkv:"video"}},fa72:function(e,t,a){"use strict";a.r(t);var n=a("700f"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},ff48:function(e,t,a){var n=a("8260");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("6bb0cf4a",n,!0,{sourceMap:!1,shadowMode:!1})}}]);