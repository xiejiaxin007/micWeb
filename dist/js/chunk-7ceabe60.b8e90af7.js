(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7ceabe60"],{"00b4":function(e,t,o){"use strict";o.r(t);var r=o("9506"),a=o("baa8");for(var n in a)["default"].indexOf(n)<0&&function(e){o.d(t,e,(function(){return a[e]}))}(n);o("b48f");var i=o("2877"),c=Object(i.a)(a.default,r.a,r.b,!1,null,"40df5edc",null);t.default=c.exports},"313a":function(e,t,o){(t=o("24fb")(!1)).push([e.i,".developer-add-Modify[data-v-40df5edc]{padding:0 30px}.developer-add-Modify .el-form[data-v-40df5edc] textarea{width:504px;min-height:40px!important;padding:9px 15px}.developer-add-Modify .el-form .developer-input[data-v-40df5edc]{width:504px}.developer-add-Modify .el-form .btn-area[data-v-40df5edc]{text-align:center}.developer-add-Modify .el-form .developer-name-tips[data-v-40df5edc]{color:red}.developer-add-Modify .el-form[data-v-40df5edc] .project-area .is-purchase-flow .el-form-item__label{width:150px!important}.developer-add-Modify .el-form[data-v-40df5edc] .project-area .el-button{margin-left:10px}.developer-add-Modify .el-form[data-v-40df5edc] .project-area .count-box .el-form-item__content .el-input{width:40px;margin-right:10px}.developer-add-Modify .el-form[data-v-40df5edc] .project-area .count-box .el-form-item__content .el-input .el-input__inner{padding:0 5px}.developer-add-Modify[data-v-40df5edc] .image-upload-wrap .image-list{padding:0}.developer-add-Modify .image-box[data-v-40df5edc]{width:100px;height:100px;border:1px solid #eee;position:relative}.developer-add-Modify .image-box img[data-v-40df5edc]{max-width:100%;max-height:100%;position:absolute}.developer-add-Modify .image-box i[data-v-40df5edc]{position:absolute;top:-8px;right:-8px;font-size:16px;line-height:16px;cursor:pointer;z-index:1}",""]),e.exports=t},"3ddd":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o("23f7"),a={developerList:function(e){return r.axios.get("/backend-api/kfs-developer/developer-list",e)},delDeveloper:function(e){return r.axios.post("/backend-api/kfs-developer/del-developer",e)},importDeveloper:function(e){return r.axios.post("/backend-api/kfs-developer/import-developer",e)},projectList:function(e){return r.axios.post("/backend-api/kfs-developer/get-project-list",e)},addDeveloper:function(e){return r.axios.post("/backend-api/kfs-developer/add-developer",e)},initDeveloperData:function(e){return r.axios.post("/backend-api/kfs-developer/init-developer-data",e)},editDeveloper:function(e){return r.axios.post("/backend-api/kfs-developer/edit-developer",e)},developerEmployeeList:function(e){return r.axios.get("/backend-api/kfs-developer/developer-employee-list",e)},delEmployee:function(e){return r.axios.post("/backend-api/kfs-developer/delete-developer-employee",e)},developerSelectList:function(e){return r.axios.get("/backend-api/select2/select2/get-developer-select",e)},addDeveloperEmployee:function(e){return r.axios.post("/backend-api/kfs-developer/add-developer-employee",e)},editInitDeveloperEmployee:function(e){return r.axios.get("/backend-api/kfs-developer/init-developer-employee",e)},editDeveloperEmployee:function(e){return r.axios.post("/backend-api/kfs-developer/edit-developer-employee",e)},resetPassword:function(e){return r.axios.post("/backend-api/kfs-developer/reset-password",e)},importDeveloperEmployee:function(e){return r.axios.post("/backend-api/kfs-developer/import-developer-employee",e)},balanceList:function(e){return r.axios.get("/backend-api/kfs_dsp/kfs-balance/get-account-amount-list",{params:e})},recharge:function(e){return r.axios.post("/backend-api/kfs_dsp/kfs-balance/add-recharge-record",e)},refund:function(e){return r.axios.post("/backend-api/kfs_dsp/kfs-balance/add-refund-record",e)},checkRefundInfoApi:function(e){return r.axios.post("/backend-api/kfs_dsp/kfs-balance/check-refund-info",e)},balanceDetail:function(e){return r.axios.get("/backend-api/kfs_dsp/kfs-balance/get-balance-detail-list",{params:e})},delBalance:function(e){return r.axios.post("/backend-api/kfs_dsp/kfs-balance/del-record",e)},getDeveloperInfoList:function(){return r.axios.post("/backend-api/kfs_dsp/kfs-balance/get-developer-info-list")},getProjectList:function(e){return r.axios.post("/backend-api/kfs_dsp/kfs-balance/get-project-list",e)},recoveryDeveloper:function(e){return r.axios.post("/backend-api/kfs-developer/recovery-developer",e)},recoveryEmployee:function(e){return r.axios.post("/backend-api/kfs-developer/recovery-employee",e)}};t.default=a},9506:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"developer-add-Modify"},[o("el-breadcrumb",{staticClass:"bread-crumb-box",attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",[o("a",{attrs:{href:"/"}},[e._v("首页")])]),o("el-breadcrumb-item",{attrs:{to:{path:"/developer/developerManagement"}}},[e._v(" 开发商管理 ")]),o("el-breadcrumb-item",[e._v(e._s("1"===e.operation?"新增":"编辑")+"开发商")])],1),o("div",{staticClass:"v-box form-table-box"},[o("div",{staticClass:"hd"},[o("h2",[e._v(e._s("1"===e.operation?"新增":"编辑")+"开发商")])]),o("div",{staticClass:"bd"},[o("el-form",{ref:"contractForm",attrs:{model:e.contractForm,"label-width":"120px",rules:e.rules}},[o("el-form-item",{attrs:{label:"品牌开发商：",prop:"developerName"}},[o("el-input",{staticClass:"developer-input",attrs:{maxlength:"20"},model:{value:e.contractForm.developerName,callback:function(t){e.$set(e.contractForm,"developerName",t)},expression:"contractForm.developerName"}}),e.developerNameTip?o("span",{staticClass:"developer-name-tips"},[e._v("开发商名称已存在请重新输入")]):e._e()],1),o("el-form-item",{attrs:{label:"开发商logo："}},[o("div",{staticClass:"upload-wrap"},[e.imgList.length>0?o("div",{staticClass:"image-box"},[o("i",{staticClass:"iconfont iconicon-delete",attrs:{"aria-hidden":"true"},on:{click:function(t){e.imgList=[]}}}),o("div",[o("img",{attrs:{src:e.imgList[0].fileURL,alt:"开发商logo"},on:{click:function(t){return e.showPreview(e.imgList[0])}}})])]):e._e(),e.imgList.length<1?o("div",[e.imgList.length<1?o("jl-file-upload",{ref:"uploadImg",attrs:{fileMaxSize:"10mb",upID:"developerLogoUpload",ossData:e.signs,isCropper:!0,ratio:[1,1]},on:{beforeUpdate:function(t){e.loading=!0},getFileURL:e.getFileURL}},[o("el-button",{attrs:{type:"primary"}},[e._v("上传图片")])],1):e._e()],1):e._e()])]),o("el-form-item",{attrs:{label:"开发商描述："}},[o("el-input",{attrs:{type:"textarea",maxlength:"180",autosize:"",resize:"none"},model:{value:e.contractForm.developerDesc,callback:function(t){e.$set(e.contractForm,"developerDesc",t)},expression:"contractForm.developerDesc"}})],1),e._l(e.contractForm.projectData,(function(t,r){return o("div",{key:r,staticClass:"project-area"},[o("el-form",{ref:"contractFormItem",refInFor:!0,attrs:{model:t,"label-width":"100px",inline:!0}},[o("el-form-item",{attrs:{label:"楼盘名称：",required:""}},[o("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择",loading:e.loading,"remote-method":e.getProjectList},model:{value:t.project_name,callback:function(o){e.$set(t,"project_name",o)},expression:"projectDataItem.project_name"}},e._l(e.projectList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.text,value:t.text},nativeOn:{click:function(o){return e.changeProject(t,r)}}})})),1)],1),o("el-form-item",{attrs:{label:"楼盘电话："}},[o("el-input",{attrs:{maxlength:"20"},nativeOn:{input:function(t){return e.checkInput(t)}},model:{value:t.project_mobile,callback:function(o){e.$set(t,"project_mobile",o)},expression:"projectDataItem.project_mobile"}})],1),o("el-form-item",{staticClass:"is-purchase-flow",attrs:{label:"是否购买流量：",required:""}},[o("el-radio-group",{model:{value:t.is_purchase_flow,callback:function(o){e.$set(t,"is_purchase_flow",o)},expression:"projectDataItem.is_purchase_flow"}},[o("el-radio",{attrs:{label:"1"}},[e._v("是")]),o("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),o("el-form-item",{staticClass:"count-box",attrs:{label:"账号数量：",required:""}},[o("el-input",{on:{change:function(o){return e.vericateAccoutNum(t,r)}},model:{value:t.account_num,callback:function(o){e.$set(t,"account_num",o)},expression:"projectDataItem.account_num"}}),"-1"!==t.use_account_num?o("span",[e._v("现有"+e._s(t.use_account_num)+"个账号")]):e._e()],1),o("el-button",{attrs:{type:"text"},on:{click:function(t){return e.delProject(r)}}},[e._v("删除")])],1)],1)})),o("el-form-item",[o("el-button",{attrs:{type:"text"},on:{click:e.addProject}},[e._v("新增楼盘")])],1),o("div",{staticClass:"btn-area"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("contractForm")}}},[e._v("保存")])],1)],2)],1)]),e.PhotoIsShow?o("jl-image-preview",{attrs:{showViewer:e.PhotoIsShow,urlList:e.previewUrl},on:{closeViewer:e.closeViewer}}):e._e()],1)},a=[]},"99f1":function(e,t,o){"use strict";var r=o("4ea4");o("4160"),o("fb6a"),o("a434"),o("ac1f"),o("5319"),o("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o("96cf");var a=r(o("1da1")),n=r(o("3ddd")),i=r(o("f946")),c={name:"developerAddModify",data:function(){return{contractForm:{developerName:"",developerLogo:"",developerDesc:"",projectData:[{project_id:"",project_name:"",project_mobile:"",is_purchase_flow:"2",account_num:"5",use_account_num:"-1"}]},projectList:[],loading:!1,projectInput:"",operation:this.$route.query.operation,developerId:this.$route.query.developerId,rules:{developerName:[{message:"请填写开发商名称",required:!0,trigger:"change"}]},flag:!0,imgList:[],imglogoOrigin:"",developerNameTip:!1,signs:{},PhotoIsShow:!1}},mounted:function(){"0"===this.operation?this.editInitData():this.getProjectList(),this.getSign()},methods:{beforeUpdate:function(){this.loading=this.$loading({lock:!0,text:"请求中，请稍后",spinner:"el-icon-loading",customClass:"loading-default-box",background:"rgba(255, 255, 255, 0.8)"})},getFileURL:function(e){this.loading=!1,0!==e.length?this.imgList=e:this.$message("上传失败,请重新上传")},showPreview:function(e){this.previewUrl=[e.url],this.PhotoIsShow=!0},closeViewer:function(){this.PhotoIsShow=!1,this.previewUrl=[]},getSign:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var o,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={cate:"developer/logo"},t.prev=1,t.next=4,i.default.getSign(o);case 4:r=t.sent,0===(a=r.data).code&&(e.signs=a.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},vericateAccoutNum:function(e,t){this.contractForm.projectData[t].account_num=e.account_num.replace(/[^\d]/g,""),e.account_num-e.use_account_num<0&&this.$message("".concat(this.contractForm.projectData[t].project_name,"楼盘现有账号大于输入账号，请删除人员后处理"))},editInitData:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var o,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,o={developer_id:e.developerId},t.next=5,n.default.initDeveloperData(o);case 5:r=t.sent,0===(a=r.data).code&&(e.developerId=a.data.developer_id,e.contractForm.developerName=a.data.developer_name,e.contractForm.developerLogo=a.data.developer_logo,e.contractForm.developerDesc=a.data.developer_desc,e.contractForm.projectData=a.data.project_list,e.contractForm.developerLogo&&(e.imgList.push({fileURL:e.contractForm.developerLogo}),e.imglogoOrigin=a.data.developer_logo),e.loading=!1,e.getProjectList()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},addProject:function(){this.contractForm.projectData.length>=500?this.$message("最多只能输入500个"):this.contractForm.projectData.slice(-1)[0].project_name?this.contractForm.projectData.push({project_id:"",project_name:"",project_mobile:"",is_purchase_flow:"2",use_account_num:"-1",account_num:"5"}):this.$message("上面填完在新增哦")},delProject:function(e){this.contractForm.projectData.length>1?this.contractForm.projectData.splice(e,1):this.$message("至少保留一个楼盘")},submitForm:function(e){var t=this;this.contractForm.projectData[0].project_id?this.$refs[e].validate(function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(o){var r,a,i,c,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=34;break}if(t.loading=!0,t.flag){e.next=4;break}return e.abrupt("return");case 4:if(t.flag=!1,e.prev=5,r=[],t.contractForm.projectData.forEach((function(e,t){e.project_id&&r.push({project_id:e.project_id,project_mobile:e.project_mobile,is_purchase_flow:e.is_purchase_flow,account_num:e.account_num})})),a={developer_logo:t.imgList[0]?t.imgList[0].upURL:"",developer_desc:t.contractForm.developerDesc,project_data:r},0!==t.imgList.length&&t.imglogoOrigin===t.imgList[0].fileURL&&delete a.developer_logo,"0"!==t.operation){e.next=20;break}return a.developer_id=t.developerId,a.developer_name=t.contractForm.developerName,e.next=15,n.default.editDeveloper(a);case 15:i=e.sent,0===(c=i.data).code?(t.$message(c.msg),t.loading=!1,t.flag=!0,t.$router.push("developerManagement")):(t.$message(c.msg),t.loading=!1,t.flag=!0),e.next=26;break;case 20:return a.developer_name=t.contractForm.developerName,e.next=23,n.default.addDeveloper(a);case 23:l=e.sent,0===(s=l.data).code?(t.$message(s.msg),t.loading=!1,t.flag=!0,t.$router.push("developerManagement")):(t.$message(s.msg),t.loading=!1,t.flag=!0);case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(5),t.flag=!0,console.log(e.t0);case 32:e.next=35;break;case 34:return e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e,null,[[5,28]])})));return function(t){return e.apply(this,arguments)}}()):this.$message("请至少关联一个楼盘")},checkInput:function(e){e.target.value=e.target.value.replace(/[^()（）+-\d*#]/g,"")},getProjectList:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function o(){var r,a,i,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t.loading=!0,t.projectInput=e,o.prev=2,r=[],t.contractForm.projectData.forEach((function(e,t){r.push(e.project_id)})),a={name:e,developer_id:"",not_in_id:r},o.next=8,n.default.projectList(a);case 8:i=o.sent,0===(c=i.data).code&&(t.projectList=c.data.list,t.loading=!1),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(2),console.log(o.t0);case 16:case"end":return o.stop()}}),o,null,[[2,13]])})))()},changeProject:function(e,t){this.contractForm.projectData[t].project_id=e.id,this.getProjectList("")}}};t.default=c},b48f:function(e,t,o){"use strict";o("dc6f")},baa8:function(e,t,o){"use strict";o.r(t);var r=o("99f1"),a=o.n(r);for(var n in r)["default"].indexOf(n)<0&&function(e){o.d(t,e,(function(){return r[e]}))}(n);t.default=a.a},dc6f:function(e,t,o){var r=o("313a");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,o("499e").default)("5cd539e8",r,!0,{sourceMap:!1,shadowMode:!1})}}]);