(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-775856ba"],{"405c":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a("23f7"),r={getFundsBackList:function(e){return o.axios.post("/backend-api/expand/ex-money-back-config/list",e)},addFundsBack:function(e){return o.axios.post("/backend-api/expand/ex-money-back-config/add-config",e)},editFundsBack:function(e){return o.axios.post("/backend-api/expand/ex-money-back-config/edit-config",e)},initEditFundsBack:function(e){return o.axios.post("/backend-api/expand/ex-money-back-config/edit-init",e)},getFundsBackInfo:function(e){return o.axios.post("/backend-api/expand/ex-money-back-config/view-init",e)},delFundsBack:function(e){return o.axios.post("/backend-api/expand/ex-money-back-config/del-config",e)},stayFollowInit:function(e){return o.axios.get("/backend-api/expand/ex-money-back-group/init",{params:e})},stayFollowTb:function(e){return o.axios.get("/backend-api/expand/ex-money-back-group/to-be-assoc-list",{params:e})},markConfrim:function(e){return o.axios.get("/backend-api/expand/ex-money-back-group/add-group",{params:e})},initFollow:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/init-follow",e)},followedForecastList:function(e){return o.axios.get("/backend-api/expand/ex-money-back-group/followed-forecast-list",{params:e})},getForecastList:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/get-forecast",e)},addFollow:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/add-follow",e,{headers:{"Content-Type":"application/json"}})},followTb:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/list",e)},mergeFollow:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/merge",e)},followDetail:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/follow-detail",e)},followAudit:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/follow-audit",e)},getGroupDetail:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/group-detail",e)},getDealDetail:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/deal-detail",e)},delGroup:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/cancel",e)},resumeGroup:function(e){return o.axios.post("/backend-api/expand/ex-money-back-group/recovery",e)}};t.default=r},"8a3b9":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return r}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-box"},[a("el-breadcrumb",{staticClass:"bread-crumb-box",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",{attrs:{to:{path:"/fundsBack/fundsConfig"}}},[e._v("回款流程配置管理页")]),a("el-breadcrumb-item",[e._v("回款流程配置页")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"form-box"},[a("div",{staticClass:"main-title"},[e._v("回款流程配置页")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"回款流程",prop:"name"}},[a("el-input",{attrs:{maxlength:"30",placeholder:"给回款流程命名，方便查找及匹配到合同。比如：北京万科开发商的回款流程"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e.id?a("el-form-item",{attrs:{label:"标准流程"}},[a("el-input",{staticClass:"input-width",attrs:{disabled:"",value:"1"===e.id?"是":"否"}})],1):e._e(),a("div",{staticClass:"red tips"},[e._v("提示：成交单「1-核对业绩」的开始时间=min（单笔预测回款达到回款子条件的时间，网签时间加上30天）")]),a("el-table",{attrs:{border:"",data:e.list,size:"small","row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"header-cell-style":{background:"#f8f8f8"}}},[a("el-table-column",{attrs:{"min-width":"50",prop:"stage_type",label:"序号",align:"left"}}),a("el-table-column",{attrs:{"min-width":"50",prop:"stage_name",label:"阶段",align:"left"}}),a("el-table-column",{attrs:{prop:"stage_action","min-width":"220",label:"阶段动作",align:"left"}}),a("el-table-column",{attrs:{"min-width":"100",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.stage_type||"2"===t.row.stage_type||"7"===t.row.stage_type?a("div",[e._v(" 是 ")]):a("div",[a("el-radio-group",{model:{value:e.form[t.row.stage_type].isOpen,callback:function(a){e.$set(e.form[t.row.stage_type],"isOpen",a)},expression:"form[scope.row.stage_type].isOpen"}},e._l(e.initSelect.is_open_list,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1)]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"red"},[e._v("*")]),e._v("是否有此阶段 ")])],2),a("el-table-column",{attrs:{"min-width":"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form[t.row.stage_type].isOpen,expression:"form[scope.row.stage_type].isOpen === '1'"}],staticClass:"radio-select-list",on:{change:function(a){return e.changeDate(t.row.stage_type)}},model:{value:e.form[t.row.stage_type].dateType,callback:function(a){e.$set(e.form[t.row.stage_type],"dateType",a)},expression:"form[scope.row.stage_type].dateType"}},[a("div",{staticClass:"radio-item"},[a("el-radio",{attrs:{label:"1"}},[e._v(" 固定日期 ")]),a("el-select",{attrs:{size:"small",disabled:"2"===e.form[t.row.stage_type].dateType,placeholder:"请选择"},on:{change:function(a){return e.changeFixDate(t.row.stage_type)}},model:{value:e.form[t.row.stage_type].fixedDateType1,callback:function(a){e.$set(e.form[t.row.stage_type],"fixedDateType1",a)},expression:"form[scope.row.stage_type].fixedDateType1"}},e._l(e.initSelect.fixed_date_type_list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form[t.row.stage_type].fixedDateType1||"2"===e.form[t.row.stage_type].fixedDateType1,expression:"form[scope.row.stage_type].fixedDateType1 === '1' || form[scope.row.stage_type].fixedDateType1 === '2'"}],attrs:{disabled:"2"===e.form[t.row.stage_type].dateType,size:"small",placeholder:"请选择"},model:{value:e.form[t.row.stage_type].fixedDate1,callback:function(a){e.$set(e.form[t.row.stage_type],"fixedDate1",a)},expression:"form[scope.row.stage_type].fixedDate1"}},e._l(31,(function(e){return a("el-option",{key:e,attrs:{label:e+"号",value:e+""}})})),1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"3"===e.form[t.row.stage_type].fixedDateType1||"4"===e.form[t.row.stage_type].fixedDateType1,expression:"form[scope.row.stage_type].fixedDateType1 === '3' || form[scope.row.stage_type].fixedDateType1 === '4'"}],attrs:{disabled:"2"===e.form[t.row.stage_type].dateType,size:"small",placeholder:"请选择"},model:{value:e.form[t.row.stage_type].fixedDate1,callback:function(a){e.$set(e.form[t.row.stage_type],"fixedDate1",a)},expression:"form[scope.row.stage_type].fixedDate1"}},e._l(e.initSelect.week_list,(function(e){return a("el-option",{key:e.value,attrs:{label:"周"+e.name,value:e.value}})})),1)],1),a("div",{staticClass:"radio-item"},[a("el-radio",{attrs:{label:"2"}},[e._v(" 固定天数 ")]),a("jl-number-input",{attrs:{maxlength:"3",reg:"int",minVal:"1",maxVal:"720",disabled:"1"===e.form[t.row.stage_type].dateType,size:"small",placeholder:"请输入"},model:{value:e.form[t.row.stage_type].fixedDate2,callback:function(a){e.$set(e.form[t.row.stage_type],"fixedDate2",a)},expression:"form[scope.row.stage_type].fixedDate2"}}),a("el-select",{attrs:{size:"small",disabled:"1"===e.form[t.row.stage_type].dateType,placeholder:"请选择"},model:{value:e.form[t.row.stage_type].fixedDateType2,callback:function(a){e.$set(e.form[t.row.stage_type],"fixedDateType2",a)},expression:"form[scope.row.stage_type].fixedDateType2"}},e._l(e.initSelect.fixed_day_list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)])]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"red"},[e._v("*")]),e._v("阶段跟进结束周期 ")])],2),a("el-table-column",{attrs:{"min-width":"120",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("search-select-radio",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form[t.row.stage_type].isOpen,expression:"form[scope.row.stage_type].isOpen === '1'"}],attrs:{placeholder:"请选择对接人",apiInfo:e.userApi,chosenObj:e.form[t.row.stage_type].contacter},model:{value:e.form[t.row.stage_type].user,callback:function(a){e.$set(e.form[t.row.stage_type],"user",a)},expression:"form[scope.row.stage_type].user"}})]}}])},[a("template",{slot:"header"},[e._v(" 此阶段核心对接人 "),a("a",{staticClass:"a-link",attrs:{href:e.addPartnerUrl,target:"_blank"}},[e._v("找不到人去添加")])])],2)],1),a("div",{staticClass:"btns-box"},[a("router-link",{attrs:{to:"/fundsBack/fundsConfig"}},[a("el-button",[e._v("取消")])],1),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("提交")])],1)],1)],1)],1)},r=[]},a7ee:function(e,t,a){var o=a("eaff");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("7ac5c958",o,!0,{sourceMap:!1,shadowMode:!1})},bef0:function(e,t,a){"use strict";a("a7ee")},e517:function(e,t,a){"use strict";a.r(t);var o=a("f445"),r=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t.default=r.a},eaff:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".edit-box[data-v-f85a04ca]{padding:0 30px}.edit-box .form-box[data-v-f85a04ca]{background:#fff;padding:20px}.edit-box .form-box .main-title[data-v-f85a04ca]{font-weight:700;font-size:16px;padding-bottom:20px}.edit-box .form-box .input-width[data-v-f85a04ca]{width:200px}.edit-box .form-box .red[data-v-f85a04ca]{color:red}.edit-box .form-box .tips[data-v-f85a04ca]{padding-bottom:20px}.edit-box .form-box .radio-select-list .el-input[data-v-f85a04ca],.edit-box .form-box .radio-select-list .el-select[data-v-f85a04ca]{width:100px;margin-right:10px}.edit-box .form-box .radio-select-list .radio-item .el-radio[data-v-f85a04ca]{margin-right:10px}.edit-box .form-box .radio-select-list .radio-item[data-v-f85a04ca]:first-child{margin-bottom:8px}.edit-box .form-box .radio-select-list .number-input-box[data-v-f85a04ca]{display:inline-block;width:100px;margin-right:10px}.edit-box .form-box .a-link[data-v-f85a04ca]{color:#409eff;font-weight:400;text-decoration:underline}.edit-box .form-box .btns-box[data-v-f85a04ca]{margin-top:20px;text-align:center}.edit-box .form-box .btns-box a[data-v-f85a04ca]{display:inline-block;margin-right:20px}",""]),e.exports=t},eb9d:function(e,t,a){"use strict";a.r(t);var o=a("8a3b9"),r=a("e517");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("bef0");var n=a("2877"),s=Object(n.a)(r.default,o.a,o.b,!1,null,"f85a04ca",null);t.default=s.exports},f445:function(e,t,a){"use strict";var o=a("4ea4");a("b0c0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=o(a("1da1")),i=o(a("405c")),n=o(a("f946")),s={components:{SearchSelectRadio:a("2af9").SearchSelectRadio},data:function(){return{id:this.$route.query.id,loading:!1,form:{name:"",1:{},2:{},3:{},4:{},5:{},6:{},7:{}},rules:{name:[{required:!0,message:"请输入回款流程名称",trigger:"blur"}]},initSelect:{},list:[],userApi:{api:n.default.getPartner,method:"get",params:{q:""}},addPartnerUrl:"",flag:!0}},methods:{initData:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,o,r,n,s,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,a={id:e.id||""},t.next=5,i.default.initEditFundsBack(a);case 5:o=t.sent,r=o.data,n=r.code,s=r.msg,d=r.data,0===n?(e.list=d.list,e.initSelect=d.init_select,e.addPartnerUrl=d.add_partner_url,e.setFormData(d.process_name,d.list),e.loading=!1):(e.$message(s),e.loading=!1),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,13]])})))()},setFormData:function(e,t){if(this.id){this.form.name=e;for(var a=0;a<t.length;a++){var o=t[a].stage_type;this.form[o]={stageId:t[a].stage_id,stageType:t[a].stage_type,isOpen:t[a].is_open,dateType:t[a].date_type,fixedDateType1:"1"===t[a].date_type?t[a].fixed_date_type:"",fixedDateType2:"2"===t[a].date_type?t[a].fixed_date_type:"",fixedDate1:"1"===t[a].date_type?t[a].fixed_date:"",fixedDate2:"2"===t[a].date_type?t[a].fixed_date:"",user:t[a].contacter?t[a].contacter.value:"",contacter:t[a].contacter||{}}}}else for(var r=0;r<t.length;r++){var i=t[r].stage_type;this.form[i]={stageId:t[r].stage_id,stageType:t[r].stage_type,isOpen:t[r].is_open,dateType:t[r].date_type,fixedDateType1:"",fixedDateType2:"5",fixedDate1:"",fixedDate2:"",user:"",contacter:{}}}},changeDate:function(e){"1"===this.form[e].dateType?(this.form[e].fixedDateType2="",this.form[e].fixedDate2=""):(this.form[e].fixedDateType1="",this.form[e].fixedDate1="",this.form[e].fixedDateType2="5")},changeFixDate:function(e){this.form[e].fixedDate1=""},getParamsInfo:function(){var e={process_name:this.form.name},t=[];for(var a in this.form)if("name"!==a){var o={stage_id:this.form[a].stageId,stage_type:this.form[a].stageType,is_open:this.form[a].isOpen,contacter:this.form[a].user||0};if("1"===this.form[a].isOpen){if("1"===this.form[a].dateType){if(!this.form[a].fixedDateType1||!this.form[a].fixedDate1)return this.$message.error("必填字段填写完整，否则无法保存"),!1}else if(!("2"!==this.form[a].dateType||this.form[a].fixedDateType2&&this.form[a].fixedDate2))return this.$message.error("必填字段填写完整，否则无法保存"),!1;o.date_type=this.form[a].dateType,o.fixed_date_type="1"===this.form[a].dateType?this.form[a].fixedDateType1:this.form[a].fixedDateType2,o.fixed_date="1"===this.form[a].dateType?this.form[a].fixedDate1:this.form[a].fixedDate2}else o.date_type="",o.fixed_date_type="",o.fixed_date="";t.push(o)}return e.data_list=t,e},save:function(){var e=this;this.$refs.form.validate(function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(a){var o,r,n,s,d,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=27;break}if(o=e.getParamsInfo()){t.next=4;break}return t.abrupt("return",!1);case 4:if(e.flag){t.next=6;break}return t.abrupt("return");case 6:if(e.flag=!1,t.prev=7,!e.id){t.next=15;break}return o.id=e.id,t.next=12,i.default.editFundsBack(o);case 12:r=t.sent,t.next=18;break;case 15:return t.next=17,i.default.addFundsBack(o);case 17:r=t.sent;case 18:n=r.data,s=n.code,d=n.msg,l=n.data,0===s?(e.$message({message:"保存成功",type:"success"}),e.flag=!0,e.$router.push({path:"/fundsBack/fundsConfigInfo",query:{id:l.id}})):(e.$message.error(d),e.flag=!0),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(7),e.flag=!0;case 25:t.next=30;break;case 27:return console.log("error submit!!"),e.flag=!0,t.abrupt("return",!1);case 30:case"end":return t.stop()}}),t,null,[[7,22]])})));return function(e){return t.apply(this,arguments)}}())}},mounted:function(){this.initData()}};t.default=s}}]);