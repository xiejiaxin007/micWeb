(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-21506d70"],{"0248":function(e,t,a){(t=a("24fb")(!1)).push([e.i,"[data-v-5e96018b] .el-table th.gutter{display:table-cell!important}.a-link[data-v-5e96018b]{color:#409eff}.collection-history-list[data-v-5e96018b]{padding:0 30px}.bread-nav[data-v-5e96018b]{padding:20px 0}.contract-form[data-v-5e96018b]{background-color:#fff;padding:20px 0 10px}.contract-form[data-v-5e96018b] .el-input{width:200px}.contract-form .form-item-center[data-v-5e96018b]{display:block;text-align:center}.contract-form[data-v-5e96018b] .el-range-input{background-color:#fff}.table-wrap-new[data-v-5e96018b]{margin-top:10px}.table-tools[data-v-5e96018b]{padding:10px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pagination[data-v-5e96018b]{margin:20px auto}",""]),e.exports=t},"07ac":function(e,t,a){var r=a("23e7"),n=a("6f53").values;r({target:"Object",stat:!0},{values:function(e){return n(e)}})},"09f0":function(e,t,a){"use strict";a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}return a}},"0d21":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return e}},"11c7":function(e,t,a){"use strict";a.r(t);var r=a("6d51"),n=a.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t.default=n.a},"13d5":function(e,t,a){"use strict";var r=a("23e7"),n=a("d58f").left,o=a("a640"),i=a("ae40"),l=a("2d00"),c=a("605d"),s=o("reduce"),u=i("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u||!c&&l>79&&l<83},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1906:function(e,t,a){"use strict";var r=a("4ea4");a("99af"),a("a15b"),a("dca8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("5530"));a("96cf");var o=r(a("1da1")),i=r(a("f946")),l=r(a("e21a")),c=r(a("64b6")),s=r(a("eb6d")),u=r(a("4328")),d=a("1a74"),f=a("2af9"),p={name:"CooperateHistoryList",components:{ExportDialog:s.default,SearchSelectRadio:f.SearchSelectRadio,TablePagination:f.TablePagination},data:function(){return{contractForm:{monthRange:[],cityId:"",belongBD:"",belongResident:"",cooperateType:""},cooperateTypeOps:[],pages:{curPage:1,total:0},canExportStatus:!1,tableLoading:!1,tableList:[],cityList:[],showExport:!1,approveDialog:{cityVal:[],rangeVal:[],cityOps:[],dataRangeOps:[]}}},created:function(){this.oBelongResident={api:i.default.getStaffList,params:{q:"",status:0,role:"all"}}},mounted:function(){this.getInitInfo(),this.getCityListInfo()},methods:{dateChange:d.dateChange,getDataByOptions:d.getDataByOptions,confirmExport:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var r,n,o,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=e.cityId,n=e.dataRange,o={city_id:r.join(","),business_datetime:n.join(",")},"/backend-api/expand/ex-payment-record/export",i="".concat("/backend-api/expand/ex-payment-record/export","?").concat(u.default.stringify(o)),t.showExport=!1,t.clearExportDlg(),location.href=i;case 7:case"end":return a.stop()}}),a)})))()},getInitInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,r,o,i,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.default.getExPaymentRecordInit();case 3:a=t.sent,r=a.data,o=r.code,i=r.data,l=r.msg,0===o?(e.backupInitData=(0,n.default)({},i),e.cooperateTypeOps=Object.freeze(i.cooperate_type),e.approveDialog.cityOps=Object.freeze(i.city_list),e.approveDialog.cityVal=i.city_id,e.approveDialog.dataRangeOps=Object.freeze(i.month),e.approveDialog.rangeVal=i.business_datetime,e.canExportStatus=1==i.is_export):e.$message.error(l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},resetExportDlg:function(){var e=this.backupInitData;this.approveDialog.cityVal=e.city_id,this.approveDialog.rangeVal=e.business_datetime},clearExportDlg:function(){this.approveDialog.cityVal=[],this.approveDialog.rangeVal=[]},getCityListInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,r,n,o,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={type:2,param:"withAll"},t.next=4,l.default.getCityList(a);case 4:r=t.sent,n=r.data,o=n.code,i=n.data,c=n.msg,0===o?e.cityList=Object.freeze(i):e.$message.error(c),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},getContractTableInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,r,n,o,i,l,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.tableLoading=!0,a=e.contractForm,r=e.pages,n={page:r.curPage,city_id:a.cityId,time_min:a.monthRange[0],time_max:a.monthRange[1],expand:a.belongBD,resident:a.belongResident,cooperate_type:a.cooperateType},t.next=6,c.default.getExPaymentRecordList(n);case 6:o=t.sent,i=o.data,l=i.code,s=i.data,u=i.msg,e.tableLoading=!1,0===l?(e.tableList=s.list,e.pages.total=+s.count):e.$message.error(u),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),e.tableLoading=!1,console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},pageChange:function(e){this.pages.curPage=e,this.getContractTableInfo()},resetForm:function(){this.$refs.contractForm.resetFields(),this.tableList=[],this.pages.total=0,this.pages.curPage=1},exportExcel:function(){this.resetExportDlg(),this.showExport=!0}}};t.default=p},"1a74":function(e,t,a){"use strict";var r=a("4ea4");a("13d5"),a("07ac"),Object.defineProperty(t,"__esModule",{value:!0}),t.curPageTotal=t.getDataByOptions=t.dateChange=void 0;var n=r(a("3835"));t.dateChange=function(e,t){var a=this;if(e){var r=+t-1,o=(0,n.default)(e,2),i=o[0],l=o[1],c=new Date(i).getMonth()+r;new Date(+new Date(i)).setMonth(c)<+new Date(l)&&(this.$message.warning("所选最大范围不得超过".concat(t,"个月")),this.contractForm.monthRange=[])}else setTimeout((function(){a.contractForm.monthRange=["",""]}))};t.getDataByOptions=function(e){this.pages.curPage=1;var t=Object.values(this.contractForm).reduce((function(e,t){return e+t.length}),0);0!==t?2===t&&this.contractForm.monthRange.length>0?this.$message.error("不能只筛选记录月份"):e():this.$message.error("筛选项不能为空")};t.curPageTotal=function(){return Math.ceil(this.pages.total/20)>this.pages.curPage?20:this.pages.total%20}},3835:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e)||(0,n.default)(e,t)||(0,o.default)(e,t)||(0,i.default)()};var r=l(a("0d21")),n=l(a("09f0")),o=l(a("06c5")),i=l(a("3d8c"));function l(e){return e&&e.__esModule?e:{default:e}}},"3d8c":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},"4e9a":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".el-select[data-v-5d4b4e59]{width:600px}",""]),e.exports=t},"64b6":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("23f7"),n={getExPaymentRecordInit:function(){return r.axios.get("/backend-api/expand/ex-payment-record/init")},getExPaymentRecordList:function(e){return r.axios.get("/backend-api/expand/ex-payment-record/index",{params:e})}};t.default=n},6579:function(e,t,a){"use strict";a.r(t);var r=a("1906"),n=a.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t.default=n.a},"6d51":function(e,t,a){"use strict";var r=a("4ea4");a("dca8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("5530"));a("96cf");var o=r(a("1da1")),i={name:"ExportDialog",inheritAttrs:!1,props:{title:{type:String,default:"提示"},cityVal:{type:Array,default:function(){return[]}},rangeVal:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},cityOps:{type:Array,default:function(){return[]}},dataRangeOps:{type:Array,default:function(){return[]}}},data:function(){return{forms:{cityId:[],dataDimension:1,dataRange:[]},dataDimensionOps:Object.freeze([{value:1,name:"月份"},{value:2,name:"季度"}]),dialogVisble:this.visible,rules:{cityId:[{required:!0,message:"请选择楼盘城市",trigger:"change"}],dataRange:[{type:"array",required:!0,message:"请选择数据范围",trigger:"change"}]}}},watch:{visible:function(e){this.dialogVisble=e},cityVal:function(e){this.forms.cityId=e},rangeVal:function(e){this.forms.dataRange=e}},methods:{confirm:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.signForm.validate();case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:e.$emit("confirmExport",(0,n.default)({},e.forms)),setTimeout((function(){e.forms.dataDimension=1})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.dialogVisble=!1,this.forms.dataDimension=1,this.$emit("cancelExport"),this.$emit("update:visible",!1),this.$emit("changeDimension",1)}}};t.default=i},"6f53":function(e,t,a){var r=a("83ab"),n=a("df75"),o=a("fc6a"),i=a("d1e7").f,l=function(e){return function(t){for(var a,l=o(t),c=n(l),s=c.length,u=0,d=[];s>u;)a=c[u++],r&&!i.call(l,a)||d.push(e?[a,l[a]]:l[a]);return d}};e.exports={entries:l(!0),values:l(!1)}},"8cae":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"collection-history-list"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",[e._v("成交单回款历史记录")])],1),a("el-form",{ref:"contractForm",staticClass:"contract-form",attrs:{model:e.contractForm,size:"small","label-width":"114px",inline:!0}},[a("el-form-item",{attrs:{prop:"monthRange",label:"记录月份："}},[a("el-date-picker",{attrs:{type:"monthrange","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份","value-format":"yyyy-MM"},on:{change:function(t){return e.dateChange(t,3)}},model:{value:e.contractForm.monthRange,callback:function(t){e.$set(e.contractForm,"monthRange",t)},expression:"contractForm.monthRange"}})],1),a("el-form-item",{attrs:{prop:"cityId",label:"地理城市："}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.contractForm.cityId,callback:function(t){e.$set(e.contractForm,"cityId",t)},expression:"contractForm.cityId"}},e._l(e.cityList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),a("el-form-item",{attrs:{prop:"belongBD",label:"所属拓展："}},[a("search-select-radio",{attrs:{clearable:"",placeholder:"请选择",apiInfo:e.oBelongResident},model:{value:e.contractForm.belongBD,callback:function(t){e.$set(e.contractForm,"belongBD",t)},expression:"contractForm.belongBD"}})],1),a("el-form-item",{attrs:{prop:"belongResident",label:"所属驻场："}},[a("search-select-radio",{attrs:{clearable:"",placeholder:"请选择",apiInfo:e.oBelongResident},model:{value:e.contractForm.belongResident,callback:function(t){e.$set(e.contractForm,"belongResident",t)},expression:"contractForm.belongResident"}})],1),a("el-form-item",{attrs:{prop:"cooperateType",label:"合作方式："}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.contractForm.cooperateType,callback:function(t){e.$set(e.contractForm,"cooperateType",t)},expression:"contractForm.cooperateType"}},e._l(e.cooperateTypeOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"form-item-center"},[a("el-button",{on:{click:e.resetForm}},[e._v(" 重置 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getDataByOptions(e.getContractTableInfo)}}},[e._v(" 搜索 ")])],1)],1),a("div",{staticClass:"table-wrap-new"},[a("table-pagination",{attrs:{total:e.pages.total,page:e.pages.curPage},on:{pageChange:e.pageChange},scopedSlots:e._u([{key:"btns",fn:function(){return[e.canExportStatus?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportExcel}},[e._v(" 导出长账龄数据 ")]):e._e()]},proxy:!0},{key:"table",fn:function(){return[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"contractTable",attrs:{border:"",data:e.tableList,size:"small","highlight-current-row":!0,"header-cell-style":{backgroundColor:"#f9f9f9",color:"#333"}}},[a("el-table-column",{attrs:{prop:"create_datetime",label:"记录日期",align:"center"}}),a("el-table-column",{attrs:{prop:"city_name",label:"地理城市",align:"center"}}),a("el-table-column",{attrs:{prop:"deal_id",label:"成交ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("a",{staticClass:"a-link",attrs:{href:r.deal_url}},[e._v(e._s(r.deal_id))])]}}])}),a("el-table-column",{attrs:{prop:"sign_datetime",label:"网签日期",align:"center"}}),a("el-table-column",{attrs:{prop:"contract_id",label:"合同ID","class-name":"more-info-td",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("a",{staticClass:"a-link",attrs:{href:r.contract_url}},[e._v(e._s(r.contract_id))])]}}])}),a("el-table-column",{attrs:{label:"合作方式",prop:"cooperate_type",align:"center"}}),a("el-table-column",{attrs:{prop:"direct_sign_type",label:"直签类型",align:"center"}}),a("el-table-column",{attrs:{prop:"expand",label:"所属拓展",align:"center"}}),a("el-table-column",{attrs:{prop:"resident",label:"所属驻场",align:"center"}}),a("el-table-column",{attrs:{prop:"forecast_payment_total",label:"合同预测总金额",align:"center"}}),a("el-table-column",{attrs:{prop:"reviewed_actual_money",label:"已回款金额",align:"center"}}),a("el-table-column",{attrs:{prop:"no_payment_money",label:"未回款金额",align:"center"}})],1)]},proxy:!0}])})],1),a("export-dialog",{attrs:{title:"导出长账龄数据",visible:e.showExport,"data-range-ops":e.approveDialog.dataRangeOps,"range-val":e.approveDialog.rangeVal,"city-val":e.approveDialog.cityVal,"city-ops":e.approveDialog.cityOps},on:{"update:visible":function(t){e.showExport=t},confirmExport:e.confirmExport,cancelExport:e.clearExportDlg}})],1)},n=[]},"9c08":function(e,t,a){"use strict";a.r(t);var r=a("8cae"),n=a("6579");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("c657");var i=a("2877"),l=Object(i.a)(n.default,r.a,r.b,!1,null,"5e96018b",null);t.default=l.exports},a15b:function(e,t,a){"use strict";var r=a("23e7"),n=a("44ad"),o=a("fc6a"),i=a("a640"),l=[].join,c=n!=Object,s=i("join",",");r({target:"Array",proto:!0,forced:c||!s},{join:function(e){return l.call(o(this),void 0===e?",":e)}})},aa1a:function(e,t,a){"use strict";a("fe3c")},b553:function(e,t,a){var r=a("0248");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("089b8648",r,!0,{sourceMap:!1,shadowMode:!1})},bb2f:function(e,t,a){var r=a("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c657:function(e,t,a){"use strict";a("b553")},d693:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"export-dialog-wrap"},[a("el-dialog",{attrs:{visible:e.dialogVisble,"close-on-click-modal":!1,width:"800px",title:e.title,center:""},on:{"update:visible":function(t){e.dialogVisble=t},close:e.cancel}},[a("el-form",{ref:"signForm",attrs:{model:e.forms,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{prop:"cityId",label:"楼盘城市："}},[a("el-select",{attrs:{clearable:"",multiple:"",filterable:""},model:{value:e.forms.cityId,callback:function(t){e.$set(e.forms,"cityId",t)},expression:"forms.cityId"}},e._l(e.cityOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),void 0!==e.$attrs.hasDimension?a("el-form-item",{attrs:{prop:"dataDimension",label:"数据维度："}},[a("el-radio-group",{on:{change:function(t){return e.$emit("changeDimension",t)}},model:{value:e.forms.dataDimension,callback:function(t){e.$set(e.forms,"dataDimension",t)},expression:"forms.dataDimension"}},e._l(e.dataDimensionOps,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1):e._e(),a("el-form-item",{attrs:{prop:"dataRange",label:"数据范围："}},[a("el-select",{attrs:{clearable:"",filterable:"",multiple:""},model:{value:e.forms.dataRange,callback:function(t){e.$set(e.forms,"dataRange",t)},expression:"forms.dataRange"}},e._l(e.dataRangeOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)],1)],1)},n=[]},dca8:function(e,t,a){var r=a("23e7"),n=a("bb2f"),o=a("d039"),i=a("861d"),l=a("f183").onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){c(1)})),sham:!n},{freeze:function(e){return c&&i(e)?c(l(e)):e}})},e21a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("23f7"),n={getProjectAndType:function(e){return r.axios.get("/backend-api/common/get-project-and-type",{params:e})},getSupplierList:function(e){return r.axios.get("/backend-api/common/get-supplier",{params:e})},getCityList:function(e){return r.axios.get("/backend-api/select2/bank/get-city-dropdown-list",{params:e})}};t.default=n},eb6d:function(e,t,a){"use strict";a.r(t);var r=a("d693"),n=a("11c7");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("aa1a");var i=a("2877"),l=Object(i.a)(n.default,r.a,r.b,!1,null,"5d4b4e59",null);t.default=l.exports},f183:function(e,t,a){var r=a("d012"),n=a("861d"),o=a("5135"),i=a("9bf2").f,l=a("90e3"),c=a("bb2f"),s=l("meta"),u=0,d=Object.isExtensible||function(){return!0},f=function(e){i(e,s,{value:{objectID:"O"+ ++u,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,s)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[s].objectID},getWeakData:function(e,t){if(!o(e,s)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[s].weakData},onFreeze:function(e){return c&&p.REQUIRED&&d(e)&&!o(e,s)&&f(e),e}};r[s]=!0},fe3c:function(e,t,a){var r=a("4e9a");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("37a99518",r,!0,{sourceMap:!1,shadowMode:!1})}}]);