(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7120380f"],{"06f5":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"address-list-cantainer"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",[r("a",{attrs:{href:"/"}},[t._v("首页")])]),r("el-breadcrumb-item",[t._v("微信好友管理")])],1),r("div",{staticClass:"address-list-main"},[r("div",{staticClass:"address-list-info"},[r("consultant-info",{attrs:{dataObj:t.consultantInfoData}}),r("div",{staticClass:"rank-list"},[r("rank-list",{attrs:{dataObj:t.rankListData},on:{objTitle:t.objTitleFn}})],1),r("friend-group",{attrs:{dataObj:t.groupData},on:{objTitle:t.objTitleFn}})],1),r("div",{staticClass:"address-list"},[r("div",{staticClass:"address-list-title"},[r("span",{staticClass:"address-group-name"},[t._v(t._s(t.titleObj.label)+"（"+t._s(t.titleObj.num)+"个）")]),r("span",{staticClass:"address-title-tips"},[t._v("所有的客户都需要绑定订单，请点击「绑定到订单」将客户绑定到订单中，任务未完成系统会一直提示哦~")])]),r("div",{staticClass:"friend-list-table"},[r("div",{staticClass:"bound-button"},[r("el-button",{attrs:{disabled:t.hasOrder,type:"primary"},on:{click:function(e){return t.batchSaveOrder()}}},[t._v("一键绑定")]),r("span",[t._v("批量提交已绑定的订单")])],1)]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"bound-list"},[r("ul",t._l(t.tableData,(function(e,i){return r("li",{key:i},[r("div",{staticClass:"bound-user-info"},[r("div",{staticClass:"bound-user-avatar"},[e.avatar?r("img",{attrs:{src:e.avatar,alt:"微信头像"}}):r("img",{attrs:{src:a("36ad"),alt:"微信头像"}})]),r("div",{staticClass:"bound-user-identi"},[r("div",{staticClass:"bound-user-name"},[t._v(t._s(e.nickname))]),"header"===t.role?r("div",{staticClass:"bound-user-account"},[t._v(t._s(e.wx_num))]):t._e()])]),"header"===t.role?r("div",{staticClass:"bound-order-info"},[r("span",[t._v("选择绑定订单")]),r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"搜索客户姓名、手机、订单",clearable:!0,"remote-method":function(a){return t.remoteOrderMethod(a,e,i)},loading:t.orderLoading},on:{change:function(a){return t.selectOrder(e.orderId,e,i)},clear:function(e){return t.clearOrder(i)}},model:{value:e.orderId,callback:function(a){t.$set(e,"orderId",a)},expression:"item.orderId"}},t._l(e.orderOption,(function(t,e){return r("el-option",{key:e,attrs:{label:t.text,value:t.id}})})),1),r("i",{staticClass:"icon-caret-bottom",attrs:{"aria-hidden":"true"}})],1):t._e()])})),0)]),r("div",{staticClass:"page-pagination"},[t.total>20?r("el-pagination",{attrs:{"page-size":20,background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.pageChangeFn}}):t._e()],1)])])],1)},i=[]},2843:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a("23f7"),i={bindTodoList:function(t){return r.axios.post("/backend-api/we-chat-manage/bind-todo",t)},batchBindPromise:function(t){return r.axios.post("/backend-api/order-common-api/batch-bind-order",t)}};e.default=i},"2f9a5":function(t,e,a){"use strict";a("f412")},"5ccf":function(t,e,a){(e=a("24fb")(!1)).push([t.i,'[data-v-7ffbe311] .el-input__suffix{right:20px}.address-list-cantainer .el-breadcrumb[data-v-7ffbe311]{margin-top:20px;margin-bottom:10px;color:#354052}.address-list-cantainer .rank-list[data-v-7ffbe311]{margin-top:10px;margin-bottom:10px}.address-list-cantainer .address-list-main[data-v-7ffbe311]{display:-webkit-box;display:-ms-flexbox;display:flex}.address-list-cantainer .address-list-main .address-list[data-v-7ffbe311]{-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:20px;background:#fff;padding:20px}.address-list-cantainer .address-list-main .address-list .address-list-title[data-v-7ffbe311]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;border-bottom:1px solid #ddd}.address-list-cantainer .address-list-main .address-list .address-list-title .address-group-name[data-v-7ffbe311]{position:relative;font-size:16px;padding:10px 0;font-weight:700;color:#333}.address-list-cantainer .address-list-main .address-list .address-list-title .address-group-name[data-v-7ffbe311]:before{content:"";position:absolute;bottom:-1px;left:0;display:block;width:100%;height:2px;background:#a9a9a9}.address-list-cantainer .address-list-main .address-list .address-list-title .address-title-tips[data-v-7ffbe311]{font-size:14px;margin-left:10px;color:#a9bacf}.address-list-cantainer .address-list-main .address-list .friend-list-table .bound-button[data-v-7ffbe311]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:32px}.address-list-cantainer .address-list-main .address-list .friend-list-table .bound-button button[data-v-7ffbe311]{width:98px;height:32px;font-size:14px;padding-top:0;padding-bottom:0;line-height:30px}.address-list-cantainer .address-list-main .address-list .friend-list-table .bound-button>span[data-v-7ffbe311]{margin-left:20px;font-size:14px;color:#a9bacf}.address-list-cantainer .address-list-main .bound-list li[data-v-7ffbe311]{margin-bottom:20px;display:-webkit-box;display:-ms-flexbox;display:flex}.address-list-cantainer .address-list-main .bound-user-info[data-v-7ffbe311]{width:348px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:50px}.address-list-cantainer .address-list-main .bound-user-info .bound-user-avatar[data-v-7ffbe311]{width:50px;height:50px;margin-right:10px}.address-list-cantainer .address-list-main .bound-user-info .bound-user-avatar img[data-v-7ffbe311]{border-radius:4px;width:100%}.address-list-cantainer .address-list-main .bound-user-info .bound-user-identi .bound-user-name[data-v-7ffbe311]{font-size:16px;font-weight:700;color:#333}.address-list-cantainer .address-list-main .bound-user-info .bound-user-identi .bound-user-account[data-v-7ffbe311]{font-size:16px;color:#333}.address-list-cantainer .address-list-main .bound-order-info[data-v-7ffbe311]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative}.address-list-cantainer .address-list-main .bound-order-info>span[data-v-7ffbe311]{font-size:14px;line-height:24px;margin-right:10px;color:#666}.address-list-cantainer .address-list-main .bound-order-info .el-select[data-v-7ffbe311]{width:300px}.address-list-cantainer .address-list-main .bound-order-info .icon-caret-bottom[data-v-7ffbe311]{font-size:12px;position:absolute;right:10px}.address-list-cantainer .address-list-main .page-pagination[data-v-7ffbe311]{margin-top:20px;padding-top:30px;text-align:center;border-top:1px solid #f4f6f9}[data-v-7ffbe311] .el-pagination.is-background .el-pager li:not(.disabled).active{background:#2e9ae2}.el-table--border th[data-v-7ffbe311]{background:#f4f6f9}',""]),t.exports=e},"6bf2":function(t,e,a){"use strict";var r=a("4ea4");a("4de4"),a("a15b"),a("a434"),a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a("5530"));a("96cf");var n=r(a("1da1")),s=a("2f62"),d=r(a("1e6a")),o=r(a("2843")),l=r(a("0130")),c=r(a("9026")),u=r(a("d34b")),f={name:"AddressBookList",data:function(){return{titleObj:{},tableData:[],currentPage:1,total:0,consultantInfoData:{},rankListData:{},groupData:[],hasOrder:!0,boundOrderList:[],listLoading:!1,orderLoading:!1}},mounted:function(){this.getWechatInfo(),this.getBoundList()},methods:{objTitleFn:function(t){this.titleObj=t},getWechatInfo:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={employee_id:t.uid},e.next=4,d.default.getWechatInfo(a);case 4:0===(r=e.sent).data.code&&(t.consultantInfoData=r.data.data.info||{},t.rankListData=r.data.data.task||{},t.groupData=r.data.data.friend||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getBoundList:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.listLoading=!t.listLoading,e.prev=1,a={employee_id:t.uid,page:t.currentPage},e.next=5,o.default.bindTodoList(a);case 5:0===(r=e.sent).data.code?(t.listLoading=!t.listLoading,t.tableData=r.data.data.list,t.total=Number(r.data.data.total)):(t.listLoading=!t.listLoading,t.$message.error(r.data.msg)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t.listLoading=!t.listLoading,console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},pageChangeFn:function(t){this.currentPage=t,this.getBoundList()},remoteOrderMethod:function(t,e,a){var r=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.orderLoading=!r.orderLoading,a.prev=1,i={search_value:t},a.next=5,d.default.getOrderSearch(i);case 5:0===(n=a.sent).data.code?(r.orderLoading=!r.orderLoading,r.$set(e,"orderOption",n.data.data)):r.orderLoading=!r.orderLoading,a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),r.orderLoading=!r.orderLoading,console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},selectOrder:function(t,e,a){var r={order_id:e.orderId,wx_id:e.wx_id,group_id:e.group_id};this.boundOrderList[a]=r,this.boundOrderList.length&&(this.hasOrder=!1)},clearOrder:function(t){this.boundOrderList.splice(t,1),0==this.boundOrderList.filter((function(t){return t})).length&&(this.hasOrder=!0)},batchSaveOrder:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.listLoading=!t.listLoading,t.boundOrderList=t.boundOrderList.filter((function(t){return t})),e.prev=2,a={employee_id:t.uid,order_data:t.boundOrderList},e.next=6,o.default.batchBindPromise(a);case 6:0===(r=e.sent).data.code?(r.data.data.list.error_data&&r.data.data.list.error_data.length?t.$message.error("".concat(r.data.data.list.error_data.join(","),"绑定失败！")):t.$message.success("绑定成功！"),t.getBoundList(),t.getWechatInfo(),t.boundOrderList=[],t.hasOrder=!0,t.listLoading=!t.listLoading):(t.listLoading=!t.listLoading,t.$message.error(r.data.msg)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),t.listLoading=!t.listLoading,console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))()}},components:{ConsultantInfo:l.default,FriendGroup:c.default,RankList:u.default},computed:(0,i.default)({},(0,s.mapState)({uid:function(t){return"header"===t.role?t.uid:localStorage.getItem("headerUid")},role:function(t){return t.role}})),watch:{uid:{handler:function(t,e){this.getWechatInfo(),this.getBoundList()},deep:!0}}};e.default=f},a15b:function(t,e,a){"use strict";var r=a("23e7"),i=a("44ad"),n=a("fc6a"),s=a("a640"),d=[].join,o=i!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:o||!l},{join:function(t){return d.call(n(this),void 0===t?",":t)}})},b94d:function(t,e,a){"use strict";a.r(e);var r=a("6bf2"),i=a.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);e.default=i.a},c0c2:function(t,e,a){"use strict";a.r(e);var r=a("06f5"),i=a("b94d");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("2f9a5");var s=a("2877"),d=Object(s.a)(i.default,r.a,r.b,!1,null,"7ffbe311",null);e.default=d.exports},f412:function(t,e,a){var r=a("5ccf");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a("499e").default)("2d9d2213",r,!0,{sourceMap:!1,shadowMode:!1})}}]);