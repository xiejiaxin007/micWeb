(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-748f5526"],{"0094":function(e,t,r){"use strict";r.r(t);var a=r("298b"),i=r.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t.default=i.a},"060a":function(e,t,r){"use strict";r.r(t);var a=r("2cda"),i=r.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t.default=i.a},"1f88c":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"file-upload-preview"},[r("jl-file-upload",e._b({ref:"fileUpload",staticClass:"upload-btn",attrs:{limit:e.limit,ossData:e.ossData},on:{beforeUpdate:e.beforeUpdate,getFileURL:e.getFileURL}},"jl-file-upload",e.$attrs,!1),[r("el-button",{attrs:{type:"primary",size:"small",disabled:e.limit<=0}},[e._v(" "+e._s(e.uploadText)+" ")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.limit<=0,expression:"limit<=0"}],staticClass:"btn-shade",on:{click:function(e){e.stopPropagation()}}})],1),e.$slots.fileNotice?e._e():r("span",{staticClass:"upload-tips"},[e._v("支持格式"+e._s(e.$attrs.fileType)+"，每个附件不超过"+e._s(parseInt(e.$attrs.fileMaxSize))+"M，不超过"+e._s(e.maxUpCount)+"个附件")]),e._t("fileNotice"),r("file-preview",{attrs:{"file-list":e.fileListPrev,"can-edit":""},on:{delFile:e.delFile}})],2)},i=[]},"22ef":function(e,t,r){"use strict";r("5c3d")},"24c9":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"file-list-view"},[r("div",{staticClass:"file-show-box"},[e.docFileArr.length>0?r("ul",{staticClass:"file-list"},e._l(e.docFileArr,(function(t,a){return r("li",{key:a},[r("a",{staticClass:"preview-file",attrs:{href:e.OSSView+t.file_url,target:"_blank",rel:"noopener noreferrer"}},[r("span",[e._v(e._s(t.file_name))])]),e.canEdit?r("el-button",{staticClass:"color-error",attrs:{type:"text"},on:{click:function(t){return e.delFile("file",a)}}},[e._v("删除")]):e._e()],1)})),0):e._e(),e.imgFileArr.length>0?r("ul",{staticClass:"img-list clearfix"},e._l(e.imgFileArr,(function(t,a){return r("li",{key:a},[r("div",{staticClass:"img-item-box"},[r("img",{attrs:{src:t.file_url,alt:"图片凭证"},on:{click:function(t){return e.showPreview(a)}}})]),e.canEdit?r("i",{staticClass:"ico-close el-icon-error",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.delFile("img",a)}}}):e._e()])})),0):e._e()]),e.photoIsShow?r("jl-image-preview",{attrs:{showViewer:e.photoIsShow,urlList:e.previewUrl,currentIndex:e.curIndex},on:{closeViewer:e.closeViewer}}):e._e()],1)},i=[]},2847:function(e,t,r){"use strict";r.r(t);var a=r("24c9"),i=r("52c7");for(var n in i)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(n);r("b17c");var o=r("2877"),l=Object(o.a)(i.default,a.a,a.b,!1,null,"5120f874",null);t.default=l.exports},"298b":function(e,t,r){"use strict";var a=r("4ea4");r("d81d"),r("dca8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("96cf");var i=a(r("1da1")),n=a(r("f318")),o=a(r("e21a")),l=a(r("f946")),s=a(r("f4ef")),c=a(r("beec")),u=r("2af9"),f={name:"ContractList",components:{ChangeEmployeeDialog:s.default,TurnSignDialog:c.default,SearchSelectRadio:u.SearchSelectRadio,TablePagination:u.TablePagination},data:function(){return{contractForm:{cityId:"",projectId:"",projectName:"",contractId:"",cooperater:"",cooperateType:"",signType:"",contractCreater:"",contractFollower:"",startTime:"",endTime:"",transferSignStatus:""},cityOps:[],cooperateTypeOps:[],signTypeOps:[],signStatusOps:[],pages:{curPage:1,pageSize:20,total:0},showEditFollowerStatus:!1,tableLoading:!1,tableList:[],hasSelection:[],employeeDialogVisible:!1,signDialogVisible:!1,contractId:""}},created:function(){this.getInitRemoteObj()},mounted:function(){this.getInitInfo(),this.getContractTableInfo()},methods:{getInitRemoteObj:function(){this.oFollower={api:l.default.getStaffList,params:{q:"",status:"1",role:"estate_expand"}},this.oProject={api:o.default.getProjectAndType,params:{q:"",city_id:0}},this.oCooperater={api:o.default.getSupplierList,params:{q:""}},this.oCreater={api:l.default.getStaffList,params:{q:"",status:0,role:"all"}},this.oContractFollower={api:l.default.getStaffList,params:{q:"",status:0,role:"all"}}},sortChange:function(e){var t=e.prop,r={ascending:"1",descending:"2",null:""}[e.order];this.getContractTableInfo({contract_begin_datetime:"1",contract_end_datetime:"2"}[t],r)},searchListInfo:function(){this.pages.curPage=1,this.getContractTableInfo()},turnToPage:function(e){this.$router.push({name:"ApproveDetail",query:{id:e}})},getInitInfo:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var r,a,i,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.default.getContractInit();case 3:r=t.sent,a=r.data,i=a.code,o=a.data,l=a.msg,0===i?(e.cityOps=Object.freeze(o.city),e.signTypeOps=Object.freeze(o.direct_sign_type),e.signStatusOps=Object.freeze(o.turn_direct_sign_status),e.cooperateTypeOps=Object.freeze(o.co_way),e.showEditFollowerStatus=1===o.can_edit_follow_employee):e.$message.error(l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getContractTableInfo:function(){var e=arguments,t=this;return(0,i.default)(regeneratorRuntime.mark((function r(){var a,i,o,l,s,c,u,f,d,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"",i=e.length>1&&void 0!==e[1]?e[1]:"",r.prev=2,t.tableLoading=!0,o=t.contractForm,l=t.pages,s={page:l.curPage,"per-page":l.pageSize,city_id:o.cityId,project_id:o.projectId,project_id_by_name:o.projectName,id:o.contractId,partner_id:o.cooperater,cooperate_type:o.cooperateType,direct_sign_type:o.signType,creator:o.contractCreater,follow_employee_id:o.contractFollower,contract_begin_datetime:o.startTime,contract_end_datetime:o.endTime,turn_direct_sign_status:o.transferSignStatus,order_field:a,order:i},r.next=8,n.default.getContractList(s);case 8:c=r.sent,u=c.data,f=u.code,d=u.data,p=u.msg,t.tableLoading=!1,0===f?(t.tableList=d.list,t.pages.total=d.total):t.$message.error(p),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(2),t.tableLoading=!1,console.log(r.t0);case 21:case"end":return r.stop()}}),r,null,[[2,17]])})))()},selectChange:function(e){this.hasSelection=e},editContractFollower:function(){0!==this.hasSelection.length?this.employeeDialogVisible=!0:this.$message.warning("请选择合同")},handleChangeFollower:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function r(){var a,i,o,l,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!t.hasReq){r.next=3;break}return r.abrupt("return");case 3:return t.hasReq=!0,a={employee_id:e.user,id:t.hasSelection.map((function(e){return e.id}))},r.next=7,n.default.updateFollowEmployeeInfo(a);case 7:i=r.sent,o=i.data,l=o.code,s=o.msg,t.hasReq=!1,0===l?(t.$message.success("操作成功"),t.getContractTableInfo(),t.employeeDialogVisible=!1):t.$message.error(s),r.next=19;break;case 15:r.prev=15,r.t0=r.catch(0),t.hasReq=!1,console.log(r.t0);case 19:case"end":return r.stop()}}),r,null,[[0,15]])})))()},applyTurnSign:function(e){this.signDialogVisible=!0,this.contractId=e},pageChange:function(e){this.pages.curPage=e,this.getContractTableInfo()},resetForm:function(){this.pages.curPage=1,this.$refs.contractForm.resetFields(),this.pages.curPage=1,this.getContractTableInfo()},turnSignConfirm:function(){this.signDialogVisible=!1,this.getContractTableInfo()}}};t.default=f},"2ca0":function(e,t,r){"use strict";var a,i=r("23e7"),n=r("06cf").f,o=r("50c4"),l=r("5a34"),s=r("1d80"),c=r("ab13"),u=r("c430"),f="".startsWith,d=Math.min,p=c("startsWith");i({target:"String",proto:!0,forced:!!(u||p||(a=n(String.prototype,"startsWith"),!a||a.writable))&&!p},{startsWith:function(e){var t=String(s(this));l(e);var r=o(d(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return f?f.call(t,a,r):t.slice(r,r+a.length)===a}})},"2cda":function(e,t,r){"use strict";var a=r("4ea4");r("7db0"),r("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("96cf");var i=a(r("1da1")),n=a(r("ae99")),o=a(r("f318")),l={name:"TrunSignDialog",components:{FileUploadPreview:n.default},props:{visible:{type:Boolean,default:!1},id:{type:[String,Number],default:""}},data:function(){return{signForm:{signType:"",reason:"",files:""},dialogVisble:this.visible,rules:{signType:[{required:!0,message:"请选择直签类型",trigger:"change"}],reason:[{required:!0,message:"请填写申请理由",trigger:"change"}],files:[{required:!0,message:"请上传证明材料",trigger:"change"}]},signTypeList:[],fileList:[]}},computed:{signNotice:function(){var e=this,t=this.signTypeList.find((function(t){return t.value===e.signForm.signType}))||"";return t&&t.tip_text}},watch:{visible:function(e){this.dialogVisble=e,this.getTurnSignInit()}},methods:{confirm:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.signForm.validate();case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:e.saveTurnSignInfo(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},cancel:function(){this.clearData(),this.$emit("update:visible",!1),this.$emit("cancle")},fileChange:function(e){var t=e.length;this.signForm.files=0===t?"":e,this.$refs.signForm.validateField("files")},getTurnSignInit:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var r,a,i,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.default.getApplyTurnSignInitInfo({id:e.id});case 3:r=t.sent,a=r.data,i=a.code,n=a.data,l=a.msg,0===i?(e.signTypeList=n.direct_sign_type,e.signForm.reason=n.apply_reason,e.reasonBack=n.apply_reason,e.fileList=n.file_list,e.signForm.files=n.file_list):e.$message.error(l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},saveTurnSignInfo:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var r,a,i,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.hasReq){t.next=3;break}return t.abrupt("return");case 3:return e.hasReq=!0,r={contract_id:e.id,direct_sign_type:e.signForm.signType,file_list:e.signForm.files||[],apply_reason:e.signForm.reason},t.next=7,o.default.saveApplyTurnSign(r);case 7:a=t.sent,i=a.data,n=i.code,l=i.msg,e.hasReq=!1,0===n?(e.$message.success("操作成功"),e.$emit("confirm")):e.$message.error(l),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),e.hasReq=!1,console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},clearData:function(){this.$refs.signForm.resetFields(),this.fileList=[],this.signForm.reason=this.reasonBack}}};t.default=l},"45fc":function(e,t,r){"use strict";var a=r("23e7"),i=r("b727").some,n=r("a640"),o=r("ae40"),l=n("some"),s=o("some");a({target:"Array",proto:!0,forced:!l||!s},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"52c7":function(e,t,r){"use strict";r.r(t);var a=r("b6c0"),i=r.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t.default=i.a},"5a34":function(e,t,r){var a=r("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5c3d":function(e,t,r){var a=r("85a7");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("1d9f3aa6",a,!0,{sourceMap:!1,shadowMode:!1})},"646f":function(e,t,r){"use strict";r.r(t);var a=r("731d"),i=r.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t.default=i.a},"6d6d":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisble,"close-on-click-modal":!1,width:"600px",center:""},on:{"update:visible":function(t){e.dialogVisble=t},close:e.cancel}},[r("el-form",{ref:"auditForm",attrs:{model:e.forms,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"user",label:e.label,rules:[{required:!0,message:"请选择"+e.label,trigger:"change"}]}},[r("search-select-radio",e._b({attrs:{clearable:"",placeholder:"请选择"},model:{value:e.forms.user,callback:function(t){e.$set(e.forms,"user",t)},expression:"forms.user"}},"search-select-radio",e.$attrs,!1))],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)],1)},i=[]},"6ed4":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"turn-sign-wrap"},[r("el-dialog",{attrs:{title:"申请转直签",visible:e.dialogVisble,"close-on-click-modal":!1,width:"800px","show-close":!1,center:""},on:{"update:visible":function(t){e.dialogVisble=t},close:e.cancel}},[r("el-form",{ref:"signForm",attrs:{model:e.signForm,"label-width":"100px",rules:e.rules}},[r("el-form-item",{attrs:{prop:"signType",label:"直签类型："}},[[r("el-radio-group",{model:{value:e.signForm.signType,callback:function(t){e.$set(e.signForm,"signType",t)},expression:"signForm.signType"}},e._l(e.signTypeList,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1),r("div",{staticClass:"msg-notice",domProps:{innerHTML:e._s(e.signNotice)}})]],2),r("el-form-item",{attrs:{prop:"files",label:"证明材料："}},[r("file-upload-preview",{attrs:{fileMaxSize:"5mb",upID:"certifyFiles",isMulti:"",maxUpCount:10,fileType:"jpg,jpeg,png,pdf",fileList:e.fileList},on:{fileChange:e.fileChange}})],1),r("el-form-item",{attrs:{prop:"reason",label:"申请理由："}},[r("el-input",{attrs:{type:"textarea",maxlength:400,rows:4,placeholder:"不超过400字"},model:{value:e.signForm.reason,callback:function(t){e.$set(e.signForm,"reason",t)},expression:"signForm.reason"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)],1)],1)},i=[]},"731d":function(e,t,r){"use strict";var a=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("5530")),n={name:"ChangeEmployeeDialog",components:{SearchSelectRadio:r("2af9").SearchSelectRadio},inheritAttrs:!1,props:{title:{type:String,default:"提示"},visible:{type:Boolean,default:!1},label:{type:String,default:"请选择"}},data:function(){return{dialogVisble:this.visible,forms:{user:""}}},watch:{visible:function(e){this.dialogVisble=e}},methods:{cancel:function(){this.$refs.auditForm.resetFields(),this.$emit("close"),this.$emit("update:visible",!1)},confirm:function(){var e=this;this.$refs.auditForm.validate((function(t){t&&e.$emit("confirm",(0,i.default)({},e.forms))}))}}};t.default=n},7450:function(e,t,r){"use strict";var a=r("4ea4");r("99af"),r("4160"),r("baa5"),r("d81d"),r("45fc"),r("a434"),r("a9e3"),r("dca8"),r("2ca0"),r("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("96cf");var i=a(r("1da1")),n=a(r("2909")),o=a(r("5530")),l=r("f946"),s={name:"FileUploadPreview",components:{FilePreview:a(r("2847")).default},inheritAttrs:!1,props:{uploadText:{type:String,default:"上传附件"},maxUpCount:{type:Number,default:10},fileList:{type:Array,default:function(){return[]}},uploadUrl:{type:String,default:"followUp"}},data:function(){return{fileArr:[],ossData:{},limit:this.maxUpCount}},computed:{fileListPrev:function(){return this.fileArr.map((function(e){return(0,o.default)((0,o.default)({},e),{},{file_url:e.file_domain?"".concat(e.file_domain).concat(e.file_url.startsWith("/")?e.file_url:"/"+e.file_url):e.file_url_full})}))}},watch:{limit:function(){this.$emit("fileChange",this.fileArr)},fileList:function(e){this.fileArr=(0,n.default)(e),this.limit=this.maxUpCount,this.limit-=e.length}},mounted:function(){this.getSignCode()},methods:{getSignCode:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var r,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={cate:e.uploadUrl},t.prev=1,t.next=4,(0,l.getSign)(r);case 4:a=t.sent,0===(i=a.data).code&&(e.ossData=Object.freeze(i.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},beforeUpdate:function(){this.loading=this.$loading({lock:!0,text:"请求中，请稍后",spinner:"el-icon-loading",customClass:"loading-default-box",background:"rgba(255, 255, 255, 0.8)"})},getFileURL:function(e){var t=this;if(this.loading.close(),0!==e.length){e.forEach((function(e){var r=e.originName.substr(e.originName.lastIndexOf(".")+1).toLowerCase(),a={file_name:e.originName,file_url:e.upURL,file_url_full:e.fileURL,file_type:-1!=="jpg,png,jpeg,gif".indexOf(r)?"1":"2"};t.fileArr.some((function(t){return t.file_name===e.originName}))?t.$message("上传文件重复，请检查！"):(t.fileArr.push(a),t.limit--)}))}else this.$message("上传失败,请重新上传")},delFile:function(e){this.fileArr.splice(e,1),this.limit++}}};t.default=s},"85a7":function(e,t,r){(t=r("24fb")(!1)).push([e.i,".color-error[data-v-bf6217d2]{color:#f56c6c}.file-show-box .file-list .preview-file[data-v-bf6217d2]{color:#00f;text-decoration:underline;margin:0 10px}.file-show-box .img-list[data-v-bf6217d2]{margin-top:16px}.file-show-box .img-list li[data-v-bf6217d2]{position:relative;float:left;width:100px;height:100px;text-align:center;margin-right:12px}.file-show-box .img-list li .img-item-box[data-v-bf6217d2]{width:100%;height:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #eee}.file-show-box .img-list li .img-item-box img[data-v-bf6217d2]{max-width:100%;max-height:100%}[data-v-bf6217d2] .input-text-box .el-form-item__content{width:500px}.upload-btn[data-v-bf6217d2]{display:inline-block;margin-right:20px}.upload-tips[data-v-bf6217d2]{color:#888}.btn-shade[data-v-bf6217d2]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;z-index:2;cursor:pointer}",""]),e.exports=t},a869:function(e,t,r){var a=r("fd2e");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("a7032b72",a,!0,{sourceMap:!1,shadowMode:!1})},ab13:function(e,t,r){var a=r("b622")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[a]=!1,"/./"[e](t)}catch(e){}}return!1}},ae99:function(e,t,r){"use strict";r.r(t);var a=r("1f88c"),i=r("ed264");for(var n in i)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(n);r("22ef");var o=r("2877"),l=Object(o.a)(i.default,a.a,a.b,!1,null,"bf6217d2",null);t.default=l.exports},b14b:function(e,t,r){"use strict";r("b83b")},b17c:function(e,t,r){"use strict";r("eab0")},b6c0:function(e,t,r){"use strict";r("c740"),r("4160"),r("d81d"),r("a434"),r("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"FilePreview",props:{fileList:{type:Array,default:function(){return[]}},canEdit:{type:Boolean,default:!1}},data:function(){return{docFileArr:[],imgFileArr:[],photoIsShow:!1,previewUrl:[],curIndex:0}},watch:{fileList:function(e){this.handleFileList(e)}},methods:{handleFileList:function(e){var t=this;this.docFileArr=[],this.imgFileArr=[],e.forEach((function(e){"1"===e.file_type?t.imgFileArr.push(e):"2"===e.file_type&&t.docFileArr.push(e)}))},delFile:function(e,t){var r,a=this;"file"===e?(r=this.fileList.findIndex((function(e){return e.file_url===a.docFileArr[t].file_url})),this.docFileArr.splice(t,1)):"img"===e&&(r=this.fileList.findIndex((function(e){return e.file_url===a.imgFileArr[t].file_url})),this.imgFileArr.splice(t,1)),this.$emit("delFile",r)},showPreview:function(e){this.photoIsShow=!0,this.curIndex=e,this.previewUrl=this.imgFileArr.map((function(e){return e.file_url}))},closeViewer:function(){this.photoIsShow=!1,this.previewUrl=[]}}};t.default=a},b83b:function(e,t,r){var a=r("ef8c");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("2251e3df",a,!0,{sourceMap:!1,shadowMode:!1})},bb2f:function(e,t,r){var a=r("d039");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},beec:function(e,t,r){"use strict";r.r(t);var a=r("6ed4"),i=r("060a");for(var n in i)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(n);r("b14b");var o=r("2877"),l=Object(o.a)(i.default,a.a,a.b,!1,null,"08cf400b",null);t.default=l.exports},cf26:function(e,t,r){"use strict";r.r(t);var a=r("fa28"),i=r("0094");for(var n in i)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(n);r("f9ea");var o=r("2877"),l=Object(o.a)(i.default,a.a,a.b,!1,null,"0314eb5c",null);t.default=l.exports},dca8:function(e,t,r){var a=r("23e7"),i=r("bb2f"),n=r("d039"),o=r("861d"),l=r("f183").onFreeze,s=Object.freeze;a({target:"Object",stat:!0,forced:n((function(){s(1)})),sham:!i},{freeze:function(e){return s&&o(e)?s(l(e)):e}})},e21a:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("23f7"),i={getProjectAndType:function(e){return a.axios.get("/backend-api/common/get-project-and-type",{params:e})},getSupplierList:function(e){return a.axios.get("/backend-api/common/get-supplier",{params:e})},getCityList:function(e){return a.axios.get("/backend-api/select2/bank/get-city-dropdown-list",{params:e})}};t.default=i},eab0:function(e,t,r){var a=r("fde5");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,r("499e").default)("74983262",a,!0,{sourceMap:!1,shadowMode:!1})},ed264:function(e,t,r){"use strict";r.r(t);var a=r("7450"),i=r.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t.default=i.a},ef8c:function(e,t,r){(t=r("24fb")(!1)).push([e.i,".msg-notice[data-v-08cf400b]{color:#f56c6c;line-height:1.5}",""]),e.exports=t},f183:function(e,t,r){var a=r("d012"),i=r("861d"),n=r("5135"),o=r("9bf2").f,l=r("90e3"),s=r("bb2f"),c=l("meta"),u=0,f=Object.isExtensible||function(){return!0},d=function(e){o(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,c)){if(!f(e))return"F";if(!t)return"E";d(e)}return e[c].objectID},getWeakData:function(e,t){if(!n(e,c)){if(!f(e))return!0;if(!t)return!1;d(e)}return e[c].weakData},onFreeze:function(e){return s&&p.REQUIRED&&f(e)&&!n(e,c)&&d(e),e}};a[c]=!0},f318:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("23f7"),i={getContractInit:function(){return a.axios.get("/backend-api/expand/ex-contract/init")},getContractList:function(e){return a.axios.get("/backend-api/expand/ex-contract/list",{params:e})},updateFollowEmployeeInfo:function(e){return a.axios.post("/backend-api/expand/ex-contract/edit-follow-employee",e)},getApplyTurnSignInitInfo:function(e){return a.axios.get("/backend-api/expand/ex-contract/apply-turn-direct-sign-init",{params:e})},saveApplyTurnSign:function(e){return a.axios.post("/backend-api/expand/ex-contract/apply-turn-direct-sign",e)}};t.default=i},f4ef:function(e,t,r){"use strict";r.r(t);var a=r("6d6d"),i=r("646f");for(var n in i)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(n);var o=r("2877"),l=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);t.default=l.exports},f9ea:function(e,t,r){"use strict";r("a869")},fa28:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contract-list"},[r("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",[r("a",{attrs:{href:"/"}},[e._v("首页")])]),r("el-breadcrumb-item",[e._v("合同列表页")])],1),r("el-form",{ref:"contractForm",staticClass:"contract-form",attrs:{model:e.contractForm,size:"medium","label-width":"114px",inline:!0}},[r("el-form-item",{attrs:{prop:"cityId",label:"地理城市："}},[r("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.contractForm.cityId,callback:function(t){e.$set(e.contractForm,"cityId",t)},expression:"contractForm.cityId"}},e._l(e.cityOps,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{prop:"projectId",label:"楼盘ID:"}},[r("jl-number-input",{attrs:{reg:"number",size:"medium"},model:{value:e.contractForm.projectId,callback:function(t){e.$set(e.contractForm,"projectId",t)},expression:"contractForm.projectId"}})],1),r("el-form-item",{attrs:{prop:"projectName",label:"楼盘名称："}},[r("search-select-radio",{attrs:{clearable:"",placeholder:"请选择",apiInfo:e.oProject},model:{value:e.contractForm.projectName,callback:function(t){e.$set(e.contractForm,"projectName",t)},expression:"contractForm.projectName"}})],1),r("el-form-item",{attrs:{prop:"contractId",label:"合同ID:"}},[r("jl-number-input",{attrs:{reg:"number",size:"medium"},model:{value:e.contractForm.contractId,callback:function(t){e.$set(e.contractForm,"contractId",t)},expression:"contractForm.contractId"}})],1),r("el-form-item",{attrs:{prop:"cooperater",label:"合作方："}},[r("search-select-radio",{attrs:{clearable:"",placeholder:"请选择",apiInfo:e.oCooperater},model:{value:e.contractForm.cooperater,callback:function(t){e.$set(e.contractForm,"cooperater",t)},expression:"contractForm.cooperater"}})],1),r("el-form-item",{attrs:{prop:"cooperateType",label:"合作方式："}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.contractForm.cooperateType,callback:function(t){e.$set(e.contractForm,"cooperateType",t)},expression:"contractForm.cooperateType"}},e._l(e.cooperateTypeOps,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{prop:"signType",label:"直签类型："}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.contractForm.signType,callback:function(t){e.$set(e.contractForm,"signType",t)},expression:"contractForm.signType"}},e._l(e.signTypeOps,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{prop:"contractCreater",label:"合同创建人："}},[r("search-select-radio",{attrs:{clearable:"",placeholder:"请选择",apiInfo:e.oCreater},model:{value:e.contractForm.contractCreater,callback:function(t){e.$set(e.contractForm,"contractCreater",t)},expression:"contractForm.contractCreater"}})],1),r("el-form-item",{attrs:{prop:"contractFollower",label:"合同跟进人："}},[r("search-select-radio",{attrs:{clearable:"",placeholder:"请选择",apiInfo:e.oContractFollower},model:{value:e.contractForm.contractFollower,callback:function(t){e.$set(e.contractForm,"contractFollower",t)},expression:"contractForm.contractFollower"}})],1),r("el-form-item",{attrs:{prop:"startTime",label:"合同开始时间："}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.contractForm.startTime,callback:function(t){e.$set(e.contractForm,"startTime",t)},expression:"contractForm.startTime"}})],1),r("el-form-item",{attrs:{prop:"endTime",label:"合同结束时间："}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.contractForm.endTime,callback:function(t){e.$set(e.contractForm,"endTime",t)},expression:"contractForm.endTime"}})],1),r("el-form-item",{attrs:{prop:"transferSignStatus",label:"转直签状态："}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.contractForm.transferSignStatus,callback:function(t){e.$set(e.contractForm,"transferSignStatus",t)},expression:"contractForm.transferSignStatus"}},e._l(e.signStatusOps,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{staticClass:"form-item-center"},[r("el-button",{on:{click:e.resetForm}},[e._v(" 重置 ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.searchListInfo()}}},[e._v(" 搜索 ")])],1)],1),r("div",{staticClass:"table-wrap-new"},[r("table-pagination",{attrs:{total:e.pages.total,page:e.pages.curPage},on:{pageChange:e.pageChange},scopedSlots:e._u([{key:"btns",fn:function(){return[e.showEditFollowerStatus?r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.editContractFollower}},[e._v(" 批量修改合同跟进人 ")]):e._e()]},proxy:!0},{key:"table",fn:function(){return[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"contractTable",attrs:{border:"",data:e.tableList,size:"small","highlight-current-row":!0,"header-cell-style":{backgroundColor:"#f9f9f9",color:"#333"}},on:{"selection-change":e.selectChange,"sort-change":e.sortChange}},[e.showEditFollowerStatus?r("el-table-column",{attrs:{fixed:"left",type:"selection",align:"center",width:"70"}}):e._e(),r("el-table-column",{attrs:{prop:"city_name",label:"地理城市",align:"center"}}),r("el-table-column",{attrs:{prop:"project_id",label:"楼盘ID",align:"center"}}),r("el-table-column",{attrs:{prop:"project_name",label:"楼盘名称",align:"center"}}),r("el-table-column",{attrs:{prop:"id",label:"合同ID",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("a",{staticClass:"a-link",attrs:{href:a.contract_url}},[e._v(e._s(a.id))])]}}])}),r("el-table-column",{attrs:{label:"合作方",prop:"partner",align:"center"}}),r("el-table-column",{attrs:{label:"合作方式",prop:"cooperate_type",align:"center"}}),r("el-table-column",{attrs:{prop:"direct_sign_type",label:"直签类型",align:"center"}}),r("el-table-column",{attrs:{prop:"create_employee",label:"合同创建人",align:"center"}}),r("el-table-column",{attrs:{prop:"follow_employee",label:"合同跟进人",align:"center"}}),r("el-table-column",{attrs:{prop:"contract_begin_datetime",label:"合同开始时间",sortable:"custom",align:"center",width:"120"}}),r("el-table-column",{attrs:{prop:"contract_end_datetime",sortable:"custom",label:"合同结束时间",align:"center",width:"120"}}),r("el-table-column",{attrs:{label:"操作",width:"110px",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1===a.can_apply?r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return e.applyTurnSign(a.id)}}},[e._v(" 申请转直签 ")]):e._e(),1===a.can_see_detail?r("el-button",{staticClass:"btn-last",attrs:{type:"text",size:"small"},on:{click:function(t){return e.turnToPage(a.id)}}},[e._v(" 转直签详情 ")]):e._e()]}}])})],1)]},proxy:!0}])})],1),r("change-employee-dialog",{attrs:{visible:e.employeeDialogVisible,title:"批量修改合同跟进人",label:"新的跟进人",apiInfo:e.oFollower},on:{"update:visible":function(t){e.employeeDialogVisible=t},confirm:e.handleChangeFollower}}),r("turn-sign-dialog",{attrs:{visible:e.signDialogVisible,id:e.contractId},on:{"update:visible":function(t){e.signDialogVisible=t},confirm:e.turnSignConfirm}})],1)},i=[]},fd2e:function(e,t,r){(t=r("24fb")(!1)).push([e.i,"[data-v-0314eb5c] .el-table th.gutter{display:table-cell!important}.a-link[data-v-0314eb5c]{color:#409eff}.contract-list[data-v-0314eb5c]{padding:0 30px}.bread-nav[data-v-0314eb5c]{padding:20px 0}.contract-form[data-v-0314eb5c]{background-color:#fff;padding:20px 0 10px}.contract-form[data-v-0314eb5c] .el-input{width:200px}.contract-form .form-item-center[data-v-0314eb5c]{display:block;text-align:center}.table-wrap-new[data-v-0314eb5c]{margin-top:10px}.btn-last[data-v-0314eb5c]{margin-left:0}",""]),e.exports=t},fde5:function(e,t,r){(t=r("24fb")(!1)).push([e.i,".color-error[data-v-5120f874]{color:#f56c6c}.file-show-box .file-list .preview-file[data-v-5120f874]{color:#00f;text-decoration:underline;margin:0 10px}.file-show-box .img-list[data-v-5120f874]{margin-top:16px}.file-show-box .img-list li[data-v-5120f874]{position:relative;float:left;width:100px;height:100px;text-align:center;margin-right:12px}.file-show-box .img-list li .img-item-box[data-v-5120f874]{width:100%;height:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #eee}.file-show-box .img-list li .img-item-box img[data-v-5120f874]{max-width:100%;max-height:100%}.file-show-box .ico-close[data-v-5120f874]{position:absolute;display:block;font-size:18px;top:-9px;right:-10px;color:#f56c6c;cursor:pointer}",""]),e.exports=t}}]);