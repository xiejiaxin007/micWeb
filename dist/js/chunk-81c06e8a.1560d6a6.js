(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-81c06e8a"],{"0f64":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-entering"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[t._v("首页")])]),a("el-breadcrumb-item",[a("a",{attrs:{href:"/index.php?r=project-change-notify%2Findex_new"}},[t._v("变更通知列表")])]),a("el-breadcrumb-item",[t._v("录入页")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"house-info"},[a("div",{staticClass:"info-headline"},[a("h3",{staticClass:"title"},[t._v(t._s(t.housesInfo.name))]),a("span",{staticClass:"house-type"},[t._v("（"+t._s(t.housesInfo.belongCity)+"·"+t._s(t.housesInfo.commercial)+"）")]),a("div",{staticClass:"btn-box"},[a("el-button",{on:{click:t.handleCancle}},[t._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v(" 提交 ")])],1)]),a("div",{staticClass:"info-show"},[a("el-form",{ref:"baseInfo",attrs:{model:t.housesInfo,"label-width":"80px",size:"mini"}},[a("el-form-item",{staticClass:"auto-item",attrs:{label:"区域："}},[t._v(" "+t._s(t.housesInfo.area)+" ")]),a("el-form-item",{staticClass:"auto-item",attrs:{label:"地址："}},[t._v(" "+t._s(t.housesInfo.address)+" ")]),a("el-form-item",{attrs:{required:"",rules:t.baseInfoRules,prop:"labelVal",label:"标签："}},[a("div",{staticClass:"label-options"},t._l(t.baseConfig.categoryList,(function(e,o){return a("div",{key:o,staticClass:"cooperation-category"},[a("el-radio-group",{on:{change:function(e){return t.labelChange(e,o)}},model:{value:t.housesInfo.labelVal,callback:function(e){t.$set(t.housesInfo,"labelVal",e)},expression:"housesInfo.labelVal"}},t._l(e,(function(e){return a("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(" "+t._s(e.text)+" ")])})),1)],1)})),0)])],1)],1)]),a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"form-right"},[a("div",{staticClass:"form-right-wrap"},[t._m(0),a("change-notice-content",{ref:"noticeContent",attrs:{ossData:t.ossData,ossConf:t.ossCon,content:t.defaultContent},on:{lookOver:t.lookOver}})],1),t.isShow?a("jl-image-preview",{attrs:{showViewer:t.isShow,urlList:t.previewUrl},on:{closeViewer:t.closeViewer}}):t._e()],1),a("div",{staticClass:"form-left"},[t._m(1),a("div",{directives:[{name:"show",rawName:"v-show",value:""!==t.housesInfo.labelVal,expression:"housesInfo.labelVal !== ''"}]},[0===t.labelIdx||2===t.labelIdx&&9==t.housesInfo.labelVal?a("cooperation-status",{ref:"cooperateBand",attrs:{"houses-info":t.changeNotice,"label-id":t.housesInfo.labelVal,"cooperation-status":t.baseConfig.cooperateOutreachList,"band-status":t.baseConfig.bandStatusList}}):t._e()],1)])]),a("el-dialog",{attrs:{visible:t.saveVailInfoDialogVal,title:"系统提醒",width:"30%",center:""},on:{"update:visible":function(e){t.saveVailInfoDialogVal=e}}},[a("span",[t._v("嘿！你是不是忘记更新了一些标准字段哦！听说更新一些标准字段会被加鸡腿，先录入一些标准字段再提交吧！")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:t.notValidate}},[t._v(" 残忍拒绝 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveVailInfoDialogVal=!1}}},[t._v(" 录入标准字段再提交 ")])],1)]),a("el-dialog",{attrs:{visible:t.porjectStatusDialogVal,title:"系统提醒",width:"30%",center:""},on:{"update:visible":function(e){t.porjectStatusDialogVal=e}}},[a("span",[t._v(t._s(t.selfConsistentMessage))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.editHouseTypeStatus}},[t._v(" 修改户型销售状态 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editHousePrejectStatus}},[t._v(" 修改楼盘销售状态 ")])],1)]),a("el-dialog",{attrs:{visible:t.saveUpdateProgressDialogVal,title:"系统提醒",width:"30%",center:""},on:{"update:visible":function(e){t.saveUpdateProgressDialogVal=e}}},[a("span",[t._v(t._s(t.updateConsistentMessage))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveUpdateProgressDialogVal=!1}}},[t._v(" 无情规则,我只能接受 ")])],1)]),a("el-dialog",{attrs:{visible:t.priceLimitDialog,title:"系统提醒",width:"30%",center:""},on:{"update:visible":function(e){t.priceLimitDialog=e}}},[a("span",{domProps:{innerHTML:t._s(t.priceLimitMessage)}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v(" 确认无误正常提交 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmToEdit}},[t._v(" 填写错误正常修改 ")])],1)])],1)},i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info-headline"},[e("h3",{staticClass:"title"},[this._v("变更通知内容")]),e("span",{staticClass:"vice-title"},[this._v("将你准备发送的消息内容填写在这里，更新后自动同步给咨询师以及相关人员")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info-headline"},[e("h3",{staticClass:"title"},[this._v("重要通知细节信息")]),e("span",{staticClass:"vice-title"},[this._v("将你可以转化为标准字段的内容更新在这里，请仔细填写！")])])}]},"21a6":function(t,e,a){(e=a("24fb")(!1)).push([t.i,".coopration-status[data-v-ba309712]{padding:0 15px}.coopration-status .info-title[data-v-ba309712]{border-bottom:1px solid #dcdfe6;padding:5px 0 15px;margin-bottom:15px}.coopration-status .line[data-v-ba309712]{text-align:center}",""]),t.exports=e},2532:function(t,e,a){"use strict";var o=a("23e7"),i=a("5a34"),n=a("1d80");o({target:"String",proto:!0,forced:!a("ab13")("includes")},{includes:function(t){return!!~String(n(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"2c03":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice-wrap"},[a("div",{staticClass:"textarea"},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:15,maxRows:18},placeholder:"请输入内容"},model:{value:t.noticeVal,callback:function(e){t.noticeVal=e},expression:"noticeVal"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMsg,expression:"showMsg"}],staticClass:"el-form-item__error"},[t._v(" 最多可输入5000字 ")])],1),t._m(0),t.imgList.length>0?a("div",{staticClass:"image-list"},t._l(t.imgList,(function(e,o){return a("div",{key:o,staticClass:"image-box",on:{click:function(e){return t.showPreview(o)}}},[a("i",{staticClass:"iconfont iconicon-delete",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.delImage(o)}}}),a("div",[a("img",{attrs:{src:e.fileURL,alt:"效果图"}})])])})),0):t._e(),a("div",{staticClass:"upload-wrap"},[a("jl-file-upload",{ref:"uploadImg",attrs:{upID:"noticeUploadImg",ossData:t.ossData,isMulti:!0,limit:10-t.imgList.length},on:{getFileURL:t.getFileURL}},[a("el-button",{staticClass:"btn-upload-box",attrs:{type:"primary"}},[t._v("点击上传")])],1),a("div",{staticClass:"img-hint"},[t._v(" 还可以上传"+t._s(10-t.imgList.length)+"张图片、图片类型必须为gif,png,jpg,jpeg,大小在10M以内 ")])],1)])},i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notice-msg"},[e("h5",{staticClass:"title"},[this._v("注意事项：")]),e("span",[this._v("1.系统会记录发布时间，但是信息的获取时间和信息的有效时间需要强调的一定要说明")])])}]},"2da9":function(t,e,a){var o=a("89a12");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("499e").default)("05ecef4b",o,!0,{sourceMap:!1,shadowMode:!1})},"326a":function(t,e,a){"use strict";a("2da9")},"32e0":function(t,e,a){(e=a("24fb")(!1)).push([t.i,'.white-box[data-v-11d67855]{padding:10px 15px;background-color:#fff}.info-entering[data-v-11d67855]{font-size:14px;padding:20px 20px 0}.info-entering .bread-nav[data-v-11d67855]{margin-bottom:10px}.info-entering .info-headline[data-v-11d67855]{border-bottom:1px solid #dcdfe6;padding:15px 0;margin-bottom:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.info-entering .info-headline>.title[data-v-11d67855]{display:inline-block;max-width:260px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700}.info-entering .info-headline .house-type[data-v-11d67855]{vertical-align:top;font-weight:700;font-size:15px}.info-entering .info-headline>.vice-title[data-v-11d67855]{font-size:12px;margin-left:12px}.info-entering .house-info[data-v-11d67855]{padding:0 15px;background-color:#fff}.info-entering .form-right-wrap[data-v-11d67855]{position:-webkit-sticky;position:sticky;top:130px}.info-entering .info-show[data-v-11d67855]{line-height:2}.info-entering .info-show .lables[data-v-11d67855]{display:-webkit-box;display:-ms-flexbox;display:flex}.info-entering .info-show .auto-item[data-v-11d67855]{display:inline-block;margin-right:40px}.info-entering .info-show .cooperation-category[data-v-11d67855]{float:left;margin-right:30px}.info-entering .info-show .cooperation-category[data-v-11d67855]:last-of-type{margin-right:0}.info-entering .info-show[data-v-11d67855]:after{display:block;clear:both;content:"";visibility:hidden;height:0}.info-entering .form-wrap[data-v-11d67855]{margin-top:15px}.info-entering .form-left[data-v-11d67855],.info-entering .form-right[data-v-11d67855]{padding:10px 15px;background-color:#fff;margin-bottom:20px}.info-entering .form-left[data-v-11d67855]{margin-right:20px}.info-entering .btn-box[data-v-11d67855]{text-align:center;margin-left:auto}',""]),t.exports=e},"3a2f":function(t,e,a){"use strict";a("d844")},4222:function(t,e,a){"use strict";var o=a("4ea4");a("99af"),a("4de4"),a("4160"),a("a15b"),a("baa5"),a("b0c0"),a("a9e3"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=o(a("1da1")),n=o(a("a0781")),s=o(a("4cb9")),r=o(a("d19d")),c=o(a("5b47")),l=o(a("f946")),u=a("7223"),d=c.default.getProjectBaseInfoData,f=c.default.getProjectConfigData,p=c.default.getProjectBuildingListdata,h=c.default.getRelatedHouseTypeData,g=c.default.saveFormInfoData,m=[1,2,3,6,7,8,14,21,22,23,24,25,26,27,28],b={id:-1,text:"暂不清楚"},v={name:"ChangeInfoEntering",components:{ChangeNoticeContent:s.default,CooperationStatus:r.default},data:function(){return{previewUrl:[],isShow:!1,imgList:[],ossCon:n.default,ossData:{},houseId:"",isSubmiting:!1,priceLimitDialog:!1,priceLimitMessage:"",saveVailInfoDialogVal:!1,notValidateValue:!0,saveUpdateProgressDialogVal:!1,updateConsistentMessage:"",pageLoading:!1,porjectStatusDialogVal:!1,selfConsistentMessage:"",housesKey:1,housesInfo:{name:"",belongCity:"",commercial:"",area:"",address:"",labelVal:"",priceLimit:"",price:""},changeNotice:{},labelVal:"",labelIdx:"",labels:[],projectBuildingOpations:[],relatedHouseTypeList:[],editorHouseInfolist:[],baseConfig:{categoryList:[],saleStatus:[],houseSaleStatus:[],changePriceTypeList:[],changeTotalPriceTypeList:[],volumeType:[],houseTag:[],liveDateType:[],houseTypeSaleNumList:[],cooperateOutreachList:[],bandStatusList:[],marginTagList:[],roomType:[]},baseInfoRules:{required:!0,message:"请选择一个标签",trigger:"change"},defaultContent:""}},created:function(){this.pageInit(),this.getSigns()},methods:{lookOver:function(t,e){this.previewUrl[0]=t,this.isShow=!0},closeViewer:function(){this.isShow=!1},getSigns:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={cate:"Upload/project/house_type"},e.next=3,l.default.getSign(a);case 3:o=e.sent,0===(i=o.data).code&&(t.ossData=i.data);case 6:case"end":return e.stop()}}),e)})))()},notValidate:function(){this.saveVailInfoDialogVal=!1,this.notValidateValue=!1,this.submitForm()},pageInit:function(){"detail"===this.$route.query.from&&(this.housesInfo.labelVal=182,this.labelIdx=1),this.projectId=this.$route.query.projectId,this.tracks={houseId:"",projectId:"",errorType:""},this.getConfigBaseInfo(),this.getProjectBaseInfo(),this.getProjectBuildingList(),this.getRelatedHouseTypeList()},buildFocus:function(){this.getProjectBuildingList()},getProjectBuildingList:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={project_id:t.projectId},e.prev=1,e.next=4,p(a);case 4:o=e.sent,0===(i=o.data).code&&(t.projectBuildingOpations=i.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},resetPush:function(){this.getRelatedHouseTypeList()},getRelatedHouseTypeList:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a,o,i,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(t.$route.query.projectId);case 3:a=e.sent,o=a.data,i=o.code,n=o.data,s=o.msg,0===i?t.relatedHouseTypeList=n:t.$message(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},labelChange:function(t,e){this.labelIdx=e,this.housesKey++},getConfigBaseInfo:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a,o,i,n,s,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={city_id:t.cityId||"",type:m},e.next=4,f(a);case 4:o=e.sent,i=o.data,n=i.code,s=i.data,r=i.msg,0===n?(t.baseConfig.categoryList=s.category_list,t.baseConfig.saleStatus=s.sale_status,t.baseConfig.houseSaleStatus=s.sale_status,t.baseConfig.changePriceTypeList=s.change_price_type_list,t.baseConfig.changePriceTypeList.push(b),t.baseConfig.changeTotalPriceTypeList=s.change_total_price_type_list,t.baseConfig.changeTotalPriceTypeList.push(b),t.baseConfig.volumeType=s.volume_type,t.baseConfig.liveDateType=s.live_date_type,t.baseConfig.houseTypeSaleNumList=s.house_type_sale_num_list,t.baseConfig.cooperateOutreachList=s.cooperate_outreach_list,t.baseConfig.bandStatusList=s.band_status_list,t.baseConfig.marginTagList=s.house_type_sale_num_list,t.baseConfig.marginTagList.push(b),t.baseConfig.roomType=s.room_type):t.$message(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},getProjectBaseInfo:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a,o,i,n,s,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.pageLoading=!0,a=t.$route.query.have_default_notify_content?1:2,e.next=5,d(t.projectId,a);case 5:o=e.sent,i=o.data,n=i.code,s=i.data,r=i.msg,t.pageLoading=!1,0===n?(t.housesInfo.name=s.name,t.housesInfo.belongCity=s.city_name,t.housesInfo.commercial=s.project_type_name,t.housesInfo.area=s.district_name,t.housesInfo.address=s.address,t.cityId=s.city_id,t.housesInfo.priceLimit=t.unitTransform(s.price_limit),t.housesInfo.price=t.unitTransform(s.price),t.baseConfig.houseTag=s.building_type,t.baseConfig.houseTag.push(b),t.changeNotice={cooperateStatus:s.is_cooperate,outReachStatus:s.is_outreach,bandStatus:Number(s.band_status),startTime:s.start_time,endTime:s.end_time,onSaleCount:s.on_sale_num},t.defaultContent=s.default_notify_content||""):t.$message(r),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),t.pageLoading=!1;case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))()},handleCancle:function(){var t=this;this.$confirm("是否放弃编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.location.href="/index.php?r=project-change-notify%2Findex_new"})).catch((function(){t.$message({type:"info",message:"已取消"})}))},validLabel:function(){var t=!1;return this.$refs.baseInfo.validate((function(e){t=e})),t},confirmSubmit:function(){this.confirmLimitSts=!0,this.priceLimitDialog=!1,this.submitForm()},confirmToEdit:function(){this.confirmLimitSts=!1,this.priceLimitDialog=!1},checkPriceLimit:function(t,e){var a=this,o=Number(t.project_min_price),i="",n=[];return 0!==o&&0!==Number(this.housesInfo.price)&&Math.abs(o-Number(this.housesInfo.price))>=Number(this.housesInfo.priceLimit)&&(i="楼盘单价".concat(o,"万,原价").concat(this.housesInfo.price,"万")),e.house_type.forEach((function(t){var e=a.unitTransform(t.oldPrice);0!==Number(t.oldPrice)&&Math.abs(Number(t.price)-e)>=Number(a.housesInfo.priceLimit)&&n.push("户型".concat(t.house_type_num,"单价").concat(t.price,"万,原价").concat(e,"万"))})),!(""!==i||n.length>0)||(this.priceLimitMessage="".concat("本次修改价格信息涨跌略高，请确认信息是否有误！"," <br/> ").concat(i," <br/> ").concat(n.join("<br/>")),this.priceLimitDialog=!0,!1)},unitTransform:function(t){if(isNaN(Number(t)))throw new Error("".concat(t,"无法转成数字"));return Number(t)/1e4},submitForm:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a,o,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validLabel()){e.next=4;break}return t.$message("请选择一个标签！"),e.abrupt("return");case 4:if(a={project_id:t.projectId,notify_type:t.housesInfo.labelVal},(o=t.$refs.noticeContent.validForm()).successful){e.next=12;break}if(!(o.formInfo.notify_content.length>0)){e.next=10;break}return t.$message("变更内容不可超出5000字！"),e.abrupt("return");case 10:return t.$message("变更内容不可为空！"),e.abrupt("return");case 12:if(Object.assign(a,o.formInfo),0!==t.labelIdx){e.next=18;break}(i=t.$refs.cooperateBand.validForm()).successful?t.saveFormInfo(Object.assign(a,i.formInfo)):t.errorScroll(t.$refs.cooperateBand.$el),e.next=28;break;case 18:if(1!==t.labelIdx){e.next=22;break}t.saveFormInfo(Object.assign(a)),e.next=28;break;case 22:if(2!==t.labelIdx){e.next=28;break}if(9!=t.housesInfo.labelVal){e.next=27;break}return(n=t.$refs.cooperateBand.validForm()).successful?t.saveFormInfo(Object.assign(a,n.formInfo)):t.errorScroll(t.$refs.cooperateBand.$el),e.abrupt("return");case 27:t.saveFormInfo(Object.assign(a));case 28:case"end":return e.stop()}}),e)})))()},errorScroll:function(t){var e=null;clearInterval(e),e=setInterval((function(){document.documentElement.scrollTop=t.offsetTop-112,clearInterval(e)}),10)},setTrack:function(t,e){u.commonFun.setTrackMenu(t,e)},editHouseTypeStatus:function(){this.setTrack(this.tracks.houseId,{errortype:this.tracks.errorType}),this.porjectStatusDialogVal=!1,this.editorHouseInfolist=this.editorHouseInfolists},editHousePrejectStatus:function(){this.setTrack(this.tracks.projectId,{errortype:this.tracks.errorType}),this.porjectStatusDialogVal=!1},showErrorMsgDialog:function(t,e){var a=this;this.porjectStatusDialogVal=!0;var o="";this.editorHouseInfolists=[],t.forEach((function(t){o+="".concat(t.house_type_text,"(").concat("2"===t.status?"在售":"待售",")、"),a.editorHouseInfolists.push({id:t.house_type_id,text:t.house_type_text,price:t.offer_price,houseId:t.house_id})})),o=o.substring(0,o.lastIndexOf("、")),20007===e?this.selfConsistentMessage="\n                    该楼盘存在".concat(o,",不能将楼盘的销售状态修改为售罄，请选择维护以上户型销售状态还是修改楼盘销售状态\n                "):20011===e&&(this.selfConsistentMessage="\n                    该楼盘为售罄，不能存在待售/在售的户型信息".concat(o,"，请选择维护以上户型销售状态还是修改楼盘销售状态\n                ")),this.tracks.houseId="5916",this.tracks.projectId="5917",this.tracks.errorType=2},waitShowErrorMsgDialog:function(t,e){var a=this;this.porjectStatusDialogVal=!0;var o="";this.editorHouseInfolists=[],t.forEach((function(t){o+="".concat(t.house_type_text,"(").concat("2"===t.status?"在售":"待售",")、"),a.editorHouseInfolists.push({id:t.house_type_id,text:t.house_type_text,price:t.offer_price,houseId:t.house_id})})),o=o.substring(0,o.lastIndexOf("、")),20008===e?this.selfConsistentMessage="\n                    该楼盘存在".concat(o,",不能将楼盘的销售状态修改为待售，请选择维护以上户型销售状态还是修改楼盘销售状态\n                "):20012===e&&(this.selfConsistentMessage="\n                    该楼盘为待售，不能存在在售的户型信息".concat(o,"，请选择维护以上户型销售状态还是修改楼盘销售状态\n                ")),this.tracks.houseId="5916",this.tracks.projectId="5917",this.tracks.errorType=4},houseBanninessError:function(t,e){var a,o=this;e.house_type.filter((function(e){return e.house_id==Number(t.house_id)})).forEach((function(t){a=t.house_type_num})),a&&this.$confirm(a+"的总价不等于单价*面积，请确认是否保存","提示",{confirmButtonText:"保存",cancelButtonText:"不保存",type:"warning"}).then((function(){o.houseId=t.house_id,o.submitForm()})).catch((function(){o.$message({type:"info",message:"已取消保存"})}))},saveFormInfo:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var o,i,n,s,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!e.isSubmiting){a.next=3;break}return a.abrupt("return");case 3:return e.isSubmiting=!0,a.next=6,g(t);case 6:o=a.sent,i=o.data,n=i.code,s=i.data,r=i.msg,e.isSubmiting=!1,0===n?(e.notValidateValue=!0,e.$message({message:"提交成功！",type:"success"}),window.location.href="/index.php?r=project-change-notify%2Findex_new"):20007===n?e.showErrorMsgDialog(s.house_type,n):20008===n?e.waitShowErrorMsgDialog(s.house_type,n):20009===n?(e.saveUpdateProgressDialogVal=!0,e.updateConsistentMessage=r):20010===n?e.houseBanninessError(s,t):20011===n?e.showErrorMsgDialog(s.house_type,n):20012===n?e.waitShowErrorMsgDialog(s.house_type,n):e.$message(r),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(0),e.isSubmiting=!1,console.log(a.t0);case 19:case"end":return a.stop()}}),a,null,[[0,15]])})))()}}};e.default=v},"4cb9":function(t,e,a){"use strict";a.r(e);var o=a("2c03"),i=a("d81f");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("326a");var s=a("2877"),r=Object(s.a)(i.default,o.a,o.b,!1,null,"edd934e8",null);e.default=r.exports},"5a34":function(t,e,a){var o=a("44e7");t.exports=function(t){if(o(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5b47":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a("23f7"),i={getProjectBaseInfoData:function(t,e){return o.axios.get("/backend-api/project/get-project-info",{params:{project_id:t,have_default_notify_content:e}})},getProjectConfigData:function(t){return o.axios.post("/backend-api/common/get-project-config",t)},getProjectBuildingListdata:function(t){return o.axios.get("/backend-api/project/get-project-building-list",{params:t})},getRelatedHouseTypeData:function(t){return o.axios.get("/backend-api/project/get-project-house-type-list",{params:{project_id:t}})},saveFormInfoData:function(t){return o.axios.post("/backend-api/project/cj-project-change-notify/create",t)}};e.default=i},77222:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coopration-status"},[t._m(0),a("el-form",{ref:"cooperationForm",attrs:{model:t.cooperationForm,"label-width":t.labelWidth}},[a("el-form-item",{attrs:{label:"合作状态："}},[a("el-radio-group",{model:{value:t.cooperationForm.cooperateStatus,callback:function(e){t.$set(t.cooperationForm,"cooperateStatus",e)},expression:"cooperationForm.cooperateStatus"}},t._l(t.cooperationStatus,(function(e){return a("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(" "+t._s(e.text)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"带看状态："}},[a("el-radio-group",{model:{value:t.cooperationForm.bandStatus,callback:function(e){t.$set(t.cooperationForm,"bandStatus",e)},expression:"cooperationForm.bandStatus"}},t._l(t.bandStatus,(function(e){return a("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(" "+t._s(e.text)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"近期可带看时间："}},[a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.cooperationForm.startTime,callback:function(e){t.$set(t.cooperationForm,"startTime",e)},expression:"cooperationForm.startTime"}})],1),a("el-col",{staticClass:"line",attrs:{span:1}},[t._v("-")]),a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.cooperationForm.endTime,callback:function(e){t.$set(t.cooperationForm,"endTime",e)},expression:"cooperationForm.endTime"}})],1)],1),a("el-form-item",{attrs:{label:"可售房源数量："}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入内容"},model:{value:t.cooperationForm.onSaleCount,callback:function(e){t.$set(t.cooperationForm,"onSaleCount",e)},expression:"cooperationForm.onSaleCount"}})],1)],1)],1)},i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info-title"},[e("h3",{staticClass:"title"},[this._v("合作及带看状态")])])}]},"89a12":function(t,e,a){(e=a("24fb")(!1)).push([t.i,'.notice-wrap[data-v-edd934e8]{padding-left:20px;position:relative}.notice-wrap[data-v-edd934e8]:before{content:"*";position:absolute;top:0;left:5px;z-index:1;color:red}.notice-wrap .textarea[data-v-edd934e8]{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.notice-wrap .textarea .required-icon[data-v-edd934e8]{color:red;width:20px}.notice-wrap .notice-msg[data-v-edd934e8]{margin-top:10px;padding:15px 0}.notice-wrap .notice-msg>.title[data-v-edd934e8]{font-size:14px;line-height:26px}.notice-wrap .notice-msg .upload-tip-box[data-v-edd934e8]{margin-top:10px}.image-list[data-v-edd934e8]{padding:15px 10px;overflow:hidden}.image-list .file-box[data-v-edd934e8]{margin-right:30px;color:#000}.image-list .file-box[data-v-edd934e8]:last-of-type{margin-right:0}.image-list .file-box .btn-delete[data-v-edd934e8]{margin-left:10px;color:#409eff;cursor:pointer}.image-list .image-box[data-v-edd934e8]{width:150px;height:100px;border:2px solid #eee;position:relative;float:left;margin:5px}.image-list .image-box img[data-v-edd934e8]{max-width:100%;max-height:100%;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.image-list .image-box i[data-v-edd934e8]{position:absolute;top:-6px;right:-8px;font-size:16px;cursor:pointer;z-index:1}.file-list[data-v-edd934e8]{display:-webkit-box;display:-ms-flexbox;display:flex}[data-v-edd934e8] .upload-wrap{display:inline-block;margin-right:20px;overflow:hidden}[data-v-edd934e8] .upload-wrap:last-of-type{margin-right:0}[data-v-edd934e8] .upload-wrap .upload-box{width:80px}[data-v-edd934e8] .upload-wrap .img-hint{margin-left:5px;line-height:32px}.btn-upload-box[data-v-edd934e8]{font-size:12px;padding:9px 15px}',""]),t.exports=e},"9e51":function(t,e,a){"use strict";a.r(e);var o=a("0f64"),i=a("d980");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("3a2f");var s=a("2877"),r=Object(s.a)(i.default,o.a,o.b,!1,null,"11d67855",null);e.default=r.exports},a0781:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={commonList:[{id:"1",text:"是"},{id:"2",text:"否"}]}},a15b:function(t,e,a){"use strict";var o=a("23e7"),i=a("44ad"),n=a("fc6a"),s=a("a640"),r=[].join,c=i!=Object,l=s("join",",");o({target:"Array",proto:!0,forced:c||!l},{join:function(t){return r.call(n(this),void 0===t?",":t)}})},ab13:function(t,e,a){var o=a("b622")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[o]=!1,"/./"[t](e)}catch(t){}}return!1}},adbb:function(t,e,a){var o=a("21a6");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("499e").default)("7d817c10",o,!0,{sourceMap:!1,shadowMode:!1})},bdf2:function(t,e,a){"use strict";a("99af"),a("7db0"),a("4160"),a("d81d"),a("a434"),a("498a"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"ChangeNoticeContent",props:{ossData:{type:Object,default:function(){}},ossConf:{type:Object,default:function(){}},content:{type:String,default:""}},data:function(){return{loading:!1,imgList:[],noticeVal:"",fileList:[],limit:10,fixLimit:10}},watch:{content:function(t){this.noticeVal=t}},computed:{showMsg:function(){return this.noticeVal.trim().length>5e3}},methods:{getFileURL:function(t){var e=this;t.forEach((function(t){e.imgList.find((function(e){return e.originName===t.originName}))?e.$message("已过滤掉重复图片"):e.imgList.push(t)}))},getFileURLCopy:function(t,e){var a=this;if(this.loading=!1,0!==t.length){var o=!1;"img"===e?t.forEach((function(t){a.imgList.find((function(e){return e.originName===t.originName}))?o=!0:a.imgList.push(t)})):"file"===e&&t.forEach((function(t){a.fileList.find((function(e){return e.originName===t.originName}))?o=!0:a.fileList.push(t)})),o&&this.$message("已过滤掉重复文件");var i=this.imgList.length+this.fileList.length;i>=this.fixLimit?this.limit=0:this.limit=this.fixLimit-i}else this.$message("上传失败,请重新上传")},showPreview:function(t){this.$emit("lookOver",this.imgList[t].fileURL)},delImage:function(t,e){this.imgList.splice(t,1),event.stopPropagation()},validForm:function(){return this.imgList.concat(this.fileList),{successful:this.noticeVal.trim().length>0&&!this.showMsg,formInfo:{notify_content:this.noticeVal.trim(),notify_imgs:this.imgList.map((function(t){return t.upURL}))}}}}};e.default=o},caad:function(t,e,a){"use strict";var o=a("23e7"),i=a("4d64").includes,n=a("44d2");o({target:"Array",proto:!0,forced:!a("ae40")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")},d19d:function(t,e,a){"use strict";a.r(e);var o=a("77222"),i=a("e93a");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("e405");var s=a("2877"),r=Object(s.a)(i.default,o.a,o.b,!1,null,"ba309712",null);e.default=r.exports},d81f:function(t,e,a){"use strict";a.r(e);var o=a("bdf2"),i=a.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e.default=i.a},d844:function(t,e,a){var o=a("32e0");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("499e").default)("037676fa",o,!0,{sourceMap:!1,shadowMode:!1})},d980:function(t,e,a){"use strict";a.r(e);var o=a("4222"),i=a.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e.default=i.a},e405:function(t,e,a){"use strict";a("adbb")},e93a:function(t,e,a){"use strict";a.r(e);var o=a("f70f"),i=a.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e.default=i.a},f70f:function(t,e,a){"use strict";a("4160"),a("caad"),a("a9e3"),a("b64b"),a("2532"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=this,i={name:"CooperationStatus",props:{cooperationStatus:{type:Array,default:function(){return[]}},bandStatus:{type:Array,default:function(){return[]}},housesInfo:{type:Object,default:function(){}},labelId:{type:String|Number,default:""}},created:function(){this.initFormInfo()},data:function(){return{labelWidth:"126px",cooperationForm:{cooperateStatus:"",bandStatus:"",startTime:"",endTime:"",onSaleCount:""},cooprationSts:[]}},watch:{housesInfo:{handler:function(){return o.initFormInfo},deep:!0},labelId:function(t){this.chooseDeault(t)}},methods:{chooseDeault:function(t){var e=this.getCooperateStatusByLabel(t);if("{}"===JSON.stringify(e))return!1;this.cooperationForm.cooperateStatus=e.cooperate,this.cooperationForm.bandStatus=e.bandStatus},initFormInfo:function(){var t="",e=9===this.labelId;t=e?this.getCooperateStatus(this.housesInfo.cooperateStatus,this.housesInfo.outReachStatus):this.getCooperateStatusByLabel(this.labelId);var a={startTime:""==this.housesInfo.startTime?"":new Date(1e3*this.housesInfo.startTime),endTime:""===this.housesInfo.endTime?"":new Date(1e3*this.housesInfo.endTime),cooperateStatus:e?t:t.cooperate};this.cooperationForm=Object.assign({},this.cooperationForm,this.housesInfo,a),e||(this.cooperationForm.bandStatus=t.bandStatus)},getCooperateStatus:function(t,e){var a={1:["10","11"],2:["20"],3:["21"]},o="";return Object.keys(a).forEach((function(i){a[i].includes(t+""+e)&&(o=Number(i))})),o},getCooperateStatusByLabel:function(t){var e={};switch(t){case 1:e.cooperate=1,e.bandStatus=2;break;case 2:case 181:e.cooperate=2,e.bandStatus=3;break;case 15:e.cooperate=3,e.bandStatus=2}return e},validForm:function(){return this.cooperationForm.startTime&&this.cooperationForm.end_time&&new Date(this.cooperationForm.startTime)>new Date(this.cooperationForm.endTime)?(this.$message("开始时间不得大于结束时间"),{successful:!1,formInfo:""}):{successful:!0,formInfo:{cooperate_band:{status:this.cooperationForm.cooperateStatus,band_status:this.cooperationForm.bandStatus,start_time:this.cooperationForm.startTime,end_time:this.cooperationForm.endTime,sale_house_num:this.cooperationForm.onSaleCount}}}}}};e.default=i}}]);