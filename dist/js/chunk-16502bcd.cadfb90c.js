(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-16502bcd"],{"0639":function(e,t,a){"use strict";a("24d2")},"0b53":function(e,t,a){"use strict";a.r(t);var i=a("e1a5"),r=a("e70d");for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var s=a("2877"),o=Object(s.a)(r.default,i.a,i.b,!1,null,"d6243cec",null);t.default=o.exports},"0b96":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-box"},[a("el-breadcrumb",{staticClass:"bread-crumb-box",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",[e._v("提报管理")])],1),a("div",{staticClass:"v-box form-table-box search-wrap"},[a("div",{staticClass:"main-title"},[e._v("提报管理")]),a("div",{staticClass:"order-search"},[a("ul",{staticClass:"s-query clearfix"},[a("li",[a("div",{staticClass:"th"},[e._v("提报城市：")]),a("div",{staticClass:"td"},[a("select-city",{staticClass:"select-city",attrs:{filterable:"",showMore:!1},model:{value:e.search.city,callback:function(t){e.$set(e.search,"city",t)},expression:"search.city"}})],1)]),a("li",{staticClass:"long-width"},[a("div",{staticClass:"th"},[e._v("提报开始时间：")]),a("div",{staticClass:"td"},[a("el-date-picker",{attrs:{type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.search.date,callback:function(t){e.$set(e.search,"date",t)},expression:"search.date"}})],1)]),a("li",[a("div",{staticClass:"th"},[e._v("优惠类型：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择优惠类型"},model:{value:e.search.discountsType,callback:function(t){e.$set(e.search,"discountsType",t)},expression:"search.discountsType"}},e._l(e.discountsTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[e._v("提报状态：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择提报状态"},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)])])]),a("div",{staticClass:"btn-area"},[a("el-button",{on:{click:e.resetSearch}},[e._v("重置")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.searchData(1)}}},[e._v("查询")])],1)]),a("div",{staticClass:"v-box form-table-box"},[a("div",{staticClass:"bd"},[a("div",{staticClass:"search-result"},[a("div",{staticClass:"data-stat"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("p",{staticClass:"total-num"},[e._v("当前共"+e._s(e.totalNum)+"条数据")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"operation-area"},[e.leadInAuth?a("el-upload",{ref:"uploadBtn",staticClass:"upload-file",attrs:{action:"","http-request":e.beforeUpdata,"show-file-list":!1}},[a("el-button",{attrs:{type:"primary"}},[e._v("导入模板")])],1):e._e(),e.createAuth?a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]):e._e()],1)])],1)],1),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.tableList,size:"small","row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"header-cell-style":e.tableHeaderColor}},[a("el-table-column",{attrs:{"min-width":"60",prop:"id",label:"提报ID",align:"center"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"name",label:"提报名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover",content:t.row.name}},[a("div",{staticClass:"tooltip-text",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.name))])])]}}])}),a("el-table-column",{attrs:{"min-width":"200",prop:"submission_citys",label:"提报城市",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover",content:e._f("arrayToString")(t.row.submission_citys)}},[a("div",{staticClass:"tooltip-text",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e._f("arrayToString")(t.row.submission_citys)))])])]}}])}),a("el-table-column",{attrs:{"min-width":"100",prop:"promotion_type",label:"优惠类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("arrayToString")(t.row.promotion_type))+" ")]}}])}),a("el-table-column",{attrs:{"min-width":"170",label:"提报时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.start_time)+"-"+e._s(t.row.end_time)+" ")]}}])}),a("el-table-column",{attrs:{"min-width":"80",prop:"manager",label:"负责人",align:"center"}}),a("el-table-column",{attrs:{"min-width":"80",prop:"target_value",label:"完成进度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.submission_num)+"/"+e._s(t.row.target_value)+" ")]}}])}),a("el-table-column",{attrs:{"min-width":"80",prop:"submission_status",label:"提报状态",align:"center"}}),a("el-table-column",{attrs:{"min-width":"80",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"btn-list"},[t.row.stop_button_auth?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.stop(t.row.id,t.row.submission_type)}}},[e._v("终止")]):e._e(),t.row.view_button_auth?a("router-link",{attrs:{to:{path:"/activity/activityList",query:{id:t.row.id,type:t.row.submission_type}}}},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("查看")])],1):e._e()],1)]}}])})],1),a("div",{staticClass:"pagination"},[e.totalNum-e.pageSize>0?a("el-pagination",{attrs:{background:"","page-size":e.pageSize,layout:"prev, pager, next","current-page":e.currentPage,total:e.totalNum},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.pageChange}}):e._e()],1)],1)])])]),a("confirm-dialog",{attrs:{content:"终止后不可恢复，提报内容作废，请谨慎操作！",confirmBtn:"确认终止",visible:e.stopVisible},on:{cancel:function(t){e.stopVisible=!1},confirm:e.confirmAlert}}),a("add-report-dialog",{attrs:{visible:e.addVisible,"report-type-list":e.reportTypeList},on:{cancel:function(t){e.addVisible=!1},confirm:e.confirmAdd}})],1)},r=[]},"10fd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("23f7"),r={getReportList:function(e){return i.axios.post("/backend-api/submission/submission-manage/submission-list",e)},importReport:function(e){return i.axios.post("/backend-api/submission/submission-manage/excel-template",e)},stopReport:function(e){return i.axios.post("/backend-api/submission/submission-manage/stop-submission",e)},getFormByType:function(e){return i.axios.post("/backend-api/submission/submission-manage/init-submission",e)},addSubmission:function(e){return i.axios.post("/backend-api/submission/submission-manage/create-submission",e)},getActivityList:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-list",e)},auditActivity:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-audit",e)},deleteActivity:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-delete",e)},updateScore:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-edit-score",e)},activityInit:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-init",e)},createActivity:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-save",e)}};t.default=r},1606:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".main-title[data-v-76fada22]{font-size:16px;font-weight:700;border-bottom:1px solid #eee;padding-bottom:10px;margin-bottom:20px}.container-box .s-query li.long-width[data-v-76fada22]{width:500px}.container-box .select-city[data-v-76fada22]{width:100%}.container-box .form-table-box[data-v-76fada22]{padding-top:20px}.container-box .btn-list button[data-v-76fada22]{margin:0 5px}.container-box .data-stat[data-v-76fada22]{margin-bottom:10px}.container-box .data-stat .total-num[data-v-76fada22]{line-height:40px}.container-box .data-stat .operation-area[data-v-76fada22]{text-align:right}.container-box .data-stat .operation-area .upload-file[data-v-76fada22]{display:inline-block;margin-right:20px}.tooltip-text[data-v-76fada22]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.pagination[data-v-76fada22]{padding-top:10px}.center[data-v-76fada22],.pagination[data-v-76fada22]{text-align:center}",""]),e.exports=t},"207f":function(e,t,a){"use strict";a.r(t);var i=a("5721"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t.default=r.a},"210a":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _utils=__webpack_require__("7223"),_default2={name:"dynamic-form",props:{initForm:{type:Array,default:function(){return[]}}},data:function(){return{detailForm:{},detailRules:{}}},watch:{initForm:{handler:function(e){this.setRules(e)},immediate:!0}},methods:{setRules:function setRules(form){var _this=this;if(form.length>0)for(var triggerList={number:{trigger:"change",text:"请输入"},text:{trigger:"blur",text:"请输入"},textarea:{trigger:"blur",text:"请输入"},multi:{trigger:"change",text:"请选择"},datetime:{trigger:"change",text:"请选择"}},i=0;i<form.length;i++){var isRequired=form[i].is_required,reg=form[i].regex,name=form[i].field_label,key=form[i].field_name,type=form[i].field_type,arr=[];isRequired&&arr.push({required:!0,message:triggerList[type].text+name,trigger:triggerList[type].trigger}),reg&&arr.push({pattern:eval(reg),message:"请输入正确的"+name,trigger:triggerList[type].trigger}),this.$set(this.detailRules,key,arr),this.$set(this.detailForm,key,form[i].field_value),this.$nextTick((function(){_this.resetForm()}))}},resetForm:function(){this.$refs.detailForm.resetFields()},validateForm:function(){var e=this;this.$refs.detailForm.validate((function(t){if(t){var a=e.getResultForm();e.$emit("getFormInfo",a)}else e.$emit("getFormInfo",!1)}))},getResultForm:function(){for(var e=_utils.commonFun.deepClone(this.initForm),t=0;t<e.length;t++){var a=e[t].field_name;"datetime"===e[t].field_type?e[t].field_value=this.detailForm[a]/1e3:e[t].field_value=this.detailForm[a]}return e}}};exports.default=_default2},"24d2":function(e,t,a){var i=a("f427");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("c2afc4ce",i,!0,{sourceMap:!1,shadowMode:!1})},"29cb":function(e,t,a){var i=a("1606");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("2676c414",i,!0,{sourceMap:!1,shadowMode:!1})},"4d8c":function(e,t,a){"use strict";a.r(t);var i=a("5574"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t.default=r.a},5574:function(e,t,a){"use strict";var i=a("4ea4");a("c975"),a("a15b"),a("baa5"),a("b0c0"),a("ac1f"),a("841c"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=i(a("1da1")),n=i(a("10fd")),s=i(a("f946")),o=a("2af9"),l=i(a("ec5c")),c=i(a("0b53")),u={name:"report-list",components:{ConfirmDialog:o.ConfirmDialog,AddReportDialog:l.default,SelectCity:c.default},data:function(){return{search:{city:[],date:[],discountsType:"",status:""},cityList:[],discountsTypeList:[],statusList:[],reportTypeList:[],cityApi:{api:s.default.getDetailCityListData,params:{q:"",type:2,param:"withAll,noAll"}},currentPage:1,totalNum:0,tableList:[],loading:!1,pageSize:20,currentId:"",currentType:"",stopVisible:!1,createAuth:!0,leadInAuth:!0,addVisible:!1}},mounted:function(){this.searchData(1)},filters:{arrayToString:function(e){var t="";return e&&e.length>0&&(t=e.join("，")),t}},methods:{searchData:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var i,r,s,o,l,c,u,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=864e5,0===t.search.date.length&&(r=new Date,r=new Date(r.getFullYear(),r.getMonth(),r.getDate()),t.$set(t.search.date,"0",r.getTime()-90*i),t.$set(t.search.date,"1",r.getTime()+90*i)),!(t.search.date.length>0&&(t.search.date[1]-t.search.date[0])/i>180)){a.next=5;break}return t.$message.error("最多可搜索180天的提报时间的数据"),a.abrupt("return",!1);case 5:return e&&(t.currentPage=e),a.prev=6,t.loading=!0,s={page:t.currentPage,city_ids:t.search.city,promotion_type:t.search.discountsType,start_time:t.search.date.length>0?t.search.date[0]/1e3:"",end_time:t.search.date.length>0?(t.search.date[1]+i-1e3)/1e3:"",submission_status:t.search.status},a.next=11,n.default.getReportList(s);case 11:o=a.sent,l=o.data,c=l.code,u=l.msg,d=l.data,0===c?(t.tableList=d.data,t.totalNum=d.total_num?parseInt(d.total_num):"0",t.loading=!1,t.leadInAuth=d.import_excel_btn,t.createAuth=d.add_submission_btn,1===e&&(t.statusList=d.config.submission_status,t.reportTypeList=d.config.submission_type,t.discountsTypeList=d.config.promotion_type)):(t.$message.error(u),t.loading=!1),a.next=23;break;case 19:a.prev=19,a.t0=a.catch(6),t.loading=!1,console.log(a.t0);case 23:case"end":return a.stop()}}),a,null,[[6,19]])})))()},resetSearch:function(){this.search={city:"",date:[],discountsType:"",status:""},this.searchData(1)},pageChange:function(){this.searchData()},tableHeaderColor:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"background-color: #f9f9f9;color: #333;"},add:function(){this.addVisible=!0},confirmAdd:function(){this.addVisible=!1,this.searchData(1)},beforeUpdata:function(e){var t=this,a=e.file.size/1024/1024<=20,i=e.file.name.substring(e.file.name.lastIndexOf(".")).toLowerCase();if(-1!==".xlsx".indexOf(i))if(a){var r=new FileReader;r.readAsDataURL(e.file),r.onload=function(){var e=r.result;t.importExcelFile(e)}}else this.$message.error("文件大小不超过20M！");else this.$message.error("只能上传".concat(".xlsx","格式文件！"))},importExcelFile:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var i,r,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=e.substring(e.indexOf(",")+1),a.prev=1,i={file_data:e},a.next=5,n.default.importReport(i);case 5:r=a.sent,0===(s=r.data).code?(t.$message(s.msg),t.searchData(1)):t.$message.error(s.msg),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})))()},stop:function(e,t){this.currentId=e,this.currentType=t,this.stopVisible=!0},confirmAlert:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,i,r,s,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={id:e.currentId,submission_type:e.currentType},t.next=4,n.default.stopReport(a);case 4:i=t.sent,r=i.data,s=r.code,o=r.msg,0===s?(e.stopVisible=!1,e.$message({message:"终止成功",type:"success"}),e.searchData(1)):e.$message.error(o),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}};t.default=u},5721:function(e,t,a){"use strict";var i=a("4ea4");a("a4d3"),a("e01a"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=i(a("1da1")),n=i(a("5530")),s=i(a("10fd")),o=i(a("f946")),l=a("2af9"),c=i(a("0b53")),u=i(a("eeff")),d=a("2f62"),f={name:"add-report-dialog",components:{SearchSelectRadio:l.SearchSelectRadio,SelectCity:c.default,DynamicForm:u.default},props:{visible:{type:Boolean,default:!1},reportTypeList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,dialogVisble:this.visible,cityList:[],typeList:[],userApi:{api:o.default.getStaffList,params:{q:"",role:"all"}},chosenUser:{},basicForm:{name:"",description:"",reportType:"",city:[],dateTime:[],user:""},basicRules:{name:[{required:!0,message:"请输入提报名称",trigger:"blur"}],description:[{required:!0,message:"请输入提报描述",trigger:"blur"}],reportType:[{required:!0,message:"请选择活动提报",trigger:"change"}],city:[{required:!0,message:"请选择提报城市",trigger:"blur"}],dateTime:[{required:!0,message:"请选择提报时间",trigger:"change"}],user:[{required:!0,message:"请选择负责人",trigger:"change"}]},initForm:[],detailForm:null,isSubmit:!1}},computed:(0,n.default)({},(0,d.mapState)({uid:function(e){return e.userInfo.uid+""},employeeName:function(e){return e.userInfo.employeeName},jobNumber:function(e){return e.userInfo.job_number}})),watch:{visible:function(e){this.dialogVisble=e,e&&this.getDetailForm(this.basicForm.reportType)},reportTypeList:function(e){e&&e.length>0&&(this.basicForm.reportType=e[0].value)},uid:function(e){this.chosenUser={value:this.uid,name:this.employeeName+"_"+this.jobNumber},this.basicForm.user=this.uid}},methods:{getDetailForm:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var i,r,n,o,l,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t.loading=!0,i={submission_type:e},a.next=5,s.default.getFormByType(i);case 5:r=a.sent,n=r.data,o=n.code,l=n.msg,c=n.data,0===o?t.initForm=c:t.$message.error(l),t.loading=!1,a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),t.loading=!1,console.log(a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,14]])})))()},getCity:function(e){e&&e.length>0&&this.$refs.city.clearValidate()},cancel:function(){this.$refs.basicForm.resetFields(),this.$refs.dynamicForm.resetForm(),this.$emit("cancel")},getFormInfo:function(e){this.detailForm=e},confirm:function(){var e=this,t=new Promise((function(t,a){e.$refs.basicForm.validate((function(i){i?t(e.basicForm):a("基础信息验证错误")}))})),a=new Promise((function(t,a){e.$refs.dynamicForm.validateForm(),e.detailForm?t(e.detailForm):a("详细信息验证错误")}));Promise.all([t,a]).then(function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(a){var i,r,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSubmit||(e.isSubmit=!0),t.prev=1,i={name:a[0].name,desc:a[0].description,type:a[0].reportType,start_time:a[0].dateTime[0]/1e3,end_time:a[0].dateTime[1]/1e3,submission_citys:a[0].city,manager:a[0].user,config_field:a[1]},t.next=5,s.default.addSubmission(i);case 5:r=t.sent,n=r.data,o=n.code,l=n.msg,0===o?e.$emit("confirm"):e.$message.error(l),e.isSubmit=!1,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),e.isSubmit=!1,console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}}};t.default=f},"57ee":function(e,t,a){"use strict";a.r(t);var i=a("0b96"),r=a("4d8c");for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);a("d77a");var s=a("2877"),o=Object(s.a)(r.default,i.a,i.b,!1,null,"76fada22",null);t.default=o.exports},"72d2":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"新增提报",visible:e.dialogVisble,"close-on-click-modal":!1,width:"750px",center:""},on:{"update:visible":function(t){e.dialogVisble=t},close:e.cancel}},[a("div",{staticClass:"form-content"},[a("el-form",{ref:"basicForm",attrs:{model:e.basicForm,rules:e.basicRules,"label-width":"100px"}},[a("div",{staticClass:"form-title"},[e._v("基础信息")]),a("el-form-item",{attrs:{prop:"name",label:"提报名称"}},[a("el-input",{attrs:{placeholder:"请输入提报名称",maxlength:"20"},model:{value:e.basicForm.name,callback:function(t){e.$set(e.basicForm,"name","string"==typeof t?t.trim():t)},expression:"basicForm.name"}})],1),a("el-form-item",{attrs:{prop:"description",label:"提报描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"简单描述，背景描述，最多100字，超出无法输入",maxlength:"100",autosize:{minRows:3},resize:"none"},model:{value:e.basicForm.description,callback:function(t){e.$set(e.basicForm,"description","string"==typeof t?t.trim():t)},expression:"basicForm.description"}})],1),a("el-form-item",{attrs:{prop:"reportType",label:"提报类型"}},[a("el-select",{attrs:{placeholder:"请选择提报类型"},model:{value:e.basicForm.reportType,callback:function(t){e.$set(e.basicForm,"reportType",t)},expression:"basicForm.reportType"}},e._l(e.reportTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{ref:"city",attrs:{prop:"city",label:"提报城市"}},[a("select-city",{staticClass:"select-city",attrs:{filterable:"",showMore:!0},on:{input:e.getCity},model:{value:e.basicForm.city,callback:function(t){e.$set(e.basicForm,"city",t)},expression:"basicForm.city"}})],1),a("el-form-item",{attrs:{prop:"dateTime",label:"提报时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"timestamp","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.basicForm.dateTime,callback:function(t){e.$set(e.basicForm,"dateTime",t)},expression:"basicForm.dateTime"}})],1),a("el-form-item",{attrs:{prop:"user",label:"负责人"}},[a("search-select-radio",{attrs:{placeholder:"请选择负责人",clearable:"",apiInfo:e.userApi,chosenObj:e.chosenUser},model:{value:e.basicForm.user,callback:function(t){e.$set(e.basicForm,"user",t)},expression:"basicForm.user"}})],1)],1),a("div",{staticClass:"form-title"},[e._v("详细信息")]),a("dynamic-form",{ref:"dynamicForm",attrs:{initForm:e.initForm},on:{getFormInfo:e.getFormInfo}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("提交")])],1)])},r=[]},"736b":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"detailForm",attrs:{model:e.detailForm,rules:e.detailRules,"label-width":"120px"}},e._l(e.initForm,(function(t){return a("el-form-item",{key:t.field_name,attrs:{prop:t.field_name,label:t.field_label}},["text"===t.field_type?a("el-input",{attrs:{placeholder:"请输入"+t.field_label},model:{value:e.detailForm[t.field_name],callback:function(a){e.$set(e.detailForm,t.field_name,a)},expression:"detailForm[item.field_name]"}}):"number"===t.field_type?a("el-input-number",{attrs:{placeholder:"请输入"+t.field_label},model:{value:e.detailForm[t.field_name],callback:function(a){e.$set(e.detailForm,t.field_name,a)},expression:"detailForm[item.field_name]"}}):"datetime"===t.field_type?a("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp",placeholder:"请选择"+t.field_label},model:{value:e.detailForm[t.field_name],callback:function(a){e.$set(e.detailForm,t.field_name,a)},expression:"detailForm[item.field_name]"}}):"textarea"===t.field_type?a("el-input",{attrs:{type:"textarea",placeholder:"请输入"+t.field_label,autosize:{minRows:3},resize:"none"},model:{value:e.detailForm[t.field_name],callback:function(a){e.$set(e.detailForm,t.field_name,a)},expression:"detailForm[item.field_name]"}}):"multi"===t.field_type?a("el-checkbox-group",{model:{value:e.detailForm[t.field_name],callback:function(a){e.$set(e.detailForm,t.field_name,a)},expression:"detailForm[item.field_name]"}},e._l(t.type_value,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1):e._e()],1)})),1)},r=[]},a15b:function(e,t,a){"use strict";var i=a("23e7"),r=a("44ad"),n=a("fc6a"),s=a("a640"),o=[].join,l=r!=Object,c=s("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(n(this),void 0===e?",":e)}})},a8df:function(e,t,a){"use strict";a.r(t);var i=a("210a"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t.default=r.a},d77a:function(e,t,a){"use strict";a("29cb")},e1a5:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"selectCity",staticClass:"no-shake-select",attrs:{placeholder:"请选择城市",multiple:"","collapse-tags":!e.showMore,clearable:"",filterable:e.filterable},on:{change:e.cityChange},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}},[e.cityList&&e.cityList.length>0?a("el-option",{attrs:{label:"全部",value:"-1"}}):e._e(),e._l(e.cityList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],2)},r=[]},e70d:function(e,t,a){"use strict";a.r(t);var i=a("f3d5"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t.default=r.a},ec5c:function(e,t,a){"use strict";a.r(t);var i=a("72d2"),r=a("207f");for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);a("0639");var s=a("2877"),o=Object(s.a)(r.default,i.a,i.b,!1,null,"485fbd70",null);t.default=o.exports},eeff:function(e,t,a){"use strict";a.r(t);var i=a("736b"),r=a("a8df");for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var s=a("2877"),o=Object(s.a)(r.default,i.a,i.b,!1,null,"08b38faa",null);t.default=o.exports},f3d5:function(e,t,a){"use strict";var i=a("4ea4");a("d81d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=i(a("1da1")),n=i(a("f946")),s={props:{value:{default:function(){return[]}},showMore:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1}},data:function(){return{city:[],cityList:[]}},watch:{city:{handler:function(e){this.$emit("input",e)},deep:!0},value:{handler:function(e){this.city=e},deep:!0,immediate:!0}},mounted:function(){this.getCityList()},methods:{getCityList:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,i,r,s,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={type:2,param:"withAll,noAll"},t.next=4,n.default.getDetailCityListData(a);case 4:i=t.sent,r=i.data,s=r.code,o=r.msg,l=r.data,0===s?e.cityList=l.list:e.$message.error(o),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},cityChange:function(e){if("-1"===e[e.length-1]){var t=this.cityList.map((function(e){if("-1"!==e.value)return e.value}));this.city=t,this.$refs.selectCity.blur()}}}};t.default=s},f427:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".form-content[data-v-485fbd70]{max-height:500px;overflow:auto;padding-right:20px}.form-title[data-v-485fbd70]{border-bottom:1px solid #ddd;padding-bottom:10px;margin-bottom:10px;font-size:16px;font-weight:700}.select-city[data-v-485fbd70]{width:100%}",""]),e.exports=t}}]);