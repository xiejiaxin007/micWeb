(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-44b1aead"],{"222f":function(a,e,t){(e=t("24fb")(!1)).push([a.i,".virtual-box[data-v-4bfc7317]{padding:20px 50px;-webkit-box-sizing:border-box;box-sizing:border-box}.virtual-box .content-box[data-v-4bfc7317]{background:#fff;padding:20px 20px;margin-top:20px}.virtual-box .content-box[data-v-4bfc7317] .el-form-item{margin-right:30px}.virtual-box .content-box .btn-box[data-v-4bfc7317]{text-align:center}.virtual-box .content-box .table-box[data-v-4bfc7317] .el-button{margin:20px 10px 20px 0}.virtual-box .content-box .pagination[data-v-4bfc7317]{text-align:center;margin-top:20px}.virtual-box .content-box[data-v-4bfc7317] .el-button{margin-right:10px}.virtual-box .add-company-box[data-v-4bfc7317] .el-dialog{width:600px}.virtual-box .add-company-box[data-v-4bfc7317] .el-dialog .el-input{width:350px}.virtual-box .add-company-box[data-v-4bfc7317] .el-dialog .dialog-footer{text-align:center}",""]),a.exports=e},"271d":function(a,e,t){"use strict";t("3a00")},"334b":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t("23f7"),r={getDepartList:function(a){return o.axios.post("/backend-api/select2/select2/get-org-list",a)},getOrderCitys:function(a){return o.axios.post("/backend-api/select2/select2/get-all-city",a)},getOrgDepartList:function(a){return o.axios.get("/backend-api/select2/select2/get-org-depart-list",{params:a})},getJobs:function(a){return o.axios.get("/backend-api/select2/select2/get-org-post-list",{params:a})},getAllCityData:function(a){return o.axios.post("/backend-api/select2/select2/get-all-city-code",a)},getCompanyCommonData:function(a){return o.axios.post("/backend-api/org/org/common-select",a)}};e.default=r},"3a00":function(a,e,t){var o=t("222f");"string"==typeof o&&(o=[[a.i,o,""]]),o.locals&&(a.exports=o.locals);(0,t("499e").default)("8459dac6",o,!0,{sourceMap:!1,shadowMode:!1})},8219:function(a,e,t){"use strict";var o=t("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t("96cf");var r=o(t("1da1")),n=o(t("823e")),l=o(t("334b")),i={data:function(){return{companyFrom:{companyId:"",companyName:"",companyStatusVal:"",companyData:[]},companyTableData:[],loading:!1,pagination:{total:0,currentPage:1,pageSize:20},dialogFormVisible:!1,titleText:"添加公司",dialogForm:{companyNameVal:"",wechatIsUploadVal:"2",wechatIsUploadData:[],remindDialogVal:"",remindDialogData:[],cityVal:"",cityData:[],cooperateOrgVal:[],cooperateOrgData:[],companyTypeVal:"",companyTypeData:[]},dialogLoading:!1,dialogFormRules:{companyNameVal:[{required:!0,message:"请输入公司名称",trigger:"blur"}],wechatIsUploadVal:[{required:!0,message:"请选择是否上传微信数据",trigger:"change"}],cityVal:[{required:!0,message:"请选择城市",trigger:"change"}],companyTypeVal:[{required:!0,message:"请选择加盟公司类型",trigger:"change"}]}}},mounted:function(){this.getCommonAPi(),this.getCompanyListApi(),this.getCityData()},methods:{getCommonAPi:function(){var a=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var t,o,r,l,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={type:["org_status","wx_data_upload","org_join_type"]},e.next=4,n.default.getCompanyCommonData(t);case 4:o=e.sent,r=o.data,l=r.code,i=r.data,0===l&&(a.companyFrom.companyData=i.org_status,a.companyFrom.companyData.unshift({name:"全部",value:""}),a.dialogForm.wechatIsUploadData=i.wx_data_upload,a.dialogForm.companyTypeData=i.org_join_type),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},getCompanySelData:function(){var a=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var t,o,r,n,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={q:"",is_without_julive:!1},e.next=4,l.default.getDepartList(t);case 4:o=e.sent,r=o.data,n=r.data,i=r.code,c=r.msg,0===i?a.dialogForm.cooperateOrgData=n:a.$message(c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},getCityData:function(){var a=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var t,o,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={q:""},e.next=4,l.default.getAllCityData(t);case 4:o=e.sent,r=o.data,n=r.data,0===r.code&&(a.dialogForm.cityData=n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},getRemindDialogData:function(){var a=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var t,o,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.default.getRemindDialogValData();case 3:t=e.sent,o=t.data,r=o.code,l=o.data,console.log(l),0===r&&(a.dialogForm.remindDialogData=l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},getCompanyListApi:function(){var a=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var t,o,r,l,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.loading=!0,t={id:a.companyFrom.companyId,team_name:a.companyFrom.companyName,status:a.companyFrom.companyStatusVal,page:a.pagination.currentPage,limit:a.pagination.pageSize},e.next=5,n.default.getCompanyListData(t);case 5:o=e.sent,r=o.data,l=r.code,i=r.data,0===l?(a.companyTableData=i.list,a.pagination.total=i.total_count,a.loading=!1):a.loading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),a.loading=!1,console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},getCompanyOpenApi:function(a,e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function o(){var r,l,i,c,s;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,r={id:a,type:"1"==e?"close":"open"},o.next=4,n.default.getCompanyOpenData(r);case 4:l=o.sent,i=l.data,c=i.code,s=i.msg,0===c?t.getCompanyListApi():t.$message(s),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(0),console.log(o.t0);case 14:case"end":return o.stop()}}),o,null,[[0,11]])})))()},pageChange:function(a){this.pagination.currentPage=a,this.getCompanyListApi()},searchQuery:function(){this.pagination.currentPage=1,this.getCompanyListApi()},resetForm:function(a){this.$refs[a].resetFields(),this.pagination.currentPage=1,this.getCompanyListApi()},resetDialogForm:function(a){this.$refs[a].resetFields()},editorPage:function(a){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var o,r,l,i,c,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dialogFormVisible=!0,e.companyId=a,e.titleText="编辑公司",e.getRemindDialogData(),e.getCompanySelData(),t.prev=5,o={id:a},t.next=9,n.default.getCompanyInfoData(o);case 9:r=t.sent,l=r.data,i=l.code,c=l.data,s=l.msg,0===i?(console.log(c),e.dialogForm.wechatIsUploadVal=c.is_wechat,e.dialogForm.companyNameVal=c.team_name,e.dialogForm.remindDialogVal=c.alert_limit,e.dialogForm.cityVal=c.city_id,e.dialogForm.cooperateOrgVal=c.help_org_id,e.dialogForm.companyTypeVal=c.join_type):e.$message(s),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[5,17]])})))()},saveData:function(a){var e=this;this.$refs[a].validate(function(){var a=(0,r.default)(regeneratorRuntime.mark((function a(t){var o,r,l,i,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=19;break}return a.prev=1,e.dialogLoading=!0,o={org_name:e.dialogForm.companyNameVal,is_wechat:e.dialogForm.wechatIsUploadVal,alert_limit:e.dialogForm.remindDialogVal,city_id:e.dialogForm.cityVal,id:e.companyId||"",help_org_id:e.dialogForm.cooperateOrgVal,join_type:e.dialogForm.companyTypeVal},a.next=6,n.default.saveCompanyInfoData(o);case 6:r=a.sent,l=r.data,i=l.code,c=l.msg,0===i?(e.dialogLoading=!1,e.dialogFormVisible=!1,e.getCompanyListApi()):(e.$message(c),e.dialogLoading=!1),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(1),e.dialogLoading=!1,console.log(a.t0);case 17:a.next=21;break;case 19:return console.log("error submit!!"),a.abrupt("return",!1);case 21:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}())},addCompany:function(){var a=this;this.getRemindDialogData(),this.getCompanySelData(),this.dialogFormVisible=!0,this.titleText="添加公司",this.companyId="",this.$nextTick((function(){a.resetDialogForm("dialogFormRuleForm")}))}}};e.default=i},"823e":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t("23f7"),r={getCompanyCommonData:function(a){return o.axios.post("/backend-api/org/org/common-select",a)},getCompanyListData:function(a){return o.axios.get("/backend-api/org/org/list",{params:a})},getCompanyOpenData:function(a){return o.axios.post("/backend-api/org/org/status-change",a)},getCompanyInfoData:function(a){return o.axios.get("/backend-api/org/org/info",{params:a})},saveCompanyInfoData:function(a){return o.axios.post("/backend-api/org/org/create",a)},getRemindDialogValData:function(){return o.axios.get("/backend-api/select2/select2/alert-limit-list")},getPriorityListData:function(a){return o.axios.post("/backend-api/org/alloc-priority-config/get-list",a)},closeCityOrderData:function(a){return o.axios.post("/backend-api/org/alloc-priority-config/switch-state",a)}};e.default=r},"9e45":function(a,e,t){"use strict";t.r(e);var o=t("f77a"),r=t("de620");for(var n in r)["default"].indexOf(n)<0&&function(a){t.d(e,a,(function(){return r[a]}))}(n);t("271d");var l=t("2877"),i=Object(l.a)(r.default,o.a,o.b,!1,null,"4bfc7317",null);e.default=i.exports},de620:function(a,e,t){"use strict";t.r(e);var o=t("8219"),r=t.n(o);for(var n in o)["default"].indexOf(n)<0&&function(a){t.d(e,a,(function(){return o[a]}))}(n);e.default=r.a},f77a:function(a,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return r}));var o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:a.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"virtual-box"},[t("el-breadcrumb",{staticClass:"bread-crumb",attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[t("a",{attrs:{href:"/"}},[a._v("首页")])]),t("el-breadcrumb-item",[a._v("加盟商管理")]),t("el-breadcrumb-item",[a._v("公司列表")])],1),t("div",{staticClass:"content-box"},[t("el-form",{ref:"companyForm",attrs:{inline:!0,model:a.companyFrom}},[t("el-form-item",{attrs:{label:"公司ID：",prop:"companyId"}},[t("el-input",{attrs:{placeholder:"请输入公司ID"},model:{value:a.companyFrom.companyId,callback:function(e){a.$set(a.companyFrom,"companyId",e)},expression:"companyFrom.companyId"}})],1),t("el-form-item",{attrs:{label:"公司名称：",prop:"companyName"}},[t("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:a.companyFrom.companyName,callback:function(e){a.$set(a.companyFrom,"companyName",e)},expression:"companyFrom.companyName"}})],1),t("el-form-item",{attrs:{label:"状态：",prop:"companyStatusVal"}},[t("el-select",{attrs:{placeholder:"状态",clearable:""},model:{value:a.companyFrom.companyStatusVal,callback:function(e){a.$set(a.companyFrom,"companyStatusVal",e)},expression:"companyFrom.companyStatusVal"}},a._l(a.companyFrom.companyData,(function(a){return t("el-option",{key:a.value,attrs:{label:a.name,value:a.value}})})),1)],1)],1),t("div",{staticClass:"btn-box"},[t("el-button",{attrs:{type:"primary"},on:{click:a.searchQuery}},[a._v(" 搜索 ")]),t("el-button",{on:{click:function(e){return a.resetForm("companyForm")}}},[a._v("重置")])],1),t("div",{staticClass:"table-box"},[t("el-button",{attrs:{type:"primary"},on:{click:a.addCompany}},[a._v(" +添加公司 ")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:a.companyTableData}},[t("el-table-column",{attrs:{prop:"id",label:"公司ID"}}),t("el-table-column",{attrs:{prop:"team_name",label:"公司名称"}}),t("el-table-column",{attrs:{prop:"status_desc",label:"状态"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return a.editorPage(e.row.id)}}},[a._v(" 编辑 ")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"==e.row.status_button,expression:"scope.row.status_button == '1'"}],attrs:{type:"text",size:"small"},on:{click:function(t){return a.getCompanyOpenApi(e.row.id,e.row.status_button)}}},[a._v(" 关闭 ")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"==e.row.status_button,expression:"scope.row.status_button == '2'"}],attrs:{type:"text",size:"small"},on:{click:function(t){return a.getCompanyOpenApi(e.row.id,e.row.status_button)}}},[a._v(" 开启 ")])]}}])})],1)],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"","hide-on-single-page":"",layout:"prev, pager, next",total:a.pagination.total,"page-size":a.pagination.pageSize,"current-page":a.pagination.currentPage},on:{"current-change":a.pageChange}})],1)],1),t("div",{staticClass:"add-company-box"},[t("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:a.dialogLoading,expression:"dialogLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{title:a.titleText,visible:a.dialogFormVisible},on:{"update:visible":function(e){a.dialogFormVisible=e}}},[t("el-form",{ref:"dialogFormRuleForm",attrs:{model:a.dialogForm,rules:a.dialogFormRules}},[t("el-form-item",{attrs:{label:"公司名称:",prop:"companyNameVal","label-width":"150px"}},[t("el-input",{attrs:{placeholder:"请输入公司名称",maxlength:"30"},model:{value:a.dialogForm.companyNameVal,callback:function(e){a.$set(a.dialogForm,"companyNameVal",e)},expression:"dialogForm.companyNameVal"}})],1),t("el-form-item",{attrs:{label:"加盟公司类型:",prop:"companyTypeVal","label-width":"150px"}},[t("el-select",{attrs:{placeholder:"请选择加盟公司类型",clearable:""},model:{value:a.dialogForm.companyTypeVal,callback:function(e){a.$set(a.dialogForm,"companyTypeVal",e)},expression:"dialogForm.companyTypeVal"}},a._l(a.dialogForm.companyTypeData,(function(a){return t("el-option",{key:a.value,attrs:{label:a.name,value:a.value}})})),1)],1),t("el-form-item",{attrs:{label:"城市:",prop:"cityVal","label-width":"150px"}},[t("el-select",{attrs:{placeholder:"请选择城市",filterable:"",clearable:""},model:{value:a.dialogForm.cityVal,callback:function(e){a.$set(a.dialogForm,"cityVal",e)},expression:"dialogForm.cityVal"}},a._l(a.dialogForm.cityData,(function(a){return t("el-option",{key:a.id,attrs:{label:a.text,value:a.id}})})),1)],1),t("el-form-item",{attrs:{label:"微信数据上传:",prop:"wechatIsUploadVal","label-width":"150px"}},[t("el-select",{attrs:{placeholder:"请选择是否上传微信数据",clearable:""},model:{value:a.dialogForm.wechatIsUploadVal,callback:function(e){a.$set(a.dialogForm,"wechatIsUploadVal",e)},expression:"dialogForm.wechatIsUploadVal"}},a._l(a.dialogForm.wechatIsUploadData,(function(a){return t("el-option",{key:a.value,attrs:{label:a.name,value:a.value}})})),1)],1),t("el-form-item",{attrs:{prop:"remindDialogVal",label:"选择需要的强提醒框:","label-width":"150px"}},[t("el-select",{staticClass:"no-shake-select",attrs:{placeholder:"请选择强提醒框",multiple:""},model:{value:a.dialogForm.remindDialogVal,callback:function(e){a.$set(a.dialogForm,"remindDialogVal",e)},expression:"dialogForm.remindDialogVal"}},a._l(a.dialogForm.remindDialogData,(function(a){return t("el-option",{key:a.value,attrs:{label:a.name,value:a.value}})})),1)],1),t("el-form-item",{attrs:{label:"选择协作的公司:",prop:"cooperateOrgVal","label-width":"150px"}},[t("el-select",{attrs:{placeholder:"请选择协作公司",filterable:"",clearable:"",multiple:""},model:{value:a.dialogForm.cooperateOrgVal,callback:function(e){a.$set(a.dialogForm,"cooperateOrgVal",e)},expression:"dialogForm.cooperateOrgVal"}},a._l(a.dialogForm.cooperateOrgData,(function(a){return t("el-option",{key:a.value,attrs:{label:a.name,value:a.value}})})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){a.dialogFormVisible=!1}}},[a._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(e){return a.saveData("dialogFormRuleForm")}}},[a._v(" 保 存 ")])],1)],1)],1)],1)},r=[]}}]);