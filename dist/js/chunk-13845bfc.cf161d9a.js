(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-13845bfc"],{"0abf":function(e,t,a){"use strict";a.r(t);var i=a("442d"),o=a("60dc");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("53df");var n=a("2877"),s=Object(n.a)(o.default,i.a,i.b,!1,null,"60d8c341",null);t.default=s.exports},1067:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),r=i(a("8fa0")),n={data:function(){return{isProjectShow:"",isSubmiting:!1}},mounted:function(){this.getProjectInfo()},methods:{getProjectInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.default.getProjectInfoById({project_id:e.$route.query.projectId,fields:"is_show"});case 3:a=t.sent,i=a.data,o=i.code,n=i.msg,s=i.data,0===o?e.isProjectShow=s.is_show:e.$message.error(n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},autoSetDynamic:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.isSubmiting){t.next=3;break}return t.abrupt("return");case 3:return e.isSubmiting=!0,t.next=6,r.default.autoCreat({project_id:e.$route.query.projectId});case 6:a=t.sent,i=a.data,o=i.code,n=i.msg,0===o?(e.isSubmiting=!1,e.$message({type:"success",message:n})):(e.$message({type:"warning",message:n}),e.isSubmiting=!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),e.isSubmiting=!1,console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}}};t.default=n},"135f":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".flex-box[data-v-d32fa972]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.capacity-wrap[data-v-d32fa972]{font-size:14px;padding:15px;background-color:#fff;border-radius:8px}.capacity-wrap .head-line[data-v-d32fa972]{padding:15px 0;font-size:16px;font-weight:700;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.capacity-wrap .head-line h4[data-v-d32fa972]{-webkit-box-flex:1;-ms-flex:1;flex:1;padding-right:20px}.capacity-info-title[data-v-d32fa972]{position:relative;padding:0 10px 10px;border-bottom:1px solid #dcdfe6}.capacity-info-title .title-content[data-v-d32fa972]{font-size:15px;font-weight:700}.capacity-info-title .origin-title[data-v-d32fa972]{position:absolute;left:640px;top:0}.capacity-form[data-v-d32fa972]{margin-top:20px}.form-left-box[data-v-d32fa972]{min-width:520px}.form-left-box .item[data-v-d32fa972]{margin-left:25px;color:#f78f0f;font-size:16px;cursor:pointer}.form-left-box .item .focus[data-v-d32fa972]{font-weight:700}.form-left-box .single-ipt[data-v-d32fa972]{width:260px}.form-item-wrap[data-v-d32fa972] .el-form-item__content{display:-webkit-box;display:-ms-flexbox;display:flex}.house-mult-select[data-v-d32fa972]{width:320px}.house-mult-select[data-v-d32fa972] .el-tag.el-tag--info{width:auto;max-width:310px;white-space:inherit;height:auto}.mult-select[data-v-d32fa972]{width:320px}",""]),e.exports=t},1779:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"capacity-wrap"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",[a("a",{on:{click:e.goToListPage}},[e._v(e._s(e.breadText))])]),a("el-breadcrumb-item",[a("a",{on:{click:e.goToCapacityHandRoom}},[e._v("放量&交房")])]),a("el-breadcrumb-item",[e._v(" 放量计划页 ")]),a("el-breadcrumb-item",[e._v(e._s(e.isEdit?"编辑":"查看"))])],1),a("div",{staticClass:"capacity-info"},[a("div",{staticClass:"head-line flex-box"},[a("h4",[e._v(e._s(e.getProjectNameAndTypes())+"放量计划")]),2!=e.getEditAuth||e.isEdit?e._e():a("div",[a("auto-set-dynamic"),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editInfo("1")}}},[e._v(" 编辑 ")])],1)]),e.isEdit?e._e():a("div",{staticClass:"dynamic-sale-main"},[a("capacity-plan-detail",{attrs:{"info-data":e.originData}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}]},[a("div",{staticClass:"capacity-info-title"},[a("h3",{staticClass:"title-content"},[e._v("放量详情")]),e.getConfigList&&7===e.getConfigList.current_role_source?a("p",{staticClass:"origin-title"},[e._v("信息来源：")]):e._e()]),a("el-form",{ref:"capacityForm",staticClass:"capacity-form",attrs:{model:e.capacityForm,"label-width":"140px"}},[e.capacityForm.volume_type?a("el-form-item",{staticClass:"form-item-wrap",attrs:{prop:"volume_type.field_value",rules:e.planTypeRule,label:"放量计划类型"}},[a("div",{staticClass:"form-left-box"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.clearType,clear:e.clearType},model:{value:e.capacityForm.volume_type.field_value,callback:function(t){e.$set(e.capacityForm.volume_type,"field_value",t)},expression:"capacityForm.volume_type.field_value"}},e._l(e.getConfigList.volume_type,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),1==e.capacityForm.volume_type.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.capacityForm.volume_type.belong_other,"origin-arr":e.getConfigList.qd_source_list,"operate-msg":e.getOriginOperateInfo(e.capacityForm.volume_type,!1)},on:{"update:otherVal":function(t){return e.$set(e.capacityForm.volume_type,"belong_other",t)},"update:other-val":function(t){return e.$set(e.capacityForm.volume_type,"belong_other",t)}},model:{value:e.capacityForm.volume_type.belong_role,callback:function(t){e.$set(e.capacityForm.volume_type,"belong_role",t)},expression:"capacityForm.volume_type.belong_role"}}):e._e()],1):e._e(),e.capacityForm.volume_date_year?a("el-form-item",{staticClass:"form-item-wrap",attrs:{prop:"volume_date_year.field_value",rules:e.planTimeRule,label:"放量时间："}},[a("div",{staticClass:"form-left-box flex-box"},[a("date-picker-tenday",{attrs:{type:"1",year:e.capacityForm.volume_date_year.field_value,month:e.capacityForm.volume_date_month.field_value,day:e.capacityForm.volume_date_day.field_value,tenday:e.capacityForm.volume_date_ten.field_value},on:{change:function(t){return e.tendayChange(t,e.capacityForm.volume_date_day)},"update:year":function(t){return e.$set(e.capacityForm.volume_date_year,"field_value",t)},"update:month":function(t){return e.$set(e.capacityForm.volume_date_month,"field_value",t)},"update:day":function(t){return e.$set(e.capacityForm.volume_date_day,"field_value",t)},"update:tenday":function(t){return e.$set(e.capacityForm.volume_date_ten,"field_value",t)}},model:{value:e.capacityTime,callback:function(t){e.capacityTime=t},expression:"capacityTime"}})],1),1==e.capacityForm.volume_date_year.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.capacityForm.volume_date_year.belong_other,"origin-arr":e.getConfigList.qd_source_list,"operate-msg":e.getOriginOperateInfo(e.capacityForm.volume_date_year,!1)},on:{"update:otherVal":function(t){return e.$set(e.capacityForm.volume_date_year,"belong_other",t)},"update:other-val":function(t){return e.$set(e.capacityForm.volume_date_year,"belong_other",t)},change:function(t,a){return e.changeTenDate(t,a)}},model:{value:e.capacityForm.volume_date_year.belong_role,callback:function(t){e.$set(e.capacityForm.volume_date_year,"belong_role",t)},expression:"capacityForm.volume_date_year.belong_role"}}):e._e()],1):e._e(),e.capacityForm.relation_house_types?a("el-form-item",{staticClass:"form-item-wrap",attrs:{label:"关联户型："}},[a("div",{staticClass:"form-left-box"},[a("el-select",{staticClass:"house-mult-select no-shake-select",attrs:{multiple:"",placeholder:"请选择"},on:{focus:e.getHouseListById},model:{value:e.capacityForm.relation_house_types.field_value,callback:function(t){e.$set(e.capacityForm.relation_house_types,"field_value",t)},expression:"capacityForm.relation_house_types.field_value"}},e._l(e.relatedHouseTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showGotoDialog({path:"BuildAddHouseDetail",idName:"houseTypeId",isEdit:1})}}},[e._v(" 找不到去新增户型 ")])],1)],1),1==e.capacityForm.relation_house_types.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.capacityForm.relation_house_types.belong_other,"origin-arr":e.getConfigList.qd_source_list,"operate-msg":e.getOriginOperateInfo(e.capacityForm.relation_house_types,!1)},on:{"update:otherVal":function(t){return e.$set(e.capacityForm.relation_house_types,"belong_other",t)},"update:other-val":function(t){return e.$set(e.capacityForm.relation_house_types,"belong_other",t)}},model:{value:e.capacityForm.relation_house_types.belong_role,callback:function(t){e.$set(e.capacityForm.relation_house_types,"belong_role",t)},expression:"capacityForm.relation_house_types.belong_role"}}):e._e()],1):e._e(),e.capacityForm.relation_buildings?a("el-form-item",{staticClass:"form-item-wrap",attrs:{label:"关联楼栋："}},[a("div",{staticClass:"form-left-box"},[a("select-building",{staticClass:"mult-select",attrs:{options:e.relatedBuilding},model:{value:e.capacityForm.relation_buildings.field_value,callback:function(t){e.$set(e.capacityForm.relation_buildings,"field_value",t)},expression:"capacityForm.relation_buildings.field_value"}}),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showGotoDialog({path:"buildingDetailEdit",idName:"buildingId",isEdit:1})}}},[e._v(" 找不到去新增楼栋 ")])],1)],1),1==e.capacityForm.relation_buildings.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.capacityForm.relation_buildings.belong_other,"origin-arr":e.getConfigList.qd_source_list,"operate-msg":e.getOriginOperateInfo(e.capacityForm.relation_buildings,!1)},on:{"update:otherVal":function(t){return e.$set(e.capacityForm.relation_buildings,"belong_other",t)},"update:other-val":function(t){return e.$set(e.capacityForm.relation_buildings,"belong_other",t)}},model:{value:e.capacityForm.relation_buildings.belong_role,callback:function(t){e.$set(e.capacityForm.relation_buildings,"belong_role",t)},expression:"capacityForm.relation_buildings.belong_role"}}):e._e()],1):e._e(),e.capacityForm.is_need_paihao?a("el-form-item",{staticClass:"form-item-wrap",attrs:{label:"放量前是否有排号："}},[a("div",{staticClass:"form-left-box"},[a("el-radio-group",{on:{change:e.changeWaitingStatus},model:{value:e.capacityForm.is_need_paihao.field_value,callback:function(t){e.$set(e.capacityForm.is_need_paihao,"field_value",t)},expression:"capacityForm.is_need_paihao.field_value"}},e._l(e.getConfigList.is_need_paihao,(function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.text)+" ")])})),1)],1),1==e.capacityForm.is_need_paihao.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.capacityForm.is_need_paihao.belong_other,"origin-arr":e.getConfigList.qd_source_list,"operate-msg":e.getOriginOperateInfo(e.capacityForm.is_need_paihao,!1)},on:{change:function(t,a){return e.changeWaitingSource(e.capacityForm.is_need_paihao.field_value,t,a)},"update:otherVal":function(t){return e.$set(e.capacityForm.is_need_paihao,"belong_other",t)},"update:other-val":function(t){return e.$set(e.capacityForm.is_need_paihao,"belong_other",t)}},model:{value:e.capacityForm.is_need_paihao.belong_role,callback:function(t){e.$set(e.capacityForm.is_need_paihao,"belong_role",t)},expression:"capacityForm.is_need_paihao.belong_role"}}):e._e()],1):e._e(),e.capacityForm.paihao_status&&e.capacityForm.is_need_paihao&&2!=e.capacityForm.is_need_paihao.field_value?a("el-form-item",{staticClass:"form-item-wrap",attrs:{label:"排号状态："}},[a("div",{staticClass:"form-left-box"},[a("el-radio-group",{model:{value:e.capacityForm.paihao_status.field_value,callback:function(t){e.$set(e.capacityForm.paihao_status,"field_value",t)},expression:"capacityForm.paihao_status.field_value"}},e._l(e.getConfigList.paihao_status,(function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.text)+" ")])})),1)],1),1==e.capacityForm.paihao_status.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.capacityForm.paihao_status.belong_other,"origin-arr":e.getConfigList.qd_source_list,"operate-msg":e.getOriginOperateInfo(e.capacityForm.paihao_status,!1)},on:{"update:otherVal":function(t){return e.$set(e.capacityForm.paihao_status,"belong_other",t)},"update:other-val":function(t){return e.$set(e.capacityForm.paihao_status,"belong_other",t)}},model:{value:e.capacityForm.paihao_status.belong_role,callback:function(t){e.$set(e.capacityForm.paihao_status,"belong_role",t)},expression:"capacityForm.paihao_status.belong_role"}}):e._e()],1):e._e(),e.capacityForm.paihao_start_datetime&&e.capacityForm.is_need_paihao&&2!=e.capacityForm.is_need_paihao.field_value?a("el-form-item",{staticClass:"form-item-wrap",attrs:{label:"排号开始时间："}},[a("div",{staticClass:"form-left-box flex-box"},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.capacityForm.paihao_start_datetime.field_value,callback:function(t){e.$set(e.capacityForm.paihao_start_datetime,"field_value",t)},expression:"capacityForm.paihao_start_datetime.field_value"}})],1),1==e.capacityForm.paihao_start_datetime.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.capacityForm.paihao_start_datetime.belong_other,"origin-arr":e.getConfigList.qd_source_list,"operate-msg":e.getOriginOperateInfo(e.capacityForm.paihao_start_datetime,!1)},on:{"update:otherVal":function(t){return e.$set(e.capacityForm.paihao_start_datetime,"belong_other",t)},"update:other-val":function(t){return e.$set(e.capacityForm.paihao_start_datetime,"belong_other",t)}},model:{value:e.capacityForm.paihao_start_datetime.belong_role,callback:function(t){e.$set(e.capacityForm.paihao_start_datetime,"belong_role",t)},expression:"capacityForm.paihao_start_datetime.belong_role"}}):e._e()],1):e._e(),e.capacityForm.paihao_end_datetime&&e.capacityForm.is_need_paihao&&2!=e.capacityForm.is_need_paihao.field_value?a("el-form-item",{staticClass:"form-item-wrap",attrs:{label:"排号结束时间："}},[a("div",{staticClass:"form-left-box flex-box"},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.capacityForm.paihao_end_datetime.field_value,callback:function(t){e.$set(e.capacityForm.paihao_end_datetime,"field_value",t)},expression:"capacityForm.paihao_end_datetime.field_value"}})],1),1==e.capacityForm.paihao_end_datetime.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.capacityForm.paihao_end_datetime.belong_other,"origin-arr":e.getConfigList.qd_source_list,"operate-msg":e.getOriginOperateInfo(e.capacityForm.paihao_end_datetime,!1)},on:{"update:otherVal":function(t){return e.$set(e.capacityForm.paihao_end_datetime,"belong_other",t)},"update:other-val":function(t){return e.$set(e.capacityForm.paihao_end_datetime,"belong_other",t)}},model:{value:e.capacityForm.paihao_end_datetime.belong_role,callback:function(t){e.$set(e.capacityForm.paihao_end_datetime,"belong_role",t)},expression:"capacityForm.paihao_end_datetime.belong_role"}}):e._e()],1):e._e(),e.capacityForm.note?a("el-form-item",{attrs:{label:"备注："}},[a("div",{staticClass:"form-left-box flex-box"},[a("el-input",{attrs:{type:"textarea",rows:5,maxlength:1024,placeholder:"请输入备注信息","show-word-limit":""},model:{value:e.capacityForm.note.field_value,callback:function(t){e.$set(e.capacityForm.note,"field_value",t)},expression:"capacityForm.note.field_value"}}),1==e.capacityForm.note.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.capacityForm.note.belong_other,"origin-arr":e.getConfigList.qd_source_list,"operate-msg":e.getOriginOperateInfo(e.capacityForm.note,!1)},on:{"update:otherVal":function(t){return e.$set(e.capacityForm.note,"belong_other",t)},"update:other-val":function(t){return e.$set(e.capacityForm.note,"belong_other",t)}},model:{value:e.capacityForm.note.belong_role,callback:function(t){e.$set(e.capacityForm.note,"belong_role",t)},expression:"capacityForm.note.belong_role"}}):e._e()],1)]):e._e(),a("el-form-item",{staticClass:"mark-form"},[a("el-button",{on:{click:e.cancleEdit}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.getInfoValid}},[e._v(" 保存 ")])],1)],1)],1)])],1)},o=[]},"18bb":function(e,t,a){var i=a("bcfa");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("2b432e2d",i,!0,{sourceMap:!1,shadowMode:!1})},2417:function(e,t,a){var i=a("b973");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("c8528210",i,!0,{sourceMap:!1,shadowMode:!1})},"3b40":function(e,t,a){"use strict";a.r(t);var i=a("cb6b3"),o=a("ca8f");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("62f1");var n=a("2877"),s=Object(n.a)(o.default,i.a,i.b,!1,null,"6acdc162",null);t.default=s.exports},"3e808":function(e,t,a){"use strict";a.r(t);var i=a("d73d"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"442d":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-detail"},[e.infoData?a("div",[e._m(0),e.infoData?a("div",{staticClass:"info-content-wrap"},[a("el-form",{attrs:{"label-width":"140px"}},[e._l(e.infoData,(function(t,i){return[e.hideField.includes(i)?e._e():a("el-form-item",{key:i,staticClass:"form-item-wrap",attrs:{label:("volume_date_year"===t.field_name?"放量时间":t.field_desc)+"："}},[a("div",{staticClass:"form-left-box flex-box"},[a("div",{staticClass:"filed-value"},[e._v(e._s(e.getValueOrText(t)))]),1==t.is_show_belong_role?a("div",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t))+" ")]):e._e()])])]}))],2)],1):e._e()]):e._e()])},o=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"info-detail-title"},[t("h3",{staticClass:"title-content"},[this._v("放量详情")])])}]},"4c3a":function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("4160"),a("a630"),a("caad"),a("c975"),a("a15b"),a("b0c0"),a("a9e3"),a("b680"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("6062"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.isRequiredInfoOrigin=function(e,t,a,i,o){var r="";r=a?function(e,t,a,i){var o=[];t.forEach((function(t,r){for(var n in t){var s=t[n].field_value,l=e[r][n].field_value;-1===["total_count","on_sale_num","car_space","under_floor_num","total_house_num","unit_num","house_on_sale_num"].indexOf(n)?(s=0===Number(s)?"":s,l=0===Number(l)?"":l):(s+="",l+=""),"offer_price"!==n&&"price"!==n||(s=s?Number(s):"",l=l?Number(l):"");var u=t[n].belong_role,d=t[n].is_show_belong_role,f=t[n].belong_other;if("1"==d)if(a){var p=t[n].field_desc;["layout_ting","layout_shi","layout_chu","layout_wei"].includes(n)&&(p="厅室描述"),Array.isArray(s)?c(s,l)||u&&(10!==u||""!==f)||o.push(p):s===l||u&&(10!==u||""!==f)||o.push(p)}else{if(0!==o.length)return!1;var m=t[n].field_desc;["volume_date_year","volume_date_month","volume_date_day","volume_date_ten"].includes(n)&&(m="放量时间"),["live_date_year","live_date_month","live_date_day","live_date_ten"].includes(n)&&(m="交房时间"),["layout_ting","layout_shi","layout_chu","layout_wei"].includes(n)&&(m="厅室描述"),"户型信息模块："===i&&(m="户型（"+t.house_type_num.field_value+"）的"+m),Array.isArray(s)?c(s,l)||u&&(10!==u||""!==f)||o.push(m):s==l||u&&(10!==u||""!==f)||o.push(m)}}}));var r=new Set(o);return Array.from(r)}(e,t,o,i):function(e,t){var a=[];for(var i in t){var o=t[i].field_value,r=e[i].field_value,n=t[i].belong_role,s=t[i].belong_other;if("1"==e[i].is_show_belong_role){var l=t[i].field_desc;["volume_date_year","volume_date_month","volume_date_day","volume_date_ten"].includes(i)&&(l="放量时间");["relation_buildings","relation_house_types"].includes(i)&&""===r&&(r=[]),Array.isArray(o)?c(o,r)||n&&(10!==n||""!==s)||a.push(l):o==r||n&&(10!==n||""!==s)||a.push(l)}}var u=new Set(a);return Array.from(u)}(e,t);var n="",s=i||"";r.length>0&&(r.forEach((function(e){n+=e+"、"})),n=n.substring(0,n.length-1),this.$alert(s+n+"的信息来源是必填项","信息来源",{confirmButtonText:"确定"}));return 0===r.length},t.confirmMsg=function(e){var t=this;return new Promise((function(a){t.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",showClose:!1,closeOnClickModal:!1,type:"warning"}).then((function(){a(!0)})).catch((function(){a(!1),t.$message({type:"info",message:"已取消操作"})}))}))},t.confirmDefindMsg=function(e){var t=this,a=e.msg,i=e.confirmText,o=e.cancleText,r=e.confirmFn,n=e.cancleFn;return new Promise((function(e){t.$confirm(a,"提示",{confirmButtonText:i||"确定",cancelButtonText:o||"取消",showClose:!1,closeOnClickModal:!1,type:"warning"}).then((function(){r&&r(),e(!0)})).catch((function(){n&&n(),e(!1)}))}))},t.underline=function(e){if(!e)return e;return e.replace(/\B([A-Z])/g,"_$1").toLowerCase()},t.yuanToWan=function(e){if(isNaN(Number(e)))return console.warn("".concat(e,"无法转成数字")),e;if(!e)return e;return+(Number(e)/1e4).toFixed(4)},t.errorScroll=function(e){var t=null;clearInterval(t),t=setInterval((function(){document.documentElement.scrollTop=e.offsetTop-112,clearInterval(t)}),10)},t.getOriginOperateInfo=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var a=e.belong_other,i=void 0===a?"":a,o=e.belong_role_text,n=void 0===o?"":o,s=e.belong_datetime,l=void 0===s?"":s,c=e.belong_employee_name,u=void 0===c?"":c,d=e.belong_employee_id,f=void 0===d?"":d,p=i?"-".concat(i):"",m=l&&r.default.filterDate(1e3*l,"YYYY-MM-DD HH:mm:ss");return t?m||u||f?"".concat(n).concat(p," ").concat(m," ").concat(u," ").concat(f?"-"+f:""):"":m||u||f?"".concat(m," ").concat(u," ").concat(f?"-"+f:""):""}catch(e){console.log(e)}},t.filterDate=function(e,t){return""===e?"":(0,n.default)(1e3*e).format(t)},t.arrayIsEqua=c,t.getCurMonthDays=u,t.getComputedTimeByTenData=function(e){try{var t=e.year,a=e.month,i=e.day,o=void 0===i?"":i,r=e.ten,n=void 0===r?"":r;return a=a||12,n&&(1==n||2==n?o=10*n:3==n&&(o=u(a,t))),"".concat(t,"-").concat(a,"-").concat(o)}catch(e){console.log(e)}},t.getHrefUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.$route.query,i=a.projectId,o=a.taskId,r=void 0===o?"":o,n=a.role,s=void 0===n?"":n,l=a.buildingType,c=void 0===l?"":l,u=a.projectName,d=void 0===u?"":u,f=a.cityId,p=void 0===f?"":f,m="/dist/building/tabToggleList?projectId=".concat(i);return"".concat(m,"&taskId=").concat(r,"&role=").concat(s,"&cityId=").concat(p,"&projectName=").concat(d,"&buildingType=").concat(c,"&positionTab=").concat(e,"&isEdit=").concat(t)},t.getProjectNameAndTypes=function(){var e=this.$route.query,t=e.projectName,a=void 0===t?"":t,i=e.buildingType,o=void 0===i?"":i;return a&&"".concat(a).concat(o,"--")},t.getNecessaryData=function(e){var t={};return Object.keys(e).forEach((function(a){var i=e[a];t[a]={field_id:i.field_id,field_name:i.field_name,field_value:i.field_value,field_desc:i.field_desc,belong_role:i.belong_role,belong_other:i.belong_other,is_show_belong_role:i.is_show_belong_role,table_id:i.table_id,isNew:!0}})),t},t.setTrack=function(e,t){s.commonFun.setTrackMenu(e,t)},t.getInfoByProjectId=function(e,t){return d.apply(this,arguments)},t.toRouterLink=function(e,t){var a=s.commonFun.deepClone(this.$route.query);a.positionTab=e,a.isEdit=t,a.isEdit||delete a.isEdit;this.$router.push({name:this.$route.name,query:a})},a("96cf");var o=i(a("1da1")),r=i(a("a5a1")),n=i(a("c1df")),s=a("7223"),l=i(a("8fa0"));function c(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.sort((function(e,t){return e-t})).join("")==t.sort((function(e,t){return e-t})).join("")}function u(e,t){var a=t||(new Date).getFullYear(),i=new Date(a,e.toString()).getTime()-864e5;return new Date(i).getDate()}function d(){return(d=(0,o.default)(regeneratorRuntime.mark((function e(t,a){var i,o,r,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={project_id:t,fields:a},e.next=4,l.default.getProjectInfoById(i);case 4:if(o=e.sent,r=o.data,n=r.code,s=r.data,0!==n){e.next=8;break}return e.abrupt("return",s);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}},"4fd0":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("23f7"),o={getCapacityInfo:function(e){return i.axios.get("/backend-api/project/project-volume/get-info",{params:e})},saveCapacityInfo:function(e){return i.axios.post("/backend-api/project/project-volume/save-info",e)}};t.default=o},"53df":function(e,t,a){"use strict";a("af7f")},"53ec":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this.$createElement,t=this._self._c||e;return this.isProjectShow&&"1"===this.isProjectShow&&!this.$route.query.taskId?t("el-button",{attrs:{type:"warning"},on:{click:this.autoSetDynamic}},[this._v(" 自动生成动态 ")]):this._e()},o=[]},"5a46":function(e,t,a){var i=a("135f");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("032f4008",i,!0,{sourceMap:!1,shadowMode:!1})},6062:function(e,t,a){"use strict";var i=a("6d61"),o=a("6566");e.exports=i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},"60dc":function(e,t,a){"use strict";a.r(t);var i=a("90d3"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"62f1":function(e,t,a){"use strict";a("18bb")},6566:function(e,t,a){"use strict";var i=a("9bf2").f,o=a("7c73"),r=a("e2cc"),n=a("0366"),s=a("19aa"),l=a("2266"),c=a("7dd0"),u=a("2626"),d=a("83ab"),f=a("f183").fastKey,p=a("69f3"),m=p.set,h=p.getterFor;e.exports={getConstructor:function(e,t,a,c){var u=e((function(e,i){s(e,u,t),m(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=i&&l(i,e[c],{that:e,AS_ENTRIES:a})})),p=h(t),_=function(e,t,a){var i,o,r=p(e),n=g(e,t);return n?n.value=a:(r.last=n={index:o=f(t,!0),key:t,value:a,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=n),i&&(i.next=n),d?r.size++:e.size++,"F"!==o&&(r.index[o]=n)),e},g=function(e,t){var a,i=p(e),o=f(t);if("F"!==o)return i.index[o];for(a=i.first;a;a=a.next)if(a.key==t)return a};return r(u.prototype,{clear:function(){for(var e=p(this),t=e.index,a=e.first;a;)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete t[a.index],a=a.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=p(this),a=g(this,e);if(a){var i=a.next,o=a.previous;delete t.index[a.index],a.removed=!0,o&&(o.next=i),i&&(i.previous=o),t.first==a&&(t.first=i),t.last==a&&(t.last=o),d?t.size--:this.size--}return!!a},forEach:function(e){for(var t,a=p(this),i=n(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:a.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),r(u.prototype,a?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return _(this,0===e?0:e,t)}}:{add:function(e){return _(this,e=0===e?0:e,e)}}),d&&i(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(e,t,a){var i=t+" Iterator",o=h(t),r=h(i);c(e,t,(function(e,t){m(this,{type:i,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=r(this),t=e.kind,a=e.last;a&&a.removed;)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(t)}}},"65ba":function(e,t,a){"use strict";a.r(t);var i=a("53ec"),o=a("85db");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var n=a("2877"),s=Object(n.a)(o.default,i.a,i.b,!1,null,"19f1d1d2",null);t.default=s.exports},"6d61":function(e,t,a){"use strict";var i=a("23e7"),o=a("da84"),r=a("94ca"),n=a("6eeb"),s=a("f183"),l=a("2266"),c=a("19aa"),u=a("861d"),d=a("d039"),f=a("1c7e"),p=a("d44e"),m=a("7156");e.exports=function(e,t,a){var h=-1!==e.indexOf("Map"),_=-1!==e.indexOf("Weak"),g=h?"set":"add",v=o[e],y=v&&v.prototype,b=v,x={},F=function(e){var t=y[e];n(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(_&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return _&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(_&&!u(e))&&t.call(this,0===e?0:e)}:function(e,a){return t.call(this,0===e?0:e,a),this})};if(r(e,"function"!=typeof v||!(_||y.forEach&&!d((function(){(new v).entries().next()})))))b=a.getConstructor(t,e,h,g),s.REQUIRED=!0;else if(r(e,!0)){var w=new b,k=w[g](_?{}:-0,1)!=w,$=d((function(){w.has(1)})),C=f((function(e){new v(e)})),I=!_&&d((function(){for(var e=new v,t=5;t--;)e[g](t,t);return!e.has(-0)}));C||((b=t((function(t,a){c(t,b,e);var i=m(new v,t,b);return null!=a&&l(a,i[g],{that:i,AS_ENTRIES:h}),i}))).prototype=y,y.constructor=b),($||I)&&(F("delete"),F("has"),h&&F("get")),(I||k)&&F(g),_&&y.clear&&delete y.clear}return x[e]=b,i({global:!0,forced:b!=v},x),p(b,e),_||a.setStrong(b,e,h),b}},"700f":function(e,t,a){"use strict";a("c975"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("7223"),o={name:"select-building",props:{value:{type:Array,default:function(){return[]}},options:{type:Array,default:function(){return[]}}},watch:{value:{handler:function(e,t){this.buildings=this.value},immediate:!0},buildings:{handler:function(e,t){this.$emit("input",this.buildings)}},options:{handler:function(e,t){this.buildingOptions=i.commonFun.deepClone(e)},deep:!0,immediate:!0}},data:function(){return{buildings:[],buildingOptions:[]}},methods:{changeBuildings:function(e){if("-1"===e[e.length-1]){for(var t=[],a=0;a<this.buildingOptions.length;a++){var i=this.buildingOptions[a];i.disabled&&-1!==this.buildings.indexOf(i.id)&&t.push(i.id),i.disabled||t.push(i.id)}this.buildings=t,this.$emit("change",t),this.$refs.relationBuilds.blur()}else this.$emit("change",e)},removeBuildings:function(e){this.$emit("remove-tag",e)}}};t.default=o},"7b19":function(e,t,a){"use strict";a.r(t);var i=a("9f18"),o=a("fa72");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var n=a("2877"),s=Object(n.a)(o.default,i.a,i.b,!1,null,null,null);t.default=s.exports},"85db":function(e,t,a){"use strict";a.r(t);var i=a("1067"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"88ff":function(e,t,a){"use strict";a.r(t);var i=a("ae0e"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"8f99":function(e,t,a){"use strict";a.r(t);var i=a("aa32"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"90d3":function(e,t,a){"use strict";a("caad"),a("a15b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("4c3a"),o={name:"CapacityPlanDetail",props:{infoData:{type:Object,default:function(){}}},data:function(){return{getOriginOperateInfo:i.getOriginOperateInfo}},computed:{hideField:function(){var e=["id","volume_date_month","volume_date_day","volume_date_ten"];if(this.infoData.is_need_paihao&&"2"===this.infoData.is_need_paihao.field_value){return e.push.apply(e,["paihao_status","paihao_start_datetime","paihao_end_datetime"]),e}return e}},created:function(){if(this.infoData.is_need_paihao&&"2"===this.infoData.is_need_paihao.field_value){var e;(e=this.hideField).push.apply(e,["paihao_status","paihao_start_datetime","paihao_end_datetime"])}},methods:{getValueOrText:function(e){var t=e.field_value;return"volume_date_year"===e.field_name&&(t=e.field_text_all),["volume_type","relation_house_types","relation_buildings","is_need_paihao","paihao_status"].includes(e.field_name)&&(t=Array.isArray(e.field_text)?e.field_text.join(","):e.field_text),t}}};t.default=o},"990f":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".flex-box[data-v-60d8c341]{display:-webkit-box;display:-ms-flexbox;display:flex}.info-detail[data-v-60d8c341]{padding:0 10px}.info-detail-title[data-v-60d8c341]{padding:0 15px 10px;border-bottom:1px solid #dcdfe6}.info-detail-title .title-content[data-v-60d8c341]{font-size:15px;font-weight:700}.info-content-wrap[data-v-60d8c341]{margin-bottom:30px;padding:20px 10px}.form-left-box .filed-value[data-v-60d8c341]{padding-right:25px}.info-source[data-v-60d8c341]{color:#bbb}",""]),e.exports=t},"9f18":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"relationBuilds",staticClass:"no-shake-select",attrs:{multiple:"",placeholder:"请选择"},on:{change:e.changeBuildings,"remove-tag":e.removeBuildings},model:{value:e.buildings,callback:function(t){e.buildings=t},expression:"buildings"}},[e.buildingOptions&&e.buildingOptions.length>0?a("el-option",{attrs:{label:"全部",value:"-1"}}):e._e(),e._l(e.buildingOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,disabled:e.disabled,value:e.id}})}))],2)},o=[]},a15b:function(e,t,a){"use strict";var i=a("23e7"),o=a("44ad"),r=a("fc6a"),n=a("a640"),s=[].join,l=o!=Object,c=n("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(e){return s.call(r(this),void 0===e?",":e)}})},a5a1:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("c1df")),r={filterDate:function(e,t){if(e){var a=parseInt(e);return(0,o.default)(a).format(t)}}};t.default=r},aa32:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"MsgDialog",data:function(){return{dialogVisble:this.dialogShow}},props:{width:{type:String,default:"30%"},dialogShow:{type:Boolean,default:!1},center:{type:Boolean,default:!0},title:{type:String,default:"提示"}},watch:{dialogShow:function(e){this.dialogVisble=e}},methods:{dialogConfirm:function(){this.$emit("confirm")},close:function(){this.$emit("closeDialog")}}};t.default=i},ad79:function(e,t,a){"use strict";a("5a46")},ae0e:function(e,t,a){"use strict";a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"InfoOrigin",props:{otherVal:{type:String,default:""},value:{type:[String,Number],default:""},operateMsg:{type:String,default:""},isBreak:{type:Boolean,default:!1},originArr:{type:Array,default:function(){return[]}}},watch:{value:function(e){this.originValue=e},otherVal:function(e){this.otherValue=e}},data:function(){return{originValue:this.value,otherValue:this.otherVal}},methods:{otherValInput:function(e){this.$emit("update:otherVal",e),this.$emit("change",this.originValue,this.otherValue)},radioChange:function(e){this.otherValue="",this.$emit("input",e),this.$emit("change",e,this.otherValue),this.$emit("update:otherVal",this.otherValue)}}};t.default=i},af7f:function(e,t,a){var i=a("990f");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("59e4bab6",i,!0,{sourceMap:!1,shadowMode:!1})},af86:function(e,t,a){"use strict";a("7db0"),a("a9e3"),a("d3b7"),a("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("f8fe"),o=(new Date).getFullYear(),r={name:"DatePickerTenday",props:{minYear:{type:Number,default:1970,validator:function(e){return e>=1970}},maxYear:{type:Number,default:2050,validator:function(e){return e>=1970}},type:{type:String,default:"1"},value:{type:String,default:""},year:{type:[String,Number],default:""},month:{type:[String,Number],default:""},day:{type:[String,Number],default:""},tenday:{type:[String,Number],default:""}},created:function(){this.initDate()},computed:{monthRule:function(){return"1"===this.type?[{required:!0,message:"请选择月份",trigger:"change"}]:{required:!1}},propYear:function(){var e=this.year;return e?Number(e)<1970?(this.$message.error("year年份需大于等于1970年"),1970):e:""},propMonth:function(){var e=this.month;return e?Number(e)<1||Number(e)>12?(this.$message.error("请传入有效的月份1-12月"),""):e:""},propDay:function(){var e=this.day;return e?Number(e)<1||Number(e)>31?(this.$message.error("请传入有效的天数1-31天"),""):e:""}},watch:{value:function(e){this.dateValue=e}},data:function(){return{dateValue:this.value,selectDialogVisible:!1,yearList:[],monthList:[],dayList:[],tendayList:i.tendayList,dateForm:{year:"",month:"",day:"",tenday:""}}},methods:{initDate:function(){this.dateForm.year=this.propYear||"",this.dateForm.month=this.propMonth||"",this.dateForm.day=this.propDay||"",this.dateForm.tenday=Number(this.tenday)||"",this.joinDateStr(this.dateForm),this.dateForm.year=this.propYear||o,this.yearList=this.createYearList(),this.monthList=[1,2,3,4,5,6,7,8,9,10,11,12],this.dayList=this.createDays(this.propMonth)},createYearList:function(){for(var e=Number(this.minYear)<1970?1970:Number(this.minYear),t=Number(this.maxYear)<1970?2050:Number(this.maxYear),a=[],i=e;i<=t;i++)a.push(i);return a},getCurMonthDays:function(e){if(!e)return!1;var t=this.dateForm.year.toString(),a=new Date(t,e.toString()).getTime()-864e5;return new Date(a).getDate()},createDays:function(e){var t=[],a=this.getCurMonthDays(e);if(!a)return[];for(var i=1;i<=a;i++){var o=i;t.push(o)}return t},changeMonth:function(e){this.dayList=this.createDays(e),this.dateForm.day=""},changeDay:function(e){if(""!==e){if(""===this.dateForm.month)return this.$message.warning("请先选择月份！"),void(this.dateForm.day="");this.$refs.dateForm.clearValidate("tenday"),this.dateForm.tenday=""}},changeTenday:function(e){if(""!==e){if(""===this.dateForm.month)return this.$message.warning("请先选择月份！"),void(this.dateForm.tenday="");this.$refs.dateForm.clearValidate("day"),this.dateForm.day=""}},handleOpenSelect:function(){this.dateForm.year=this.propYear||o,this.dateForm.month=this.propMonth||"",this.dateForm.day=this.propDay||"",this.dateForm.tenday=Number(this.tenday)||"",this.dateForm.tenday&&(this.dateForm.day=""),this.selectDialogVisible=!0},joinDateStr:function(e){var t=e.year,a=e.month,i=e.day,o=e.tenday,r=t&&"".concat(t,"年"),n=a&&"".concat(a,"月"),s=Number(i)&&"".concat(i,"日"),l=this.tendayList.find((function(e){return e.value==o})),c=o&&l&&l.text;t&&(this.dateValue=r+n+(s||c),this.$emit("input",this.dateValue))},submitDate:function(){var e=this;this.$refs.dateForm.validate((function(t){if(!t)return!1;e.joinDateStr(e.dateForm),e.dateForm.tenday&&(3!==e.dateForm.tenday?e.dateForm.day=10*e.dateForm.tenday:e.dateForm.day=e.getCurMonthDays(e.dateForm.month)||""),e.$emit("input",e.dateValue),e.$emit("update:year",e.dateForm.year),e.$emit("update:month",e.dateForm.month),e.$emit("update:day",e.dateForm.day),e.$emit("update:tenday",e.dateForm.tenday),e.$emit("change",e.dateForm),e.selectDialogVisible=!1}))}}};t.default=r},b5c0:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-origin"},[a("div",{staticClass:"radio-box"},[a("el-radio-group",{class:{"radio-group":!e.isBreak,"radio-break":e.isBreak},on:{change:e.radioChange},model:{value:e.originValue,callback:function(t){e.originValue=t},expression:"originValue"}},[e._l(e.originArr,(function(t,i){return a("el-radio",{key:i,staticClass:"origin-radio",attrs:{label:t.id}},[e._v(" "+e._s(t.text)+" ")])})),a("el-input",{directives:[{name:"show",rawName:"v-show",value:10==e.originValue,expression:"originValue == 10"}],staticClass:"other-origin",attrs:{size:"small"},on:{input:e.otherValInput},model:{value:e.otherValue,callback:function(t){e.otherValue=t},expression:"otherValue"}})],2)],1),a("div",{staticClass:"time-info"},[e._v(" "+e._s(e.operateMsg)+" ")])])},o=[]},b96b:function(e,t,a){"use strict";a("2417")},b973:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".radio-group[data-v-0d35b81b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px}.radio-group .origin-radio.el-radio[data-v-0d35b81b]{margin-right:7px}.radio-group .origin-radio.el-radio[data-v-0d35b81b] .el-radio__label{padding-left:4px}.radio-group .other-origin[data-v-0d35b81b]{width:71px}.radio-break[data-v-0d35b81b]{width:322px;height:40px;line-height:26px;display:inline-block;margin-bottom:24px}.radio-break .origin-radio.el-radio[data-v-0d35b81b]{margin-right:10px}.radio-break .origin-radio.el-radio[data-v-0d35b81b] .el-radio__label{padding-left:4px}.radio-break .other-origin[data-v-0d35b81b]{width:100px}.time-info[data-v-0d35b81b]{line-height:1;color:#777}",""]),e.exports=t},bb2f:function(e,t,a){var i=a("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bcfa:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".select[data-v-6acdc162]{width:160px}",""]),e.exports=t},bdd3:function(e,t,a){"use strict";a.r(t);var i=a("1779"),o=a("3e808");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("ad79");var n=a("2877"),s=Object(n.a)(o.default,i.a,i.b,!1,null,"d32fa972",null);t.default=s.exports},ca8f:function(e,t,a){"use strict";a.r(t);var i=a("af86"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},caad:function(e,t,a){"use strict";var i=a("23e7"),o=a("4d64").includes,r=a("44d2");i({target:"Array",proto:!0,forced:!a("ae40")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},cb6b3:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-wrap-box"},[a("el-input",{staticClass:"select-input",attrs:{placeholder:"点击选择日期",readonly:""},on:{focus:e.handleOpenSelect},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),a("div",{staticClass:"dialog-wrap-select"},[a("el-dialog",{attrs:{"append-to-body":!0,title:"日期选择弹窗",visible:e.selectDialogVisible,width:"744px",center:""},on:{"update:visible":function(t){e.selectDialogVisible=t}}},[a("div",{staticClass:"select-wrap"},[a("el-form",{ref:"dateForm",staticClass:"date-form",attrs:{model:e.dateForm,inline:!0}},[a("el-form-item",{attrs:{rules:[{required:!0,message:"请选择年份",trigger:"change"}],prop:"year"}},[a("el-select",{staticClass:"year select",attrs:{clearable:"",placeholder:"年"},on:{change:function(t){return e.changeMonth(e.dateForm.month)}},model:{value:e.dateForm.year,callback:function(t){e.$set(e.dateForm,"year",t)},expression:"dateForm.year"}},e._l(e.yearList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{rules:e.monthRule,prop:"month"}},[a("el-select",{staticClass:"month select",attrs:{clearable:"",placeholder:"月"},on:{change:e.changeMonth},model:{value:e.dateForm.month,callback:function(t){e.$set(e.dateForm,"month",t)},expression:"dateForm.month"}},e._l(e.monthList,(function(e){return a("el-option",{key:e,attrs:{label:1===String(e).length?String("0"+e):String(e),value:e}})})),1)],1),a("el-form-item",{attrs:{prop:"day"}},[a("el-select",{staticClass:"day select",attrs:{clearable:"",placeholder:"日"},on:{change:e.changeDay},model:{value:e.dateForm.day,callback:function(t){e.$set(e.dateForm,"day",t)},expression:"dateForm.day"}},e._l(e.dayList,(function(e){return a("el-option",{key:e,attrs:{label:1===String(e).length?String("0"+e):String(e),value:e}})})),1)],1),a("el-form-item",{attrs:{prop:"tenday"}},[a("el-select",{staticClass:"ten-day-period select",attrs:{clearable:"",placeholder:"旬"},on:{change:e.changeTenday},model:{value:e.dateForm.tenday,callback:function(t){e.$set(e.dateForm,"tenday",t)},expression:"dateForm.tenday"}},e._l(e.tendayList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.selectDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitDate}},[e._v(" 确 定 ")])],1)])],1)],1)},o=[]},d73d:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("4160"),a("caad"),a("c975"),a("a15b"),a("b0c0"),a("a9e3"),a("b64b"),a("ac1f"),a("5319"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),r=i(a("5530")),n=a("2f62"),s=i(a("dc0d")),l=i(a("f149")),c=i(a("65ba")),u=i(a("3b40")),d=i(a("7b19")),f=i(a("0abf")),p=a("7223"),m=a("4c3a"),h=i(a("8fa0")),_=i(a("4fd0")),g={name:"CapacityPlan",components:{InfoOrigin:s.default,MsgDialog:l.default,DatePickerTenday:u.default,CapacityPlanDetail:f.default,AutoSetDynamic:c.default,SelectBuilding:d.default},computed:(0,r.default)((0,r.default)({},(0,n.mapState)({houseTypeId:function(e){return e.buildingDictionary.houseTypeId},getEditAuth:function(e){return e.buildingDictionary.isAuditorAuth}})),{},{planTypeRule:function(){var e=this.capacityForm,t=e.volume_type.field_value,a=e.volume_date_year.field_value,i=e.volume_date_month.field_value,o=e.volume_date_day.field_value,r=e.volume_date_ten.field_value;return o=o||(3==r?(0,m.getCurMonthDays)(i):10*r),""!==this.capacityTime?{validator:function(e,r,n){if(""===r)n(new Error("请选择放量计划类型"));else{var s=o?new Date(a,i-1,o):new Date(a,i,o);if([1,2].includes(t)&&s>new Date)return void n(new Error("当前放量时间与选择的放量计划类型不匹配"));if([3,4].includes(t)&&s<=new Date)return void n(new Error("当前放量时间与选择的放量计划类型不匹配"));n()}},trigger:"change"}:{required:!0,message:"放量计划类型不可为空"}},planTimeRule:function(){var e=this.capacityForm,t=e.volume_type.field_value,a=e.volume_date_year.field_value,i=e.volume_date_month.field_value,o=e.volume_date_day.field_value,r=e.volume_date_ten.field_value;return o=o||(3==r?(0,m.getCurMonthDays)(i):10*r),""!==t?{validator:function(e,r,n){if(""===r)n(new Error("请输入放量时间"));else{var s=o?new Date(a,i-1,o):new Date(a,i,o);if([1,2].includes(t)&&s>new Date)return void n(new Error("当前放量计划类型下放量时间不得大于当前日期"));if([3,4].includes(t)&&s<=new Date)return void n(new Error("当前放量计划类型下放量时间必须大于当前日期"));n()}},trigger:"change"}:{required:!0,message:"放量时间不可为空"}}}),data:function(){return{isEdit:!1,capacityForm:{},originData:{},pageLoading:!1,relatedHouseTypeList:[],relatedBuilding:[],capacityTime:"",getConfigList:this.getConfigLists(),breadText:"楼盘列表",getProjectNameAndTypes:m.getProjectNameAndTypes,lastPage:"",arrKey:[],keydown:"",device:""}},created:function(){this.initHandle(),this.getInitData(),this.getHouseListById(),this.getBuildList(),this.isOperation(),this.getisEditAuth()},mounted:function(){this.device=p.commonFun.getDevice(),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)},destroyed:function(){document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},watch:{$route:{handler:function(e,t){this.isEdit=!!this.$route.query.isEdit,"CapacityPlan"===this.$route.name&&(e.query.isEdit||"1"!==t.query.isEdit||this.getInitData())}}},beforeRouteEnter:function(e,t,a){a((function(e){e.lastPage="list"}))},beforeRouteUpdate:function(e,t,a){this.lastPage="detail",a()},methods:{handleKeyDown:function(e){this.arrKey.length>0&&this.arrKey.indexOf(e.key.toLowerCase())>=0||(this.arrKey.push(e.key.toLowerCase()),this.keydown=this.arrKey.join("+"),"mac"===this.device?(this.isEdit&&"meta+s"===this.keydown&&(this.getInfoValid(),e.preventDefault()),this.isEdit||2!=this.getEditAuth||"meta+e"!==this.keydown||(this.editInfo("1"),e.preventDefault())):(this.isEdit&&"control+s"===this.keydown&&(this.getInfoValid(),e.preventDefault()),this.isEdit||2!=this.getEditAuth||"control+e"!==this.keydown||(this.editInfo("1"),e.preventDefault())))},handleKeyUp:function(e){this.keydown="",this.arrKey=[],e.preventDefault()},editInfo:function(e,t){var a=p.commonFun.deepClone(this.$route.query);a.isEdit=e,t&&(a.volumeId=t),a.isEdit||delete a.isEdit,this.$router.push({name:this.$route.name,query:a})},initHandle:function(){this.projectId=this.$route.query.projectId,this.taskId=this.$route.query.taskId,this.volumeId=this.$route.query.volumeId,this.isEdit=1==this.$route.query.isEdit,this.isRequiredInfoOrigin=m.isRequiredInfoOrigin,this.getOriginOperateInfo=m.getOriginOperateInfo,this.getHrefUrl=m.getHrefUrl},getConfigLists:function(){if(localStorage.getItem("getConfigLists")){var e=localStorage.getItem("getConfigLists");return JSON.parse(e)}},getisEditAuth:function(){var e={task_id:this.$route.query.taskId,page_id:8};this.$store.dispatch("isEditAuth",e)},getHouseListById:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.projectId,task_id:e.taskId,select_false:0},t.next=4,h.default.getHouseTypeListData(a);case 4:i=t.sent,o=i.data,r=o.code,n=o.data,0===r&&(e.relatedHouseTypeList=n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getBuildList:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.projectId,task_id:e.taskId},t.next=4,h.default.getProjectBuildingListdata(a);case 4:i=t.sent,o=i.data,r=o.code,n=o.data,0===r&&(e.relatedBuilding=n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},tendayChange:function(e,t){setTimeout((function(){e.tenday&&(t.field_value="")}),200)},changeWaitingStatus:function(e){var t=this.capacityForm,a=t.paihao_status,i=t.paihao_start_datetime,o=t.paihao_end_datetime;2===e&&(a.field_value="",i.field_value="",o.field_value="","1"==a.is_show_belong_role&&(a.belong_role="",a.belong_other=""),"1"==i.is_show_belong_role&&(i.belong_role="",i.belong_other=""),"1"==o.is_show_belong_role&&(o.belong_role="",o.belong_other=""))},changeWaitingSource:function(e,t,a){if(2===e&&this.$route.query.volumeId){var i=this.capacityForm,o=i.paihao_status,r=i.paihao_start_datetime,n=i.paihao_end_datetime,s={belong_role:t,belong_other:a};"1"==o.is_show_belong_role&&Object.assign(o,s),"1"==r.is_show_belong_role&&Object.assign(r,s),"1"==n.is_show_belong_role&&Object.assign(n,s)}},initInfoDealwith:function(e){var t=p.commonFun.deepClone(e.volume_detail.data),a=["volume_type","is_need_paihao","paihao_status"];return Object.keys(t).forEach((function(e){"1"==t[e].is_show_belong_role&&(t[e].belong_role=Number(t[e].belong_role)),a.includes(e)&&(t[e].field_value=""===t[e].field_value?"":Number(t[e].field_value))})),t},getInitData:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.pageLoading=!0,a={project_id:e.projectId,task_id:e.taskId,volume_id:e.$route.query.volumeId},t.next=5,_.default.getCapacityInfo(a);case 5:i=t.sent,o=i.data,r=o.code,n=o.data,s=o.msg,e.pageLoading=!1,0===r?(e.originData=n.volume_detail.data,e.capacityForm=e.initInfoDealwith(n)):e.$message(s),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),e.pageLoading=!1,console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()},isOperation:function(){"operation"===this.$route.query.role?this.breadText="楼盘列表":"expand"===this.$route.query.role&&(this.breadText="楼盘任务列表")},goToListPage:function(){"operation"===this.$route.query.role?window.location.href="/index.php?r=yw-projects/index":"expand"===this.$route.query.role&&this.$router.push({path:"/building/ExpandTaskList"})},goToCapacityHandRoom:function(){this.goToMainPage()},showGotoDialog:function(e){var t=e.path,a=e.isEdit,i=e.id,o=e.idName,r=this.$route.query,n=r.projectId,s=void 0===n?"":n,l=r.taskId,c=void 0===l?"":l,u=r.cityId,d=void 0===u?"":u,f=r.projectName,p=void 0===f?"":f,m=r.buildingType,h=void 0===m?"":m,_=r.role,g=void 0===_?"":_,v=i?"&".concat(o,"=").concat(i):"",y="/dist/building/".concat(t,"?projectId=").concat(s,"&taskId=").concat(c).concat(v,"&projectName=").concat(p,"&buildingType=").concat(h,"&isEdit=").concat(a,"&role=").concat(g);"houseTypeId"!==o?window.open(y):window.open("".concat(y,"&cityId=").concat(d))},changeTenDate:function(e,t){var a=this.capacityForm,i=a.volume_date_year,o=a.volume_date_month,r=a.volume_date_day,n=a.volume_date_ten;i.belong_role=e,o.belong_role=e,r.belong_role=e,n.belong_role=e,i.belong_other=t,o.belong_other=t,r.belong_other=t,n.belong_other=t},clearType:function(){this.capacityForm.volume_date_year.field_value="",this.capacityForm.volume_date_month.field_value="",this.capacityForm.volume_date_day.field_value="",this.capacityForm.volume_date_ten.field_value="",this.capacityTime=""},getInfoValid:function(){var e=!1;if(this.$refs.capacityForm.validate((function(t){e=!!t})),e){if(this.capacityForm.is_need_paihao){var t=this.capacityForm,a=t.is_need_paihao.field_value,i=t.paihao_status.field_value,o=t.paihao_start_datetime.field_value,r=t.paihao_end_datetime.field_value;if(1==a){var n=(new Date).getTime(),s=o&&new Date(o+" 00:00:01"),l=r&&new Date(r+" 23:59:59");if(s&&l&&s>l)return void this.$message.error("开始时间必须小于结束时间!");if(s){if(1==i&&s<=n)return void this.$message.error("当前排号状态下，排号开始时间必须大于当前时间!");if(2==i&&s>n)return void this.$message.error("当前排号状态下，排号开始时间必须小于等于当前时间!");if(3==i&&s>=n)return void this.$message.error("当前排号状态下，排号开始时间必须小于当前时间!")}if(l){if(2==i&&l<n)return void this.$message.error("当前排号状态下，排号结束时间必须大于等于当前时间!");if(3==i&&l>=n)return void this.$message.error("当前排号状态下，排号结束时间必须小于当前时间!");if(1==i&&l<=n)return void this.$message.error("当前排号状态下，排号开始时间必须大于当前时间!")}}}this.isRequiredInfoOrigin(this.originData,this.capacityForm)&&this.saveCapacityInfo()}else this.$message("请检查必填信息是否填写完整!")},cancleEdit:function(){"list"===this.lastPage?this.goToMainPage():this.editInfo("")},goToMainPage:function(){this.$router.push(this.getHrefUrl(3).replace(/^\/dist/,""))},saveCapacityInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.pageLoading=!0,!e.isSubmiting){t.next=4;break}return t.abrupt("return");case 4:return e.isSubmiting=!0,a={project_id:e.projectId,volume_id:e.$route.query.volumeId,task_id:e.taskId,volume_detail:{data:e.capacityForm}},t.next=8,_.default.saveCapacityInfo(a);case 8:i=t.sent,o=i.data,r=o.code,n=o.data,s=o.msg,e.isSubmiting=!1,e.pageLoading=!1,0===r?(e.$message("保存成功！"),e.editInfo("",n.id)):e.$message(s),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.log(t.t0),e.pageLoading=!1;case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))()}}};t.default=g},dc0d:function(e,t,a){"use strict";a.r(t);var i=a("b5c0"),o=a("88ff");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("b96b");var n=a("2877"),s=Object(n.a)(o.default,i.a,i.b,!1,null,"0d35b81b",null);t.default=s.exports},e686:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisble,width:e.width,center:e.center},on:{"update:visible":function(t){e.dialogVisble=t},close:e.close}},[e._t("default"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.$scopedSlots.footer?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.dialogConfirm}},[e._v("确认")]),e._t("footer")],2)],2)},o=[]},f149:function(e,t,a){"use strict";a.r(t);var i=a("e686"),o=a("8f99");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var n=a("2877"),s=Object(n.a)(o.default,i.a,i.b,!1,null,"1153158b",null);t.default=s.exports},f183:function(e,t,a){var i=a("d012"),o=a("861d"),r=a("5135"),n=a("9bf2").f,s=a("90e3"),l=a("bb2f"),c=s("meta"),u=0,d=Object.isExtensible||function(){return!0},f=function(e){n(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,c)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[c].objectID},getWeakData:function(e,t){if(!r(e,c)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[c].weakData},onFreeze:function(e){return l&&p.REQUIRED&&d(e)&&!r(e,c)&&f(e),e}};i[c]=!0},f8fe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileTypeList=t.trackIdList=t.roleNumList=t.tendayList=t.buildingConf=t.herfLinks=void 0;t.herfLinks={addHouse:""};t.buildingConf={fileType:[".xls",".xlsx"],sizeLimit:10};t.tendayList=[{text:"上旬",value:1},{text:"中旬",value:2},{text:"下旬",value:3}];t.roleNumList={yunYing:7,tuoZhan:1};t.trackIdList={project:6482,houseType:6483,building:6484,stageing:6485};t.fileTypeList={doc:"doc",docx:"doc",txt:"txt",jpg:"image",jpeg:"image",png:"image",xls:"excel",xlsx:"excel",csv:"excel",pdf:"pdf",ppt:"ppt",pptx:"ppt",zip:"zip",rar:"zip",mp3:"audio",mp4:"audio",wmv:"video",avi:"video",mpeg:"video",mpg:"video",rm:"video",rmvb:"video",flv:"video","3gp":"video",mov:"video",mkv:"video"}},fa72:function(e,t,a){"use strict";a.r(t);var i=a("700f"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a}}]);