(window.webpackJsonp=window.webpackJsonp||[]).push([["DynamicSaleInfoEdit"],{"0310":function(e,t,a){"use strict";a.r(t);var i=a("771c"),o=a("c8bf");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("1436");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"7ef5982a",null);t.default=l.exports},"076c":function(e,t,a){"use strict";a.r(t);var i=a("708f"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"0781b":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".flex-box[data-v-aac9a5ac]{display:-webkit-box;display:-ms-flexbox;display:flex}.info-detail[data-v-aac9a5ac]{padding:0 10px}.mark-source-btn[data-v-aac9a5ac]{padding:0 0 0 50px}.info-content-wrap[data-v-aac9a5ac]{margin-bottom:30px;padding:20px 10px}.info-content-wrap .tb-hx-img[data-v-aac9a5ac]{width:80px;height:60px;cursor:pointer}.info-content-wrap[data-v-aac9a5ac] .el-table .img-cell .cell{text-overflow:clip}.form-left-box .filed-value[data-v-aac9a5ac]{padding-right:25px;word-break:break-word}.info-source[data-v-aac9a5ac]{color:#bbb}[data-v-aac9a5ac] .el-table th.gutter{display:table-cell!important}",""]),e.exports=t},"07ac":function(e,t,a){var i=a("23e7"),o=a("6f53").values;i({target:"Object",stat:!0},{values:function(e){return o(e)}})},"0e3f":function(e,t,a){"use strict";a.r(t);var i=a("8d45"),o=a("bf5c");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("6acd");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"4e81d648",null);t.default=l.exports},"0e6e":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".build-info[data-v-98c9cf2c]{padding:0 10px;margin-top:50px}.building-name[data-v-98c9cf2c]{width:150px;margin-right:10px}.btn-box[data-v-98c9cf2c]{text-align:right}.btn-export[data-v-98c9cf2c]{display:inline-block;margin-left:10px}",""]),e.exports=t},1067:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),r=i(a("8fa0")),n={data:function(){return{isProjectShow:"",isSubmiting:!1}},mounted:function(){this.getProjectInfo()},methods:{getProjectInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.default.getProjectInfoById({project_id:e.$route.query.projectId,fields:"is_show"});case 3:a=t.sent,i=a.data,o=i.code,n=i.msg,l=i.data,0===o?e.isProjectShow=l.is_show:e.$message.error(n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},autoSetDynamic:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.isSubmiting){t.next=3;break}return t.abrupt("return");case 3:return e.isSubmiting=!0,t.next=6,r.default.autoCreat({project_id:e.$route.query.projectId});case 6:a=t.sent,i=a.data,o=i.code,n=i.msg,0===o?(e.isSubmiting=!1,e.$message({type:"success",message:n})):(e.$message({type:"warning",message:n}),e.isSubmiting=!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),e.isSubmiting=!1,console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}}};t.default=n},1290:function(e,t,a){"use strict";a.r(t);var i=a("ff5b"),o=a("fc9c");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("a90f");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"98c9cf2c",null);t.default=l.exports},1436:function(e,t,a){"use strict";a("ef4f")},1737:function(e,t,a){"use strict";a("2ee3")},"1fa4":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".flex-box[data-v-4e81d648]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.build-info[data-v-4e81d648]{padding:0 10px;margin-top:50px}.build-info-title[data-v-4e81d648]{position:relative;padding:0 10px 10px;border-bottom:1px solid #dcdfe6;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.build-info-title .title-content[data-v-4e81d648]{font-size:15px;font-weight:700}.build-info-title .origin-title[data-v-4e81d648]{position:absolute;left:600px;top:0}.build-info-title .building-name[data-v-4e81d648]{width:150px}.table-wrap-box[data-v-4e81d648]{padding:15px 0}.table-wrap-box[data-v-4e81d648] .el-form-item{margin-bottom:0}.table-wrap-box .warn-msg[data-v-4e81d648]{color:#f78f0f}.btn-box[data-v-4e81d648]{text-align:right}.btn-export[data-v-4e81d648]{display:inline-block}",""]),e.exports=t},2037:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".info-source[data-v-00a51b80]{padding:0;display:block;line-height:1}.info-source[data-v-00a51b80] .el-input{padding:0}.other-box .other-tip[data-v-00a51b80]{color:#409eff}.source-content-wrap[data-v-00a51b80]{display:-webkit-box;display:-ms-flexbox;display:flex}.source-content-wrap .iconicon-delete[data-v-00a51b80]{line-height:28px;color:#aaa}.info-source-component-box[data-v-00a51b80] .el-input{width:58px;background-color:transparent}.info-source-component-box[data-v-00a51b80] .el-input .el-input__inner{height:28px;line-height:28px;padding:0;border:none;background-color:transparent;cursor:pointer;color:#409eff}.info-source-component-box[data-v-00a51b80] .el-input .el-input__inner::-webkit-input-placeholder{color:#409eff;font-weight:400}.info-source-component-box[data-v-00a51b80] .el-input .el-input__inner::-moz-placeholder{color:#409eff;font-weight:400}.info-source-component-box[data-v-00a51b80] .el-input .el-input__inner:-ms-input-placeholder{color:#409eff;font-weight:400}.info-source-component-box[data-v-00a51b80] .el-input .el-input__inner:-moz-placeholder{color:#409eff;font-weight:400}.info-source-component-box[data-v-00a51b80] .el-input.other-input-inner .el-input__inner{padding:0 15px;color:#606266;border-radius:4px;border:1px solid #dcdfe6}.info-source-component-box[data-v-00a51b80] .el-select .el-input__suffix{display:none}.info-source-component-box .iconxialajiantou[data-v-00a51b80]{margin-left:2px;font-size:20px;cursor:pointer}.info-source-component-box .clear-content-wrap[data-v-00a51b80] .el-input{width:74px}.radio-group[data-v-00a51b80]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:32px;overflow:initial}.radio-group .origin-radio.el-radio[data-v-00a51b80]{margin-right:20px}.radio-group .origin-radio.el-radio[data-v-00a51b80] .el-radio__label{padding-left:2px}.radio-group .other-origin[data-v-00a51b80]{width:150px}.source-val[data-v-00a51b80],.source-val[data-v-00a51b80] .el-input{padding:0}.source-val[data-v-00a51b80] .el-input .el-input__suffix{right:15px}.source-dialog[data-v-00a51b80] .el-dialog{display:block!important}.source-dialog[data-v-00a51b80] .el-dialog>div{display:block}.source-dialog[data-v-00a51b80] .el-dialog .el-dialog__body{padding:25px 20px}",""]),e.exports=t},2170:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-source info-source-component-box"},[e.isShowVal?a("div",{class:"source-content-wrap "+(e.canClear?"":"clear-content-wrap")},[a("div",{staticClass:"source-content"},[10!==e.originValue?a("el-select",{staticClass:"source-val",attrs:{"popper-append-to-body":!1,placeholder:"请选择来源",clearable:""},on:{focus:e.handFocus,clear:e.clearOriginVal},model:{value:e.originValue,callback:function(t){e.originValue=t},expression:"originValue"}},e._l(e.originList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1):a("div",{staticClass:"other-box"},[a("span",{staticClass:"other-tip"},[e._v("其他-")]),a("el-input",{attrs:{readonly:""},on:{focus:e.handFocus},model:{value:e.otherValue,callback:function(t){e.otherValue=t},expression:"otherValue"}})],1)],1),e.canClear?a("i",{staticClass:"iconfont iconicon-delete",attrs:{"aria-hidden":"true"},on:{click:e.clearOriginVal}}):e._e()]):a("i",{staticClass:"iconfont iconxialajiantou",attrs:{"aria-hidden":"true"},on:{click:e.handFocus}}),a("el-dialog",{staticClass:"source-dialog",attrs:{title:"信息来源",center:"",width:"680px","append-to-body":e.isInFixed,visible:e.dialogFormVisible},on:{close:e.closeDialog,open:e.openDialog,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-radio-group",{staticClass:"radio-group",on:{change:e.radioChange},model:{value:e.originValue,callback:function(t){e.originValue=t},expression:"originValue"}},[e._l(e.originList,(function(t,i){return a("el-radio",{key:i,staticClass:"origin-radio",attrs:{label:t.id}},[e._v(" "+e._s(t.text)+" ")])})),a("el-input",{directives:[{name:"show",rawName:"v-show",value:10==e.originValue,expression:"originValue == 10"}],staticClass:"other-origin other-input-inner",attrs:{size:"small"},model:{value:e.otherValue,callback:function(t){e.otherValue=t},expression:"otherValue"}})],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.checkedCurVal}},[e._v(" 提交 ")])],1)],1)],1)},o=[]},2417:function(e,t,a){var i=a("b973");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("c8528210",i,!0,{sourceMap:!1,shadowMode:!1})},"2bfd":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-source"},[10!==e.originValue?a("el-select",{staticClass:"source-val",attrs:{"popper-append-to-body":!1,placeholder:"请选择来源",clearable:""},on:{focus:e.handFocus,clear:e.clearOriginVal},model:{value:e.originValue,callback:function(t){e.originValue=t},expression:"originValue"}},e._l(e.originList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1):a("el-input",{attrs:{readonly:""},on:{focus:e.handFocus},model:{value:e.otherValue,callback:function(t){e.otherValue=t},expression:"otherValue"}},[a("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix","aria-hidden":"true"},on:{click:e.clearOriginVal},slot:"suffix"})]),a("el-dialog",{staticClass:"source-dialog",attrs:{title:"信息来源",center:"",width:"680px",visible:e.dialogFormVisible},on:{close:e.closeDialog,open:e.openDialog,"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-radio-group",{staticClass:"radio-group",on:{change:e.radioChange},model:{value:e.originValue,callback:function(t){e.originValue=t},expression:"originValue"}},[e._l(e.originList,(function(t,i){return a("el-radio",{key:i,staticClass:"origin-radio",attrs:{label:t.id}},[e._v(" "+e._s(t.text)+" ")])})),a("el-input",{directives:[{name:"show",rawName:"v-show",value:10==e.originValue,expression:"originValue == 10"}],staticClass:"other-origin",attrs:{size:"small"},model:{value:e.otherValue,callback:function(t){e.otherValue=t},expression:"otherValue"}})],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.checkedCurVal}},[e._v(" 提交 ")])],1)],1)],1)},o=[]},"2c39":function(e,t,a){var i=a("6340");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("777e639b",i,!0,{sourceMap:!1,shadowMode:!1})},"2df2":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"house-info"},[a("div",{staticClass:"modal-title-box"},[e._m(0),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showGotoDialog({path:"BuildAddHouseDetail",id:"",idName:"houseTypeId",isEdit:1})}}},[e._v(" 新增户型 ")])],1),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"houseForm",attrs:{model:e.model,"element-loading-text":"数据加载中","element-loading-spinner":"el-icon-loading"}},[e.model.tableData.length>0?a("div",{staticClass:"table-wrap-box-box"},[a("div",{staticClass:"house-list"},[a("div",{ref:"headerWrapper",staticClass:"table-title"},[a("ul",{staticClass:"table-flex-box"},[e.tableItemShows.acreage?a("li",[a("div",{staticClass:"flex-box"},[a("span",[e._v("建筑面积(㎡)")]),e.canTbShow("acreage")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.acreage.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("acreage",t,a)},"update:otherVal":function(t){return e.$set(e.acreage,"otherVal",t)},"update:other-val":function(t){return e.$set(e.acreage,"otherVal",t)}},model:{value:e.acreage.value,callback:function(t){e.$set(e.acreage,"value",t)},expression:"acreage.value"}}):e._e()],1)]):e._e(),e.tableItemShows.ac_acreage?a("li",[a("div",{staticClass:"flex-box"},[a("span",[e._v("套内面积(㎡)")]),e.canTbShow("ac_acreage")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.acAcreage.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("ac_acreage",t,a)},"update:otherVal":function(t){return e.$set(e.acAcreage,"otherVal",t)},"update:other-val":function(t){return e.$set(e.acAcreage,"otherVal",t)}},model:{value:e.acAcreage.value,callback:function(t){e.$set(e.acAcreage,"value",t)},expression:"acAcreage.value"}}):e._e()],1)]):e._e(),e.tableItemShows.status?a("li",[a("div",{staticClass:"flex-box"},[a("span",[e._v("销售状态")]),e.canTbShow("status")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.status.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("status",t,a)},"update:otherVal":function(t){return e.$set(e.status,"otherVal",t)},"update:other-val":function(t){return e.$set(e.status,"otherVal",t)}},model:{value:e.status.value,callback:function(t){e.$set(e.status,"value",t)},expression:"status.value"}}):e._e()],1)]):e._e(),e.tableItemShows.offer_price?a("li",[a("div",{staticClass:"flex-box"},[a("span",[e._v("单价(万元)")]),e.canTbShow("offer_price")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.offerPrice.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("offer_price",t,a)},"update:otherVal":function(t){return e.$set(e.offerPrice,"otherVal",t)},"update:other-val":function(t){return e.$set(e.offerPrice,"otherVal",t)}},model:{value:e.offerPrice.value,callback:function(t){e.$set(e.offerPrice,"value",t)},expression:"offerPrice.value"}}):e._e()],1)]):e._e(),e.tableItemShows.price?a("li",[a("div",{staticClass:"flex-box"},[a("span",[e._v("总价(万元)")]),e.canTbShow("price")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.price.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("price",t,a)},"update:otherVal":function(t){return e.$set(e.price,"otherVal",t)},"update:other-val":function(t){return e.$set(e.price,"otherVal",t)}},model:{value:e.price.value,callback:function(t){e.$set(e.price,"value",t)},expression:"price.value"}}):e._e()],1)]):e._e(),e.tableItemShows.is_show_room_type?a("li",[e._v("是否展示")]):e._e(),e.tableItemShows.layout_shi?a("li",{staticClass:"layout-item"},[a("div",{staticClass:"flex-box"},[a("span",[e._v("厅室描述")]),e.canTbShow("layout_shi")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.layoutShi.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("layout_shi",t,a)},"update:otherVal":function(t){return e.$set(e.layoutShi,"otherVal",t)},"update:other-val":function(t){return e.$set(e.layoutShi,"otherVal",t)}},model:{value:e.layoutShi.value,callback:function(t){e.$set(e.layoutShi,"value",t)},expression:"layoutShi.value"}}):e._e()],1)]):e._e(),e.tableItemShows.floor_height?a("li",[a("div",{staticClass:"flex-box"},[a("span",[e._v("层高")]),e.canTbShow("floor_height")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.floorHeight.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("floor_height",t,a)},"update:otherVal":function(t){return e.$set(e.floorHeight,"otherVal",t)},"update:other-val":function(t){return e.$set(e.floorHeight,"otherVal",t)}},model:{value:e.floorHeight.value,callback:function(t){e.$set(e.floorHeight,"value",t)},expression:"floorHeight.value"}}):e._e()],1)]):e._e(),e.tableItemShows.building_type?a("li",[a("div",{staticClass:"flex-box"},[a("span",[e._v("户型类型")]),e.canTbShow("building_type")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.buildingType.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("building_type",t,a)},"update:otherVal":function(t){return e.$set(e.buildingType,"otherVal",t)},"update:other-val":function(t){return e.$set(e.buildingType,"otherVal",t)}},model:{value:e.buildingType.value,callback:function(t){e.$set(e.buildingType,"value",t)},expression:"buildingType.value"}}):e._e()],1)]):e._e(),e.tableItemShows.house_on_sale_num?a("li",[a("div",{staticClass:"flex-box"},[a("span",[e._v("在售余量(套)")]),e.canTbShow("house_on_sale_num")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.houseOnSaleNum.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("house_on_sale_num",t,a)},"update:otherVal":function(t){return e.$set(e.houseOnSaleNum,"otherVal",t)},"update:other-val":function(t){return e.$set(e.houseOnSaleNum,"otherVal",t)}},model:{value:e.houseOnSaleNum.value,callback:function(t){e.$set(e.houseOnSaleNum,"value",t)},expression:"houseOnSaleNum.value"}}):e._e()],1)]):e._e(),e.tableItemShows.room_type?a("li",[a("div",{staticClass:"flex-box"},[a("span",[e._v("户型居室")]),e.canTbShow("room_type")?a("info-source-component",{attrs:{isShowVal:!1,"other-val":e.roomType.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("room_type",t,a)},"update:otherVal":function(t){return e.$set(e.roomType,"otherVal",t)},"update:other-val":function(t){return e.$set(e.roomType,"otherVal",t)}},model:{value:e.roomType.value,callback:function(t){e.$set(e.roomType,"value",t)},expression:"roomType.value"}}):e._e()],1)]):e._e()])]),a("div",{ref:"bodyWrapper",staticClass:"table-list"},e._l(e.model.tableData,(function(t,i){return a("ul",{key:i,staticClass:"table-flex-box"},[e.tableItemShows.acreage&&t.acreage?a("li",[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1,maxVal:99999,reg:"int"},on:{blur:function(a){return e.calculationAllPrice(t)}},model:{value:t.acreage.field_value,callback:function(a){e.$set(t.acreage,"field_value",a)},expression:"item.acreage.field_value"}}),e.canTbShow("acreage")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{"other-val":t.acreage.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.acreage,"belong_other",a)},"update:other-val":function(a){return e.$set(t.acreage,"belong_other",a)}},model:{value:t.acreage.belong_role,callback:function(a){e.$set(t.acreage,"belong_role",a)},expression:"item.acreage.belong_role"}})],1):e._e()],1):e._e(),e.tableItemShows.ac_acreage&&t.ac_acreage?a("li",[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1,maxVal:99999.99,reg:"twoNum"},on:{blur:function(a){return e.calculationAllPrice(t)}},model:{value:t.ac_acreage.field_value,callback:function(a){e.$set(t.ac_acreage,"field_value",a)},expression:"item.ac_acreage.field_value"}}),e.canTbShow("ac_acreage")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{"other-val":t.ac_acreage.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.ac_acreage,"belong_other",a)},"update:other-val":function(a){return e.$set(t.ac_acreage,"belong_other",a)}},model:{value:t.ac_acreage.belong_role,callback:function(a){e.$set(t.ac_acreage,"belong_role",a)},expression:"item.ac_acreage.belong_role"}})],1):e._e()],1):e._e(),e.tableItemShows.status&&t.status?a("li",[a("el-form-item",{attrs:{prop:"tableData."+i+".status.field_value",rules:[{required:!0,message:"销售状态必填",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.status.field_value,callback:function(a){e.$set(t.status,"field_value",a)},expression:"item.status.field_value"}},e._l(e.saleStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),e.canTbShow("status")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{isInFixed:!0,"other-val":t.status.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.status,"belong_other",a)},"update:other-val":function(a){return e.$set(t.status,"belong_other",a)}},model:{value:t.status.belong_role,callback:function(a){e.$set(t.status,"belong_role",a)},expression:"item.status.belong_role"}})],1):e._e()],1):e._e(),e.tableItemShows.offer_price&&t.offer_price?a("li",[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1e-4,maxVal:99.9999,reg:"fourNum"},on:{blur:function(a){return e.calculationAllPrice(t)}},model:{value:t.offer_price.field_value,callback:function(a){e.$set(t.offer_price,"field_value",a)},expression:"item.offer_price.field_value"}}),e.canTbShow("offer_price")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{"other-val":t.offer_price.belong_other,"origin-arr":e.infoSource},on:{change:function(a,i){return e.changePriceSource(t,a,i)},"update:otherVal":function(a){return e.$set(t.offer_price,"belong_other",a)},"update:other-val":function(a){return e.$set(t.offer_price,"belong_other",a)}},model:{value:t.offer_price.belong_role,callback:function(a){e.$set(t.offer_price,"belong_role",a)},expression:"item.offer_price.belong_role"}})],1):e._e()],1):e._e(),e.tableItemShows.price&&t.price?a("li",[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1,maxVal:99999.9999,reg:"fourNum"},model:{value:t.price.field_value,callback:function(a){e.$set(t.price,"field_value",a)},expression:"item.price.field_value"}}),e.canTbShow("price")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{"other-val":t.price.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.price,"belong_other",a)},"update:other-val":function(a){return e.$set(t.price,"belong_other",a)}},model:{value:t.price.belong_role,callback:function(a){e.$set(t.price,"belong_role",a)},expression:"item.price.belong_role"}})],1):e._e()],1):e._e(),e.tableItemShows.is_show_room_type&&t.is_show_room_type?a("li",[a("el-form-item",{attrs:{prop:"tableData."+i+".is_show_room_type.field_value",rules:[{required:!0,message:"是否展示必填",trigger:"change"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.is_show_room_type.field_value,callback:function(a){e.$set(t.is_show_room_type,"field_value",a)},expression:"item.is_show_room_type.field_value"}},e._l(e.houseTypeIsShow,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1)],1):e._e(),e.tableItemShows.layout_shi&&t.layout_shi?a("li",{staticClass:"layout-item"},[a("div",{staticClass:"hall-room"},[a("el-form-item",{attrs:{prop:"tableData."+i+".layout_shi.field_value",rules:[{required:!0,message:"厅必填",trigger:"blur"}]}},[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1,maxVal:20,reg:"int"},on:{blur:function(a){return e.houseRoomLinkage(t)}},model:{value:t.layout_shi.field_value,callback:function(a){e.$set(t.layout_shi,"field_value",a)},expression:"item.layout_shi.field_value"}})],1),e._v(" 室 "),a("jl-number-input",{staticClass:"num-input",attrs:{minVal:0,maxVal:20,reg:"parseInt"},model:{value:t.layout_ting.field_value,callback:function(a){e.$set(t.layout_ting,"field_value",a)},expression:"item.layout_ting.field_value"}}),e._v(" 厅 "),a("jl-number-input",{staticClass:"num-input",attrs:{minVal:0,maxVal:20,reg:"parseInt"},model:{value:t.layout_chu.field_value,callback:function(a){e.$set(t.layout_chu,"field_value",a)},expression:"item.layout_chu.field_value"}}),e._v(" 厨 "),a("jl-number-input",{staticClass:"num-input",attrs:{minVal:0,maxVal:20,reg:"parseInt"},model:{value:t.layout_wei.field_value,callback:function(a){e.$set(t.layout_wei,"field_value",a)},expression:"item.layout_wei.field_value"}}),e._v(" 卫 ")],1),e.canTbShow("layout_shi")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{"other-val":t.layout_shi.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.layout_shi,"belong_other",a)},"update:other-val":function(a){return e.$set(t.layout_shi,"belong_other",a)},change:function(a,i){return e.changeChu(t,a,i)}},model:{value:t.layout_shi.belong_role,callback:function(a){e.$set(t.layout_shi,"belong_role",a)},expression:"item.layout_shi.belong_role"}})],1):e._e()]):e._e(),e.tableItemShows.floor_height&&t.floor_height?a("li",[a("jl-number-input",{staticClass:"num-input small-box",attrs:{minVal:.01,maxVal:99.99,reg:"twoNum"},model:{value:t.floor_height.field_value,callback:function(a){e.$set(t.floor_height,"field_value",a)},expression:"item.floor_height.field_value"}}),e.canTbShow("floor_height")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{"other-val":t.floor_height.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.floor_height,"belong_other",a)},"update:other-val":function(a){return e.$set(t.floor_height,"belong_other",a)}},model:{value:t.floor_height.belong_role,callback:function(a){e.$set(t.floor_height,"belong_role",a)},expression:"item.floor_height.belong_role"}})],1):e._e()],1):e._e(),e.tableItemShows.building_type&&t.building_type?a("li",[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.building_type.field_value,callback:function(a){e.$set(t.building_type,"field_value",a)},expression:"item.building_type.field_value"}},e._l(e.houseTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1),e.canTbShow("building_type")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{"other-val":t.building_type.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.building_type,"belong_other",a)},"update:other-val":function(a){return e.$set(t.building_type,"belong_other",a)}},model:{value:t.building_type.belong_role,callback:function(a){e.$set(t.building_type,"belong_role",a)},expression:"item.building_type.belong_role"}})],1):e._e()],1):e._e(),e.tableItemShows.house_on_sale_num&&t.house_on_sale_num?a("li",[a("jl-number-input",{staticClass:"num-input small-box",attrs:{minVal:0,maxVal:99999,reg:"parseInt"},model:{value:t.house_on_sale_num.field_value,callback:function(a){e.$set(t.house_on_sale_num,"field_value",a)},expression:"item.house_on_sale_num.field_value"}}),e.canTbShow("house_on_sale_num")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{"other-val":t.house_on_sale_num.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.house_on_sale_num,"belong_other",a)},"update:other-val":function(a){return e.$set(t.house_on_sale_num,"belong_other",a)}},model:{value:t.house_on_sale_num.belong_role,callback:function(a){e.$set(t.house_on_sale_num,"belong_role",a)},expression:"item.house_on_sale_num.belong_role"}})],1):e._e()],1):e._e(),e.tableItemShows.room_type&&t.room_type?a("li",[a("el-select",{staticClass:"middle-box",attrs:{placeholder:"请选择"},model:{value:t.room_type.field_value,callback:function(a){e.$set(t.room_type,"field_value",a)},expression:"item.room_type.field_value"}},e._l(e.roomTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1),e.canTbShow("room_type")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{"other-val":t.room_type.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.room_type,"belong_other",a)},"update:other-val":function(a){return e.$set(t.room_type,"belong_other",a)}},model:{value:t.room_type.belong_role,callback:function(a){e.$set(t.room_type,"belong_role",a)},expression:"item.room_type.belong_role"}})],1):e._e()],1):e._e()])})),0),a("div",{staticClass:"table-fix-info table-left-info"},[a("div",{staticClass:"table-head"},[a("ul",{staticClass:"table-flex-box"},[e.tableItemShows.house_type_id?a("li",{staticClass:"id-item"},[e._v("户型id")]):e._e(),e.tableItemShows.house_type_imgs?a("li",{staticClass:"img-item"},[e._v("户型图片")]):e._e(),e.tableItemShows.house_type_num?a("li",{staticClass:"num-item"},[a("div",{staticClass:"flex-box"},[a("span",[e._v("户型编号")]),e.canTbShow("house_type_num")?a("info-source-component",{attrs:{isInFixed:!0,isShowVal:!1,"other-val":e.houseTypeNum.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("house_type_num",t,a)},"update:otherVal":function(t){return e.$set(e.houseTypeNum,"otherVal",t)},"update:other-val":function(t){return e.$set(e.houseTypeNum,"otherVal",t)}},model:{value:e.houseTypeNum.value,callback:function(t){e.$set(e.houseTypeNum,"value",t)},expression:"houseTypeNum.value"}}):e._e()],1)]):e._e()])]),a("div",{ref:"fixedBodyWrapper",staticClass:"table-body"},e._l(e.model.tableData,(function(t,i){return a("ul",{key:i,staticClass:"table-flex-box"},[e.tableItemShows.house_type_id&&t.house_type_id?a("li",{staticClass:"id-item"},[e._v(" "+e._s(t.house_type_id.field_value)+" ")]):e._e(),e.tableItemShows.house_type_imgs?a("li",{staticClass:"img-item"},[t.house_type_imgs&&t.house_type_imgs.field_value.length>0?a("img",{staticClass:"tb-hx-img",attrs:{src:e.host+t.house_type_imgs.field_value[0],alt:"户型图片"},on:{click:function(a){return e.imgPreview([t.house_type_imgs.field_value[0]])}}}):e._e()]):e._e(),e.tableItemShows.house_type_num&&t.house_type_num?a("li",{staticClass:"num-item"},[a("el-form-item",{attrs:{prop:"tableData."+i+".house_type_num.field_value",rules:[{required:!0,message:"户型编号不可为空",trigger:"blur"}]}},[a("el-input",{attrs:{maxlength:20,placeholder:"存在编号即可输入编号，不知道时输入面积即可"},model:{value:t.house_type_num.field_value,callback:function(a){e.$set(t.house_type_num,"field_value","string"==typeof a?a.trim():a)},expression:"item.house_type_num.field_value"}})],1),e.canTbShow("house_type_num")?a("div",{staticClass:"check-source-box"},[a("info-source-component",{attrs:{isInFixed:!0,"other-val":t.house_type_num.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.house_type_num,"belong_other",a)},"update:other-val":function(a){return e.$set(t.house_type_num,"belong_other",a)}},model:{value:t.house_type_num.belong_role,callback:function(a){e.$set(t.house_type_num,"belong_role",a)},expression:"item.house_type_num.belong_role"}})],1):e._e()],1):e._e()])})),0)]),a("div",{staticClass:"table-fix-info table-right-info",class:e.model.tableData.length>3?"is-scroll":""},[a("div",{staticClass:"table-head"},[a("ul",{staticClass:"table-flex-box"},[a("li",[e._v("操作")])])]),a("div",{ref:"rightFixedBodyWrapper",staticClass:"table-body"},e._l(e.model.tableData,(function(t,i){return a("ul",{key:i,staticClass:"table-flex-box"},[a("li",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showGotoDialog({path:"BuildAddHouseView",id:t.house_type_id.field_value,idName:"houseTypeId"})}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showGotoDialog({path:"BuildAddHouseDetail",id:t.house_type_id.field_value,idName:"houseTypeId",isEdit:1})}}},[e._v(" 编辑 ")]),a("el-button",{staticClass:"btn-danger",attrs:{type:"text"},on:{click:function(a){return e.delectHouseType(t.house_type_id.field_value,i)}}},[e._v(" 删除 ")]),e.roleNumber==e.ROLENUMBER?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.copyAndAddHouseType(t.house_type_id.field_value)}}},[e._v(" 复制并新增 ")]):e._e()],1)])})),0)])]),e.showExpandBtn?a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showMoreInfo()}}},[e._v(" "+e._s(e.showAll?"收起查看户型":"查看更多户型")+" ")])],1):e._e()]):a("div",{staticClass:"no-data house-list"},[a("div",{staticClass:"table-title"},[a("ul",{staticClass:"table-flex-box"},[a("li",[e._v("户型id")]),a("li",[e._v("户型图片")]),a("li",[e._v("户型编号")]),a("li",[e._v("建筑面积(㎡)")]),a("li",[e._v("套内面积(㎡)")]),a("li",[e._v("销售状态")]),a("li",[e._v("单价(万元)")]),a("li",[e._v("总价(万元)")]),a("li",[e._v("是否展示")]),a("li",[e._v("厅室描述")]),a("li",[e._v("层高")]),a("li",[e._v("户型类型")]),a("li",[e._v("在售余量(套)")]),a("li",[e._v("户型居室")])])]),a("div",{staticClass:"msg-info"},[e._v("暂无户型数据")])])]),a("image-view",{attrs:{vshow:e.imageViewShow,"src-list":e.imgList},on:{"update:vshow":function(t){e.imageViewShow=t}}})],1)},o=[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{staticClass:"title-content"},[this._v("户型信息 "),t("span",{staticClass:"title-tip"},[this._v("表头的下拉按钮可标记整列数据的信息来源")])])}]},"2ee3":function(e,t,a){var i=a("65cb");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("61463e3c",i,!0,{sourceMap:!1,shadowMode:!1})},"2fc4":function(e,t,a){"use strict";a.r(t);var i=a("2170"),o=a("6c00");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("f6e0"),a("5e74");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"00a51b80",null);t.default=l.exports},3910:function(e,t,a){"use strict";a.r(t);var i=a("54ab"),o=a("8b52");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("5b13");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"46550fbd",null);t.default=l.exports},"3e57":function(e,t,a){var i=a("606e");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("051bed2b",i,!0,{sourceMap:!1,shadowMode:!1})},"40e9":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-detail"},[e.projectData.data?a("div",[e._m(0),e.projectData.data?a("div",{staticClass:"info-content-wrap"},[a("el-form",{attrs:{"label-width":"120px"}},[e._l(e.projectData.data,(function(t,i){return[e.showField(i)?a("el-form-item",{key:i,staticClass:"form-item-wrap",attrs:{label:e.formatDesc(t)}},[a("div",{staticClass:"form-left-box flex-box"},[a("div",{staticClass:"filed-value"},[e._v(e._s(e.getValueOrText(t)))]),e.$route.query.taskId||"1"!=t.is_show_belong_role?e._e():a("div",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t))+" ")]),"status"===i&&e.showSourceBtn?a("el-button",{staticClass:"mark-source-btn",attrs:{type:"text"},on:{click:e.batchMarkSource}},[e._v("批量标记销售状态来源")]):e._e()],1)]):e._e()]}))],2)],1):e._e()]):e._e(),e.houseTypeData.data?a("div",[a("div",{staticClass:"modal-title-box"},[a("h3",{staticClass:"title-content"},[e._v("户型信息")]),e.hasEditAuth?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.toNewPage()}}},[e._v(" 新增户型 ")]):e._e()],1),e.houseTypeData.data?a("div",{staticClass:"info-content-wrap"},[a("el-table",{attrs:{data:e.houseTypeData.data,"max-height":"490",border:""}},[0===e.houseTypeData.data.length||e.houseTableCol.house_type_id?a("el-table-column",{attrs:{fixed:"","min-width":"100",label:"户型id"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.house_type_id?[e._v(" "+e._s(t.row.house_type_id.field_value)+" ")]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.house_type_imgs?a("el-table-column",{attrs:{fixed:"","min-width":"100",label:"户型图片","class-name":"img-cell"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.house_type_imgs&&t.row.house_type_imgs.field_value.length>0?a("img",{staticClass:"tb-hx-img",attrs:{src:e.host+t.row.house_type_imgs.field_value[0],alt:"户型图片"},on:{click:function(a){return e.imgPreview([t.row.house_type_imgs.field_value[0]])}}}):e._e()]}}],null,!1,683394299)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.house_type_num?a("el-table-column",{attrs:{fixed:"","min-width":"150",label:"户型编号"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.house_type_num?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.house_type_num.field_value))]),e.$route.query.taskId||1!=t.row.house_type_num.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.house_type_num))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.acreage?a("el-table-column",{attrs:{label:"建筑面积(㎡)","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.acreage?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.acreage.field_value))]),e.$route.query.taskId||1!=t.row.acreage.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.acreage))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.ac_acreage?a("el-table-column",{attrs:{label:"套内面积(㎡)","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.ac_acreage?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.ac_acreage.field_value))]),e.$route.query.taskId||1!=t.row.ac_acreage.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.ac_acreage))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.status?a("el-table-column",{attrs:{label:"销售状态","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.status?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.status.field_text))]),e.$route.query.taskId||1!=t.row.status.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.status))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.offer_price?a("el-table-column",{attrs:{label:"单价(万元)","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.offer_price?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.offer_price.field_value))]),e.$route.query.taskId||1!=t.row.offer_price.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.offer_price))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.price?a("el-table-column",{attrs:{label:"总价(万元)","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.price?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.price.field_value))]),e.$route.query.taskId||1!=t.row.price.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.price))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.is_show_room_type?a("el-table-column",{attrs:{label:"是否展示","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.is_show_room_type?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.is_show_room_type.field_text))])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.layout_shi?a("el-table-column",{attrs:{label:"厅室描述","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.layout_shi?[a("div",{staticClass:"main-content"},[e._v(" "+e._s(t.row.layout_shi.field_value)+"室 "+e._s(0!=t.row.layout_ting.field_value?t.row.layout_ting.field_value+"厅":"")+" "+e._s(0!=t.row.layout_chu.field_value?t.row.layout_chu.field_value+"厨":"")+" "+e._s(0!=t.row.layout_wei.field_value?t.row.layout_wei.field_value+"卫":"")+" ")]),e.$route.query.taskId||1!=t.row.layout_shi.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.layout_shi))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.floor_height?a("el-table-column",{attrs:{label:"层高","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.floor_height?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.floor_height.field_value))]),e.$route.query.taskId||1!=t.row.floor_height.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.floor_height))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.building_type?a("el-table-column",{attrs:{label:"户型类型","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.building_type?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.building_type.field_text))]),e.$route.query.taskId||1!=t.row.building_type.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.building_type))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.house_on_sale_num?a("el-table-column",{attrs:{label:"在售余量(套)","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.house_on_sale_num?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.house_on_sale_num.field_value))]),e.$route.query.taskId||1!=t.row.house_on_sale_num.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.house_on_sale_num))+" ")])]:void 0}}],null,!0)}):e._e(),0===e.houseTypeData.data.length||e.houseTableCol.room_type?a("el-table-column",{attrs:{label:"户型居室","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.room_type?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.room_type.field_text))]),e.$route.query.taskId||1!=t.row.room_type.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.room_type))+" ")])]:void 0}}],null,!0)}):e._e(),e.houseTypeData.data.length>0?a("el-table-column",{attrs:{fixed:"right","min-width":"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_false&&"2"===t.row.is_false.field_value?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.toNewPage(t.row.house_type_id.field_value,0)}}},[e._v(" 查看 ")]):e._e(),e.hasEditAuth?[t.row.is_false&&"2"===t.row.is_false.field_value?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.toNewPage(t.row.house_type_id.field_value,1)}}},[e._v(" 编辑 ")]):e._e(),a("el-button",{staticClass:"btn-danger",attrs:{type:"text"},on:{click:function(a){return e.delectHouseType(t.row.house_type_id.field_value,t.$index)}}},[e._v(" 删除 ")]),e.roleNumber==e.ROLENUMBER&&t.row.is_false&&"2"===t.row.is_false.field_value?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.copyAndAddHouseType(t.row.house_type_id.field_value)}}},[e._v(" 复制并新增 ")]):e._e()]:e._e()]}}],null,!1,1645091432)}):e._e()],1)],1):e._e()]):e._e(),a("build-module-warp",{attrs:{"has-auth":e.getEditAuth,"build-data":e.buildingData.data}},[a("div",{staticClass:"info-content-wrap"},[a("el-table",{attrs:{data:e.buildingData.data,border:""}},[e.$route.query.taskId?e._e():a("el-table-column",{attrs:{label:"楼栋ID"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.id?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.id.field_value))])]:void 0}}],null,!0)}),a("el-table-column",{attrs:{label:"楼栋名称"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.building_name?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.building_name.field_value))]),e.$route.query.taskId||1!=t.row.building_name.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.building_name))+" ")])]:void 0}}],null,!0)}),a("el-table-column",{attrs:{label:"楼栋销售状态"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.saling_status?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.saling_status.field_text))]),e.$route.query.taskId||1!=t.row.saling_status.is_show_belong_role?e._e():a("span",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t.row.saling_status))+" ")])]:void 0}}],null,!0)}),e.$route.query.taskId?e._e():a("el-table-column",{attrs:{label:"是否显示"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.is_show?[a("div",{staticClass:"main-content"},[e._v(e._s(t.row.is_show.field_text))])]:void 0}}],null,!0)}),a("el-table-column",{attrs:{align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.toBuildingPage(t.row.id.field_value)}}},[e._v(" 查看 ")]),e.hasEditAuth?[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.toBuildingPage(t.row.id.field_value,"1")}}},[e._v(" 编辑 ")]),a("el-button",{staticClass:"btn-danger",attrs:{type:"text"},on:{click:function(a){return e.delectBuilding(t.row.id.field_value,t.$index)}}},[e._v(" 删除 ")])]:e._e()]}}])},[a("template",{slot:"header"},[e._v(" 操作 ")])],2)],1)],1)]),e.projectRemark.data?a("div",[e._m(1),a("div",{staticClass:"info-content-wrap"},[a("el-form",{attrs:{"label-width":"120px"}},e._l(e.projectRemark.data,(function(t,i){return a("el-form-item",{key:i,staticClass:"form-item-wrap",attrs:{label:t.field_desc+"："}},[a("div",{staticClass:"form-left-box flex-box"},[a("div",{staticClass:"filed-value"},[e._v(e._s(t.field_value))]),a("div",{staticClass:"info-source"},[e._v(" "+e._s(e.getOriginOperateInfo(t))+" ")])])])})),1)],1)]):e._e(),a("image-view",{attrs:{vshow:e.imageViewShow,"src-list":e.imgList},on:{"update:vshow":function(t){e.imageViewShow=t}}}),a("el-dialog",{attrs:{title:"批量标记销售状态来源",visible:e.sourceDialog,width:"750px",center:""},on:{"update:visible":function(t){e.sourceDialog=t},close:e.closeSourceDialog}},[a("el-alert",{attrs:{title:"注意：",description:"勾选模块的销售状态将会被批量改为售罄，若勾选了户型和楼栋模块，则户型和楼栋的在售余量会被置为0，且来源跟户型和楼栋的销售状态的信息来源一致，请谨慎操作！",type:"error",closable:!1}}),a("el-form",{ref:"sourceForm",attrs:{model:e.sourceForm,rules:e.sourceRules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"批量标记来源模块：",prop:"modal"}},[a("el-checkbox-group",{model:{value:e.sourceForm.modal,callback:function(t){e.$set(e.sourceForm,"modal",t)},expression:"sourceForm.modal"}},[a("el-checkbox",{attrs:{label:"1"},on:{change:function(t){return e.changeModal(t,"house")}}},[e._v("户型")]),a("el-checkbox",{attrs:{label:"2"},on:{change:function(t){return e.changeModal(t,"building")}}},[e._v("楼栋")]),a("el-checkbox",{attrs:{label:"3"},on:{change:function(t){return e.changeModal(t,"stage")}}},[e._v("分期")])],1)],1),-1!==e.sourceForm.modal.indexOf("1")?a("el-form-item",{attrs:{label:"户型信息来源：",prop:"house"}},[a("info-origin",{attrs:{"other-val":e.sourceForm.house.other,"origin-arr":e.infoSource},on:{"update:otherVal":function(t){return e.$set(e.sourceForm.house,"other",t)},"update:other-val":function(t){return e.$set(e.sourceForm.house,"other",t)}},model:{value:e.sourceForm.house.source,callback:function(t){e.$set(e.sourceForm.house,"source",t)},expression:"sourceForm.house.source"}})],1):e._e(),-1!==e.sourceForm.modal.indexOf("2")?a("el-form-item",{attrs:{label:"楼栋信息来源：",prop:"building"}},[a("info-origin",{attrs:{"other-val":e.sourceForm.building.other,"origin-arr":e.infoSource},on:{"update:otherVal":function(t){return e.$set(e.sourceForm.building,"other",t)},"update:other-val":function(t){return e.$set(e.sourceForm.building,"other",t)}},model:{value:e.sourceForm.building.source,callback:function(t){e.$set(e.sourceForm.building,"source",t)},expression:"sourceForm.building.source"}})],1):e._e(),-1!==e.sourceForm.modal.indexOf("3")?a("el-form-item",{attrs:{label:"分期信息来源：",prop:"stage"}},[a("info-origin",{attrs:{"other-val":e.sourceForm.stage.other,"origin-arr":e.infoSource},on:{"update:otherVal":function(t){return e.$set(e.sourceForm.stage,"other",t)},"update:other-val":function(t){return e.$set(e.sourceForm.stage,"other",t)}},model:{value:e.sourceForm.stage.source,callback:function(t){e.$set(e.sourceForm.stage,"source",t)},expression:"sourceForm.stage.source"}})],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeSourceDialog}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmBatchSource}},[e._v("确定")])],1)],1)],1)},o=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("楼盘动态信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-title-box"},[t("h3",{staticClass:"title-content"},[this._v("楼盘备注")])])}]},4300:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("7db0"),a("4160"),a("caad"),a("a15b"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("a9e3"),a("b64b"),a("ac1f"),a("2532"),a("1276"),a("498a"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),r=i(a("2909")),n=i(a("5530")),l=i(a("5f6d")),s=i(a("1290")),u=a("7223"),c=i(a("51ce")),d=a("4c3a"),f=a("f8fe"),p=a("2f62"),h={name:"ChildModulebuildingInfo",components:{InfoSourceDialog:l.default,BuildModuleWarp:s.default},props:{saleStatus:{type:Array,default:function(){return[]}},initData:{type:Object,default:function(){}},infoSource:{type:Array,default:function(){return[]}},isShow:{type:Array,default:function(){return[]}}},created:function(){this.projectId=this.$route.query.projectId,this.taskId=this.$route.query.taskId,this.confirmMsg=d.confirmMsg,this.isRequiredInfoOrigin=d.isRequiredInfoOrigin,this.exportOps={project_id:this.projectId,task_id:this.taskId},this.buildingConf=f.buildingConf,this.accept=f.buildingConf.fileType.join(","),this.initbuildInfo()},computed:(0,n.default)({showAll:function(){return this.model.tableData.length===this.allData.length},showExpandBtn:function(){return this.allData.length>2}},(0,p.mapState)({getEditAuth:function(e){return e.buildingDictionary.isAuditorAuth}})),data:function(){return{exportOps:{},hasShowAllData:!1,buildingName:{value:"",otherVal:""},salingStatus:{value:"",otherVal:""},buildingNameVal:"",model:{tableData:[]},tableColStatus:{},allData:[]}},watch:{initData:function(e){this.initbuildInfo()}},methods:{initbuildInfo:function(){var e=this,t=u.commonFun.deepClone(this.initData.data)||[],a=["saling_status"];t.forEach((function(t,i){Object.keys(t).forEach((function(o){0===i&&(e.tableColStatus[o]=t[o].is_show_belong_role),"1"==t[o].is_show_belong_role&&(t[o].belong_role=t[o].belong_role||""),a.includes(o)&&(t[o].field_value=t[o].field_value?Number(t[o].field_value):"")}))})),this.model.tableData=t.slice(0,2),this.allData=t},showGotoDialog:function(e){this.$emit("goToAlert",e)},exportBuilding:function(){window.open("/backend-api/project/dynamic-sales/export-build-info?export=1&project_id=".concat(this.projectId,"&task_id=").concat(this.taskId))},exportSuccess:function(e,t,a){var i=e.msg;this.$message(i)},beforeExport:function(e){var t=e.name,a=e.size/1048576,i=t.split("."),o=i[i.length-1];return a>this.buildingConf.sizeLimit?(this.$message("上传的文件不可大于".concat(this.buildingConf.sizeLimit,"M哦~")),!1):this.buildingConf.fileType.includes(".".concat(o))?void 0:(this.$message("请上传文件类型为".concat(this.buildingConf.fileType.join(),"的文件")),!1)},changeAllSource:function(e,t,a){this.allData.forEach((function(i){Object.keys(i).forEach((function(o){e===o&&(i[o].belong_role=t,i[o].belong_other=a)}))}))},addBuilding:function(){""!==this.buildingNameVal?this.checkBuildNameRepeat(this.buildingNameVal.trim())?this.$alert("“".concat(this.buildingNameVal,"” 已经在楼盘下已存在，请重新录入"),{confirmButtonText:"确定"}):this.$emit("goToAlert",{path:"buildingDetailEdit",idName:"buildingId",buildingName:this.buildingNameVal,isEdit:1}):this.$alert("请先录入楼栋名称，再新增楼栋！",{confirmButtonText:"确定"})},checkBuildNameRepeat:function(e){return!!this.allData.find((function(t){var a="";return Object.keys(t).forEach((function(e){"building_name"===e&&(a=t[e].field_value)})),a===e}))},showMoreInfo:function(){var e=this;this.tableLoading||(this.tableLoading=!0,setTimeout((function(){e.showAll?e.$refs.buildingForm.validate((function(t){t&&(e.model.tableData=e.allData.slice(0,2))})):e.model.tableData=(0,r.default)(e.allData),e.$nextTick((function(){e.tableLoading=!1}))}),100))},delectBuilding:function(e,t){var a=this;return(0,o.default)(regeneratorRuntime.mark((function i(){var o,n,l,s,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,a.confirmMsg("一旦删除则数据无法恢复，请确认是否删除！");case 3:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return o={project_id:a.projectId,task_id:a.taskId,building_id:e},i.next=9,c.default.delBuildingData(o);case 9:n=i.sent,l=n.data,s=l.code,u=l.msg,a.$message(u),0===s&&(a.allData.splice(t,1),a.initData.data.splice(t,1),a.showAll?a.model.tableData=a.allData.slice(0,2):a.model.tableData=(0,r.default)(a.allData)),i.next=20;break;case 17:i.prev=17,i.t0=i.catch(0),console.log(i.t0);case 20:case"end":return i.stop()}}),i,null,[[0,17]])})))()},getEditData:function(){var e=!1;if(this.$refs.buildingForm.validate((function(t){e=!!t})),e){for(var t=this.allData.map((function(e){var t="";return Object.keys(e).forEach((function(a){"building_name"===a&&(t=e[a].field_value)})),t})),a=!1,i="",o=0;o<t.length;o++)for(var r=o+1;r<t.length;r++)t[o]!==t[r]||(a=!0,i=t[o]);if(a)this.$alert("楼栋名称 “".concat(i,"” 在楼盘下已重复，请重检查"),{confirmButtonText:"确定"});else if(this.isRequiredInfoOrigin(this.initData.data,this.allData,!0,"楼栋信息模块："))return this.allData}else this.$message("请检查必填信息是否填写完整!")}}};t.default=h},"43a0":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img-view"},[t("image-preview-drag",{directives:[{name:"show",rawName:"v-show",value:this.viewShow,expression:"viewShow"}],attrs:{"on-close":this.closeImgView,"url-list":this.srcList}})],1)},o=[]},"4d0d":function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("a15b"),a("b0c0"),a("a9e3"),a("b680"),a("ac1f"),a("2532"),a("841c"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),r=i(a("5530")),n=i(a("eb5a")),l=i(a("9ecf")),s=i(a("0e3f")),u=i(a("3910")),c=i(a("85387")),d=i(a("51ce")),f=i(a("8fa0")),p=i(a("f149")),h=i(a("65ba")),_=a("4c3a"),m=a("f8fe"),g=a("2f62"),b=a("7223"),v={name:"DynamicSaleInfoEdit",components:{ChildModuleProjectInfo:n.default,ChildModuleHouseInfo:l.default,ChildModuleBuildingInfo:s.default,DynamicDetail:c.default,MsgDialog:p.default,CopyHouseType:u.default,AutoSetDynamic:h.default},computed:(0,r.default)({},(0,g.mapState)({getConfigList:function(e){return e.buildingDictionary.projectConfiglist},host:function(e){return e.buildingDictionary.ossOriginHost},getEditAuth:function(e){return e.buildingDictionary.isAuditorAuth}})),watch:{$route:function(e,t){this.isEdit=e.query.isEdit&&"1"===e.query.isEdit,e.query.isEdit||"1"!==t.query.isEdit||this.getInitInfo()}},data:function(){return{ROLENUMBER:m.roleNumList.yunYing,dialogVisible:!1,pageLoading:!1,isSubmiting:!1,dialogTitle:"提示信息",selfConsistentDialogvisible:!1,selfConsistentMessage:"",priceLimitDialog:!1,priceLimitMessage:"",projectData:{},houseTypeData:{},houseTypeDataEdit:{},buildingData:{},projectRemark:{},projectMarkInfo:"",isEdit:!1,codeStatus:"",breadText:"楼盘列表",houseTypeId:"",houseDialogVisible:!1,getProjectNameAndTypes:"",cityId:"",projectName:"",buildingType:""}},created:function(){this.pageLoading=!0,this.projectId=this.$route.query.projectId,this.getProjectInfo(),this.taskId=this.$route.query.taskId,this.isEdit="1"===this.$route.query.isEdit,this.confirmMsg=_.confirmMsg,this.confirmDefindMsg=_.confirmDefindMsg,this.isCheckVolume=1,this.isOperation(),this.getInitInfo()},methods:{getProjectInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.default.getProjectInfoById({project_id:e.$route.query.projectId,fields:"name,city_id,project_type_text"});case 3:a=t.sent,i=a.data,o=i.code,r=i.msg,n=i.data,0===o?(e.cityId=n.city_id,e.projectName=n.name,e.buildingType=n.project_type_text?"("+n.project_type_text+")":"",e.getProjectNameAndTypes=n.name&&n.name+e.buildingType+"--"):e.$message.error(r),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})))()},handleShortCut:function(){if(this.$route.query.isEdit&&"1"===this.$route.query.isEdit){if(this.dialogVisible)return this.isGo=!0,void this.saveInfo();this.saveInfo()}else 2==this.getEditAuth&&this.editInfo()},showHrefDialog:function(e){this.dialogVisible=!0,this.hrefMsg=e},closeHrefDiag:function(){this.dialogVisible=!1,this.isGo=!1},copyHouseChange:function(e,t){if(e){var a=this.$route.query,i=this.$router.resolve({path:"/building/BuildAddHouseDetail",query:{projectId:a.projectId,taskId:a.taskId,houseTypeId:t}});window.open(i.href),this.updateInitInfo()}},goToPage:function(e){if(e)return this.isGo=!0,void this.saveInfo();this.goToNewPage(),this.dialogVisible=!1,this.$emit("changeStatus",!1)},copyHouse:function(e,t){this.houseTypeId=t,this.houseDialogVisible=!0},isOperation:function(){"operation"===this.$route.query.role?this.breadText="楼盘列表":"expand"===this.$route.query.role&&(this.breadText="楼盘任务列表")},goToListPage:function(){"operation"===this.$route.query.role?window.location.href="/index.php?r=yw-projects/index":"expand"===this.$route.query.role&&this.$router.push({path:"/building/ExpandTaskList"})},goToNewPage:function(e){e&&window.open(e);var t=this.hrefMsg,a=t.path,i=t.isEdit,o=void 0===i?"":i,r=t.id,n=t.idName,l=t.buildingName,s=this.$route.query,u=s.projectId,c=void 0===u?"":u,d=s.taskId,f=void 0===d?"":d,p=s.role,h=void 0===p?"":p,_=r?"&".concat(n,"=").concat(r):"",m="/dist/building/".concat(a,"?projectId=").concat(c,"&taskId=").concat(f).concat(_,"&isEdit=").concat(o,"&role=").concat(h);"houseTypeId"!==n?r||"buildingId"!==n||""===l?("oldBuildingPic"===n&&(m="/index.php?r=yw-projects%2Fupdate&project_id=".concat(this.projectId,"&page_tag=view-common-info")),window.open(m)):window.open("".concat(m,"&buildingName=").concat(encodeURIComponent(l))):window.open("".concat(m))},editInfo:function(){this.$emit("changeStatus",!0)},getInitInfo:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.projectId,task_id:e.taskId},t.next=4,d.default.getDynamicInfo(a);case 4:i=t.sent,o=i.data,r=o.code,n=o.data,l=o.msg,0===r?(e.projectData=n.movable_pin_project_info||{},e.houseTypeData=n.movable_pin_house_type_info||{},e.houseTypeDataEdit=b.commonFun.deepClone(e.houseTypeData),e.houseTypeDataEdit.data=e.houseTypeData.data.filter((function(e){return e.is_false&&"2"===e.is_false.field_value})),e.buildingData=n.movable_pin_building_info||{},e.projectRemark=n.movable_pin_project_remark||{},e.$nextTick((function(){e.pageLoading=!1}))):(e.pageLoading=!1,e.$message(l)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),e.pageLoading=!1,console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},goToBuildPos:function(){this.hrefMsg={idName:"oldBuildingPic"},this.dialogVisible=!0},cancleEdit:function(){this.$emit("changeStatus",!1)},updateInitInfo:function(){this.getInitInfo().then((function(){}))},updateNewData:function(){var e=this,t=this.houseTypeData;this.houseTypeData={},this.$nextTick((function(){e.houseTypeData=t}))},saveDynamicInfo:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var i,o,r,n,l,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!t.isSubmiting){a.next=3;break}return a.abrupt("return");case 3:return t.isSubmiting=!0,t.pageLoading=!0,i={project_id:t.projectId,task_id:t.taskId,is_check_volume:t.isCheckVolume,movable_pin_project_remark:t.projectRemark||{module_name:"楼盘信息",data:[]}},Object.assign(i,e),a.next=9,d.default.saveDynamicData(i);case 9:o=a.sent,r=o.data,n=r.code,l=r.msg,t.isSubmiting=!1,s=[20002,20008,20009],t.codeStatus=n,t.pageLoading=!1,0===n?(t.isGo&&(t.closeHrefDiag(),t.goToNewPage()),t.$message("保存成功"),t.$emit("changeStatus",!1),t.isCheckVolume=1):20013===n?t.$confirm(l,"提示",{confirmButtonText:"添加",cancelButtonText:"不添加",showClose:!1,closeOnClickModal:!1,type:"warning"}).then((function(){t.isCheckVolume=2,t.saveInfo(!0).then((function(){var e=location.search;window.open("/dist/building/capacityPlan?".concat(e,"&isEdit=1"))}))})).catch((function(){t.isCheckVolume=2,t.saveInfo(!0)})):s.includes(n)?(t.selfConsistentMessage=l,t.selfConsistentDialogvisible=!0):20015===n?t.$message.warning(l):200007===n?t.$alert(l,"提示",{confirmButtonText:"确定"}):t.$message(l),a.next=24;break;case 20:a.prev=20,a.t0=a.catch(0),t.pageLoading=!1,console.log(a.t0);case 24:case"end":return a.stop()}}),a,null,[[0,20]])})))()},priceValueValid:function(e,t){var a=this.getConfigList.price_limit_list,i=a.price_min,o=a.price_max,r=Number(e.current_rate.field_value),n=Number(e.current_rate_max.field_value),l=Number(e.current_price_type.field_value),s="",u=[];return 4===l?0!==r&&0!==n&&(n>=(0,_.yuanToWan)(o)||r<=(0,_.yuanToWan)(i))&&(s="本次修改的楼盘单价为".concat(r,"-").concat(n,"万元/㎡，")):0!==r&&(r>=(0,_.yuanToWan)(o)||r<=(0,_.yuanToWan)(i))&&(s="本次修改的楼盘单价为".concat(r,"万元/㎡，")),t.forEach((function(e,t){var a=e.offer_price.field_value,r=e.house_type_num.field_value,n=e.acreage.field_value,l=e.ac_acreage.field_value,s=n?"(".concat(n,"㎡)"):l?"(套内".concat(l,"㎡)"):"";""!==a&&(a>=(0,_.yuanToWan)(o)||a<=(0,_.yuanToWan)(i))&&u.push("户型".concat(r).concat(s,"单价为").concat(a,"万元/㎡"))})),!(""!==s||u.length>0)||(this.dialogTitle="单价录入提示",this.priceLimitMessage="".concat(s," <br/> ").concat(u.join("、<br/>")," ").concat("系统判断价格可能存在异常，请确认是否正确录入！"),this.checkType="confirmChangeSts",this.priceLimitDialog=!0,!1)},validHouseTypePrice:function(e){return e.find((function(e){var t=e.status.field_value,a=e.offer_price.field_value;if(2==t)return""===a}))},getPriceMatchStatus:function(e){var t=this,a="";return{isEqual:!!e.find((function(e){var i=e.acreage.field_value,o=e.ac_acreage.field_value,r=e.offer_price.field_value,n=e.price.field_value,l=e.layout_shi.field_value,s=e.layout_ting.field_value,u=e.layout_chu.field_value,c=e.layout_wei.field_value,d=e.house_type_num.field_value,f="",p=i?"".concat(i,"㎡"):o?"(套内)".concat(o,"㎡"):"";(""!==i&&""!==r||""!==o&&""!==r)&&(f=Number(i)&&""!==o?"20000050"===(t.cityId||"")?(Number(o)?o*r:i*r).toFixed(4):(i*r).toFixed(4):Number(i)&&""===o?(i*r).toFixed(4):(o*r).toFixed(4));var h=Number(l)?"".concat(l||"","室"):"",_=Number(s)?"".concat(s||"","厅"):"",m=Number(u)?"".concat(u||"","厨"):"",g=Number(c)?"".concat(c||"","卫"):"";return a="".concat(d,"-").concat(p,"-").concat(h).concat(_).concat(m).concat(g),""!==f&&f!=n})),message:a}},saveInfo:function(){var e=arguments,t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var i,o,r,n,l,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=e.length>0&&void 0!==e[0]&&e[0],o=t.$refs.project?t.$refs.project.getEditData():{}){a.next=4;break}return a.abrupt("return");case 4:if(r=t.$refs.houseType?t.$refs.houseType.getEditData():[]){a.next=7;break}return a.abrupt("return");case 7:if(n=t.$refs.building?t.$refs.building.getEditData():[]){a.next=10;break}return a.abrupt("return");case 10:if(!0!==i){a.next=13;break}return t.saveDynamicInfo({movable_pin_project_info:{module_name:"楼盘信息",data:o},movable_pin_house_type_info:{module_name:"户型信息",data:r},movable_pin_building_info:{module_name:"楼栋信息",data:n}}),a.abrupt("return");case 13:if(o&&r&&n){a.next=15;break}return a.abrupt("return");case 15:if(t.isCheckHousePrice||!t.validHouseTypePrice(r)){a.next=24;break}return a.next=18,t.confirmDefindMsg({msg:"在售户型的报价为空，系统不推荐保存，请确认是否添加报价信息！",confirmText:"不添加",cancleText:"添加"});case 18:if(a.sent){a.next=23;break}return a.abrupt("return");case 23:t.isCheckHousePrice=!0;case 24:if(t.confirmChangeSts||t.priceValueValid(o,r)){a.next=26;break}return a.abrupt("return");case 26:if(t.confirmLimitSts||t.checkPriceLimit(o,r)){a.next=28;break}return a.abrupt("return");case 28:if(l=t.getPriceMatchStatus(r),s=l.isEqual,u=l.message,!s){a.next=35;break}return a.next=32,t.confirmMsg("".concat(u,"的价格面积修改存在错误，请确认是否保存"));case 32:if(a.sent){a.next=35;break}return a.abrupt("return");case 35:t.saveDynamicInfo({movable_pin_project_info:{module_name:"楼盘信息",data:o},movable_pin_house_type_info:{module_name:"户型信息",data:r},movable_pin_building_info:{module_name:"楼栋信息",data:n}});case 36:case"end":return a.stop()}}),a)})))()},confirmSubmit:function(){"confirmLimitSts"===this.checkType&&(this.confirmLimitSts=!0),"confirmChangeSts"===this.checkType&&(this.confirmChangeSts=!0),this.priceLimitDialog=!1,this.saveInfo()},confirmToEdit:function(){this.confirmLimitSts=!1,this.confirmChangeSts=!1,this.priceLimitDialog=!1,this.selfConsistentDialogvisible=!1},editHouseTypeStatus:function(){var e=this.codeStatus;(0,_.setTrack)(20009===e?m.trackIdList.building:m.trackIdList.houseType,{error_type:20009===e?"3":"2",role:7==this.getConfigList.current_role_source?"2":"1",frompage:"1",topage:"1"}),this.selfConsistentDialogvisible=!1,this.editorHouseInfolist=this.editorHouseInfolists},editHousePrejectStatus:function(){(0,_.setTrack)(m.trackIdList.project,{error_type:"1",role:7==this.getConfigList.current_role_source?"2":"1",frompage:"1",topage:"1"}),this.selfConsistentDialogvisible=!1},checkPriceLimit:function(e,t){var a=this,i=this.getConfigList.price_limit_list.price_limit,o=Number(e.current_rate.field_value),r=Number(e.current_rate_max.field_value),n=Number(e.current_price_type.field_value),l=Number(this.projectData.data.current_rate.field_value),s=Number(this.projectData.data.current_rate_max.field_value),u="单价涨跌超出".concat(i,"，请确认是否降价/涨价这么多！"),c="",d=[];return 1!==n&&(0!==l&&Math.abs(Math.round(1e4*o-1e4*l))>=i&&(c="楼盘单价 "),0!==s&&Math.abs(Math.round(1e4*r-1e4*s))>=i&&(c="楼盘单价 ")),t.forEach((function(e,t){var o=e.acreage.field_value,r=e.ac_acreage.field_value,n=o?"(".concat(o,"㎡)"):r?"(套内".concat(r,"㎡)"):"",l=+a.houseTypeDataEdit.data[t].offer_price.field_value,s=e.offer_price.field_value?e.offer_price.field_value:0,u=e.house_type_num.field_value;0!==l&&b.commonFun.computedFloatNumber(s,"-",l)>=(0,_.yuanToWan)(i)&&d.push("户型".concat(u).concat(n))})),!(""!==c||d.length>0)||(this.dialogTitle="价格涨跌提示",this.priceLimitMessage="本次修改的".concat(c," ").concat(c&&d.length>0?"、":""," ").concat(d.join("、<br/>")).concat(u),this.checkType="confirmLimitSts",this.priceLimitDialog=!0,!1)}}};t.default=v},"4fb9":function(e,t,a){var i=a("2037");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("1ef9e5a4",i,!0,{sourceMap:!1,shadowMode:!1})},"53ec":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this.$createElement,t=this._self._c||e;return this.isProjectShow&&"1"===this.isProjectShow&&!this.$route.query.taskId?t("el-button",{attrs:{type:"warning"},on:{click:this.autoSetDynamic}},[this._v(" 自动生成动态 ")]):this._e()},o=[]},"54ab":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"copy-house-dialog",attrs:{title:"复制户型",center:"",width:"700px",visible:e.dialogVisible},on:{open:e.dialogOpen,close:e.closeDialog,"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"copyForm",attrs:{model:e.copyForm,inline:!0}},[a("el-form-item",{attrs:{label:"您要复制的是："}}),a("el-form-item",{attrs:{label:"城市"}},[a("el-select",{staticClass:"select-city",attrs:{disabled:"",placeholder:"请选择"},on:{change:e.changeCity},model:{value:e.copyForm.city,callback:function(t){e.$set(e.copyForm,"city",t)},expression:"copyForm.city"}},e._l(e.cityList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"楼盘"}},[a("el-select",{staticClass:"select-project",attrs:{filterable:"",remote:"",disabled:"",placeholder:"请输入关键词","remote-method":e.getProjectList,loading:e.loading},on:{change:e.changeProject},model:{value:e.copyForm.project,callback:function(t){e.$set(e.copyForm,"project",t)},expression:"copyForm.project"}},e._l(e.projectList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),a("el-form-item",{attrs:{prop:"houseType",rules:[{required:!0,message:"该项为必填项"}],label:"户型"}},[a("el-select",{staticClass:"select-house-type",attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.copyForm.houseType,callback:function(t){e.$set(e.copyForm,"houseType",t)},expression:"copyForm.houseType"}},e._l(e.houseTypeList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),e._l(e.labelData,(function(t,i,o){return a("el-form-item",{key:i,staticClass:"checkbox-wrap"},[a("div",{staticClass:"info-header"},[a("el-checkbox",{on:{change:function(t){return e.handleCheckAllChange(i,t,o)}},model:{value:e.checkAll[o],callback:function(t){e.$set(e.checkAll,o,t)},expression:"checkAll[idx]"}},[e._v(" "+e._s(i)+" ")])],1),a("div",{staticClass:"info-body"},[a("el-checkbox-group",{on:{change:function(t){return e.handleCheckedChange(i,t,o)}},model:{value:e.checkedArr[o],callback:function(t){e.$set(e.checkedArr,o,t)},expression:"checkedArr[idx]"}},e._l(t,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.key}},[e._v(e._s(t.text))])})),1)],1)])})),a("el-form-item",{attrs:{label:"您要新增的户型信息："}}),a("el-form-item",{attrs:{prop:"number",rules:[{required:!0,message:"该项为必填项"}],label:"户型编号"}},[a("el-input",{attrs:{placeholder:"请输入户型编号"},model:{value:e.copyForm.number,callback:function(t){e.$set(e.copyForm,"number",t)},expression:"copyForm.number"}})],1)],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("copyForm")}}},[e._v(" 保存 ")])],1)],1)},o=[]},5881:function(e,t,a){var i=a("c45f");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("9564da7e",i,!0,{sourceMap:!1,shadowMode:!1})},5903:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,i){var o,r=!1,n=0;function l(){o&&clearTimeout(o)}"boolean"!=typeof t&&(i=a,a=t,t=void 0);function s(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];var d=this,f=Date.now()-n;function p(){n=Date.now(),a.apply(d,u)}function h(){o=void 0}r||(i&&!o&&p(),l(),void 0===i&&f>e?p():!0!==t&&(o=setTimeout(i?h:p,void 0===i?e-f:e)))}return s.cancel=function(){l(),r=!0},s}},"5ae1":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project-info"},[a("div",{staticClass:"modal-title-box project-info-title"},[a("h3",{staticClass:"title-content"},[e._v("楼盘信息")]),e.roleNumber==e.ROLENUMBER?a("p",{staticClass:"origin-title"},[e._v("信息来源：")]):e._e()]),a("el-form",{ref:"projectForm",attrs:{model:e.projectForm,"label-width":"130px"}},[e.projectForm.status?a("el-form-item",{staticClass:"form-item-wrap",attrs:{prop:"status.field_value",rules:[{required:!0,message:"请选择一个销售状态",trigger:"change"}],label:"楼盘销售状态："}},[a("div",{staticClass:"form-left-box flex-box"},[a("el-radio-group",{on:{change:e.changeSaleStatus},model:{value:e.projectForm.status.field_value,callback:function(t){e.$set(e.projectForm.status,"field_value",t)},expression:"projectForm.status.field_value"}},e._l(e.saleStatus,(function(t,i){return a("el-radio",{key:i,attrs:{label:t.id}},[e._v(" "+e._s(t.text)+" ")])})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right-start"}},[a("ul",{attrs:{slot:"content"},slot:"content"},[a("li",{staticClass:"msg-list"},[a("span",{staticClass:"focus"},[e._v("合作、外联项目：")]),e._v(" @变更通知 > @商务助理 ")]),a("li",{staticClass:"msg-list"},[a("span",{staticClass:"focus"},[e._v("非合作项目：")]),e._v(" 门户网站的动态中没有最新的动态信息（比如上次看动态时间是2019/3/6，周期内再维护时，发现该项目的动态还是3/6时），"),a("br"),e._v(" 询问咨询师或打市调电话确认最新的项目动态，再经历了3个周期后，动态仍未更新&市调电话打不通，项目变更销售状态：在售变更为待售；"),a("br"),e._v(" 待售变更为售罄。后期如果有明确的信息再根据信息的内容做相应的变更。 ")])]),a("div",{staticClass:"msg-box"},[a("i",{staticClass:"el-icon-warning",attrs:{"aria-hidden":"true"}})])])],1),1==e.projectForm.status.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.projectForm.status.belong_other,"origin-arr":e.infoSource,"operate-msg":e.getOriginOperateInfo(e.projectForm.status,!1)},on:{"update:otherVal":function(t){return e.$set(e.projectForm.status,"belong_other",t)},"update:other-val":function(t){return e.$set(e.projectForm.status,"belong_other",t)}},model:{value:e.projectForm.status.belong_role,callback:function(t){e.$set(e.projectForm.status,"belong_role",t)},expression:"projectForm.status.belong_role"}}):e._e()],1):e._e(),e.projectForm.current_price_type?a("el-form-item",{staticClass:"form-item-wrap",attrs:{prop:"current_price_type.field_value",rules:[{required:!0,message:"请选择一个单价类型",trigger:"change"}],label:"楼盘单价类型："}},[a("div",{staticClass:"form-left-box flex-box"},[a("el-radio-group",{on:{change:function(t){return e.typeChange(t,["current_rate","current_rate_max"],"unit")}},model:{value:e.projectForm.current_price_type.field_value,callback:function(t){e.$set(e.projectForm.current_price_type,"field_value",t)},expression:"projectForm.current_price_type.field_value"}},e._l(e.priceType,(function(t){return a("el-radio",{key:t.id,attrs:{label:t.id,disabled:4===t.id}},[e._v(" "+e._s(t.text)+" ")])})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right-start"}},[a("ul",{attrs:{slot:"content"},slot:"content"},[a("li",{staticClass:"msg-list"},[a("span",{staticClass:"focus"},[e._v("· 必填")]),e._v(" ，没有价格时，选择系统默认 ")]),a("li",{staticClass:"msg-list"},[a("span",{staticClass:"focus"},[e._v("· 优先级：")]),e._v(" 单价区间>均价>底价，即当同时获取到楼盘的单价区间和均价时，优先选择楼盘的区间价格 ")])]),a("div",{staticClass:"msg-box"},[a("i",{staticClass:"el-icon-warning",attrs:{"aria-hidden":"true"}})])])],1),1==e.projectForm.current_price_type.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.projectForm.current_price_type.belong_other,"origin-arr":e.infoSource,"operate-msg":e.getOriginOperateInfo(e.projectForm.current_price_type,!1)},on:{"update:otherVal":function(t){return e.$set(e.projectForm.current_price_type,"belong_other",t)},"update:other-val":function(t){return e.$set(e.projectForm.current_price_type,"belong_other",t)}},model:{value:e.projectForm.current_price_type.belong_role,callback:function(t){e.$set(e.projectForm.current_price_type,"belong_role",t)},expression:"projectForm.current_price_type.belong_role"}}):e._e()],1):e._e(),e.projectForm.current_rate&&""!==e.projectForm.current_price_type.field_value?a("el-form-item",{staticClass:"form-item-wrap",attrs:{label:"单价："}},[a("div",{staticClass:"form-left-box"},[1==e.projectForm.current_price_type.field_value?a("div",{key:1,staticClass:"flex-box"},[a("el-form-item",{attrs:{prop:"current_rate.field_value"}},[a("el-input",{staticClass:"single-ipt",attrs:{disabled:"",size:"medium"},model:{value:e.projectForm.current_rate.field_value,callback:function(t){e.$set(e.projectForm.current_rate,"field_value",t)},expression:"projectForm.current_rate.field_value"}}),a("span",{staticClass:"unit"},[e._v("万元")]),e._v(" -- "),a("el-input",{staticClass:"single-ipt",attrs:{disabled:"",size:"medium"},model:{value:e.projectForm.current_rate_max.field_value,callback:function(t){e.$set(e.projectForm.current_rate_max,"field_value",t)},expression:"projectForm.current_rate_max.field_value"}}),a("span",{staticClass:"unit"},[e._v("万元")])],1)],1):e._e(),3==e.projectForm.current_price_type.field_value?a("div",{key:3,staticClass:"flex-box"},[a("el-form-item",{attrs:{prop:"current_rate.field_value",rules:[{validator:function(t,a,i){return e.validateUnitPrice(t,a,i,"min")},message:"单价不可为空",trigger:"blur"}]}},[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1e-4,maxVal:99.9999,reg:"fourNum"},model:{value:e.projectForm.current_rate.field_value,callback:function(t){e.$set(e.projectForm.current_rate,"field_value","string"==typeof t?t.trim():t)},expression:"projectForm.current_rate.field_value"}})],1),a("span",{staticClass:"unit"},[e._v("万元起")])],1):e._e(),2==e.projectForm.current_price_type.field_value?a("div",{key:2,staticClass:"flex-box"},[a("el-form-item",{attrs:{prop:"current_rate.field_value",rules:[{validator:function(t,a,i){return e.validateUnitPrice(t,a,i,"min")},message:"单价不可为空",trigger:"blur"}]}},[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1e-4,maxVal:99.9999,reg:"fourNum"},model:{value:e.projectForm.current_rate.field_value,callback:function(t){e.$set(e.projectForm.current_rate,"field_value","string"==typeof t?t.trim():t)},expression:"projectForm.current_rate.field_value"}})],1),a("span",{staticClass:"unit"},[e._v("万元")])],1):e._e(),4==e.projectForm.current_price_type.field_value?a("div",{key:4,staticClass:"flex-box"},[a("el-form-item",{attrs:{rules:[{validator:function(t,a,i){return e.validateUnitPrice(t,a,i,"min")},message:"单价不可为空",trigger:"blur"}],prop:"current_rate.field_value"}},[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1e-4,maxVal:99.9999,reg:"fourNum"},on:{blur:e.changeSaleStatus},model:{value:e.projectForm.current_rate.field_value,callback:function(t){e.$set(e.projectForm.current_rate,"field_value",t)},expression:"projectForm.current_rate.field_value"}})],1),a("span",{staticClass:"unit"},[e._v("万元")]),e._v(" -- "),a("el-form-item",{attrs:{rules:[{validator:function(t,a,i){return e.validateUnitPrice(t,a,i,"max")},message:"单价不可为空",trigger:"blur"}],prop:"current_rate_max.field_value"}},[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1e-4,maxVal:99.9999,reg:"fourNum"},on:{blur:e.changeSaleStatus},model:{value:e.projectForm.current_rate_max.field_value,callback:function(t){e.$set(e.projectForm.current_rate_max,"field_value",t)},expression:"projectForm.current_rate_max.field_value"}})],1),a("span",{staticClass:"unit"},[e._v("万元")])],1):e._e()]),1==e.projectForm.current_rate.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.projectForm.current_rate.belong_other,"origin-arr":e.infoSource,"operate-msg":e.getOriginOperateInfo(e.projectForm.current_rate,!1)},on:{"update:otherVal":function(t){return e.$set(e.projectForm.current_rate,"belong_other",t)},"update:other-val":function(t){return e.$set(e.projectForm.current_rate,"belong_other",t)},change:function(t,a){return e.changePrice("current_rate_max",t,a)}},model:{value:e.projectForm.current_rate.belong_role,callback:function(t){e.$set(e.projectForm.current_rate,"belong_role",t)},expression:"projectForm.current_rate.belong_role"}}):e._e()],1):e._e(),e.projectForm.price_type?a("el-form-item",{staticClass:"form-item-wrap",attrs:{prop:"price_type.field_value",rules:[{required:!0,message:"请选择一个总价类型",trigger:"change"}],label:"楼盘总价类型："}},[a("div",{staticClass:"form-left-box flex-box"},[a("el-radio-group",{on:{change:function(t){return e.typeChange(t,["price_min","price_max"])}},model:{value:e.projectForm.price_type.field_value,callback:function(t){e.$set(e.projectForm.price_type,"field_value",t)},expression:"projectForm.price_type.field_value"}},e._l(e.totalPriceType,(function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.text)+" ")])})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right-start"}},[a("ul",{attrs:{slot:"content"},slot:"content"},[a("li",{staticClass:"msg-list"},[a("span",{staticClass:"focus"},[e._v("· 必填")]),e._v(" ，没有价格时，选择系统默认 ")]),a("li",{staticClass:"msg-list"},[a("span",{staticClass:"focus"},[e._v("· 优先级：")]),e._v(" 总价区间>底价>系统总价>总价，即当这些价格同时出现时，按照这个优先级填写楼盘总价区间 ")])]),a("div",{staticClass:"msg-box"},[a("i",{staticClass:"el-icon-warning",attrs:{"aria-hidden":"true"}})])])],1),1==e.projectForm.price_type.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.projectForm.price_type.belong_other,"origin-arr":e.infoSource,"operate-msg":e.getOriginOperateInfo(e.projectForm.price_type,!1)},on:{"update:otherVal":function(t){return e.$set(e.projectForm.price_type,"belong_other",t)},"update:other-val":function(t){return e.$set(e.projectForm.price_type,"belong_other",t)}},model:{value:e.projectForm.price_type.belong_role,callback:function(t){e.$set(e.projectForm.price_type,"belong_role",t)},expression:"projectForm.price_type.belong_role"}}):e._e()],1):e._e(),e.projectForm.price_min&&""!==e.projectForm.totalPriceTypeStatus?a("el-form-item",{staticClass:"form-item-wrap",attrs:{label:"总价："}},[a("div",{staticClass:"form-left-box"},[1==e.projectForm.price_type.field_value?a("div",[a("el-input",{staticClass:"single-ipt",attrs:{disabled:"",size:"medium"},model:{value:e.projectForm.price_min.field_value,callback:function(t){e.$set(e.projectForm.price_min,"field_value",t)},expression:"projectForm.price_min.field_value"}}),a("span",{staticClass:"unit"},[e._v("万元")]),e._v(" -- "),a("el-input",{staticClass:"single-ipt",attrs:{disabled:"",size:"medium"},model:{value:e.projectForm.price_max.field_value,callback:function(t){e.$set(e.projectForm.price_max,"field_value",t)},expression:"projectForm.price_max.field_value"}}),a("span",{staticClass:"unit"},[e._v("万元")])],1):e._e(),2==e.projectForm.price_type.field_value?a("div",{staticClass:"flex-box"},[a("el-form-item",{attrs:{rules:[{required:!0,message:"总价不可为空",trigger:"blur"}],prop:"price_min.field_value"}},[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1,maxVal:99999.9999,reg:"fourNum"},model:{value:e.projectForm.price_min.field_value,callback:function(t){e.$set(e.projectForm.price_min,"field_value",t)},expression:"projectForm.price_min.field_value"}})],1),a("span",{staticClass:"unit"},[e._v("万元起")])],1):e._e(),3==e.projectForm.price_type.field_value?a("div",{staticClass:"flex-box"},[a("el-form-item",{attrs:{rules:[{required:!0,message:"总价不可为空",trigger:"blur"}],prop:"price_min.field_value"}},[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1,maxVal:99999.9999,reg:"fourNum"},model:{value:e.projectForm.price_min.field_value,callback:function(t){e.$set(e.projectForm.price_min,"field_value",t)},expression:"projectForm.price_min.field_value"}})],1),a("span",{staticClass:"unit"},[e._v("万元")])],1):e._e(),4==e.projectForm.price_type.field_value?a("div",{staticClass:"flex-box"},[a("el-form-item",{attrs:{rules:[{required:!0,message:"总价不可为空",trigger:"blur"}],prop:"price_min.field_value"}},[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1,maxVal:99999.9999,reg:"fourNum"},model:{value:e.projectForm.price_min.field_value,callback:function(t){e.$set(e.projectForm.price_min,"field_value",t)},expression:"projectForm.price_min.field_value"}})],1),a("span",{staticClass:"unit"},[e._v("万元")]),e._v(" -- "),a("el-form-item",{attrs:{rules:[{required:!0,message:"总价不可为空",trigger:"blur"}],prop:"price_max.field_value"}},[a("jl-number-input",{staticClass:"num-input",attrs:{minVal:1,maxVal:99999.9999,reg:"fourNum"},model:{value:e.projectForm.price_max.field_value,callback:function(t){e.$set(e.projectForm.price_max,"field_value",t)},expression:"projectForm.price_max.field_value"}})],1),a("span",{staticClass:"unit"},[e._v("万元")])],1):e._e()]),1==e.projectForm.price_min.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.projectForm.price_min.belong_other,"origin-arr":e.infoSource,"operate-msg":e.getOriginOperateInfo(e.projectForm.price_min,!1)},on:{"update:otherVal":function(t){return e.$set(e.projectForm.price_min,"belong_other",t)},"update:other-val":function(t){return e.$set(e.projectForm.price_min,"belong_other",t)},change:function(t,a){return e.changePrice("price_max",t,a)}},model:{value:e.projectForm.price_min.belong_role,callback:function(t){e.$set(e.projectForm.price_min,"belong_role",t)},expression:"projectForm.price_min.belong_role"}}):e._e()],1):e._e(),e.projectForm.price_desc?a("el-form-item",{attrs:{rules:2!=e.projectForm.price_type.field_value&&3!=e.projectForm.current_price_type.field_value?{}:[{required:!0,message:"价格说明不可为空",trigger:"blur"}],prop:"price_desc.field_value",label:"价格说明："}},[a("div",{staticClass:"form-left-box price-flex-box flex-box"},[a("el-input",{attrs:{type:"textarea",rows:5,maxlength:255,placeholder:"请输入价格说明"},model:{value:e.projectForm.price_desc.field_value,callback:function(t){e.$set(e.projectForm.price_desc,"field_value",t)},expression:"projectForm.price_desc.field_value"}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right-start"}},[a("ul",{attrs:{slot:"content"},slot:"content"},[a("li",{staticClass:"msg-list"},[e._v(" · 当单价为区间楼盘报价选择均价时，必须填写价格说明备注项目的区间范围 ")]),a("li",{staticClass:"msg-list"},[e._v(" · 当各户型单价为底价时，需填写价格说明户型单价/总价为底价 ")]),a("li",{staticClass:"msg-list"},[e._v(" · 当获取到楼盘的价格是均价，各户型填写的价格和楼盘不一致时，需填写价格说明 ")])]),a("div",{staticClass:"msg-box"},[a("i",{staticClass:"el-icon-warning",attrs:{"aria-hidden":"true"}})])]),1==e.projectForm.price_desc.is_show_belong_role?a("info-origin",{staticClass:"msg-origin",attrs:{"other-val":e.projectForm.price_desc.belong_other,"origin-arr":e.infoSource,"operate-msg":e.getOriginOperateInfo(e.projectForm.price_desc,!1)},on:{"update:otherVal":function(t){return e.$set(e.projectForm.price_desc,"belong_other",t)},"update:other-val":function(t){return e.$set(e.projectForm.price_desc,"belong_other",t)}},model:{value:e.projectForm.price_desc.belong_role,callback:function(t){e.$set(e.projectForm.price_desc,"belong_role",t)},expression:"projectForm.price_desc.belong_role"}}):e._e()],1)]):e._e()],1)],1)},o=[]},"5b13":function(e,t,a){"use strict";a("3e57")},"5c76":function(e,t,a){"use strict";a.r(t);var i=a("43a0"),o=a("c69e");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,null,null);t.default=l.exports},"5d43":function(e,t,a){"use strict";a.r(t);var i=a("c9f2"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"5e74":function(e,t,a){"use strict";a("5881")},"5eb9":function(e,t,a){"use strict";a.r(t);var i=a("7dc8"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"5f6d":function(e,t,a){"use strict";a.r(t);var i=a("2bfd"),o=a("076c");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("7b5e");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"57c49484",null);t.default=l.exports},"606e":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".copy-house-dialog .checkbox-wrap[data-v-46550fbd]{display:block;border:2px dotted #ccc;border-radius:4px;padding:5px 10px}.copy-house-dialog .checkbox-wrap[data-v-46550fbd] .el-form-item__content{width:100%}.copy-house-dialog .info-header[data-v-46550fbd]{border-bottom:1px solid #ccc}.copy-house-dialog .select-city[data-v-46550fbd]{width:100px}.copy-house-dialog .select-project[data-v-46550fbd]{width:230px}.copy-house-dialog .select-house-type[data-v-46550fbd]{width:500px}.copy-house-dialog[data-v-46550fbd] .el-dialog--center .el-dialog__body{padding:15px 25px 0;height:550px;overflow-y:auto}",""]),e.exports=t},6340:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".el-image-viewer__btn[data-v-472a2378]{position:fixed}.el-image-viewer__img[data-v-472a2378]{border-radius:2px;-webkit-box-shadow:0 0 8px 0 hsla(0,0%,49%,.8);box-shadow:0 0 8px 0 hsla(0,0%,49%,.8)}.el-image-viewer__close[data-v-472a2378]{top:180px}",""]),e.exports=t},"65ba":function(e,t,a){"use strict";a.r(t);var i=a("53ec"),o=a("85db");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"19f1d1d2",null);t.default=l.exports},"65cb":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".flex-box[data-v-744a4a21]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.project-info[data-v-744a4a21]{padding:0 10px}.project-info-title[data-v-744a4a21]{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:start}.project-info-title .title-content[data-v-744a4a21]{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:720px}.project-info-title .origin-title[data-v-744a4a21]{font-size:15px;font-weight:700;width:500px}.form-left-box[data-v-744a4a21]{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:600px}.form-left-box.price-flex-box[data-v-744a4a21]{max-width:100%}.form-left-box .item[data-v-744a4a21]{margin-left:25px;color:#f78f0f;font-size:16px;cursor:pointer}.form-left-box .item .focus[data-v-744a4a21]{font-weight:700}.form-left-box .single-ipt[data-v-744a4a21]{width:180px}.info-origin[data-v-744a4a21]{width:520px}.form-item-wrap[data-v-744a4a21] .el-form-item__content{display:-webkit-box;display:-ms-flexbox;display:flex}",""]),e.exports=t},6627:function(e,t,a){"use strict";a.r(t);var i=a("9440"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"686e":function(e,t,a){"use strict";a("b46c")},"6acd":function(e,t,a){"use strict";a("ec3c")},"6c00":function(e,t,a){"use strict";a.r(t);var i=a("9b02"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"6f53":function(e,t,a){var i=a("83ab"),o=a("df75"),r=a("fc6a"),n=a("d1e7").f,l=function(e){return function(t){for(var a,l=r(t),s=o(l),u=s.length,c=0,d=[];u>c;)a=s[c++],i&&!n.call(l,a)||d.push(e?[a,l[a]]:l[a]);return d}};e.exports={entries:l(!0),values:l(!1)}},"708f":function(e,t,a){"use strict";a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("7223"),o={name:"InfoOrigin",props:{value:{type:[String,Number],default:""},otherVal:{type:[String,Number],default:""},originArr:{type:Array,default:function(){return[]}}},data:function(){return{dialogFormVisible:!1,originList:i.commonFun.deepClone(this.originArr),originValue:this.value,otherValue:this.otherVal,hasSubmit:!1}},watch:{value:function(e){this.originValue=e},otherVal:function(e){this.otherValue=e},originArr:function(e){this.originList=i.commonFun.deepClone(e)}},methods:{clearOriginVal:function(){this.originValue="",this.otherValue="",this.$emit("input",this.originValue),this.$emit("update:otherVal",this.otherValue),this.$emit("change",this.originValue,this.otherValue)},openDialog:function(){this.hasSubmit=!1},closeDialog:function(){this.hasSubmit||(this.originValue=this.value,this.otherValue=this.otherVal)},radioChange:function(e){this.otherValue=""},checkedCurVal:function(){if(this.hasSubmit=!0,10===this.originValue&&""===this.otherValue)return this.$message.error("请输入来源为其他对应的值"),void(this.hasSubmit=!1);this.$emit("input",this.originValue),this.$emit("update:otherVal",this.otherValue),this.$emit("change",this.originValue,this.otherValue),this.dialogFormVisible=!1},handFocus:function(){return this.dialogFormVisible=!0,!1}}};t.default=o},"771c":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"dynamic-sale"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",[a("a",{on:{click:e.goToListPage}},[e._v(e._s(e.breadText))])]),a("el-breadcrumb-item",[e._v("动销信息")]),a("el-breadcrumb-item",[e._v(e._s(e.isEdit?"编辑":"查看"))])],1),a("div",{staticClass:"dynamic-sale-main"},[a("div",{staticClass:"head-line"},[a("h4",[e._v(e._s(e.getProjectNameAndTypes)+"动销信息")]),2!=e.getEditAuth||e.isEdit?e._e():a("div",[a("auto-set-dynamic"),a("el-button",{attrs:{type:"primary"},on:{click:e.editInfo}},[e._v(" 编辑 ")])],1)]),e.isEdit?e._e():a("dynamic-detail",{attrs:{"project-data":e.projectData,"house-type-data":e.houseTypeData,"building-data":e.buildingData,"project-remark":e.projectRemark,"house-type-copy":e.getConfigList.house_type_copy_field,"role-number":e.getConfigList.current_role_source,"info-source":e.getConfigList.qd_source_list,host:e.host,"show-source-btn":2==e.getEditAuth&&!e.isEdit&&!e.taskId},on:{goToAlert:e.showHrefDialog,copyHouse:e.copyHouse,updateInitInfo:e.updateInitInfo}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}]},[e.projectData.data?a("child-module-project-info",{ref:"project",attrs:{"role-number":e.getConfigList.current_role_source,"sale-status":e.getConfigList.sale_status,"info-source":e.getConfigList.qd_source_list,"price-type":e.getConfigList.unit_price_type,"total-price-type":e.getConfigList.new_total_price_type_list,"init-data":e.projectData}}):e._e(),e.houseTypeDataEdit.data?a("child-module-house-info",{ref:"houseType",attrs:{"role-number":e.getConfigList.current_role_source,"sale-status":e.getConfigList.sale_status,"info-source":e.getConfigList.qd_source_list,"room-types":e.getConfigList.room_type,"room-orientation":e.getConfigList.new_room_orientation,"house-type-is-show":e.getConfigList.house_type_is_show,"init-data":e.houseTypeDataEdit,host:e.host,cityId:e.cityId},on:{goToAlert:e.showHrefDialog,copyHouse:e.copyHouse}}):e._e(),e.buildingData.data?a("child-module-building-info",{ref:"building",attrs:{"sale-status":e.getConfigList.sale_status,"info-source":e.getConfigList.qd_source_list,"is-show":e.getConfigList.building_is_show,"init-data":e.buildingData},on:{goToAlert:e.showHrefDialog}}):e._e(),e.getConfigList.current_role_source==e.ROLENUMBER?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.goToBuildPos}},[e._v(" 上传楼座图 ")]):e._e(),a("div",{staticClass:"project-mark"},[e.projectRemark.data?a("div",{staticClass:"modal-title-box"},[a("h3",{staticClass:"title-content"},[e._v("楼盘备注")])]):e._e(),a("el-form",{ref:"copyForm",staticClass:"mark-form"},[e.projectRemark.data?a("el-form-item",{attrs:{label:"楼盘备注：","label-width":"100px"}},[a("el-input",{staticClass:"mark-input",attrs:{type:"textarea",rows:5,maxlength:1024,placeholder:"请输入楼盘备注"},model:{value:e.projectRemark.data.project_note.field_value,callback:function(t){e.$set(e.projectRemark.data.project_note,"field_value",t)},expression:"projectRemark.data.project_note.field_value"}})],1):e._e(),a("el-form-item",{staticClass:"mark-form-btn"},[a("el-button",{on:{click:e.cancleEdit}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveInfo}},[e._v(" 保存 ")])],1)],1)],1)],1)],1),a("el-dialog",{staticClass:"price-msg-dialog",attrs:{visible:e.priceLimitDialog,title:e.dialogTitle,width:"30%",center:""},on:{"update:visible":function(t){e.priceLimitDialog=t},close:function(t){e.confirmLimitSts=!1,e.confirmChangeSts=!1}}},[a("span",{domProps:{innerHTML:e._s(e.priceLimitMessage)}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirmSubmit}},[e._v(" 确认并保存 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmToEdit}},[e._v(" 修改 ")])],1)]),a("el-dialog",{attrs:{visible:e.selfConsistentDialogvisible,title:"不自洽提示",width:"30%",center:""},on:{"update:visible":function(t){e.selfConsistentDialogvisible=t}}},[a("span",[e._v(e._s(e.selfConsistentMessage))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editHouseTypeStatus}},[e._v(" 修改"+e._s(20009===e.codeStatus?"楼栋":"户型")+"销售状态 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editHousePrejectStatus}},[e._v(" 修改楼盘销售状态 ")])],1)]),a("div",{staticClass:"dialog-box"},[a("msg-dialog",{attrs:{title:"保存跳转提示",width:"270px","dialog-show":e.dialogVisible},on:{closeDialog:e.closeHrefDiag}},[a("p",[e._v("当前页面信息还没有保存，请确认")]),a("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.goToPage(!0)}}},[e._v(" 保存当前信息并进行跳转 ")]),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.goToPage(!1)}}},[e._v(" 不保存当前信息并进行跳转 ")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" 取 消 ")])],1)])],1),a("copy-house-type",{attrs:{"house-type-id":e.houseTypeId,"city-id":e.cityId,"project-name":e.projectName,"project-id":e.projectId,"label-data":e.getConfigList.house_type_copy_field,visible:e.houseDialogVisible},on:{statusChange:e.copyHouseChange,"update:visible":function(t){e.houseDialogVisible=t}}})],1)},o=[]},"7b5e":function(e,t,a){"use strict";a("88ce")},"7dc8":function(e,t,a){"use strict";var i=a("4ea4");a("4160"),a("caad"),a("a9e3"),a("b64b"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("dc0d")),r=a("7223"),n=a("4c3a"),l=a("f8fe"),s={name:"ChildModuleProjectInfo",components:{InfoOrigin:o.default},props:{infoSource:{type:Array,default:function(){return[]}},saleStatus:{type:Array,default:function(){return[]}},priceType:{type:Array,default:function(){return[]}},totalPriceType:{type:Array,default:function(){return[]}},initData:{type:Object,default:function(){}},roleNumber:{type:[String,Number],default:""}},data:function(){return{projectForm:{},getOriginOperateInfo:n.getOriginOperateInfo,ROLENUMBER:l.roleNumList.yunYing}},computed:{priceDescRule:function(){var e=this.projectForm.current_price_type.field_value,t=this.projectForm.price_type.field_value;return 3==e||2==t?[{required:!0,message:"价格说明不可为空",trigger:"blur"}]:[]}},watch:{initData:function(e){this.initProjectInfo()}},created:function(){this.isRequiredInfoOrigin=n.isRequiredInfoOrigin,this.initProjectInfo()},methods:{validateUnitPrice:function(e,t,a,i){var o=this.projectForm.current_price_type.field_value;if(2!==this.projectForm.status.field_value||1===o||t||a(new Error),4==o)if("min"===i)this.projectForm.current_rate_max.field_value&&!t&&a(new Error);else if("max"===i){this.projectForm.current_rate.field_value&&!t&&a(new Error)}a()},changeSaleStatus:function(e){this.$refs.projectForm.validateField("current_rate.field_value"),4==this.projectForm.current_price_type.field_value&&this.$refs.projectForm.validateField("current_rate_max.field_value")},initProjectInfo:function(){var e=this,t=r.commonFun.deepClone(this.initData.data),a=["price_type","current_price_type"],i=["current_rate","current_rate_max","price_min","price_max"];Object.keys(t).forEach((function(o){"1"==t[o].is_show_belong_role&&(t[o].belong_role=Number(t[o].belong_role)),i.includes(o)&&(t[o].field_value=(0,n.yuanToWan)(t[o].field_value),e.initData.data[o].field_value=(0,n.yuanToWan)(e.initData.data[o].field_value)),a.includes(o)&&(t[o].field_value=""===t[o].field_value?"":Number(t[o].field_value)),"status"===o&&(t[o].field_value=""===t[o].field_value||"0"===t[o].field_value?"":Number(t[o].field_value))})),this.projectForm=t},typeChange:function(e,t,a){var i=this;"unit"===a&&(1==e?(this.$refs.projectForm.clearValidate("current_rate.field_value"),this.$refs.projectForm.clearValidate("current_rate_max.field_value")):(this.$refs.projectForm.validateField("current_rate.field_value"),this.$refs.projectForm.validateField("current_rate_max.field_value"))),t.forEach((function(e){i.projectForm[e].field_value=""}))},changePrice:function(e,t,a){this.projectForm[e].belong_role=t,this.projectForm[e].belong_other=a},getEditData:function(){var e=this.projectForm,t=e.current_price_type.field_value,a=e.current_rate.field_value,i=e.current_rate_max.field_value,o=e.price_type.field_value,r=e.price_min.field_value,n=e.price_max.field_value;if(4!=t&&1!=t&&(this.projectForm.current_rate_max.field_value=a),4!=o&&1!=o&&(this.projectForm.price_max.field_value=r),4==t&&""!==a&&""!==i&&Number(a)>=Number(i))this.$message.error("单价的最大值必须大于最小值！");else if(4==o&&""!==r&&""!==n&&Number(r)>=Number(n))this.$message.error("起始总价应小于结束总价！");else{var l=!1;if(this.$refs.projectForm.validate((function(e){l=!!e})),l){if(this.isRequiredInfoOrigin(this.initData.data,this.projectForm,!1,"楼盘模块："))return this.projectForm}else this.$message("请检查必填信息是否填写完整!")}}}};t.default=s},"7e48":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".dynamic-sale[data-v-7ef5982a]{font-size:14px;padding:15px 15px 0;background-color:#fff;border-radius:8px}.dynamic-sale-main[data-v-7ef5982a]{margin:15px 0}.dynamic-sale-main .head-line[data-v-7ef5982a]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding-bottom:15px;font-size:16px;min-height:40px}.dynamic-sale-main .head-line h4[data-v-7ef5982a]{-webkit-box-flex:1;-ms-flex:1;flex:1;padding-right:20px}.project-mark[data-v-7ef5982a]{padding:0 10px 20px}.mark-form[data-v-7ef5982a],.project-mark[data-v-7ef5982a]{margin-top:20px}.mark-form .mark-form-btn[data-v-7ef5982a]{text-align:center}.dialog-box[data-v-7ef5982a] .el-button{width:200px;margin-left:0;margin-bottom:10px}.price-msg-dialog[data-v-7ef5982a] .el-dialog__body{max-height:400px;overflow:auto}",""]),e.exports=t},8192:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"viewer-fade"}},[a("div",{staticClass:"el-image-viewer__wrapper",style:e.imgBoxstyle},[a("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:e.hide}},[a("i",{staticClass:"el-icon-circle-close",attrs:{"aria-hidden":"true"}})]),e.isSingle?e._e():[a("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[a("i",{staticClass:"el-icon-arrow-left",attrs:{"aria-hidden":"true"}})]),a("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[a("i",{staticClass:"el-icon-arrow-right",attrs:{"aria-hidden":"true"}})])],a("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[a("div",{staticClass:"el-image-viewer__actions__inner"},[a("i",{staticClass:"el-icon-zoom-out",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.handleActions("zoomOut")}}}),a("i",{staticClass:"el-icon-zoom-in",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.handleActions("zoomIn")}}}),a("i",{staticClass:"el-image-viewer__actions__divider",attrs:{"aria-hidden":"true"}}),a("i",{class:e.mode.icon,attrs:{"aria-hidden":"true"},on:{click:e.toggleMode}}),a("i",{staticClass:"el-image-viewer__actions__divider",attrs:{"aria-hidden":"true"}}),a("i",{staticClass:"el-icon-refresh-left",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.handleActions("anticlocelise")}}}),a("i",{staticClass:"el-icon-refresh-right",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.handleActions("clocelise")}}})])]),a("div",{staticClass:"el-image-viewer__canvas"},e._l(e.urlList,(function(t,i){return i===e.index?a("img",{key:t,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg,alt:"图片"},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}}):e._e()})),0)],2)])},o=[]},8194:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hosueRoomIsReg=function(e,t){var a=!0,i=e>1&&e>5&&5!==t;((e>1||1===e&&0!==t&&7!==t)&&e<=5&&e!==t||i)&&(this.$alert("厅室描述和户型居室不匹配，请确认检查信息！","提示",{confirmButtonText:"确定"}),a=!1);return a}},"84e8":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".info-source[data-v-57c49484]{padding:0;display:block;line-height:1}.info-source[data-v-57c49484] .el-input{padding:0}.radio-group[data-v-57c49484]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:32px;overflow:initial}.radio-group .origin-radio.el-radio[data-v-57c49484]{margin-right:20px}.radio-group .origin-radio.el-radio[data-v-57c49484] .el-radio__label{padding-left:2px}.radio-group .other-origin[data-v-57c49484]{width:150px}.source-val[data-v-57c49484],.source-val[data-v-57c49484] .el-input{padding:0}.source-val[data-v-57c49484] .el-input .el-input__suffix{right:15px}.source-dialog[data-v-57c49484] .el-dialog{display:block!important}.source-dialog[data-v-57c49484] .el-dialog>div{display:block}.source-dialog[data-v-57c49484] .el-dialog .el-dialog__body{padding:25px 20px}",""]),e.exports=t},85387:function(e,t,a){"use strict";a.r(t);var i=a("40e9"),o=a("e2b3");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("686e");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"aac9a5ac",null);t.default=l.exports},"85db":function(e,t,a){"use strict";a.r(t);var i=a("1067"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"88ce":function(e,t,a){var i=a("84e8");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("5cc11136",i,!0,{sourceMap:!1,shadowMode:!1})},"88ff":function(e,t,a){"use strict";a.r(t);var i=a("ae0e"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"8b52":function(e,t,a){"use strict";a.r(t);var i=a("a8b9"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},"8d45":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("build-module-warp",{attrs:{"build-data":e.allData,"has-auth":e.getEditAuth,"is-edit":!0},on:{goToAlert:function(t){return e.$emit("goToAlert",t)}}},[a("div",{staticClass:"table-wrap-box"},[a("el-form",{ref:"buildingForm",attrs:{model:e.model}},[a("el-table",{attrs:{data:e.model.tableData,border:""}},[e.$route.query.taskId?e._e():a("el-table-column",{attrs:{label:"楼栋ID"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.id?[e._v(" "+e._s(t.row.id.field_value)+" ")]:void 0}}],null,!0)}),a("el-table-column",{attrs:{"min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.building_name?[a("el-form-item",{attrs:{align:"center",prop:"tableData."+t.$index+".building_name.field_value",rules:[{required:!0,message:"楼栋名称不可为空",trigger:"blur"}]}},[a("el-input",{attrs:{maxlength:10,placeholder:"请输入内容"},model:{value:t.row.building_name.field_value,callback:function(a){e.$set(t.row.building_name,"field_value","string"==typeof a?a.trim():a)},expression:"scope.row.building_name.field_value"}})],1)]:void 0}}],null,!0)},[a("template",{slot:"header"},[e._v(" 楼栋名称 "),a("el-tooltip",{staticClass:"warn-msg",attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 楼栋名称要求： "),a("br"),e._v(" · 和开发商保持一致：商务/拓展提供的楼栋名称或者开发商提供的楼栋图 "),a("br"),e._v(" · 获取不到开发商口径的楼栋名称时，对标参考的竞品的楼栋名称 ")]),a("i",{staticClass:"el-icon-warning",attrs:{"aria-hidden":"true"}})])],1)],2),"1"==e.tableColStatus.building_name?a("el-table-column",{attrs:{align:"center",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"origin-arr":e.infoSource,"other-val":e.buildingName.otherVal},on:{change:function(t,a){return e.changeAllSource("building_name",t,a)},"update:otherVal":function(t){return e.$set(e.buildingName,"otherVal",t)},"update:other-val":function(t){return e.$set(e.buildingName,"otherVal",t)}},model:{value:e.buildingName.value,callback:function(t){e.$set(e.buildingName,"value",t)},expression:"buildingName.value"}})]}},{key:"default",fn:function(t){return t.row.building_name?[a("info-source-dialog",{attrs:{"other-val":t.row.building_name.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.building_name,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.building_name,"belong_other",a)}},model:{value:t.row.building_name.belong_role,callback:function(a){e.$set(t.row.building_name,"belong_role",a)},expression:"scope.row.building_name.belong_role"}})]:void 0}}],null,!0)}):e._e(),a("el-table-column",{attrs:{align:"center","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.saling_status?[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.saling_status.field_value,callback:function(a){e.$set(t.row.saling_status,"field_value",a)},expression:"scope.row.saling_status.field_value"}},e._l(e.saleStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)]:void 0}}],null,!0)},[a("template",{slot:"header"},[e._v(" 楼栋销售状态 ")])],2),"1"==e.tableColStatus.saling_status?a("el-table-column",{attrs:{align:"center",width:"200"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("info-source-dialog",{attrs:{"other-val":e.salingStatus.otherVal,"origin-arr":e.infoSource},on:{change:function(t,a){return e.changeAllSource("saling_status",t,a)},"update:otherVal":function(t){return e.$set(e.salingStatus,"otherVal",t)},"update:other-val":function(t){return e.$set(e.salingStatus,"otherVal",t)}},model:{value:e.salingStatus.value,callback:function(t){e.$set(e.salingStatus,"value",t)},expression:"salingStatus.value"}})]}},{key:"default",fn:function(t){return t.row.saling_status&&1==t.row.saling_status.is_show_belong_role?[a("info-source-dialog",{attrs:{"other-val":t.row.saling_status.belong_other,"origin-arr":e.infoSource},on:{"update:otherVal":function(a){return e.$set(t.row.saling_status,"belong_other",a)},"update:other-val":function(a){return e.$set(t.row.saling_status,"belong_other",a)}},model:{value:t.row.saling_status.belong_role,callback:function(a){e.$set(t.row.saling_status,"belong_role",a)},expression:"scope.row.saling_status.belong_role"}})]:void 0}}],null,!0)}):e._e(),e.$route.query.taskId?e._e():a("el-table-column",{attrs:{label:"是否显示","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.is_show?[a("el-form-item",{attrs:{prop:"tableData."+t.$index+".is_show.field_value",rules:[{required:!0,message:"是否显示必填",trigger:"change"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.is_show.field_value,callback:function(a){e.$set(t.row.is_show,"field_value",a)},expression:"scope.row.is_show.field_value"}},e._l(e.isShow,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1)]:void 0}}],null,!0)}),a("el-table-column",{attrs:{align:"center","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showGotoDialog({path:"buildingDetailEdit",id:t.row.id.field_value,idName:"buildingId"})}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showGotoDialog({path:"buildingDetailEdit",id:t.row.id.field_value,idName:"buildingId",isEdit:1})}}},[e._v(" 编辑 ")]),a("el-button",{staticClass:"btn-danger",attrs:{type:"text"},on:{click:function(a){return e.delectBuilding(t.row.id.field_value,t.$index)}}},[e._v(" 删除 ")])]}}])},[a("template",{slot:"header"},[e._v(" 操作 ")])],2)],1)],1),e.showExpandBtn?a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showMoreInfo()}}},[e._v(" "+e._s(e.showAll?"收起查看楼栋":"查看更多楼栋")+" ")])],1):e._e()],1)])},o=[]},"8f99":function(e,t,a){"use strict";a.r(t);var i=a("aa32"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},9440:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("7db0"),a("4160"),a("caad"),a("d81d"),a("fb6a"),a("a434"),a("a9e3"),a("b680"),a("b64b"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("2909"));a("96cf");var r=i(a("1da1")),n=i(a("5903")),l=i(a("5c76")),s=i(a("2fc4")),u=a("7223"),c=i(a("51ce")),d=a("4c3a"),f=a("8194"),p=a("f8fe"),h={name:"ChildModuleHouseInfo",components:{ImageView:l.default,InfoSourceComponent:s.default},props:{infoSource:{type:Array,default:function(){return[]}},saleStatus:{type:Array,default:function(){return[]}},roomTypes:{type:Array,default:function(){return[]}},roomOrientation:{type:Array,default:function(){return[]}},houseTypeIsShow:{type:Array,default:function(){return[]}},initData:{type:Object,default:function(){}},host:{type:String,default:""},roleNumber:{type:[String,Number],default:""},cityId:{type:[String,Number],default:""}},created:function(){this.initInfo(),this.getHouseTypeList(),this.initHouseInfo(),this.hosueRoomIsReg=f.hosueRoomIsReg},mounted:function(){this.bindEvents()},destroyed:function(){this.unbindEvents()},computed:{bodyWrapper:function(){return this.$refs.bodyWrapper},showAll:function(){return this.model.tableData.length===this.allData.length},showExpandBtn:function(){return this.allData.length>2},canTbShow:function(){var e=this;return function(t){return e.tableItemShows[t]&&"1"==e.tableColStatus[t]}}},data:function(){return{imgList:[],imageViewShow:!1,ROLENUMBER:p.roleNumList.yunYing,tableLoading:!1,hasShowAllData:!1,model:{tableData:[]},houseTypes:[],tableColStatus:{},tableItemShows:{},houseTypeNum:{value:"",otherVal:""},status:{value:"",otherVal:""},acreage:{value:"",otherVal:""},acAcreage:{value:"",otherVal:""},offerPrice:{value:"",otherVal:""},price:{value:"",otherVal:""},houseOnSaleNum:{value:"",otherVal:""},layoutShi:{value:"",otherVal:""},roomType:{value:"",otherVal:""},buildingType:{value:"",otherVal:""},floorHeight:{value:"",otherVal:""},orientation:{value:"",otherVal:""}}},watch:{initData:function(){this.initHouseInfo()}},methods:{bindEvents:function(){this.bodyWrapper&&this.bodyWrapper.addEventListener("scroll",this.syncPostion,{passive:!0})},unbindEvents:function(){this.bodyWrapper&&this.bodyWrapper.removeEventListener("scroll",this.syncPostion,{passive:!0})},syncPostion:(0,n.default)(20,(function(){var e=this.bodyWrapper,t=e.scrollLeft,a=e.scrollTop,i=this.$refs,o=i.headerWrapper,r=i.fixedBodyWrapper,n=i.rightFixedBodyWrapper;o&&(o.scrollLeft=t),r&&(r.scrollTop=a),n&&(n.scrollTop=a)})),imgPreview:function(e){this.imgList=this.createImageUrl(e),this.imageViewShow=!0},initHouseInfo:function(){var e=this;this.belongCity=this.cityId;var t=u.commonFun.deepClone(this.initData.data),a=["status","is_show_room_type","acreage","ac_acreage","offer_price","price"],i=["price","offer_price"],o=t.map((function(t,o){var r={};return Object.keys(t).forEach((function(n){0===o&&(e.tableColStatus[n]=1==t[n].is_show_belong_role,e.tableItemShows[n]=!0),"1"==t[n].is_show_belong_role&&(t[n].belong_role=t[n].belong_role||""),i.includes(n)&&(t[n].field_value=(0,d.yuanToWan)(t[n].field_value),e.initData.data[o][n].field_value=(0,d.yuanToWan)(e.initData.data[o][n].field_value)),a.includes(n)&&(t[n].field_value=t[n].field_value?Number(t[n].field_value):"");var l=t[n];r[n]={field_id:l.field_id,field_name:l.field_name,field_value:l.field_value,field_desc:l.field_desc,belong_role:l.belong_role,belong_other:l.belong_other,is_show_belong_role:l.is_show_belong_role,field_text:l.field_text,table_id:l.table_id}})),r}));this.model.tableData=o.slice(0,2),this.allData=o},initInfo:function(){this.projectId=this.$route.query.projectId,this.taskId=this.$route.query.taskId,this.confirmMsg=d.confirmMsg,this.isRequiredInfoOrigin=d.isRequiredInfoOrigin},showGotoDialog:function(e){this.$emit("goToAlert",e)},getHouseTypeList:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.projectId},t.next=4,c.default.getHouseTypeInfo(a);case 4:i=t.sent,o=i.data,r=o.code,n=o.data,l=o.msg,0===r?e.houseTypes=n:e.$message(l),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},showMoreInfo:function(){var e=this;this.tableLoading||(this.tableLoading=!0,setTimeout((function(){e.showAll?e.$refs.houseForm.validate((function(t){t&&(e.model.tableData=e.allData.slice(0,2))})):e.model.tableData=(0,o.default)(e.allData),e.$nextTick((function(){e.tableLoading=!1}))}),100))},houseRoomLinkage:function(e){var t=e.layout_shi.field_value;t<5&&t>1?e.room_type.field_value=Number(t):t>=5&&(e.room_type.field_value=5)},delectHouseType:function(e,t){var a=this;return(0,r.default)(regeneratorRuntime.mark((function i(){var r,n,l,s,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,a.confirmMsg("一旦删除则数据无法恢复，请确认是否删除！");case 3:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return r={project_id:a.projectId,task_id:a.taskId,house_type_id:e},i.next=9,c.default.delHouseTypeData(r);case 9:n=i.sent,l=n.data,s=l.code,u=l.msg,a.$message(u),0===s&&(a.allData.splice(t,1),a.showAll?a.model.tableData=(0,o.default)(a.allData):a.model.tableData=a.allData.slice(0,2)),i.next=20;break;case 17:i.prev=17,i.t0=i.catch(0),console.log(i.t0);case 20:case"end":return i.stop()}}),i,null,[[0,17]])})))()},changePriceSource:function(e,t,a){e.price.belong_role=t,e.price.belong_other=a},changeAllSource:function(e,t,a){this.allData.forEach((function(i){Object.keys(i).forEach((function(o){if(e===o){if("layout_shi"===e){["layout_ting","layout_chu","layout_wei"].forEach((function(e){i[e].belong_role=t,i[e].belong_other=a}))}"offer_price"===e&&(i.price.belong_role=t,i.price.belong_other=a),i[o].belong_role=t,i[o].belong_other=a}}))}))},changeChu:function(e,t,a){["layout_ting","layout_shi","layout_chu","layout_wei"].forEach((function(i){e[i].belong_role=t,e[i].belong_other=a}))},createImageUrl:function(e){var t=this;return e.map((function(e){return"".concat(t.host).concat(e)}))},validAcreageAndAcacreage:function(e){var t=e.acreage.field_value,a=e.ac_acreage.field_value;return""===t&&""===a},validHomeDescWithHouse:function(e){var t=e.layout_shi.field_value,a=e.room_type.field_value;return!this.hosueRoomIsReg(Number(t),Number(a))},calculationAllPrice:function(e){var t=e.acreage.field_value,a=e.ac_acreage.field_value,i=e.offer_price.field_value;this.validAcreageAndAcacreage(e)?this.$message.error("建筑面积和套内面积二必填一"):""!==t&&""!==i||""!==a&&""!==i?Number(t)&&""!==a?(console.warn(this.belongCity),"20000050"===this.belongCity?e.price.field_value=(Number(a)?a*i:t*i).toFixed(4):e.price.field_value=(t*i).toFixed(4)):Number(t)&&""===a?e.price.field_value=(t*i).toFixed(4):e.price.field_value=(a*i).toFixed(4):""!==i&&null!=i||(e.price.field_value="")},checkHouseMargin:function(e){var t=e.status,a=e.house_on_sale_num,i=!0,o=(2==t.field_value||4==t.field_value)&&""!==a.field_value&&a.field_value<=0,r=3==t.field_value&&""!==a.field_value&&a.field_value>0;return(o||r)&&(this.$alert(this.houseNumArcageConcat(e)+"的销售状态和在售余量不自冾","提示",{confirmButtonText:"确定"}),i=!1),i},houseNumArcageConcat:function(e){var t,a,i,o,r=e.house_type_num,n=e.layout_shi,l=e.layout_ting,s=e.layout_chu,u=e.layout_wei,c=e.acreage,d=e.ac_acreage,f="";return t=""===n.field_value||0==n.field_value?"":n.field_value+"室",a=""===l.field_value||0==l.field_value?"":l.field_value+"厅",i=""===s.field_value||0==s.field_value?"":s.field_value+"厨",o=""===u.field_value||0==u.field_value?"":u.field_value+"卫",""!==c.field_value&&""!==d.field_value||""!==c.field_value&&""===d.field_value?f=r.field_value+"-"+c.field_value+"㎡-"+t+a+i+o:""===c.field_value&&""!==d.field_value&&(f=r.field_value+"- (套内)"+d.field_value+"㎡-"+t+a+i+o),f},copyAndAddHouseType:function(e){this.$emit("copyHouse","edit",e)},getEditData:function(){var e=this,t=!1;if(this.$refs.houseForm.validate((function(e){t=!!e})),t){if(!e.allData.find((function(t){return!e.checkHouseMargin(t)}))){if(!e.allData.find((function(t){return e.validHomeDescWithHouse(t)}))){if(e.allData.find((function(t){return e.validAcreageAndAcacreage(t)})))this.$message.error("建筑面积和套内面积二必填一");else if(this.isRequiredInfoOrigin(this.initData.data,this.allData,!0,"户型信息模块："))return this.allData}}}else this.$message("请检查必填信息是否填写完整!")}}};t.default=h},"9b02":function(e,t,a){"use strict";a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("7223"),o={name:"InfoOrigin",props:{value:{type:[String,Number],default:""},otherVal:{type:[String,Number],default:""},originArr:{type:Array,default:function(){return[]}},isInFixed:{type:Boolean,default:!1},isShowVal:{type:Boolean,default:!0}},data:function(){return{dialogFormVisible:!1,originList:i.commonFun.deepClone(this.originArr),originValue:this.value,otherValue:this.otherVal,hasSubmit:!1}},watch:{value:function(e){this.originValue=e},otherVal:function(e){this.otherValue=e},originArr:function(e){this.originList=i.commonFun.deepClone(e)}},computed:{canClear:function(){return this.originValue||this.otherValue}},methods:{clearOriginVal:function(){this.originValue="",this.otherValue="",this.$emit("input",this.originValue),this.$emit("update:otherVal",this.otherValue),this.$emit("change",this.originValue,this.otherValue)},openDialog:function(){this.hasSubmit=!1},closeDialog:function(){this.hasSubmit||(this.originValue=this.value,this.otherValue=this.otherVal)},radioChange:function(e){this.otherValue=""},checkedCurVal:function(){if(this.hasSubmit=!0,10===this.originValue&&""===this.otherValue)return this.$message.error("请输入来源为其他对应的值"),void(this.hasSubmit=!1);this.$emit("input",this.originValue),this.$emit("update:otherVal",this.otherValue),this.$emit("change",this.originValue,this.otherValue),this.dialogFormVisible=!1},handFocus:function(){return this.dialogFormVisible=!0,!1}}};t.default=o},"9ecf":function(e,t,a){"use strict";a.r(t);var i=a("2df2"),o=a("6627");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("ae5f");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"ef6a0950",null);t.default=l.exports},a8b9:function(e,t,a){"use strict";var i=a("4ea4");a("cb29"),a("4160"),a("d81d"),a("a434"),a("a9e3"),a("b64b"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("2909"));a("96cf");var r=i(a("1da1")),n=i(a("1e63")),l=i(a("51ce")),s={name:"CopyHouseTypeDialog",props:{labelData:{type:Object,default:function(){}},visible:{type:Boolean,default:!1},houseTypeId:{type:[String,Number],default:""},cityId:{type:[String,Number],default:""},projectName:{type:String,default:""},projectId:{type:String,default:""}},created:function(){this.labelInfo=this.labelData,this.projectId=this.$route.query.projectId,this.getCityList(),this.getHouseListById()},data:function(){return{loading:!1,dialogVisible:this.visible,checkAll:[!0,!0,!0,!0],checkedArr:[[],[],[],[]],cityList:[],projectList:[],houseTypeList:[],copyForm:{city:Number(this.cityId),project:this.projectName,houseType:this.houseTypeId,number:""}}},watch:{visible:function(e){this.dialogVisible=e},houseTypeId:function(e){this.copyForm.houseType=e},cityId:function(e){this.copyForm.city=Number(e)},projectName:function(e){this.copyForm.project=e}},methods:{getCityList:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,i,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.default.getCityListData();case 3:a=t.sent,i=a.data,o=i.code,r=i.data,0===o&&(e.cityList=r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},changeCity:function(e){this.copyForm.project="",this.copyForm.houseType=""},changeProject:function(e){this.copyForm.houseType="",this.getHouseListById()},getProjectList:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var i,o,r,l,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t.loading=!0,i={city_id:t.copyForm.city,q:e},a.next=5,n.default.getProjectListData(i);case 5:o=a.sent,r=o.data,l=r.code,s=r.data,u=r.msg,t.loading=!1,0===l?t.projectList=s:t.$message(u),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0),t.loading=!1;case 18:case"end":return a.stop()}}),a,null,[[0,14]])})))()},getHouseListById:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.projectId,task_id:e.$route.query.taskId,select_false:"0"},t.next=4,l.default.getHouseTypeListData(a);case 4:i=t.sent,o=i.data,r=o.code,n=o.data,0===r&&(e.houseTypeList=n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},dialogOpen:function(){this.checkAll.fill(!0),this.checkedAllLabel()},handleCheckAllChange:function(e,t,a){var i=this.labelData[e].map((function(e){return e.key}));this.checkedArr[a]=t?i:[]},handleCheckedChange:function(e,t,a){var i=t.length;this.checkAll[a]=i===this.labelData[e].length,this.checkAll.splice(0,0)},checkedAllLabel:function(){var e=this,t=-1;Object.keys(this.labelData).forEach((function(a,i){var o=-1;e.checkedArr[i]=e.labelData[a].map((function(e,t){return"show_index"===e.key&&(o=t),e.key})),-1!==o&&(t=i,e.checkedArr[i].splice(o,1))})),this.checkedArr.splice(0,0),-1!==t&&(this.checkAll[t]=!1)},closeDialog:function(){this.dialogVisible=!1,this.$emit("update:visible",!1)},saveCopyInfo:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,i,r,n,s,u,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=function(){var t=[];return e.checkedArr.forEach((function(e){t.push.apply(t,(0,o.default)(e))})),t}(),console.log(a),i={},a.forEach((function(e){i[e]="1"})),0!==a.length){t.next=9;break}return e.$message.warning("至少选中一个复制的项"),t.abrupt("return");case 9:return r={project_id:e.projectId,source_house_type:i,house_type_num:e.copyForm.number,house_type_id:e.copyForm.houseType},t.next=12,l.default.saveCoyyHouseType(r);case 12:n=t.sent,s=n.data,u=s.code,c=s.data,d=s.msg,0===u?(e.$message("复制户型信息保存成功"),e.closeDialog(),e.$emit("statusChange",!0,c)):(e.$emit("statusChange",!1,d),e.$message(d)),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(0),e.$emit("statusChange",!1,t.t0),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,20]])})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message("请检查必填项是否填写完整"),!1;t.saveCopyInfo()}))}}};t.default=s},a90f:function(e,t,a){"use strict";a("f580")},aa32:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"MsgDialog",data:function(){return{dialogVisble:this.dialogShow}},props:{width:{type:String,default:"30%"},dialogShow:{type:Boolean,default:!1},center:{type:Boolean,default:!0},title:{type:String,default:"提示"}},watch:{dialogShow:function(e){this.dialogVisble=e}},methods:{dialogConfirm:function(){this.$emit("confirm")},close:function(){this.$emit("closeDialog")}}};t.default=i},ae0e:function(e,t,a){"use strict";a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"InfoOrigin",props:{otherVal:{type:String,default:""},value:{type:[String,Number],default:""},operateMsg:{type:String,default:""},isBreak:{type:Boolean,default:!1},originArr:{type:Array,default:function(){return[]}}},watch:{value:function(e){this.originValue=e},otherVal:function(e){this.otherValue=e}},data:function(){return{originValue:this.value,otherValue:this.otherVal}},methods:{otherValInput:function(e){this.$emit("update:otherVal",e),this.$emit("change",this.originValue,this.otherValue)},radioChange:function(e){this.otherValue="",this.$emit("input",e),this.$emit("change",e,this.otherValue),this.$emit("update:otherVal",this.otherValue)}}};t.default=i},ae5f:function(e,t,a){"use strict";a("fc82")},b46c:function(e,t,a){var i=a("0781b");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("76a2235c",i,!0,{sourceMap:!1,shadowMode:!1})},b5c0:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-origin"},[a("div",{staticClass:"radio-box"},[a("el-radio-group",{class:{"radio-group":!e.isBreak,"radio-break":e.isBreak},on:{change:e.radioChange},model:{value:e.originValue,callback:function(t){e.originValue=t},expression:"originValue"}},[e._l(e.originArr,(function(t,i){return a("el-radio",{key:i,staticClass:"origin-radio",attrs:{label:t.id}},[e._v(" "+e._s(t.text)+" ")])})),a("el-input",{directives:[{name:"show",rawName:"v-show",value:10==e.originValue,expression:"originValue == 10"}],staticClass:"other-origin",attrs:{size:"small"},on:{input:e.otherValInput},model:{value:e.otherValue,callback:function(t){e.otherValue=t},expression:"otherValue"}})],2)],1),a("div",{staticClass:"time-info"},[e._v(" "+e._s(e.operateMsg)+" ")])])},o=[]},b96b:function(e,t,a){"use strict";a("2417")},b973:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".radio-group[data-v-0d35b81b]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px}.radio-group .origin-radio.el-radio[data-v-0d35b81b]{margin-right:7px}.radio-group .origin-radio.el-radio[data-v-0d35b81b] .el-radio__label{padding-left:4px}.radio-group .other-origin[data-v-0d35b81b]{width:71px}.radio-break[data-v-0d35b81b]{width:322px;height:40px;line-height:26px;display:inline-block;margin-bottom:24px}.radio-break .origin-radio.el-radio[data-v-0d35b81b]{margin-right:10px}.radio-break .origin-radio.el-radio[data-v-0d35b81b] .el-radio__label{padding-left:4px}.radio-break .other-origin[data-v-0d35b81b]{width:100px}.time-info[data-v-0d35b81b]{line-height:1;color:#777}",""]),e.exports=t},bf5c:function(e,t,a){"use strict";a.r(t);var i=a("4300"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},c45f:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".source-dialog .radio-group /deep/ .el-input{width:80px}.source-dialog .radio-group /deep/ .el-input.other-input-inner .el-input__inner{height:28px;line-height:28px;padding:0 15px;color:#606266;border-radius:4px;border:1px solid #dcdfe6}",""]),e.exports=t},c69e:function(e,t,a){"use strict";a.r(t);var i=a("f268"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},c8bf:function(e,t,a){"use strict";a.r(t);var i=a("4d0d"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},c9f2:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("c975"),a("a9e3"),a("b680"),a("b64b"),a("07ac"),a("ac1f"),a("466d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("5530")),r=function(e){var t=!1;return function(){for(var a=this,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];t||(t=!0,window.requestAnimationFrame((function(i){e.apply(a,o),t=!1})))}},n=function(e,t,a){e&&t&&a&&e.addEventListener(t,a,!1)},l=function(e,t,a){e&&t&&e.removeEventListener(t,a,!1)},s={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},u=(window.navigator.userAgent.match(/firefox/i),{name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}}},data:function(){return{index:0,isShow:!1,infinite:!0,loading:!1,mode:s.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,a=e.deg,i=e.enableTransition,o={transform:"scale(".concat(t,") rotate(").concat(a,"deg)"),transition:i?"transform .3s":""};return this.mode===s.CONTAIN&&(o.maxWidth=o.maxHeight="100%"),o},imgBoxstyle:function(){var e=this.transform,t=e.offsetX,a=e.offsetY;return{width:"400px",height:"100%",marginLeft:"-200px",transition:e.enableTransition?"transform .3s":"","z-index":this.zIndex,left:t?"".concat(t,"px"):"50%",top:a?"".concat(a,"px"):"0"}}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(e){var t=this;this.$nextTick((function(e){t.$refs.img[0].complete||(t.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var e=this;this._keyDownHandler=r((function(t){switch(t.keyCode){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut")}})),this._mouseWheelHandler=r((function(t){(t.wheelDelta?t.wheelDelta:-t.detail)>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),n(document,"keydown",this._keyDownHandler)},deviceSupportUninstall:function(){l(document,"keydown",this._keyDownHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(e){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var a=this.transform,i=a.offsetX,o=a.offsetY,s=e.pageX,u=e.pageY;this._dragHandler=r((function(e){t.transform.offsetX=(i||window.innerWidth/2)+e.pageX-s,t.transform.offsetY=o+e.pageY-u})),n(document,"mousemove",this._dragHandler),n(document,"mouseup",(function(e){l(document,"mousemove",t._dragHandler)})),e.preventDefault()}},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(s),t=(Object.values(s).indexOf(this.mode)+1)%e.length;this.mode=s[e[t]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var a=(0,o.default)({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),i=a.zoomRate,r=a.rotateDeg,n=a.enableTransition,l=this.transform;switch(e){case"zoomOut":l.scale>.2&&(l.scale=parseFloat((l.scale-i).toFixed(3)));break;case"zoomIn":l.scale=parseFloat((l.scale+i).toFixed(3));break;case"clocelise":l.deg+=r;break;case"anticlocelise":l.deg-=r}l.enableTransition=n}}},mounted:function(){this.deviceSupportInstall()}});t.default=u},cb29:function(e,t,a){var i=a("23e7"),o=a("81d5"),r=a("44d2");i({target:"Array",proto:!0},{fill:o}),r("fill")},ce98:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".house-list[data-v-ef6a0950]{position:relative;overflow:hidden}.house-list .table-flex-box[data-v-ef6a0950]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:110px}.house-list .table-flex-box li[data-v-ef6a0950]{padding:10px;width:140px;border-bottom:1px solid #eee;-webkit-box-sizing:border-box;box-sizing:border-box;height:100%}.house-list .table-flex-box li.layout-item[data-v-ef6a0950]{width:270px}.house-list .table-title[data-v-ef6a0950]{width:100%;overflow:hidden}.house-list .table-title .table-flex-box[data-v-ef6a0950]{width:2140px;padding-left:330px;padding-right:12px}.house-list .table-head .table-flex-box[data-v-ef6a0950],.house-list .table-title .table-flex-box[data-v-ef6a0950]{min-height:40px;height:auto;background:#eee}.house-list .table-head .table-flex-box li[data-v-ef6a0950],.house-list .table-title .table-flex-box li[data-v-ef6a0950]{border-top:1px solid #eee}.house-list .table-list[data-v-ef6a0950]{position:relative;width:100%;overflow-x:auto;overflow-y:auto;max-height:340px}.house-list .table-list .table-flex-box[data-v-ef6a0950]{height:110px;width:2140px;padding-left:330px;-webkit-box-sizing:border-box;box-sizing:border-box}.house-list .table-list .table-flex-box li[data-v-ef6a0950]{height:100%}.house-list .table-flex-box .id-item[data-v-ef6a0950]{width:90px}.house-list .table-flex-box .id-item[data-v-ef6a0950],.house-list .table-flex-box .img-item[data-v-ef6a0950]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.house-list .table-flex-box .img-item[data-v-ef6a0950]{width:100px}.house-list .table-fix-info[data-v-ef6a0950]{position:absolute;top:0;bottom:15px;background:#fff;-webkit-box-shadow:0 0 10px rgba(0,0,0,.12);box-shadow:0 0 10px rgba(0,0,0,.12)}.house-list .table-fix-info.table-left-info[data-v-ef6a0950]{left:0;width:330px}.house-list .table-fix-info.table-right-info[data-v-ef6a0950]{right:0;width:140px}.house-list .table-fix-info.table-right-info.is-scroll[data-v-ef6a0950]{right:12px}.house-list .table-fix-info.table-right-info.is-scroll .table-head[data-v-ef6a0950]{margin-right:-12px}.house-list .table-fix-info .table-body[data-v-ef6a0950]{max-height:325px;overflow:hidden}.no-data[data-v-ef6a0950]{margin-top:20px}.no-data .table-title .table-flex-box[data-v-ef6a0950]{padding-left:0;width:100%}.no-data .table-title .table-flex-box li[data-v-ef6a0950]{width:auto;-webkit-box-flex:1;-ms-flex:1;flex:1}.no-data .msg-info[data-v-ef6a0950]{text-align:center;padding:30px 0;border:1px solid #eee}.flex-box[data-v-ef6a0950]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.house-info[data-v-ef6a0950]{padding:0 10px;margin-top:50px}.title-tip[data-v-ef6a0950]{font-weight:400;font-size:14px;padding-left:10px;color:#999}.table-wrap-box-box[data-v-ef6a0950]{margin-top:20px}.table-wrap-box-box[data-v-ef6a0950] .el-form-item{margin-bottom:0}.table-wrap-box-box .tb-hx-img[data-v-ef6a0950]{width:80px;height:60px;cursor:pointer}.hall-room[data-v-ef6a0950]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.hall-room[data-v-ef6a0950] .el-form-item .num-input .el-input__inner{padding:0 10px}.item[data-v-ef6a0950]{margin-left:5px;color:#f78f0f;font-size:16px;cursor:pointer}.item .focus[data-v-ef6a0950]{font-weight:700}.btn-box[data-v-ef6a0950]{text-align:right}.dialog-box[data-v-ef6a0950] .el-dialog{width:30%!important}.dialog-box[data-v-ef6a0950] .el-button{width:200px;margin:10px auto;display:block}.check-source-box[data-v-ef6a0950]{min-height:28px;margin-top:20px}",""]),e.exports=t},d087:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("4160"),a("caad"),a("d81d"),a("a9e3"),a("b64b"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),r=i(a("5530")),n=i(a("5c76")),l=i(a("1290")),s=a("f8fe"),u=i(a("8fa0")),c=i(a("51ce")),d=a("4c3a"),f=a("2f62"),p=i(a("dc0d")),h={name:"DynamicDetail",components:{ImageView:n.default,BuildModuleWarp:l.default,InfoOrigin:p.default},props:{projectData:{type:Object,default:function(){}},houseTypeData:{type:Object,default:function(){}},buildingData:{type:Object,default:function(){}},projectRemark:{type:Object,default:function(){}},host:{type:String,default:""},roleNumber:{type:[String,Number],default:""},houseTypeCopy:{type:Object,default:function(){}},infoSource:{type:Array,default:function(){return[]}},showSourceBtn:{type:Boolean,default:!1}},computed:(0,r.default)((0,r.default)({},(0,f.mapState)({getEditAuth:function(e){return e.buildingDictionary.isAuditorAuth}})),{},{hasEditAuth:function(){return 2==this.getEditAuth}}),data:function(){var e=this,t=function(t,a,i){e.$nextTick((function(){a.source&&(10!==a.source||a.other)?i():i(new Error)}))};return{getOriginOperateInfo:d.getOriginOperateInfo,confirmMsg:d.confirmMsg,ROLENUMBER:s.roleNumList.yunYing,houseTableCol:{},imgList:[],imageViewShow:!1,sourceDialog:!1,sourceForm:{modal:[],house:{source:"",other:""},building:{source:"",other:""},stage:{source:"",other:""}},sourceRules:{modal:[{type:"array",required:!0,message:"请选择需要标记信息来源的模块",trigger:"change"}],house:[{validator:t,message:"请选择户型信息来源"}],building:[{validator:t,message:"请选择楼栋信息来源"}],stage:[{validator:t,message:"请选择分期信息来源"}]},isSubmit:!1}},created:function(){this.projectId=this.$route.query.projectId,this.taskId=this.$route.query.taskId,this.getDataField()},watch:{houseTypeData:function(e){this.getDataField()}},methods:{batchMarkSource:function(){this.sourceDialog=!0},changeModal:function(e,t){e||(this.sourceForm[t].source="",this.sourceForm[t].other="")},confirmBatchSource:function(){var e=this;this.$refs.sourceForm.validate(function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(a){var i,o,r,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=21;break}if(!e.isSubmit){t.next=3;break}return t.abrupt("return",!1);case 3:return e.isSubmit=!0,i={project_id:e.projectId,house_type:{belong_source:e.sourceForm.house.source,belong_other:e.sourceForm.house.other},building_info:{belong_source:e.sourceForm.building.source,belong_other:e.sourceForm.building.other},staging_info:{belong_source:e.sourceForm.stage.source,belong_other:e.sourceForm.stage.other}},t.prev=5,t.next=8,c.default.batchUpdateStatus(i);case 8:o=t.sent,r=o.data,n=r.code,l=r.msg,0===n?(e.sourceDialog=!1,e.isSubmit=!1,e.$message({type:"success",message:"提交成功"}),e.$emit("updateInitInfo")):(e.isSubmit=!1,e.$message(l)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(5),e.isSubmit=!1,console.log(t.t0);case 19:t.next=22;break;case 21:return t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}())},closeSourceDialog:function(){this.$refs.sourceForm.resetFields(),this.sourceForm={modal:[],house:{source:"",other:""},building:{source:"",other:""},stage:{source:"",other:""}},this.sourceDialog=!1},imgPreview:function(e){this.imgList=this.createImageUrl(e),this.imageViewShow=!0},getDataField:function(){var e=this,t=this.houseTypeData&&this.houseTypeData.data&&(this.houseTypeData.data[0]||{});t&&Object.keys(t).forEach((function(t){e.houseTableCol[t]=!0}))},toNewPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.$route.query,i=a.projectId,o=void 0===i?"":i,r=a.taskId,n=void 0===r?"":r,l=a.role,s=void 0===l?"":l,u=e?"&houseTypeId=".concat(e):"",c=0===t?"BuildAddHouseView":"BuildAddHouseDetail",d="/dist/building/".concat(c,"?projectId=").concat(o,"&taskId=").concat(n).concat(u,"&role=").concat(s);window.open("".concat(d))},toBuildingPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.$route.query,i=a.projectId,o=void 0===i?"":i,r=a.taskId,n=void 0===r?"":r,l=a.role,s=void 0===l?"":l,u=e?"&buildingId=".concat(e):"",c="buildingDetailEdit",d="/dist/building/".concat(c,"?projectId=").concat(o,"&taskId=").concat(n).concat(u,"&role=").concat(s);t&&(d+="&isEdit=".concat(t,"&isDynamic=1")),window.open("".concat(d))},delectBuilding:function(e,t){var a=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var i,o,r,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.confirmMsg("一旦删除则数据无法恢复，请确认是否删除！");case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:return i={project_id:a.projectId,task_id:a.taskId,building_id:e},t.next=9,c.default.delBuildingData(i);case 9:o=t.sent,r=o.data,n=r.code,l=r.msg,a.$message(l),0===n&&a.$emit("updateInitInfo"),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()},showField:function(e){return"current_rate_max"!==e&&"price_max"!==e},copyAndAddHouseType:function(e){this.$emit("copyHouse","detail",e)},delectHouseType:function(e,t){var a=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var i,o,r,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.confirmMsg("一旦删除则数据无法恢复，请确认是否删除！");case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:return i={project_id:a.projectId,task_id:a.taskId,house_type_id:e},t.next=9,u.default.delHouseTypeData(i);case 9:o=t.sent,r=o.data,n=r.code,l=r.msg,a.$message(l),0===n&&a.$emit("updateInitInfo"),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()},createImageUrl:function(e){var t=this;return e.map((function(e){return"".concat(t.host).concat(e)}))},formatDesc:function(e){var t=e.field_desc;return"price_min"===e.field_name&&(t="总价"),"current_rate"===e.field_name&&(t="单价"),t+"："},getValueOrText:function(e){var t=e.field_value;if(!t)return"无";var a=this.projectData.data.price_type.field_value,i=this.projectData.data.price_max.field_value,o=this.projectData.data.current_rate_max.field_value,r=this.projectData.data.current_price_type.field_value;return["current_rate","price_min","price_max"].includes(e.field_name)&&(t="".concat(e.field_value," 万元"),"price_min"===e.field_name?t=2==a?"".concat(e.field_value," 万元起"):3==a?"".concat(e.field_value," 万元"):"".concat(e.field_value," - ").concat(i," 万元"):"current_rate"===e.field_name&&(t=3==r?"".concat(e.field_value," 万元起"):2==r?"".concat(e.field_value," 万元"):"".concat(e.field_value," - ").concat(o," 万元"))),["status","price_type","current_price_type"].includes(e.field_name)&&(t=e.field_text),t}}};t.default=h},d158:function(e,t,a){"use strict";a.r(t);var i=a("8192"),o=a("5d43");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("d42a");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"472a2378",null);t.default=l.exports},d42a:function(e,t,a){"use strict";a("2c39")},dc0d:function(e,t,a){"use strict";a.r(t);var i=a("b5c0"),o=a("88ff");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("b96b");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"0d35b81b",null);t.default=l.exports},e2b3:function(e,t,a){"use strict";a.r(t);var i=a("d087"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},e686:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisble,width:e.width,center:e.center},on:{"update:visible":function(t){e.dialogVisble=t},close:e.close}},[e._t("default"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.$scopedSlots.footer?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.dialogConfirm}},[e._v("确认")]),e._t("footer")],2)],2)},o=[]},eb5a:function(e,t,a){"use strict";a.r(t);var i=a("5ae1"),o=a("5eb9");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("1737");var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"744a4a21",null);t.default=l.exports},ec3c:function(e,t,a){var i=a("1fa4");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("2f99efb0",i,!0,{sourceMap:!1,shadowMode:!1})},eed5:function(e,t,a){"use strict";a("99af"),a("7db0"),a("4160"),a("caad"),a("a15b"),a("b0c0"),a("a9e3"),a("b64b"),a("ac1f"),a("2532"),a("1276"),a("498a"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("f8fe"),o={name:"BuildModuleWrap",data:function(){return{buildingNameVal:""}},props:{buildData:{type:Array,default:function(){return[]}},isEdit:{type:Boolean,default:!1},hasAuth:{type:[String,Number],default:""}},computed:{hasEditAuth:function(){return 2==this.hasAuth}},created:function(){this.projectId=this.$route.query.projectId||"",this.taskId=this.$route.query.taskId||"",this.exportOps={project_id:this.projectId,task_id:this.taskId},this.accept=i.buildingConf.fileType.join(",")},methods:{addBuilding:function(){""!==this.buildingNameVal?this.checkBuildNameRepeat(this.buildingNameVal.trim())?this.$alert("“".concat(this.buildingNameVal,"” 已经在楼盘下已存在，请重新录入"),{confirmButtonText:"确定"}):this.isEdit?this.$emit("goToAlert",{path:"buildingDetailEdit",idName:"buildingId",buildingName:encodeURIComponent(this.buildingNameVal),isEdit:1}):this.goToNewPage():this.$alert("请先录入楼栋名称，再新增楼栋！",{confirmButtonText:"确定"})},checkBuildNameRepeat:function(e){return!!this.buildData.find((function(t){var a="";return Object.keys(t).forEach((function(e){"building_name"===e&&(a=t[e].field_value)})),a===e}))},exportBuilding:function(){window.open("/backend-api/project/dynamic-sales/export-build-info?export=1&project_id=".concat(this.projectId,"&task_id=").concat(this.taskId))},exportSuccess:function(e,t,a){var i=e.msg;this.$message(i)},beforeExport:function(e){var t=e.name,a=e.size/1048576,o=t.split("."),r=o[o.length-1];return a>i.buildingConf.sizeLimit?(this.$message("上传的文件不可大于".concat(i.buildingConf.sizeLimit,"M哦~")),!1):i.buildingConf.fileType.includes(".".concat(r))?void 0:(this.$message("请上传文件类型为".concat(i.buildingConf.fileType.join(),"的文件")),!1)},goToNewPage:function(){var e=this.$route.query,t=this.$router.resolve({path:"/building/buildingDetailEdit",query:{projectId:e.projectId||"",taskId:e.taskId||"",role:e.role||"",buildingName:encodeURIComponent(this.buildingNameVal),isDynamic:1}});window.open(t.href)}}};t.default=o},ef4f:function(e,t,a){var i=a("7e48");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("c6dbf0de",i,!0,{sourceMap:!1,shadowMode:!1})},f149:function(e,t,a){"use strict";a.r(t);var i=a("e686"),o=a("8f99");for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var n=a("2877"),l=Object(n.a)(o.default,i.a,i.b,!1,null,"1153158b",null);t.default=l.exports},f268:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"ImageView",components:{ImagePreviewDrag:i(a("d158")).default},props:{srcList:{type:Array,default:function(){return[]}},vshow:{type:Boolean,default:!1}},watch:{vshow:function(e){this.viewShow=e}},data:function(){return{viewShow:!1}},methods:{closeImgView:function(){this.viewShow=!1,this.$emit("update:vshow",!1)},imgPreview:function(){this.viewShow=!0,this.$emit("update:vshow",!0)}}};t.default=o},f580:function(e,t,a){var i=a("0e6e");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("2d2e9762",i,!0,{sourceMap:!1,shadowMode:!1})},f6e0:function(e,t,a){"use strict";a("4fb9")},f8fe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileTypeList=t.trackIdList=t.roleNumList=t.tendayList=t.buildingConf=t.herfLinks=void 0;t.herfLinks={addHouse:""};t.buildingConf={fileType:[".xls",".xlsx"],sizeLimit:10};t.tendayList=[{text:"上旬",value:1},{text:"中旬",value:2},{text:"下旬",value:3}];t.roleNumList={yunYing:7,tuoZhan:1};t.trackIdList={project:6482,houseType:6483,building:6484,stageing:6485};t.fileTypeList={doc:"doc",docx:"doc",txt:"txt",jpg:"image",jpeg:"image",png:"image",xls:"excel",xlsx:"excel",csv:"excel",pdf:"pdf",ppt:"ppt",pptx:"ppt",zip:"zip",rar:"zip",mp3:"audio",mp4:"audio",wmv:"video",avi:"video",mpeg:"video",mpg:"video",rm:"video",rmvb:"video",flv:"video","3gp":"video",mov:"video",mkv:"video"}},fc82:function(e,t,a){var i=a("ce98");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("5b22e554",i,!0,{sourceMap:!1,shadowMode:!1})},fc9c:function(e,t,a){"use strict";a.r(t);var i=a("eed5"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t.default=o.a},ff5b:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"build-info"},[a("div",{staticClass:"modal-title-box"},[a("h3",{staticClass:"title-content"},[e._v("楼栋信息")]),a("div",{staticClass:"btn-box"},[e.hasEditAuth?[a("el-input",{staticClass:"building-name",attrs:{maxlength:10,size:"small",placeholder:"请输入楼栋名称"},model:{value:e.buildingNameVal,callback:function(t){e.buildingNameVal=t},expression:"buildingNameVal"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addBuilding}},[e._v(" 新增楼栋 ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportBuilding}},[e._v(" 导出楼栋 ")]),a("el-upload",{staticClass:"btn-export",attrs:{action:"/backend-api/project/dynamic-sales/import-build-info","show-file-list":!1,accept:e.accept,"before-upload":e.beforeExport,"on-success":e.exportSuccess,data:e.exportOps}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入楼栋")])],1)]:e._e()],2)]),e._t("default")],2)},o=[]}}]);