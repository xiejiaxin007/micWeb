(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b4b49c50"],{"0112":function(t,e,a){"use strict";a.r(e);var r=a("165d"),n=a("3bb0");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);a("6ac2");var o=a("2877"),s=Object(o.a)(n.default,r.a,r.b,!1,null,"95c9bed4",null);e.default=s.exports},"165d":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return n}));var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collocation-wrap"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[t._v("首页")])]),a("el-breadcrumb-item",{attrs:{to:{path:"rateSettingList"}}},[t._v("各城市目标费率")]),a("el-breadcrumb-item",[t._v("城市目标费率编辑页")])],1),a("div",{staticClass:"rate-setting-box"},[a("div",{staticClass:"commission-box"},[a("span",{staticClass:"label-info"},[t._v("居理预期抽成：")]),a("jl-number-input",{staticClass:"commission-input",attrs:{reg:"twoNum",minVal:0,maxVal:100},model:{value:t.commission,callback:function(e){t.commission=e},expression:"commission"}}),a("label",[t._v("%")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.editorInitData,border:""}},[a("el-table-column",{attrs:{prop:"show_txt",label:"业态",align:"center"}}),a("el-table-column",{attrs:{label:"费率(%)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("jl-number-input",{attrs:{value:e.row.rate,reg:"twoNum"},nativeOn:{input:function(a){return t.updateRateVal(e,a)}}}),a("label",[t._v("%")])]}}])})],1),a("div",{staticClass:"footer"},[a("el-button",{on:{click:t.cancelList}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveRateInfo}},[t._v(" 保存 ")])],1)],1)],1)},n=[]},"3bb0":function(t,e,a){"use strict";a.r(e);var r=a("59b9"),n=a.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(i);e.default=n.a},"46dc":function(t,e,a){var r=a("62ee");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a("499e").default)("18240bda",r,!0,{sourceMap:!1,shadowMode:!1})},"59b9":function(t,e,a){"use strict";var r=a("4ea4");a("d81d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=r(a("1da1")),i=r(a("bb2d")),o={data:function(){return{editorInitData:[],commission:"",isSubmit:!1}},mounted:function(){this.getRateInitData()},methods:{getRateInitData:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a,r,n,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={city_id:t.$route.query.cityId,business_datetime:t.$route.query.time},e.next=4,i.default.getEditRateData(a);case 4:r=e.sent,n=r.data,o=n.code,s=n.msg,u=n.data,0===o?(t.editorInitData=u.list,t.commission=u.julive_expect_commission||""):t.$message.error(s),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})))()},updateRateVal:function(t,e){t.row.rate=e.target.value},rateInputIsNull:function(){var t=!0;return this.editorInitData.map((function(e){""===e.rate&&(t=!1)})),t},saveRateInfo:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a,r,n,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t.rateInputIsNull()){e.next=3;break}return t.$message.error("费率不能为空！"),e.abrupt("return");case 3:if(a=t.editorInitData.map((function(t){return{id:t.id,rate:t.rate}})),!t.isSubmit){e.next=6;break}return e.abrupt("return",!1);case 6:return t.isSubmit=!0,e.prev=7,r={list:a,julive_expect_commission:t.commission},e.next=11,i.default.getSaveRateData(r);case 11:n=e.sent,o=n.data,s=o.code,u=o.msg,0===s?(t.isSubmit=!1,t.$router.push({path:"rateSettingList"})):(t.isSubmit=!1,t.$message.error(u)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),t.isSubmit=!1;case 21:case"end":return e.stop()}}),e,null,[[7,18]])})))()},cancelList:function(){this.$router.push({path:"rateSettingList"})}}};e.default=o},"62a4":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return n}));var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collocation-wrap"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[t._v("首页")])]),a("el-breadcrumb-item",[t._v("各城市目标费率")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"rate-setting-box"},[a("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:t.addQuarter}},[t._v("添加季度")]),a("div",{staticClass:"order-search"},[a("ul",{staticClass:"s-query"},[a("li",[a("div",{staticClass:"th"},[t._v("城市：")]),a("div",{staticClass:"td"},[a("search-select-radio",{attrs:{placeholder:"请选择",clearable:"",apiInfo:t.cityApi},on:{input:function(e){return t.getRateInfoData(1)}},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1)]),a("li",[a("div",{staticClass:"th"},[t._v("季度：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:function(e){return t.getRateInfoData(1)}},model:{value:t.quarter,callback:function(e){t.quarter=e},expression:"quarter"}},t._l(t.quarterList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1)])])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rateList,border:""}},[a("el-table-column",{attrs:{prop:"city_id_name",label:"城市",align:"center"}}),a("el-table-column",{attrs:{prop:"business_datetime_text",label:"季度",align:"center"}}),a("el-table-column",{attrs:{label:"业态及目标费率",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.project_type_and_rate,(function(e,r){return a("p",{key:r},[t._v(" "+t._s(e)+" ")])}))}}])}),a("el-table-column",{attrs:{label:"居理预期抽成",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.julive_expect_commission?e.row.julive_expect_commission+"%":"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"update_datetime_str",label:"更新时间",align:"center"}}),a("el-table-column",{attrs:{prop:"updator_str",label:"更新人",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.jumpEditPage(e.row)}}},[t._v(" 编辑 ")])]}}])})],1),t.totalNum-t.pageSize>0?a("el-pagination",{attrs:{background:"","page-size":t.pageSize,layout:"prev, pager, next","current-page":t.currentPage,total:t.totalNum},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.pageChange}}):t._e()],1),a("el-dialog",{attrs:{title:"添加季度",visible:t.dialog.visible,width:"420px",center:""},on:{"update:visible":function(e){return t.$set(t.dialog,"visible",e)}}},[t._v(" 季度： "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dialog.quarter,callback:function(e){t.$set(t.dialog,"quarter",e)},expression:"dialog.quarter"}},t._l(t.dialog.quarterList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog.visible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveQuarter}},[t._v("确认")])],1)],1)],1)},n=[]},"62ee":function(t,e,a){(e=a("24fb")(!1)).push([t.i,".pull-right[data-v-538a6406]{float:right}.collocation-wrap[data-v-538a6406]{padding:20px 30px 0;margin:0 auto}.collocation-wrap[data-v-538a6406],.collocation-wrap .rate-setting-box[data-v-538a6406]{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.collocation-wrap .rate-setting-box[data-v-538a6406]{background:#fff;margin-top:20px;padding:20px 20px 20px 30px}.collocation-wrap .rate-setting-box[data-v-538a6406] .el-pagination{text-align:center;margin-top:20px}",""]),t.exports=e},"6ac2":function(t,e,a){"use strict";a("bfdd")},"83ec":function(t,e,a){"use strict";var r=a("4ea4");a("a9e3"),a("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=r(a("1da1")),i=r(a("bb2d")),o=r(a("f946")),s={components:{SearchSelectRadio:a("2af9").SearchSelectRadio},data:function(){return{loading:!1,rateList:[],currentPage:1,totalNum:0,pageSize:20,city:"",cityApi:{api:o.default.getDetailCityListData,params:{q:"",type:2,param:"withAll"}},quarter:"",quarterList:[],dialog:{visible:!1,quarter:"",quarterList:[]}}},mounted:function(){var t=this;this.getQuarterList().then((function(e){console.log(e),t.getRateInfoData()})).catch((function(e){t.$message.error(e)}))},methods:{getQuarterList:function(){var t=this;return new Promise(function(){var e=(0,n.default)(regeneratorRuntime.mark((function e(a,r){var n,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,i.default.getQuarterList();case 4:n=e.sent,o=n.data,s=o.code,u=o.msg,c=o.data,0===s?(t.quarterList=c.searchBusinessDatetime,t.dialog.quarterList=c.addBusinessDatetime,t.quarter=c.default.value,t.loading=!1,a(t.quarter)):r(u),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}())},addQuarter:function(){this.dialog.quarter=this.dialog.quarterList.length>0?this.dialog.quarterList[0].value:"",this.dialog.visible=!0},saveQuarter:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.default.saveQuarter({business_datetime:t.dialog.quarter});case 3:a=e.sent,r=a.data,n=r.code,o=r.msg,0===n?(t.dialog.visible=!1,t.getRateInfoData(1),t.getQuarterList()):t.$message.error(o),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getRateInfoData:function(t){var e=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var r,n,o,s,u,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,t&&(e.currentPage=t),r={pageIndex:e.currentPage,defaultPageSize:e.pageSize,city_id:e.city,business_datetime:e.quarter},a.next=6,i.default.getRateListData(r);case 6:n=a.sent,o=n.data,s=o.code,u=o.msg,c=o.data,0===s?(e.loading=!1,e.rateList=c.list,e.totalNum=c.count?Number(c.count):0):e.$message.error(u),a.next=16;break;case 14:a.prev=14,a.t0=a.catch(0);case 16:case"end":return a.stop()}}),a,null,[[0,14]])})))()},pageChange:function(){this.getRateInfoData()},jumpEditPage:function(t){this.$router.push({path:"rateEditSetting",query:{cityId:t.city_id,time:t.business_datetime}})}}};e.default=s},8560:function(t,e,a){"use strict";a("46dc")},a645:function(t,e,a){"use strict";a.r(e);var r=a("83ec"),n=a.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(i);e.default=n.a},bb2d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a("23f7"),n={getRateListData:function(t){return r.axios.get("/backend-api/expand/ex-target-rate/index",{params:t})},getEditRateData:function(t){return r.axios.get("/backend-api/expand/ex-target-rate/edit",{params:t})},getSaveRateData:function(t){return r.axios.post("/backend-api/expand/ex-target-rate/edit",t)},getQuarterList:function(t){return r.axios.post("/backend-api/expand/ex-target-rate/init",t)},saveQuarter:function(t){return r.axios.post("/backend-api/expand/ex-target-rate/add",t)}};e.default=n},bfdd:function(t,e,a){var r=a("e6d9");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a("499e").default)("e3973da0",r,!0,{sourceMap:!1,shadowMode:!1})},c308:function(t,e,a){"use strict";a.r(e);var r=a("62a4"),n=a("a645");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);a("8560");var o=a("2877"),s=Object(o.a)(n.default,r.a,r.b,!1,null,"538a6406",null);e.default=s.exports},e6d9:function(t,e,a){(e=a("24fb")(!1)).push([t.i,".collocation-wrap[data-v-95c9bed4]{padding:20px 30px 0;margin:0 auto}.collocation-wrap[data-v-95c9bed4],.collocation-wrap .rate-setting-box[data-v-95c9bed4]{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.collocation-wrap .rate-setting-box[data-v-95c9bed4]{background:#fff;margin-top:20px;padding:20px 20px 20px 30px}.collocation-wrap .rate-setting-box .number-input-box[data-v-95c9bed4]{display:inline-block;width:90%;margin-right:5px}.collocation-wrap .rate-setting-box .footer[data-v-95c9bed4]{text-align:center;width:100%;margin-top:20px}.collocation-wrap .rate-setting-box .footer[data-v-95c9bed4] .el-button{width:150px}.collocation-wrap .commission-box[data-v-95c9bed4]{margin-bottom:20px;font-size:14px}.collocation-wrap .commission-box .label-info[data-v-95c9bed4]{font-weight:700}.collocation-wrap .commission-box .commission-input[data-v-95c9bed4]{width:200px}",""]),t.exports=e}}]);