(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4c56d733"],{"6d7b":function(e,t,a){"use strict";a.r(t);var n=a("ebee"),i=a("cec2");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("cd9a");var o=a("2877"),s=Object(o.a)(i.default,n.a,n.b,!1,null,"5de97aa6",null);t.default=s.exports},7001:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".expand-list-box[data-v-5de97aa6]{padding:10px 15px}.expand-list-box[data-v-5de97aa6],.expand-list-box .content-box[data-v-5de97aa6]{-webkit-box-sizing:border-box;box-sizing:border-box}.expand-list-box .content-box[data-v-5de97aa6]{margin-top:30px;padding:20px 15px;background-color:#fff}.expand-list-box .content-box[data-v-5de97aa6] .el-range-input{background:#fff}.expand-list-box .content-box .el-date-editor.el-input__inner[data-v-5de97aa6],.expand-list-box .content-box[data-v-5de97aa6] .el-date-editor.el-input,.expand-list-box .content-box[data-v-5de97aa6] .el-select{width:23%}.expand-list-box .content-box[data-v-5de97aa6] .btn-search-box{display:block;margin-top:30px}.expand-list-box .content-box[data-v-5de97aa6] .btn-search-box /deep/ .el-button{width:100px}.expand-list-box .content-box h2[data-v-5de97aa6]{margin-bottom:20px}",""]),e.exports=t},"9aab":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("23f7"),i={auditAbandonmentTaskPassData:function(e){return n.axios.post("/backend-api/project/cj-qd-project-task/ask-for-cancel-reject",e)},getProjectLevelCityListData:function(e){return n.axios.get("/backend-api/common/get-all-city-list",{params:e})},getCityList:function(e){return n.axios.get("/backend-api/select2/select2/get-business-citys",{params:e})},applyAbandonmentTaskData:function(e){return n.axios.post("/backend-api/project/cj-qd-project-task/ask-for-cancel",e)},auditAbandonmentTaskData:function(e){return n.axios.post("/backend-api/project/cj-qd-project-task/ask-for-cancel-pass",e)},getEditDetailSubmitData:function(e){return n.axios.post("/backend-api/project/cj-qd-project-task/update",e)},getProjectNameListData:function(e){return n.axios.get("/backend-api/project/get-project-name-list",{params:e})},getEditDetailInfoData:function(e){return n.axios.post("/backend-api/project/cj-qd-project-task/detail",e)},getExecutorListData:function(e){return n.axios.get("/backend-api/employee/get-employee-dropdown-list",{params:e})},getEmployeeByCityRole:function(e){return n.axios.get("/backend-api/employee/get-employee-by-role-and-city",{params:e})},createTaskInfoData:function(e){return n.axios.post("/backend-api/project/cj-qd-project-task/create",e)},getTaskStatusData:function(){return n.axios.post("/backend-api/project/cj-qd-project-task/all-status")},getTaskListData:function(e){return n.axios.post("/backend-api/project/cj-qd-project-task/list",e)},submitTaskData:function(e){return n.axios.post("/backend-api/project/cj-qd-project-task/submit",e)},getAuditLog:function(e){return n.axios.get("/backend-api/project/qd-audit/get-audit-log",{params:e})}};t.default=i},a905:function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=n(a("1da1")),r=n(a("9aab")),o={name:"ExpandEditTask",data:function(){return{expandFormLine:{selCityVal:"",selCityOpations:[],selBuildingNameVal:"",selBuildingNameOpations:[],searchLoading:!1,taskEndTime:"",executorVal:"",executorOpations:[],isCityDisabled:!0,isDisabled:!0,isExecutorValDisabled:!0},rules:{selCityVal:[{required:!0,message:"请选择城市",trigger:"change"}],selBuildingNameVal:[{required:!0,message:"请选择目标楼盘",trigger:"change"}],taskEndTime:[{required:!0,message:"请选择任务截止时间",trigger:"change"}],executorVal:[{required:!0,message:"请选择任务执行人",trigger:"change"}]},expireTimeOption:{disabledDate:function(e){return e.getTime()<Date.now()}},pageTitleCon:""}},mounted:function(){this.isEditTask()},methods:{getEditDetail:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n,i,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n={id:e},a.next=4,r.default.getEditDetailInfoData(n);case 4:i=a.sent,0===(o=i.data).code&&(t.expandFormLine.selBuildingNameOpations.push({id:o.data.project_id,text:o.data.project_name+"("+o.data.project_type_name+")"}),t.expandFormLine.selBuildingNameVal=o.data.project_id,t.expandFormLine.taskEndTime=o.data.exec_end_datetime,t.expandFormLine.executorOpations.push({id:o.data.exec_employee_id,text:o.data.employee_name+"-"+o.data.job_number}),t.expandFormLine.executorVal=o.data.exec_employee_id,t.expandFormLine.selCityVal=o.data.city_id,t.expandFormLine.selCityOpations.push({id:o.data.city_id,text:o.data.city_name})),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(a){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=15;break}return n={city_id:t.expandFormLine.selCityVal,project_id:t.expandFormLine.selBuildingNameVal,exec_employee_id:t.expandFormLine.executorVal,exec_end_datetime:t.expandFormLine.taskEndTime},e.prev=2,e.next=5,r.default.createTaskInfoData(n);case 5:i=e.sent,0===(o=i.data).code?(t.$message({type:"success",message:"提交成功"}),t.$router.push({path:"/building/expandTaskList"})):1006===o.code?t.$confirm(o.msg,"温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){})):t.$message({message:o.msg}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:e.next=16;break;case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}())},cityChangeList:function(){"新增"==this.pageTitleCon&&(this.expandFormLine.isDisabled=!1,this.expandFormLine.isExecutorValDisabled=!1,this.$refs.buildName.resetField(),this.$refs.executorName.resetField())},getCitySelectList:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n,i,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={q:e},a.prev=1,a.next=4,r.default.getCityList(n);case 4:i=a.sent,0===(o=i.data).code&&(t.expandFormLine.selCityOpations=o.data),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(a){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=15;break}return n={city_id:t.expandFormLine.selCityVal,id:t.$route.query.taskId,project_id:t.expandFormLine.selBuildingNameVal,exec_employee_id:t.expandFormLine.executorVal,exec_end_datetime:t.expandFormLine.taskEndTime},e.prev=2,e.next=5,r.default.getEditDetailSubmitData(n);case 5:i=e.sent,0===(o=i.data).code?(t.$message({type:"success",message:"提交成功"}),t.$router.push({path:"/building/expandTaskList"})):1006===o.code?(t.$message({type:"warning",message:o.msg}),t.$confirm(o.msg,"温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){}))):t.$message({message:o.msg}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:e.next=16;break;case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}())},getProjectNameSelectList:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n,i,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.expandFormLine.searchLoading=!0,n={q:e,city_id:t.expandFormLine.selCityVal>"0"?t.expandFormLine.selCityVal:""},a.prev=2,a.next=5,r.default.getProjectNameListData(n);case 5:i=a.sent,0===(o=i.data).code?(t.expandFormLine.searchLoading=!1,t.expandFormLine.selBuildingNameOpations=o.data):t.expandFormLine.searchLoading=!1,a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0),t.expandFormLine.searchLoading=!1;case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()},getExecutorList:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n,i,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.expandFormLine.searchLoading=!0,n={q:e,city_id:t.expandFormLine.selCityVal},a.prev=2,a.next=5,r.default.getEmployeeByCityRole(n);case 5:i=a.sent,0===(o=i.data).code&&(t.expandFormLine.executorOpations=o.data),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[2,10]])})))()},cancelList:function(){this.$router.push({path:"/building/expandTaskList"})},isEditTask:function(){var e=this.$route.query;e.taskId?(this.pageTitleCon="编辑",this.getEditDetail(e.taskId),this.expandFormLine.isExecutorValDisabled=!1,this.expandFormLine.isCityDisabled=!0):(this.pageTitleCon="新增",this.expandFormLine.isExecutorValDisabled=!0,this.expandFormLine.isCityDisabled=!1)}}};t.default=o},ae17:function(e,t,a){var n=a("7001");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a("499e").default)("2f407928",n,!0,{sourceMap:!1,shadowMode:!1})},cd9a:function(e,t,a){"use strict";a("ae17")},cec2:function(e,t,a){"use strict";a.r(t);var n=a("a905"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t.default=i.a},ebee:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expand-list-box"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",{attrs:{to:{path:"/building/ExpandTaskList"}}},[e._v("楼盘任务列表")]),a("el-breadcrumb-item",[e._v(e._s(e.pageTitleCon))])],1),a("div",{staticClass:"content-box"},[a("h2",[e._v(e._s(e.pageTitleCon))]),a("el-form",{ref:"rulesForm",attrs:{model:e.expandFormLine,"label-width":"120px",rules:e.rules}},[a("el-form-item",{attrs:{label:"城市:",prop:"selCityVal"}},[a("el-select",{attrs:{placeholder:"请选择城市",filterable:"",remote:"","remote-method":e.getCitySelectList,disabled:e.expandFormLine.isCityDisabled},on:{focus:function(t){return e.getCitySelectList("")},change:e.cityChangeList},model:{value:e.expandFormLine.selCityVal,callback:function(t){e.$set(e.expandFormLine,"selCityVal",t)},expression:"expandFormLine.selCityVal"}},e._l(e.expandFormLine.selCityOpations,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),a("el-form-item",{ref:"buildName",attrs:{label:"目标楼盘:",prop:"selBuildingNameVal"}},[a("el-select",{attrs:{placeholder:"请选择目标楼盘",filterable:"",remote:"","remote-method":e.getProjectNameSelectList,loading:e.expandFormLine.searchLoading,disabled:e.expandFormLine.isDisabled},on:{focus:function(t){return e.getProjectNameSelectList("")}},model:{value:e.expandFormLine.selBuildingNameVal,callback:function(t){e.$set(e.expandFormLine,"selBuildingNameVal",t)},expression:"expandFormLine.selBuildingNameVal"}},e._l(e.expandFormLine.selBuildingNameOpations,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"任务截止时间:",prop:"taskEndTime"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择日期","picker-options":e.expireTimeOption},model:{value:e.expandFormLine.taskEndTime,callback:function(t){e.$set(e.expandFormLine,"taskEndTime",t)},expression:"expandFormLine.taskEndTime"}})],1),a("el-form-item",{ref:"executorName",attrs:{label:"任务执行人:",prop:"executorVal"}},[a("el-select",{attrs:{placeholder:"请选择任务执行人",filterable:"",clearable:"",remote:"","remote-method":e.getExecutorList,disabled:e.expandFormLine.isExecutorValDisabled},on:{focus:function(t){return e.getExecutorList("")}},model:{value:e.expandFormLine.executorVal,callback:function(t){e.$set(e.expandFormLine,"executorVal",t)},expression:"expandFormLine.executorVal"}},e._l(e.expandFormLine.executorOpations,(function(e){return a("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),a("el-form-item",{staticClass:"btn-search-box"},[a("el-button",{on:{click:e.cancelList}},[e._v("取 消")]),e.$route.query.taskId?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitEditForm("rulesForm")}}},[e._v(" 提 交 ")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("rulesForm")}}},[e._v(" 提 交 ")])],1)],1)],1)],1)},i=[]}}]);