(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a8c1507e"],{"0db9":function(t,e,a){"use strict";a.r(e);var l=a("3526"),i=a.n(l);for(var o in l)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return l[t]}))}(o);e.default=i.a},"13d5":function(t,e,a){"use strict";var l=a("23e7"),i=a("d58f").left,o=a("a640"),s=a("ae40"),n=a("2d00"),r=a("605d"),c=o("reduce"),d=s("reduce",{1:0});l({target:"Array",proto:!0,forced:!c||!d||!r&&n>79&&n<83},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1d6c":function(t,e,a){var l=a("8379");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);(0,a("499e").default)("e023b2ac",l,!0,{sourceMap:!1,shadowMode:!1})},3526:function(t,e,a){"use strict";var l=a("4ea4");a("4160"),a("a15b"),a("13d5"),a("a434"),a("a9e3"),a("b680"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=l(a("1da1")),o=l(a("405c")),s=a("7223"),n={name:"follow-up-list",props:{typeList:{type:String,default:""},id:{type:String,default:""},pageType:{type:String,default:""},currentStage:{type:String,default:""}},data:function(){return{loading:"",tableList:[],moveList:[],prePaidTotal:"",unfollowedTotal:"",followedTotal:"",followMoneyTotalFlag:!0}},created:function(){this.getFollowedForecastList()},methods:{followUpFun:function(t,e){e.follow_money-e.unfollowed_money>0&&(this.$message("本次跟进金额不能大于单笔剩余回款金额"),this.tableList[t].follow_money=e.unfollowed_money);var a=this.tableList.reduce((function(t,e){return t+Number(e.follow_money)}),0);this.followedTotal=parseFloat(a).toFixed(2),this.followedTotal-this.unfollowedTotal>0?(this.$message("本次跟进金额合计不能大于"+this.unfollowedTotal),this.followMoneyTotalFlag=!1):this.followMoneyTotalFlag=!0},getSummaries:function(t){var e=this,a=t.columns,l=[];return a.forEach((function(t,a){0!==a?("pre_paid_money"===t.property&&(l[a]=e.prePaidTotal),"unfollowed_money"===t.property&&(l[a]=e.unfollowedTotal),"follow_money"===t.property&&(l[a]=e.followedTotal)):l[a]="合计"})),l},getFollowedForecastList:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a,l,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"2"!==t.pageType){e.next=7;break}return e.next=4,o.default.getForecastList({follow_id:t.id});case 4:a=e.sent,e.next=11;break;case 7:return l={type:t.typeList,id:t.id},e.next=10,o.default.followedForecastList(l);case 10:a=e.sent;case 11:0===(i=a.data).code&&(t.tableList=i.data.list,t.prePaidTotal=i.data.pre_paid_total,t.unfollowedTotal=i.data.unfollowed_total,t.followedTotal=i.data.followed_total),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))()},turnToNewPage:function(t){window.open(t).opener=null},moveOut:function(t,e){this.moveList.push(e),this.tableList.splice(t,1),this.computedSum()},computedSum:function(){for(var t=s.commonFun.deepClone(this.tableList),e=0;e<t.length;e++)for(var a=e+1;a<t.length;a++)t[e].unique_id===t[a].unique_id&&(t.splice(a,1),a--);var l=0,i=0;t.forEach((function(t){l+=Number(t.pre_paid_money),i+=Number(t.unfollowed_money)}));var o=this.tableList.reduce((function(t,e){return t+Number(e.follow_money)}),0);this.followedTotal=parseFloat(o).toFixed(2),this.prePaidTotal=l,this.unfollowedTotal=i},getRemoveList:function(){return this.moveList?this.moveList.join(","):""},getMoneyList:function(){var t=[];return this.tableList.forEach((function(e){t.push({id:e.id,value:e.follow_money})})),t},getMoneyDetailList:function(){var t=[];return this.tableList.forEach((function(e){var a=Object.assign({},e);a.value=a.follow_money,t.push(a)})),{list:t,pre_paid_total:this.prePaidTotal,unfollowed_total:this.unfollowedTotal,followed_total:this.followedTotal}},getFollowMoneyTotalFlag:function(){return this.followMoneyTotalFlag},tableHeaderColor:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;if(0===e)return"background-color: #f9f9f9;color: #333;"}}};e.default=n},"405c":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=a("23f7"),i={getFundsBackList:function(t){return l.axios.post("/backend-api/expand/ex-money-back-config/list",t)},addFundsBack:function(t){return l.axios.post("/backend-api/expand/ex-money-back-config/add-config",t)},editFundsBack:function(t){return l.axios.post("/backend-api/expand/ex-money-back-config/edit-config",t)},initEditFundsBack:function(t){return l.axios.post("/backend-api/expand/ex-money-back-config/edit-init",t)},getFundsBackInfo:function(t){return l.axios.post("/backend-api/expand/ex-money-back-config/view-init",t)},delFundsBack:function(t){return l.axios.post("/backend-api/expand/ex-money-back-config/del-config",t)},stayFollowInit:function(t){return l.axios.get("/backend-api/expand/ex-money-back-group/init",{params:t})},stayFollowTb:function(t){return l.axios.get("/backend-api/expand/ex-money-back-group/to-be-assoc-list",{params:t})},markConfrim:function(t){return l.axios.get("/backend-api/expand/ex-money-back-group/add-group",{params:t})},initFollow:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/init-follow",t)},followedForecastList:function(t){return l.axios.get("/backend-api/expand/ex-money-back-group/followed-forecast-list",{params:t})},getForecastList:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/get-forecast",t)},addFollow:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/add-follow",t,{headers:{"Content-Type":"application/json"}})},followTb:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/list",t)},mergeFollow:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/merge",t)},followDetail:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/follow-detail",t)},followAudit:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/follow-audit",t)},getGroupDetail:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/group-detail",t)},getDealDetail:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/deal-detail",t)},delGroup:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/cancel",t)},resumeGroup:function(t){return l.axios.post("/backend-api/expand/ex-money-back-group/recovery",t)}};e.default=i},"41b8":function(t,e,a){"use strict";a("1d6c")},"5faf":function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return i}));var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"follow-up-approval-box"},[a("div",{staticClass:"el-row"},[a("el-col",{staticClass:"content-main",attrs:{span:24}},[a("el-breadcrumb",{staticClass:"bread-crumb-box",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[t._v("首页")])]),a("el-breadcrumb-item",[t._v("回款流程跟进")])],1),a("div",{staticClass:"content-box"},[a("div",{staticClass:"group-table-box"},[a("div",{staticClass:"hd"},[a("h2",[t._v("回款流程跟进")])]),a("div",{staticClass:"bd"},[a("div",{staticClass:"table-title"},[a("ul",{staticClass:"current-page-data clearfix"},[a("li",[a("div",{staticClass:"th"},[t._v("跟进阶段：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.stage_type))])]),a("li",[a("div",{staticClass:"th"},[t._v("回款跟进ID：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.follow_id))])]),a("li",[a("div",{staticClass:"th"},[t._v("回款组ID：")]),a("div",{staticClass:"td"},[t._v(t._s(t.groupId))])])]),a("ul",{staticClass:"follow-time-data clearfix"},[a("li",[a("div",{staticClass:"th"},[t._v("实际跟进时间：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.follow_datetime))])]),a("li",[a("div",{staticClass:"th"},[t._v("预计回款时间：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.plan_pay_datetime))])]),a("li",[a("div",{staticClass:"th"},[t._v("跟进人：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.employee_name))])])])]),a("follow-up-list",{ref:"followUpList",attrs:{typeList:t.type,id:t.followId,pageType:"2"}}),a("div",{staticClass:"follow-content-wrap"},[a("ul",{staticClass:"follow-content"},[t.followUpData.stage_type_1?a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"follow-item-left fl"},[a("div",{staticClass:"th"},[t._v("以上成交单业绩是否确认：")]),a("div",{staticClass:"td"},[t._v(t._s("1"===t.followUpData.stage_type_1.follow_result?"是":"否"))])]),a("div",{staticClass:"follow-item-middle fl"},[a("div",{staticClass:"th"},[t._v(t._s("1"===t.followUpData.stage_type_1.follow_result?"业绩确认完成日期：":"预计业绩确认完成日期："))]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_1.business_datetime))])]),"0"!==t.followUpData.stage_type_1.file_type?a("div",{staticClass:"follow-item-right fl"},[a("div",{staticClass:"th"},[t._v("业绩确认完成的凭证（上传的凭证）：")]),a("div",{staticClass:"td"},[t._v(t._s("1"===t.followUpData.stage_type_1.file_type?"标准：业绩确认单":"非标准：微信聊天记录等"))])]):t._e(),t.followUpData.stage_type_1.img_list&&t.followUpData.stage_type_1.img_list.length>0?a("div",{staticClass:"follow-item-right fl all"},[a("div",{staticClass:"th"},[t._v("业绩确认单：")]),a("div",{staticClass:"td"},[a("div",{staticClass:"file-show-box"},[a("ul",{staticClass:"file-list"},t._l(t.stageImgList,(function(e,l){return a("li",{key:l},[a("a",{staticClass:"preview-file",attrs:{href:t.OSSView+e.file_url,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(e.file_name))])])})),0),a("ul",{staticClass:"img-list clearfix"},t._l(t.stageFileList,(function(e,l){return a("li",{key:l},[a("div",{staticClass:"img-item-box"},[a("img",{attrs:{src:e.file_url,alt:"图片凭证"},on:{click:function(a){return t.showPreview(e.file_url)}}})])])})),0)])])]):t._e()]):t._e(),t.followUpData.stage_type_2?a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"follow-item-left fl"},[a("div",{staticClass:"th"},[t._v("以上成交单是否完成「佣金核对」：")]),a("div",{staticClass:"td"},[t._v(t._s("1"===t.followUpData.stage_type_2.follow_result?"是":"否"))])]),a("div",{staticClass:"follow-item-middle fl"},[a("div",{staticClass:"th"},[t._v(t._s("1"===t.followUpData.stage_type_2.follow_result?"佣金核对完成日期：":"预计佣金核对完成日期："))]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_2.business_datetime))])]),a("div",{staticClass:"follow-item-right fl"},[a("div",{staticClass:"th"},[t._v("佣金核对完成的凭证（上传的凭证）：")]),a("div",{staticClass:"td"},[t._v(t._s("1"===t.followUpData.stage_type_2.file_type?"标准：对账单":"非标准：微信聊天记录等"))])])]):t._e(),t.followUpData.stage_type_3?a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"follow-item-left fl"},[a("div",{staticClass:"th"},[t._v("以上成交单「结佣材料」是否准备齐全，且提交至合作方：")]),a("div",{staticClass:"td"},[t._v(t._s("1"===t.followUpData.stage_type_3.follow_result?"是":"否"))])]),a("div",{staticClass:"follow-item-middle fl"},[a("div",{staticClass:"th"},[t._v(t._s("1"===t.followUpData.stage_type_3.follow_result?"「结佣材料」准备齐全日期：":"「结佣材料」预计准备齐全日期："))]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_3.business_datetime))])])]):t._e(),t.followUpData.stage_type_4?a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"follow-item-left fl"},[a("div",{staticClass:"th"},[t._v("以上成交单「结佣材料」：")]),a("div",{staticClass:"td"},[t._v(t._s(t._f("stageType4")(t.followUpData.stage_type_4.follow_result)))])]),"3"!==t.followUpData.stage_type_4.follow_result?a("div",{staticClass:"follow-item-middle fl"},[a("div",{staticClass:"th"},[t._v(t._s("1"===t.followUpData.stage_type_4.follow_result?"合作方「结佣材料」审核通过日期：":"合作方「结佣材料」预计审核通过日期："))]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_4.business_datetime))])]):t._e(),"3"===t.followUpData.stage_type_4.follow_result?a("div",{staticClass:"follow-item-right fl"},[a("div",{staticClass:"th"},[t._v("原因：")]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_4.follow_reason))])]):t._e()]):t._e(),t.followUpData.stage_type_5?a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"follow-item-left fl"},[a("div",{staticClass:"th"},[t._v("以上成交单「发票」进度：")]),a("div",{staticClass:"td"},[t._v(t._s(t._f("stageType5")(t.followUpData.stage_type_5.follow_result)))])]),"2"!==t.followUpData.stage_type_5.follow_result?a("div",{staticClass:"follow-item-middle fl"},[a("div",{staticClass:"th"},[t._v(t._s(t._f("stageType5TimeTitle")(t.followUpData.stage_type_5.follow_result)))]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_5.business_datetime))])]):t._e(),t.followUpData.stage_type_5.follow_result>3?a("div",{staticClass:"follow-item-right fl"},[a("div",{staticClass:"th"},[t._v("原因：")]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_5.follow_reason))])]):t._e()]):t._e(),t.followUpData.stage_type_6?a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"follow-item-left fl"},[a("div",{staticClass:"th"},[t._v("以上成交单「付款审批」：")]),a("div",{staticClass:"td"},[t._v(t._s(t._f("stageType6")(t.followUpData.stage_type_6.follow_result)))])]),"3"!==t.followUpData.stage_type_6.follow_result?a("div",{staticClass:"follow-item-middle fl"},[a("div",{staticClass:"th"},[t._v(t._s("1"===t.followUpData.stage_type_6.follow_result?"合作方「付款审批」通过日期：":"合作方「付款审批」预计通过日期："))]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_6.business_datetime))])]):t._e(),"3"===t.followUpData.stage_type_6.follow_result?a("div",{staticClass:"follow-item-right fl"},[a("div",{staticClass:"th"},[t._v("原因：")]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_6.follow_reason))])]):t._e()]):t._e(),t.followUpData.stage_type_7?a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"follow-item-left fl"},[a("div",{staticClass:"th"},[t._v("以上成交单「付款进度」：")]),a("div",{staticClass:"td"},[t._v(t._s(t._f("stageType7")(t.followUpData.stage_type_7.follow_result)))])]),a("div",{staticClass:"follow-item-middle fl"},[a("div",{staticClass:"th"},[t._v(t._s("1"===t.followUpData.stage_type_7.follow_result?"实际付款日期：":"预计付款日期："))]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_7.business_datetime))])]),"3"===t.followUpData.stage_type_7.follow_result?a("div",{staticClass:"follow-item-right fl"},[a("div",{staticClass:"th"},[t._v("原因：")]),a("div",{staticClass:"td"},[t._v(t._s(t.followUpData.stage_type_7.follow_reason))])]):t._e()]):t._e(),t.initData.back_stage_type?a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"follow-item-left fl"},[a("div",{staticClass:"th"},[t._v("重置回哪个阶段：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.back_stage_type))])])]):t._e(),a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"th"},[t._v("本次跟进凭证：")]),a("div",{staticClass:"td"},[t.initData.file?a("div",{staticClass:"file-show-box"},[a("ul",{staticClass:"file-list"},[t._l(t.initData.file,(function(e,l){return["2"===e.file_type?a("li",{key:l},[a("a",{staticClass:"preview-file",attrs:{href:t.OSSView+e.file_url,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(e.file_name))])]):t._e()]}))],2),a("ul",{staticClass:"img-list clearfix"},[t._l(t.initData.file,(function(e,l){return["1"===e.file_type?a("li",{key:l},[a("div",{staticClass:"img-item-box"},[a("img",{attrs:{src:e.file_url,alt:"图片凭证"},on:{click:function(a){return t.showPreview(e.file_url)}}})])]):t._e()]}))],2)]):t._e()])]),a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"th"},[t._v("跟进说明：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.follow_text))])]),a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"th"},[t._v("下次跟进时间：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.next_follow_datetime))])]),a("li",{staticClass:"follow-item clearfix"},[a("div",{staticClass:"th"},[t._v("跟进人：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.next_employee_name))])])])]),t.initData.audit_employee_name||t.initData.leader_id!==t.loginId?a("div",{staticClass:"table-title"},[a("ul",{staticClass:"clearfix"},[a("li",[a("div",{staticClass:"th"},[t._v("审批时间：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.audit_datetime))])]),a("li",[a("div",{staticClass:"th"},[t._v("审批结果：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.audit_status))])]),a("li",[a("div",{staticClass:"th"},[t._v("审批人：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.audit_employee_name))])])]),"0"!==t.initData.reject_text?a("ul",{staticClass:"reject-text clearfix"},[a("li",[a("div",{staticClass:"th"},[t._v("驳回原因：")]),a("div",{staticClass:"td"},[t._v(t._s(t.initData.reject_text))])])]):t._e()]):a("div",{staticClass:"approval-btn-box"},[a("el-button",{on:{click:function(e){t.rejectDialog=!0}}},[t._v("驳回")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.approvalRes("2")}}},[t._v("通过")])],1)],1)])])],1)],1),a("reject-dialog",{attrs:{title:"驳回原因",visible:t.rejectDialog,maxLength:200},on:{close:function(e){t.rejectDialog=!1},confirm:function(e){return t.approvalRes("3",e)}}}),t.photoIsShow?a("jl-image-preview",{attrs:{showViewer:t.photoIsShow,urlList:t.previewUrl},on:{closeViewer:t.closeViewer}}):t._e()],1)},i=[]},"66ea":function(t,e,a){"use strict";a("d95e")},8379:function(t,e,a){(e=a("24fb")(!1)).push([t.i,".turn-to-page[data-v-349e4c72]{display:inline-block;color:#46aaff;cursor:pointer}",""]),t.exports=e},"888b":function(t,e,a){(e=a("24fb")(!1)).push([t.i,".follow-up-approval-box[data-v-e76e4b74]{padding:0 30px 50px}.follow-up-approval-box .content-box[data-v-e76e4b74]{background:#fff}.follow-up-approval-box .content-box h2[data-v-e76e4b74]{line-height:50px;padding-left:10px;border-bottom:1px solid #eee;margin-bottom:20px}.follow-up-approval-box .content-box .group-table-box .bd[data-v-e76e4b74]{padding:0 30px 30px}.follow-up-approval-box .content-box li[data-v-e76e4b74]{line-height:40px;font-size:14px}.follow-up-approval-box .content-box li .td[data-v-e76e4b74],.follow-up-approval-box .content-box li .th[data-v-e76e4b74]{float:left}.table-title .current-page-data[data-v-e76e4b74]{font-weight:700}.table-title li[data-v-e76e4b74]{float:left;height:40px;line-height:40px;margin-right:50px}.table-title .reject-text li[data-v-e76e4b74]{height:auto;line-height:20px}.table-title .reject-text .td[data-v-e76e4b74]{width:800px}.file-show-box .file-list .preview-file[data-v-e76e4b74]{color:#00f;text-decoration:underline;margin:0 10px}.file-show-box .img-list[data-v-e76e4b74]{margin-top:16px}.file-show-box .img-list li[data-v-e76e4b74]{float:left;width:100px;height:130px;text-align:center;margin-right:12px}.file-show-box .img-list li .img-item-box[data-v-e76e4b74]{width:100%;height:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #eee}.file-show-box .img-list li .img-item-box img[data-v-e76e4b74]{max-width:100%;max-height:100%}.reason-tips[data-v-e76e4b74]{height:30px;line-height:30px;float:right;color:#aaa}.approval-btn-box[data-v-e76e4b74]{text-align:center;padding-bottom:30px}.follow-content-wrap[data-v-e76e4b74]{margin:20px 0}.follow-content-wrap .th[data-v-e76e4b74]{font-weight:700}.follow-content-wrap .follow-item[data-v-e76e4b74]{margin-bottom:20px}.follow-content-wrap .follow-item .follow-item-left[data-v-e76e4b74],.follow-content-wrap .follow-item .follow-item-middle[data-v-e76e4b74]{width:450px}.follow-content-wrap .follow-item .fl[data-v-e76e4b74]{float:left}.follow-content-wrap .follow-item .all[data-v-e76e4b74]{width:100%}",""]),t.exports=e},9398:function(t,e,a){"use strict";a.r(e);var l=a("fd63"),i=a.n(l);for(var o in l)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return l[t]}))}(o);e.default=i.a},a15b:function(t,e,a){"use strict";var l=a("23e7"),i=a("44ad"),o=a("fc6a"),s=a("a640"),n=[].join,r=i!=Object,c=s("join",",");l({target:"Array",proto:!0,forced:r||!c},{join:function(t){return n.call(o(this),void 0===t?",":t)}})},b133:function(t,e,a){"use strict";a.r(e);var l=a("5faf"),i=a("9398");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("66ea");var s=a("2877"),n=Object(s.a)(i.default,l.a,l.b,!1,null,"e76e4b74",null);e.default=n.exports},be8b:function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return i}));var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"follow-up-list-wrapper"},[a("div",{staticClass:"table-wrap-new"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tableFixedWrap",attrs:{border:"",data:t.tableList,size:"small","show-summary":"","summary-method":t.getSummaries,"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"header-cell-style":t.tableHeaderColor}},[a("el-table-column",{attrs:{"min-width":"80",prop:"city_name",label:"地理城市",fixed:"",align:"center"}}),a("el-table-column",{attrs:{"min-width":"100",prop:"deal_id",label:"成交ID",fixed:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"turn-to-page",on:{click:function(a){return t.turnToNewPage(e.row.deal_url)}}},[t._v(t._s(e.row.deal_id))])]}}])}),a("el-table-column",{attrs:{"min-width":"180",prop:"project_name",label:"楼盘名称",fixed:"",align:"center"}}),a("el-table-column",{attrs:{"min-width":"100",prop:"username",label:"成交客户姓名",fixed:"",align:"center"}}),a("el-table-column",{attrs:{"min-width":"120",prop:"deal_step",label:"成交单进度",align:"center"}}),a("el-table-column",{attrs:{"min-width":"120",prop:"subscribe_datetime",label:"认购日期",align:"center"}}),a("el-table-column",{attrs:{"min-width":"120",prop:"grass_datetime",label:"草签日期",align:"center"}}),a("el-table-column",{attrs:{"min-width":"120",prop:"sign_datetime",label:"网签日期",align:"center"}}),a("el-table-column",{attrs:{"min-width":"100",prop:"cooperate_type",label:"合作方式",align:"center"}}),a("el-table-column",{attrs:{"min-width":"100",prop:"commission_type",label:"回款类型",align:"center"}}),a("el-table-column",{attrs:{"min-width":"300",prop:"forecast_content",label:"单笔合同预测子条件",align:"center"}}),a("el-table-column",{attrs:{"min-width":"120",prop:"pre_paid_money",label:"单笔合同预测金额",align:"center"}}),a("el-table-column",{attrs:{"min-width":"120",prop:"unfollowed_money",label:"单笔剩余回款金额",align:"center"}}),a("el-table-column",{attrs:{"min-width":"120",prop:"follow_money",label:"本次跟进金额",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"!==t.pageType||"1"!==t.currentStage&&"2"!==t.currentStage?a("span",[t._v(t._s(e.row.follow_money))]):a("jl-number-input",{attrs:{reg:"twoNum"},nativeOn:{input:function(a){return t.followUpFun(e.$index,e.row)}},model:{value:t.tableList[e.$index].follow_money,callback:function(a){t.$set(t.tableList[e.$index],"follow_money",a)},expression:"tableList[scope.$index].follow_money"}})]}}])}),"1"===t.pageType?a("el-table-column",{attrs:{fixed:"right","min-width":"80",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"medium",disabled:t.tableList.length<=1},on:{click:function(a){return t.moveOut(e.$index,e.row.id)}}},[t._v("移除")])]}}],null,!1,1554424278)}):t._e()],1)],1)])},i=[]},d95e:function(t,e,a){var l=a("888b");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);(0,a("499e").default)("a4ec1a80",l,!0,{sourceMap:!1,shadowMode:!1})},f032:function(t,e,a){"use strict";a.r(e);var l=a("be8b"),i=a("0db9");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("41b8");var s=a("2877"),n=Object(s.a)(i.default,l.a,l.b,!1,null,"349e4c72",null);e.default=n.exports},fd63:function(t,e,a){"use strict";var l=a("4ea4");a("4de4"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=l(a("5530"));a("96cf");var o=l(a("1da1")),s=a("2af9"),n=l(a("405c")),r=l(a("f032")),c=a("2f62"),d={name:"follow-up-approval",components:{FollowUpList:r.default,RejectDialog:s.RejectDialog},data:function(){return{followId:this.$route.query.followId,groupId:this.$route.query.groupId,type:"2",initData:{},followUpData:{},rejectDialog:!1,photoIsShow:!1,previewUrl:[],loading:"",isSubmit:!0,loginId:""}},mounted:function(){this.init()},methods:{showPreview:function(t){this.photoIsShow=!0,this.previewUrl=[t]},closeViewer:function(){this.photoIsShow=!1,this.previewUrl=[]},init:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){var a,l,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.beforeRequest(),a={follow_id:t.followId},e.prev=2,e.next=5,n.default.followDetail(a);case 5:l=e.sent,0===(i=l.data).code&&(t.initData=i.data,t.followUpData=i.data.stage_type_list),t.loading.close(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),t.loading.close();case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},approvalRes:function(t,e){var a=this;return(0,o.default)(regeneratorRuntime.mark((function l(){var i,o,s;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(!a.isSubmit){l.next=18;break}return a.isSubmit=!1,i={follow_id:a.followId,audit_status:t,reject_text:e},l.prev=3,l.next=6,n.default.followAudit(i);case 6:o=l.sent,0===(s=o.data).code&&a.init(),a.$message(s.msg),a.isSubmit=!0,"3"===t&&(a.rejectDialog=!1),l.next=18;break;case 14:l.prev=14,l.t0=l.catch(3),console.log(l.t0),a.isSubmit=!0;case 18:case"end":return l.stop()}}),l,null,[[3,14]])})))()},beforeRequest:function(){this.loading=this.$loading({lock:!0,text:"请求中，请稍后",spinner:"el-icon-loading",customClass:"loading-default-box",background:"rgba(255, 255, 255, 0.8)"})}},computed:(0,i.default)((0,i.default)({},(0,c.mapState)({uid:function(t){return t.userInfo.uid}})),{},{stageImgList:function(){return this.followUpData.stage_type_1.img_list.filter((function(t){return"2"===t.file_type}))},stageFileList:function(){return this.followUpData.stage_type_1.img_list.filter((function(t){return"1"===t.file_type}))}}),filters:{stageType4:function(t){var e="";switch(t){case"1":e="合作方审核通过，材料没问题";break;case"2":e="合作方审核中";break;case"3":e="合作审核不通过，材料有问题"}return e},stageType5:function(t){var e="";switch(t){case"1":e="已开票，对方已经收到";break;case"2":e="无需开票";break;case"3":e="已开票，已邮寄";break;case"4":e="已开票，未邮寄";break;case"5":e="开票审批已提交，待开票";break;case"6":e="开票审批未提交"}return e},stageType5TimeTitle:function(t){var e="";switch(t){case"1":e="合作方收到「发票」日期：";break;case"3":case"4":e="预计收到发票日期：";break;case"5":case"6":e="预计开票日期："}return e},stageType6:function(t){var e="";switch(t){case"1":e="合作方审批通过";break;case"2":e="合作方审批中";break;case"3":e="合作方审批不通过"}return e},stageType7:function(t){var e="";switch(t){case"1":e="已完成全部付款";break;case"2":e="等待付款";break;case"3":e="付款失败"}return e}},watch:{uid:{deep:!0,handler:function(t){this.loginId=String(t)}}}};e.default=d}}]);