(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f511005c"],{"10fd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("23f7"),o={getReportList:function(e){return i.axios.post("/backend-api/submission/submission-manage/submission-list",e)},importReport:function(e){return i.axios.post("/backend-api/submission/submission-manage/excel-template",e)},stopReport:function(e){return i.axios.post("/backend-api/submission/submission-manage/stop-submission",e)},getFormByType:function(e){return i.axios.post("/backend-api/submission/submission-manage/init-submission",e)},addSubmission:function(e){return i.axios.post("/backend-api/submission/submission-manage/create-submission",e)},getActivityList:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-list",e)},auditActivity:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-audit",e)},deleteActivity:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-delete",e)},updateScore:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-edit-score",e)},activityInit:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-init",e)},createActivity:function(e){return i.axios.post("/backend-api/submission/submission-manage/activity-save",e)}};t.default=o},2311:function(e,t,a){"use strict";var i=a("4ea4");a("d81d"),a("b0c0"),a("b64b"),a("ac1f"),a("841c"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),s=i(a("10fd")),r=i(a("f946")),n=i(a("d9d3")),l=i(a("9cd3c")),c=a("2af9"),u={name:"activity-list",components:{ConfirmDialog:c.ConfirmDialog,AuditDialog:c.AuditDialog,AlertDialog:c.AlertDialog,SearchSelectRadio:c.SearchSelectRadio,AddHouse:n.default,UpdateScoreDialog:l.default},data:function(){return{cities:[],title:"",houseInfo:{},updateScoreDialog:!1,baseInfo:{},addDialogVisible:!1,search:{city:"",date:[],discountsType:"",status:"",houseName:"",level:"",exclusive:"",checkStatus:"",checkPerson:""},exclusiveList:[],checkStatusList:[],levelList:[],discountsTypeList:[],statusList:[],cityApi:{api:r.default.getDetailCityListData,params:{q:"",type:2,param:"withAll,noAll"}},memberApi:{api:r.default.getStaffList,params:{q:"",role:"all"}},houseApi:{api:r.default.getHouseAll,params:{q:"",city_id:""}},currentPage:1,totalNum:0,tableList:[],loading:!1,pageSize:20,flag:!0,alert:{key:"",title:"",visible:!1,content:""},currentId:"",confirm:{id:"",title:"",content:"",confirmBtn:"",visible:!1,width:"350px"},auditDialog:{visible:!1,radioGroup:[],rejectId:"",maxLength:100},auditInfo:{id:""},createAuth:!1,config:{},appId:"",dialogType:"add",specialHouseInfo:{list:[],date:"",name:""}}},mounted:function(){this.searchData(1)},methods:{changeCity:function(e){this.houseApi.params.city_id=e},getHouseInfo:function(e){this.alert={key:"2",title:"特价房源",visible:!0,content:""},this.specialHouseInfo.list=e.special_house_list,this.specialHouseInfo.name=e.project_name,this.specialHouseInfo.date=e.activity_time},updateActivity:function(e,t){this.dialogType=e,this.appId=t,this.addDialogVisible=!0,this.title="edit"===e?"编辑楼盘信息":"新增楼盘信息"},success:function(){this.searchData(1)},showMoreInfo:function(e,t,a){this.alert={key:"1",title:t,visible:!0,content:a}},changeDate:function(e){e||(this.search.date=[])},searchData:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var i,o,r,n,l,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.updateDate(),!(t.search.date.length>0&&(t.search.date[1]-t.search.date[0])/864e5>180)){a.next=4;break}return t.$message.error("最多可搜索180天的提报时间的数据"),a.abrupt("return",!1);case 4:if(t.flag){a.next=6;break}return a.abrupt("return");case 6:return e&&(t.currentPage=e),t.flag=!1,a.prev=8,t.loading=!0,i=t.getParams(),a.next=13,s.default.getActivityList(i);case 13:o=a.sent,r=o.data,n=r.code,l=r.msg,c=r.data,0===n?(t.tableList=c.list,t.totalNum=c.total?parseInt(c.total):"0",t.pageSize=c.pageSize,t.baseInfo=c.submission?c.submission:{},t.cities=c.submission?c.submission.city_ids:[],t.createAuth=!!c.create_auth&&c.create_auth,1===e&&(t.checkStatusList=c.config.audit_status,t.exclusiveList=c.config.is_julive_promotion,t.discountsTypeList=c.config.promotion_type,t.statusList=c.config.promotion_status,t.levelList=c.config.project_level,t.exclusiveList=c.config.is_julive_promotion,t.config={levelList:t.levelList,exclusiveList:t.exclusiveList,discountsTypeList:t.discountsTypeList,reportTime:t.baseInfo.submission_time})):t.$message.error(l),t.loading=!1,t.flag=!0,a.next=28;break;case 23:a.prev=23,a.t0=a.catch(8),t.loading=!1,t.flag=!0,console.log(a.t0);case 28:case"end":return a.stop()}}),a,null,[[8,23]])})))()},resetSearch:function(){this.search={city:"",date:[],discountsType:"",status:"",houseName:"",level:"",exclusive:"",checkStatus:"",checkPerson:""},this.searchData(1)},pageChange:function(e){this.searchData(e)},tableHeaderColor:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"background-color: #f9f9f9;color: #333;"},exportData:function(){this.confirm={id:"export",title:this.baseInfo.name,content:"导出当前全部数据",confirmBtn:"确认",visible:!0,width:"500px"}},deleteActivity:function(e){this.currentId=e,this.confirm={id:"delete",title:"提示",content:"删除后不可恢复，请谨慎操作！",confirmBtn:"确认删除",visible:!0}},confirmAlert:function(){"delete"===this.confirm.id?this.confirmDelete():"export"===this.confirm.id&&this.confirmExport()},confirmDelete:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.flag){t.next=2;break}return t.abrupt("return");case 2:return e.flag=!1,t.prev=3,a={app_id:e.currentId,submission_type:e.$route.query.type},t.next=7,s.default.deleteActivity(a);case 7:i=t.sent,o=i.data,r=o.code,n=o.msg,0===r?(e.flag=!0,e.confirm.visible=!1,e.searchData(1),e.$message({message:"删除成功",type:"success"})):(e.flag=!0,e.$message.error(n)),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0),e.flag=!0;case 18:case"end":return t.stop()}}),t,null,[[3,14]])})))()},getParams:function(){return{page:this.currentPage,submission_type:this.$route.query.type,submission_id:this.$route.query.id,city_id:this.search.city,promotion_type:this.search.discountsType,promotion_status:this.search.status,creator:this.search.checkPerson,project_level:this.search.level,project_id:this.search.houseName,start_time:this.search.date.length>0?this.search.date[0]/1e3:"",end_time:this.search.date.length>0?(this.search.date[1]+864e5-1e3)/1e3:"",audit_status:this.search.checkStatus,is_julive:this.search.exclusive}},updateDate:function(){if(0===this.search.date.length){var e=new Date;e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.$set(this.search.date,"0",e.getTime()-7776e6),this.$set(this.search.date,"1",e.getTime()+7776e6)}},confirmExport:function(){if(0==this.tableList.length)return this.$message.error("没有数据，不能导出！"),!1;if(this.updateDate(),this.search.date.length>0&&(this.search.date[1]-this.search.date[0])/864e5>180)return this.$message.error("最多可导出180天的提报时间的数据"),!1;try{var e=this.getParams();e.export=1;var t="/backend-api/submission/submission-manage/activity-list?";Object.keys(e).map((function(a,i){t+=0!==i?"&"+a+"="+e[a]:a+"="+e[a]})),window.location.href=t,this.confirm.visible=!1}catch(e){console.log(e)}},audit:function(e){this.auditInfo=e,this.auditDialog={visible:!0,radioGroup:[{value:1,name:"审核通过"},{value:2,name:"驳回"}],maxLength:100,rejectId:2}},updateScore:function(e){this.houseInfo=e,this.updateScoreDialog=!0},confirmAudit:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var i,o,r,n,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.flag){a.next=2;break}return a.abrupt("return");case 2:return t.flag=!1,a.prev=3,i={submission_type:t.$route.query.type,action:1===e.audit?"pass":"reject",id:t.auditInfo.id,reason:e.reason,project_id:t.auditInfo.project_id},a.next=7,s.default.auditActivity(i);case 7:o=a.sent,r=o.data,n=r.code,l=r.msg,0===n?(t.flag=!0,t.auditDialog.visible=!1,t.$message({message:"审核成功",type:"success"}),t.searchData(1)):(t.flag=!0,t.$message.error(l)),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(3),console.log(a.t0),t.flag=!0;case 18:case"end":return a.stop()}}),a,null,[[3,14]])})))()},confirmScore:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var i,o,r,n,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i={submission_type:t.$route.query.type,app_id:e.id,score:e.score},a.next=4,s.default.updateScore(i);case 4:o=a.sent,r=o.data,n=r.code,l=r.msg,0===n?(t.updateScoreDialog=!1,t.$message({message:"修改成功",type:"success"}),t.searchData(1)):t.$message.error(l),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}};t.default=u},"39fc":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-box"},[a("el-breadcrumb",{staticClass:"bread-crumb-box",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",{attrs:{to:{path:"/activity/reportList"}}},[e._v("提报管理")]),a("el-breadcrumb-item",[e._v("提报详情")])],1),a("div",{staticClass:"v-box form-table-box search-wrap"},[a("div",{staticClass:"activity-info-box"},[a("h2",[e._v(e._s(e.baseInfo.name))]),a("div",{staticClass:"activity-info-content"},[a("ul",{staticClass:"s-query clearfix"},[a("li",[a("div",{staticClass:"th"},[e._v("活动时间：")]),a("div",{staticClass:"td"},[e._v(e._s(e.baseInfo.activity_time))])]),a("li",[a("div",{staticClass:"th"},[e._v("提报时间：")]),a("div",{staticClass:"td"},[e._v(e._s(e.baseInfo.submission_time))])]),a("li",{staticClass:"auto show-more"},[a("div",{staticClass:"th"},[e._v("提报描述：")]),a("div",{staticClass:"td"},[a("div",{staticClass:"td-title"},[e._v(e._s(e.baseInfo.desc))]),e.baseInfo.desc&&e.baseInfo.desc.length>20?a("div",{staticClass:"btn-show-more",on:{click:function(t){return e.showMoreInfo(1,"提报描述",e.baseInfo.desc)}}},[e._v("查看更多描述")]):e._e()])]),a("li",{staticClass:"auto show-more"},[a("div",{staticClass:"th"},[e._v("提报规则：")]),a("div",{staticClass:"td"},[a("div",{staticClass:"td-title"},[e._v(e._s(e.baseInfo.submission_rule))]),e.baseInfo.submission_rule&&e.baseInfo.submission_rule.length>20?a("div",{staticClass:"btn-show-more",on:{click:function(t){return e.showMoreInfo(1,"提报规则",e.baseInfo.submission_rule)}}},[e._v("查看更多规则")]):e._e()])])])])]),a("div",{staticClass:"order-search"},[a("ul",{staticClass:"s-query clearfix"},[a("li",[a("div",{staticClass:"th"},[e._v("提报城市：")]),a("div",{staticClass:"td"},[a("search-select-radio",{attrs:{clearable:!0,placeholder:"请选择",apiInfo:e.cityApi},on:{input:e.changeCity},model:{value:e.search.city,callback:function(t){e.$set(e.search,"city",t)},expression:"search.city"}})],1)]),a("li",[a("div",{staticClass:"th"},[e._v("优惠类型：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择优惠类型"},model:{value:e.search.discountsType,callback:function(t){e.$set(e.search,"discountsType",t)},expression:"search.discountsType"}},e._l(e.discountsTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[e._v("优惠状态：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"请选择优惠状态"},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[e._v("填写人：")]),a("div",{staticClass:"td"},[a("search-select-radio",{attrs:{clearable:!0,placeholder:"请选择",apiInfo:e.memberApi},model:{value:e.search.checkPerson,callback:function(t){e.$set(e.search,"checkPerson",t)},expression:"search.checkPerson"}})],1)]),a("li",[a("div",{staticClass:"th"},[e._v("楼盘等级：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"请选择楼盘等级"},model:{value:e.search.level,callback:function(t){e.$set(e.search,"level",t)},expression:"search.level"}},e._l(e.levelList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[e._v("楼盘名称：")]),a("div",{staticClass:"td"},[a("search-select-radio",{attrs:{clearable:!0,placeholder:"请选择",apiInfo:e.houseApi},model:{value:e.search.houseName,callback:function(t){e.$set(e.search,"houseName",t)},expression:"search.houseName"}})],1)]),a("li",{staticClass:"long-width"},[a("div",{staticClass:"th"},[e._v("楼盘活动时间：")]),a("div",{staticClass:"td"},[a("el-date-picker",{attrs:{type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDate},model:{value:e.search.date,callback:function(t){e.$set(e.search,"date",t)},expression:"search.date"}})],1)]),a("li",[a("div",{staticClass:"th"},[e._v("审核状态：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"请选择审核状态"},model:{value:e.search.checkStatus,callback:function(t){e.$set(e.search,"checkStatus",t)},expression:"search.checkStatus"}},e._l(e.checkStatusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[e._v("专属优惠：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"请选择专属优惠"},model:{value:e.search.exclusive,callback:function(t){e.$set(e.search,"exclusive",t)},expression:"search.exclusive"}},e._l(e.exclusiveList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)])])]),a("div",{staticClass:"btn-area"},[a("el-button",{on:{click:e.resetSearch}},[e._v("重置")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.searchData(1)}}},[e._v("查询")])],1)]),a("div",{staticClass:"v-box form-table-box"},[a("div",{staticClass:"bd"},[a("div",{staticClass:"search-result"},[a("div",{staticClass:"data-stat"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("p",{staticClass:"total-num"},[e._v("当前共"+e._s(e.totalNum)+"条数据")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"operation-area"},[e.createAuth?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateActivity("add")}}},[e._v("+ 新增楼盘")]):e._e(),a("el-button",{attrs:{type:"primary"},on:{click:e.exportData}},[e._v("导出")])],1)])],1)],1),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.tableList,size:"small","row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"header-cell-style":e.tableHeaderColor}},[a("el-table-column",{attrs:{prop:"project_id","show-overflow-tooltip":!0,label:"楼盘ID",align:"center"}}),a("el-table-column",{attrs:{"min-width":"100",prop:"project_name",label:"楼盘名称",align:"center"}}),a("el-table-column",{attrs:{prop:"city_name",label:"城市",align:"center"}}),a("el-table-column",{attrs:{prop:"is_julive",label:"专属优惠",align:"center"}}),a("el-table-column",{attrs:{prop:"promotion_type",label:"优惠类型",align:"center"}}),a("el-table-column",{attrs:{"min-width":"100",prop:"promotion_desc",label:"优惠描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover",content:t.row.promotion_desc}},[a("div",{staticClass:"tooltip-text",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.promotion_desc))])])]}}])}),a("el-table-column",{attrs:{prop:"special_house_count",label:"特价房源",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.special_house_count?a("span",{staticClass:"btn-link",on:{click:function(a){return e.getHouseInfo(t.row)}}},[e._v(e._s(t.row.special_house_count))]):a("span",[e._v("无")])]}}])}),a("el-table-column",{attrs:{prop:"promotion_status",label:"优惠状态",align:"center"}}),a("el-table-column",{attrs:{prop:"audit_status",label:"审核状态",align:"center"}}),a("el-table-column",{attrs:{prop:"project_level",label:"楼盘等级",align:"center"}}),a("el-table-column",{attrs:{prop:"score",label:"活动分",align:"center"}}),a("el-table-column",{attrs:{prop:"creator",label:"填写人",align:"center"}}),a("el-table-column",{attrs:{prop:"activity_time",label:"楼盘活动时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"btn-list"},[t.row.edit_auth?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.updateActivity("edit",t.row.id)}}},[e._v("编辑")]):e._e(),t.row.audit_auth?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.audit(t.row)}}},[e._v("审核")]):e._e(),t.row.delete_auth?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteActivity(t.row.id)}}},[e._v("删除")]):e._e(),t.row.edit_score_auth?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.updateScore(t.row)}}},[e._v("修改活动分")]):e._e()],1)]}}])})],1),a("div",{staticClass:"pagination"},[e.totalNum-e.pageSize>0?a("el-pagination",{attrs:{background:"","page-size":e.pageSize,layout:"prev, pager, next","current-page":e.currentPage,total:e.totalNum},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.pageChange}}):e._e()],1)],1)])])]),a("add-house",{attrs:{visible:e.addDialogVisible,config:e.config,dialogType:e.dialogType,appId:e.appId,title:e.title,cities:e.cities,activityInfo:e.baseInfo},on:{"update:visible":function(t){e.addDialogVisible=t},success:e.success}}),a("alert-dialog",{attrs:{title:e.alert.title,visible:e.alert.visible,width:"600px"},on:{"update:visible":function(t){return e.$set(e.alert,"visible",t)}}},["1"===e.alert.key?a("div",[e._v(" "+e._s(e.alert.content)+" ")]):e._e(),"2"===e.alert.key?a("div",{staticClass:"house-info-wrapper"},[a("div",{staticClass:"title"},[e._v(e._s(e.specialHouseInfo.name))]),e.specialHouseInfo?a("ul",{staticClass:"content"},[a("li",[e._v("活动时间："+e._s(e.specialHouseInfo.date))]),e._l(e.specialHouseInfo.list,(function(t,i){return a("li",{key:i},[e._v("特价房号："+e._s(t.room_num)+" 面积："+e._s(t.area)+" 原总价："+e._s(t.total_price)+"万 特价："+e._s(t.special_price)+"万")])}))],2):e._e()]):e._e()]),a("confirm-dialog",{attrs:{title:e.confirm.title,content:e.confirm.content,confirmBtn:e.confirm.confirmBtn,visible:e.confirm.visible,width:e.confirm.width},on:{cancel:function(t){e.confirm.visible=!1},confirm:e.confirmAlert}}),a("audit-dialog",{attrs:{title:"审核",visible:e.auditDialog.visible,radioGroup:e.auditDialog.radioGroup,rejectId:e.auditDialog.rejectId,maxLength:e.auditDialog.maxLength,isRequired:!1},on:{close:function(t){e.auditDialog.visible=!1},confirm:e.confirmAudit}},[a("ul",[a("li",[e._v("楼盘ID："+e._s(e.auditInfo.project_id))]),a("li",[e._v("楼盘名称："+e._s(e.auditInfo.project_name))]),a("li",[e._v("优惠类型："+e._s(e.auditInfo.promotion_type))]),a("li",[e._v("优惠信息："+e._s(e.auditInfo.promotion_desc))])])]),a("update-score-dialog",{attrs:{visible:e.updateScoreDialog,info:e.houseInfo},on:{close:function(t){e.updateScoreDialog=!1},confirm:e.confirmScore}})],1)},o=[]},"3fd6":function(e,t,a){"use strict";var i=a("4ea4");a("a434"),a("b0c0"),a("a9e3"),a("ac1f"),a("841c"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),s=i(a("10fd")),r=i(a("f946")),n={name:"add-house-dialog",components:{SearchSelectRadio:a("2af9").SearchSelectRadio},props:{visible:{type:Boolean,default:!1},activityInfo:{type:Object,default:function(){return{}}},dialogType:{type:String,default:"add"},appId:{type:String|Number,default:""},title:{type:String,default:"新增楼盘信息"},cities:{type:Array,default:function(){return[]}}},watch:{visible:function(e){this.dialogVisble=e,e&&this.init()}},data:function(){return{houseLoading:!1,houseIdList:[],config:{},houseInfo:{name:"",type:""},loading:!1,dialogVisble:this.visible,houseForm:{id:"",level:"",exclusive:"2",type:"",houseRange:"",houseNum:"",preferential:"",discribe:"",unit:"",additional:"2",additionalId:"",additionalCon:"",dateTime:[],hasSpecialHouse:"",specialHouseList:[]},preferentialConfig:{},houseRules:{id:[{required:!0,message:"请输入楼盘ID",trigger:"blur"}],level:[{required:!0,message:"请选择楼盘等级",trigger:"change"}],exclusive:[{required:!0,message:"请选择是否居理专属",trigger:"change"}],type:[{required:!0,message:"请选择优惠类型",trigger:"change"}],dateTime:[{required:!0,validator:function(e,t,a){0===t.length?a(new Error("请选择楼盘活动时间")):a()},message:"请选择楼盘活动时间",trigger:"blur"}],houseRange:[{required:!0,message:"请选择房源范围",trigger:"change"}],houseNum:[{required:!0,message:"请输入",trigger:"blur"}],preferential:[{required:!0,message:"请选择优惠方式",trigger:"change"}],discribe:[{required:!0,message:"请输入优惠描述",trigger:"blur"}],unit:[{required:!0,message:"请选择单位",trigger:"change"}],additionalId:[{required:!0,message:"请选择是否额外优惠",trigger:"change"}],additionalCon:[{required:!0,message:"请输入补充信息",trigger:"blur"}],additional:[{required:!0,message:"请选择额外优惠",trigger:"change"}],hasSpecialHouse:[{required:!0,message:"请选择是否填写特价房房号",trigger:"change"}]},type:this.$route.query.type,id:this.$route.query.id,flag:!0}},methods:{changeHouseId:function(e){this.houseInfo.name=e.project_info?e.project_info.name:"",this.houseInfo.type=e.project_info?e.project_info.project_type_text:""},remoteHouseId:function(e){var t=this;return(0,o.default)(regeneratorRuntime.mark((function a(){var i,o,s,n,l,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i={project_id:e,city_id:t.cities},a.next=4,r.default.getHouseIdList(i);case 4:o=a.sent,s=o.data,n=s.code,l=s.msg,c=s.data,0===n?t.houseIdList=c?c.list:[]:t.$message.error(l),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()},changeType:function(e){this.$refs.houseRange&&this.$refs.houseRange.resetField(),this.$refs.preferential&&this.$refs.preferential.resetField(),this.$refs.discribe&&this.$refs.discribe.resetField(),this.$refs.unit&&this.$refs.unit.resetField(),this.$refs.houseNum&&this.$refs.houseNum.resetField(),this.$refs.additional&&this.$refs.additional.resetField(),this.$refs.additionalId&&this.$refs.additionalId.resetField(),this.$refs.additionalCon&&this.$refs.additionalCon.resetField(),this.$refs.hasSpecialHouse&&this.$refs.hasSpecialHouse.resetField(),this.houseForm.specialHouseList=[]},changeSpecial:function(e){if("1"===e){var t=this.$refs.formContent,a=t.scrollHeight,i=t.clientHeight;t.scrollHeight>i&&(t.scrollTop=a)}},delHouse:function(e){this.houseForm.specialHouseList.splice(e,1)},addHouse:function(){this.houseForm.specialHouseList.push({id:"",room_num:"",area:"",special_price:"",total_price:""})},init:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n,l,c,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,a={submission_type:e.type,submission_id:e.id},"edit"===e.dialogType&&(a.app_id=e.appId),t.next=6,s.default.activityInit(a);case 6:i=t.sent,o=i.data,r=o.code,n=o.msg,l=o.data,0===r?(e.config=l.config?l.config:{},c=l.detail,"{}"!==JSON.stringify(c)&&(e.houseForm.id=c.project_id,e.houseForm.level=c.project_level||"",e.houseForm.exclusive=c.is_julive?c.is_julive:"2",e.houseForm.type=c.promotion_type||"",e.houseForm.type&&e.getPreferentialInfo(e.houseForm.type),e.houseForm.houseRange=c.house_resource||"",e.houseForm.houseNum=c.house_resource_text,e.houseForm.preferential=c.promotion_category||"",e.houseForm.discribe=c.promotion_desc,e.houseForm.unit=c.unit||"",e.houseForm.additional=c.has_more_promotion||"2",e.houseForm.additionalId=c.more_promotion||"",e.houseForm.additionalCon=c.more_promotion_desc,e.houseForm.dateTime=[1e3*c.start_time,1e3*c.end_time],e.houseForm.hasSpecialHouse=c.is_special_house||"",e.houseForm.specialHouseList=c.special_house?c.special_house:[],e.houseInfo.name=c.project_name||"",e.houseInfo.type=c.project_type||""),"add"===e.dialogType&&(u=e.activityInfo.activity_time_start?e.activityInfo.activity_time_start:"",d=e.activityInfo.activity_time_end?e.activityInfo.activity_time_end:"",e.houseForm.dateTime=[new Date(u),new Date(d)]),e.scrollInit()):e.$message.error(n),e.loading=!1,t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),e.loading=!1,console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},scrollInit:function(){this.$refs.formContent.scrollTop=0},getPreferentialInfo:function(e){this.preferentialConfig=this.config.promotion_config[e]?this.config.promotion_config[e].child:{}},changeAddition:function(e){"4"===e.value&&(this.houseForm.discribe=""),this.preferentialConfig=e.child},cancel:function(){this.$refs.houseForm.resetFields(),this.dialogVisble=!1,this.houseInfo.name="",this.houseInfo.type="",this.$emit("update:visible",!1)},changeDate:function(e){e||(this.search.date=[])},submitData:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.flag){t.next=2;break}return t.abrupt("return");case 2:if("4"!==e.houseForm.type||"1"!==e.houseForm.hasSpecialHouse||e.houseForm.discribe==e.houseForm.specialHouseList.length){t.next=5;break}return e.$message.warning("单位数量与特价房数量不符"),t.abrupt("return");case 5:return e.flag=!1,t.prev=6,e.loading=!0,a={submission_type:e.type,submission_id:e.id,id:e.appId,project_id:e.houseForm.id,project_level:e.houseForm.level,is_julive:e.houseForm.exclusive,promotion_type:e.houseForm.type,house_resource:e.houseForm.houseRange,house_resource_text:e.houseForm.houseNum,promotion_category:e.houseForm.preferential,promotion_desc:e.houseForm.discribe,unit:e.houseForm.unit,has_more_promotion:e.houseForm.additional,more_promotion:e.houseForm.additionalId,more_promotion_desc:e.houseForm.additionalCon,start_time:e.houseForm.dateTime.length>0?e.houseForm.dateTime[0]/1e3:"",end_time:e.houseForm.dateTime.length>1?e.houseForm.dateTime[1]/1e3:"",is_special_house:e.houseForm.hasSpecialHouse,special_house:e.houseForm.specialHouseList},t.next=11,s.default.createActivity(a);case 11:i=t.sent,o=i.data,r=o.code,n=o.msg,0===r?(e.cancel(),e.$emit("success")):e.$message.error(n),e.flag=!0,e.loading=!1,t.next=25;break;case 20:t.prev=20,t.t0=t.catch(6),e.loading=!1,e.flag=!0,console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[6,20]])})))()},checkWords:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="优惠描述$"+e.houseForm.discribe+"|||指定楼号$"+e.houseForm.houseNum+"|||额外优惠补充$"+e.houseForm.additionalCon,t.prev=1,i={str:a,project_id:e.houseForm.id,is_create_project:2},t.next=5,r.default.checkSensitiveWordsData(i);case 5:if(o=t.sent,200!==(s=o.data).code){t.next=11;break}return t.abrupt("return",!0);case 11:return e.$message(s.msg),t.abrupt("return",!1);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))()},confirm:function(){var e=this;this.$refs.houseForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.checkWords().then((function(t){t&&e.submitData()}))}))}}};t.default=n},"4b06":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"修改活动分",visible:e.dialogVisble,"close-on-click-modal":!1,width:"550px",center:""},on:{"update:visible":function(t){e.dialogVisble=t},close:e.cancel}},[a("div",{staticClass:"house-info-box"},[a("ul",{staticClass:"s-query"},[a("li",[a("div",{staticClass:"th"},[e._v("楼盘ID：")]),a("div",{staticClass:"td"},[e._v(e._s(e.info.project_id))])]),a("li",[a("div",{staticClass:"th"},[e._v("优惠类型：")]),a("div",{staticClass:"td"},[e._v(e._s(e.info.promotion_type))])]),a("li",{staticClass:"auto"},[a("div",{staticClass:"th"},[e._v("楼盘名称：")]),a("div",{staticClass:"td"},[e._v(e._s(e.info.project_name))])]),a("li",{staticClass:"auto"},[a("div",{staticClass:"th"},[e._v("优惠信息：")]),a("div",{staticClass:"td"},[e._v(e._s(e.info.promotion_desc))])])])]),a("el-form",{ref:"auditForm",staticClass:"form-box",attrs:{model:e.auditForm,rules:e.formRules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"score",label:"活动分"}},[a("el-input-number",{attrs:{min:0,max:1e3,label:"修改活动分"},model:{value:e.auditForm.score,callback:function(t){e.$set(e.auditForm,"score",t)},expression:"auditForm.score"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)],1)},o=[]},"56b1":function(e,t,a){var i=a("9c30");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("07a4a729",i,!0,{sourceMap:!1,shadowMode:!1})},"5f75":function(e,t,a){"use strict";a("b6f8")},"643a":function(e,t,a){"use strict";a("73a6")},"73a6":function(e,t,a){var i=a("be2a3");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("0af453b2",i,!0,{sourceMap:!1,shadowMode:!1})},"79b0":function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var o=i(a("1da1")),s={name:"update-score-dialog",props:{visible:{type:Boolean,default:!1},info:{type:Object,default:function(){return{}}}},watch:{visible:function(e){this.dialogVisble=e,e&&(this.auditForm.id=this.info.id,this.auditForm.score=this.info.score)}},data:function(){return{dialogVisble:this.visible,auditForm:{score:this.info.score,id:this.info.id},formRules:{score:[{required:!0,message:"请输入活动分",trigger:"blur"}]}}},methods:{cancel:function(){this.$refs.auditForm.clearValidate(),this.$emit("close")},confirm:function(){var e=this;this.$refs.auditForm.validate(function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a&&e.$emit("confirm",e.auditForm);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}};t.default=s},"7e36":function(e,t,a){"use strict";a("56b1")},"868d":function(e,t,a){"use strict";a.r(t);var i=a("2311"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t.default=o.a},"9c30":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".house-info-wrapper[data-v-3b45f0b2]{max-height:400px;overflow:auto}.house-info-wrapper .title[data-v-3b45f0b2]{margin-bottom:10px;font-weight:700}.house-info-wrapper .content>li[data-v-3b45f0b2]{margin-bottom:10px}.main-title[data-v-3b45f0b2]{font-size:16px;font-weight:700;border-bottom:1px solid #eee;padding-bottom:10px;margin-bottom:20px}.container-box .btn-link[data-v-3b45f0b2]{color:#409eff;cursor:pointer}.container-box .s-query li.long-width[data-v-3b45f0b2]{width:680px}.container-box .s-query li.long-width[data-v-3b45f0b2] .el-range-editor,.container-box .s-query li[data-v-3b45f0b2] .el-select{width:100%}.container-box .form-table-box[data-v-3b45f0b2]{padding-top:20px}.container-box .btn-list button[data-v-3b45f0b2]{margin:0 5px}.container-box .data-stat[data-v-3b45f0b2]{margin-bottom:10px}.container-box .data-stat .total-num[data-v-3b45f0b2]{line-height:40px}.container-box .data-stat .operation-area[data-v-3b45f0b2]{text-align:right}.tooltip-text[data-v-3b45f0b2]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.pagination[data-v-3b45f0b2]{padding-top:10px}.center[data-v-3b45f0b2],.pagination[data-v-3b45f0b2]{text-align:center}.search-wrap .activity-info-box[data-v-3b45f0b2]{margin-bottom:40px}.search-wrap .activity-info-box>h2[data-v-3b45f0b2]{margin-bottom:10px;padding-left:59px;-webkit-box-sizing:border-box;box-sizing:border-box}.search-wrap[data-v-3b45f0b2] .el-range-editor .el-range-input{background-color:transparent}.search-wrap .activity-info-content .s-query>li[data-v-3b45f0b2]{margin-bottom:0;line-height:32px}.search-wrap .activity-info-content .s-query>li .th[data-v-3b45f0b2]{height:32px}.search-wrap .activity-info-content .s-query>li .btn-show-more[data-v-3b45f0b2]{min-width:94px;margin-left:10px;color:#409eff;cursor:pointer}.search-wrap .activity-info-content .s-query .show-more .td[data-v-3b45f0b2]{display:-webkit-box;display:-ms-flexbox;display:flex}.search-wrap .activity-info-content .s-query .show-more .td-title[data-v-3b45f0b2]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}",""]),e.exports=t},"9cd3c":function(e,t,a){"use strict";a.r(t);var i=a("4b06"),o=a("b7a8");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("5f75");var r=a("2877"),n=Object(r.a)(o.default,i.a,i.b,!1,null,"ce9f10ce",null);t.default=n.exports},a2d8:function(e,t,a){"use strict";a.r(t);var i=a("39fc"),o=a("868d");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("7e36");var r=a("2877"),n=Object(r.a)(o.default,i.a,i.b,!1,null,"3b45f0b2",null);t.default=n.exports},ab61:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".house-info-box .s-query>li[data-v-ce9f10ce]{width:180px;margin-bottom:0;line-height:30px}.house-info-box .s-query>li[data-v-ce9f10ce]:last-of-type{margin-bottom:20px}.house-info-box .s-query>li .th[data-v-ce9f10ce]{width:80px;height:30px;line-height:30px}.house-info-box .s-query>li.auto[data-v-ce9f10ce]{width:100%}.form-box[data-v-ce9f10ce] .el-form-item{margin-bottom:0}",""]),e.exports=t},b6f8:function(e,t,a){var i=a("ab61");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a("499e").default)("6d826419",i,!0,{sourceMap:!1,shadowMode:!1})},b7a8:function(e,t,a){"use strict";a.r(t);var i=a("79b0"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t.default=o.a},be2a3:function(e,t,a){(t=a("24fb")(!1)).push([e.i,'.special-house-box[data-v-e6e9a6d6] .el-table th{padding:0}.special-house-box[data-v-e6e9a6d6] .el-table td{padding:8px 0}.special-house-box[data-v-e6e9a6d6] .el-table .el-form-item{margin-bottom:0}.form-content .sort-input[data-v-e6e9a6d6]{width:80px}.form-content .sort-input[data-v-e6e9a6d6] .el-input{width:100%}.btn-delete[data-v-e6e9a6d6]{color:red;cursor:pointer}.form-content[data-v-e6e9a6d6]{max-height:500px;overflow:auto;padding-right:20px}.form-content[data-v-e6e9a6d6] .el-range-editor .el-range-input{background-color:transparent}.form-content .bottom-form-item[data-v-e6e9a6d6]{margin-bottom:0}.house-form-box .house[data-v-e6e9a6d6]{float:left;width:300px}.house-info-box[data-v-e6e9a6d6]{display:-webkit-box;display:-ms-flexbox;display:flex}.house-info-box .house-info[data-v-e6e9a6d6]{line-height:40px}.house-info-box .house-info>span[data-v-e6e9a6d6]{margin-left:30px}.house-info-box .house-info[data-v-e6e9a6d6] .el-input{width:120px;margin:0 6px 0 20px}.house-info-box .house-info-right[data-v-e6e9a6d6]{margin-left:20px}.house-info-box .house-info-right[data-v-e6e9a6d6] .el-input{width:120px}.preferential-box[data-v-e6e9a6d6]{border:1px dashed #ddd;padding-top:20px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:4px}.preferential-box[data-v-e6e9a6d6] .el-input,.preferential-box[data-v-e6e9a6d6] .el-select{width:190px}.preferential-box .sort-input[data-v-e6e9a6d6]{width:130px}.preferential-box .sort-input[data-v-e6e9a6d6] .el-input{width:100%}.preferential-box .sort-radio .el-radio[data-v-e6e9a6d6]{margin-right:16px}.rule-box[data-v-e6e9a6d6]{line-height:40px;margin-bottom:22px;overflow:hidden}.rule-box .th[data-v-e6e9a6d6]{width:120px;text-align:right;float:left;padding:0 12px 0 0;-webkit-box-sizing:border-box;box-sizing:border-box}.rule-box .th.required[data-v-e6e9a6d6]:before{content:"*";color:#f56c6c;margin-right:4px}.rule-box .td[data-v-e6e9a6d6]{overflow:hidden}',""]),e.exports=t},d181:function(e,t,a){"use strict";a.r(t);var i=a("3fd6"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t.default=o.a},d5aa:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.title,visible:e.dialogVisble,"close-on-click-modal":!1,width:"850px",center:""},on:{"update:visible":function(t){e.dialogVisble=t},close:e.cancel}},[a("div",{ref:"formContent",staticClass:"form-content"},[a("el-form",{ref:"houseForm",staticClass:"house-form-box",attrs:{model:e.houseForm,rules:e.houseRules,"label-width":"120px"}},[a("div",{staticClass:"house-info-box"},[a("el-form-item",{staticClass:"house",attrs:{prop:"id",label:"楼盘ID"}},[a("el-select",{attrs:{filterable:"",remote:"","remote-method":e.remoteHouseId,houseLoading:e.houseLoading,placeholder:"请选择楼盘ID"},model:{value:e.houseForm.id,callback:function(t){e.$set(e.houseForm,"id",t)},expression:"houseForm.id"}},e._l(e.houseIdList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value},nativeOn:{click:function(a){return e.changeHouseId(t)}}})})),1)],1),e.houseInfo?a("div",{staticClass:"house-info"},[a("span",[e._v(e._s(e.houseInfo.name))]),a("span",[e._v(e._s(e.houseInfo.type))])]):e._e()],1),a("el-form-item",{attrs:{prop:"level",label:"楼盘等级输入"}},[a("el-select",{attrs:{placeholder:"请选择楼盘等级"},model:{value:e.houseForm.level,callback:function(t){e.$set(e.houseForm,"level",t)},expression:"houseForm.level"}},e._l(e.config.project_level,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{prop:"exclusive",label:"是否居理专属"}},[a("el-radio-group",{model:{value:e.houseForm.exclusive,callback:function(t){e.$set(e.houseForm,"exclusive",t)},expression:"houseForm.exclusive"}},e._l(e.config.is_julive_promotion,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1),a("el-form-item",{attrs:{prop:"type",label:"优惠类型选择"}},[a("el-select",{attrs:{placeholder:"请选择优惠类型"},on:{change:e.changeType},model:{value:e.houseForm.type,callback:function(t){e.$set(e.houseForm,"type",t)},expression:"houseForm.type"}},e._l(e.config.promotion_config,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value},nativeOn:{click:function(a){return e.changeAddition(t)}}})})),1)],1),a("div",{staticClass:"rule-box"},[a("div",{staticClass:"th"},[e._v("提报规则")]),a("div",{staticClass:"td"},[e._v(e._s(e.activityInfo.submission_rule))])]),a("div",{staticClass:"rule-box"},[a("div",{staticClass:"th required"},[e._v("优惠信息录入")]),a("div",{staticClass:"td"},[a("div",{staticClass:"preferential-box"},["4"!==e.houseForm.type?a("div",{staticClass:"house-info-box"},[a("el-form-item",{ref:"houseRange",attrs:{prop:"houseRange",label:"房源范围"}},[a("el-select",{attrs:{disabled:!e.houseForm.type,placeholder:"请选择房源范围"},model:{value:e.houseForm.houseRange,callback:function(t){e.$set(e.houseForm,"houseRange",t)},expression:"houseForm.houseRange"}},e._l(e.preferentialConfig.house_resource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),"10"===e.houseForm.houseRange?a("el-form-item",{ref:"houseNum",staticClass:"house-info-right",attrs:{prop:"houseNum","label-width":"0",label:""}},[a("div",[a("el-input",{model:{value:e.houseForm.houseNum,callback:function(t){e.$set(e.houseForm,"houseNum",t)},expression:"houseForm.houseNum"}}),e._v("号楼 ")],1)]):e._e()],1):e._e(),"4"!==e.houseForm.type?a("el-form-item",{ref:"preferential",attrs:{prop:"preferential",label:"优惠方式"}},[a("el-select",{attrs:{disabled:!e.houseForm.type,placeholder:"请选择优惠方式"},model:{value:e.houseForm.preferential,callback:function(t){e.$set(e.houseForm,"preferential",t)},expression:"houseForm.preferential"}},e._l(e.preferentialConfig.promotion_category,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),a("el-form-item",{ref:"discribe",staticClass:"fix-width-input",attrs:{prop:"discribe",label:"优惠描述"}},["4"!==e.houseForm.type?a("el-input",{attrs:{disabled:!e.houseForm.type,maxlength:"8",placeholder:"请输入优惠描述"},model:{value:e.houseForm.discribe,callback:function(t){e.$set(e.houseForm,"discribe",t)},expression:"houseForm.discribe"}}):a("jl-number-input",{attrs:{reg:"int",maxlength:"8",disabled:!e.houseForm.type},model:{value:e.houseForm.discribe,callback:function(t){e.$set(e.houseForm,"discribe",t)},expression:"houseForm.discribe"}})],1),"1"!==e.houseForm.type?a("el-form-item",{ref:"unit",attrs:{prop:"unit",label:"单位"}},[a("el-select",{attrs:{disabled:!e.houseForm.type,placeholder:"请选择单位"},model:{value:e.houseForm.unit,callback:function(t){e.$set(e.houseForm,"unit",t)},expression:"houseForm.unit"}},e._l(e.preferentialConfig.unit,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),a("div",{staticClass:"house-info-box"},[a("el-form-item",{ref:"additional",attrs:{prop:"additional",label:"是否额外优惠"}},[a("el-radio-group",{staticClass:"sort-radio",attrs:{disabled:!e.houseForm.type},model:{value:e.houseForm.additional,callback:function(t){e.$set(e.houseForm,"additional",t)},expression:"houseForm.additional"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1),"1"===e.houseForm.additional?a("div",{staticClass:"additional-box"},[a("div",{staticClass:"house-info-box"},[a("el-form-item",{ref:"additionalId",attrs:{prop:"additionalId","label-width":"80px",label:"额外优惠"}},[a("el-select",{staticClass:"sort-input",attrs:{placeholder:"请选择"},model:{value:e.houseForm.additionalId,callback:function(t){e.$set(e.houseForm,"additionalId",t)},expression:"houseForm.additionalId"}},e._l(e.preferentialConfig.more_promotion,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{ref:"additionalCon",attrs:{prop:"additionalCon","label-width":"60px",label:"补充"}},[a("el-input",{staticClass:"sort-input",attrs:{maxlength:"8",placeholder:"请输入补充信息"},model:{value:e.houseForm.additionalCon,callback:function(t){e.$set(e.houseForm,"additionalCon",t)},expression:"houseForm.additionalCon"}})],1)],1)]):e._e()],1)],1)])]),a("el-form-item",{attrs:{prop:"dateTime",label:"楼盘活动时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"timestamp","range-separator":"至","default-time":["00:00:00","23:59:59"],"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDate},model:{value:e.houseForm.dateTime,callback:function(t){e.$set(e.houseForm,"dateTime",t)},expression:"houseForm.dateTime"}})],1),"4"===e.houseForm.type?a("el-form-item",{ref:"hasSpecialHouse",attrs:{prop:"hasSpecialHouse","label-width":"150px",label:"是否填写特价房房号"}},[a("el-radio-group",{on:{change:e.changeSpecial},model:{value:e.houseForm.hasSpecialHouse,callback:function(t){e.$set(e.houseForm,"hasSpecialHouse",t)},expression:"houseForm.hasSpecialHouse"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"2"}},[e._v("否")])],1)],1):e._e(),"4"===e.houseForm.type&&"1"===e.houseForm.hasSpecialHouse?a("div",{staticClass:"rule-box"},[a("div",{staticClass:"th required"},[e._v("特价房信息")]),a("div",{staticClass:"td"},[a("div",{staticClass:"special-house-box"},[a("el-table",{attrs:{data:e.houseForm.specialHouseList}},[a("el-table-column",{attrs:{prop:"roomNum",label:"特价房"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"specialHouseList."+t.$index+".room_num","label-width":"0",rules:[{required:!0,message:"",trigger:"blur"}],label:""}},[a("el-input",{staticClass:"sort-input",model:{value:t.row.room_num,callback:function(a){e.$set(t.row,"room_num","string"==typeof a?a.trim():a)},expression:"scope.row.room_num"}})],1)]}}],null,!1,4046549309)}),a("el-table-column",{attrs:{prop:"area",label:"面积"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"specialHouseList."+t.$index+".area","label-width":"0",rules:[{required:!0,message:"",trigger:"blur"}],label:""}},[a("jl-number-input",{staticClass:"sort-input",attrs:{reg:"fourNum"},model:{value:t.row.area,callback:function(a){e.$set(t.row,"area","string"==typeof a?a.trim():a)},expression:"scope.row.area"}})],1)]}}],null,!1,1330518078)}),a("el-table-column",{attrs:{prop:"totalPrice",label:"原总价(万元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"specialHouseList."+t.$index+".total_price","label-width":"0",rules:[{required:!0,message:"",trigger:"blur"}],label:""}},[a("jl-number-input",{staticClass:"sort-input",attrs:{reg:"fourNum"},model:{value:t.row.total_price,callback:function(a){e.$set(t.row,"total_price","string"==typeof a?a.trim():a)},expression:"scope.row.total_price"}})],1)]}}],null,!1,341765758)}),a("el-table-column",{attrs:{prop:"specialPrice",label:"特价(万元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{prop:"specialHouseList."+t.$index+".special_price",rules:[{required:!0,message:"",trigger:"blur"}],"label-width":"0",label:""}},[a("jl-number-input",{staticClass:"sort-input",attrs:{reg:"fourNum"},model:{value:t.row.special_price,callback:function(a){e.$set(t.row,"special_price","string"==typeof a?a.trim():a)},expression:"scope.row.special_price"}})],1)]}}],null,!1,1410878046)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"btn-delete",on:{click:function(a){return e.delHouse(t.$index)}}},[e._v("删除")])]}}],null,!1,276182833)})],1)],1),a("div",{staticClass:"tb-operate"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addHouse}},[e._v("新增特价房")])],1)])]):e._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("提交")])],1)])},o=[]},d9d3:function(e,t,a){"use strict";a.r(t);var i=a("d5aa"),o=a("d181");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("643a");var r=a("2877"),n=Object(r.a)(o.default,i.a,i.b,!1,null,"e6e9a6d6",null);t.default=n.exports}}]);