(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4eeca0aa"],{"0496":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".expand-list-box[data-v-d108f73a]{padding:10px 15px}.expand-list-box[data-v-d108f73a],.expand-list-box .content-box[data-v-d108f73a]{-webkit-box-sizing:border-box;box-sizing:border-box}.expand-list-box .content-box[data-v-d108f73a]{margin-top:30px;padding:20px 15px;background-color:#fff}.expand-list-box .content-box h2[data-v-d108f73a]{margin:20px 0}.expand-list-box .content-box .content-text[data-v-d108f73a]{margin-top:20px}.expand-list-box .content-box .content-text .el-steps[data-v-d108f73a]{margin-bottom:10px}.expand-list-box .content-box .content-text[data-v-d108f73a] .el-step__head.is-success{color:#2f9ef5;border-color:#2f9ef5}.expand-list-box .content-box .content-text[data-v-d108f73a] .el-step__head.is-success .el-step__line{background-color:#2f9ef5}.expand-list-box .content-box .content-text[data-v-d108f73a] .el-step__title.is-process,.expand-list-box .content-box .content-text[data-v-d108f73a] .el-step__title.is-success{color:#2f9ef5}.expand-list-box .content-box .content-text[data-v-d108f73a] .el-step__head.is-process{border-color:#2f9ef5}.expand-list-box .content-box .content-text[data-v-d108f73a] .el-step__head.is-process .is-text{background-color:#2f9ef5;color:#fff}.expand-list-box .content-box .footer-box[data-v-d108f73a]{text-align:center;margin-top:20px}.expand-list-box .content-box .footer-box[data-v-d108f73a] .el-button{width:100px}",""]),e.exports=t},"0531":function(e,t,a){"use strict";var o=a("4ea4");a("ac1f"),a("841c"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a("085b")),i={name:"BuildingMap",props:{mapId:{type:String,default:""},labelName:{type:String,default:""},inputIsShow:{type:Boolean,default:!0},inputId:{type:String,default:""},value:{type:String,default:""},type:{type:String,default:""},warpWeptVal:{type:Object,default:function(){}},warpWeptValone:{type:Object,default:function(){}},isShow:{type:Boolean,default:!1}},watch:{value:{handler:function(e,t){this.projectPosValue=this.value}},warpWeptVal:{handler:function(e){this.setPositionLays()}},warpWeptValone:{handler:function(e){this.setPositionLays()}},isShow:{handler:function(e){e&&this.resizeMapPosition()}}},data:function(){return{projectPosValue:"",setProjectMap:null}},mounted:function(){var e=this;this.projectPosValue=this.value,this.$nextTick((function(){n.default.loadMap().then((function(t){e.init(t)}))}))},methods:{init:function(e){this.setProjectMap=new e.Map(this.mapId);var t=new e.Autocomplete({input:this.inputId});if("salesOffPosition"===this.type){this.setProjectMap.centerAndZoom(new e.Point(this.warpWeptVal.lngVal,this.warpWeptVal.latVal),15);var a=new e.Marker(new e.Point(this.warpWeptVal.lngVal,this.warpWeptVal.latVal));this.setProjectMap.addOverlay(a),this.setProjectMap.panTo(new e.Point(this.warpWeptVal.lngVal,this.warpWeptVal.latVal))}else if("project"===this.type){this.setProjectMap.centerAndZoom(new e.Point(this.warpWeptValone.lngVal,this.warpWeptValone.latVal),15);var o=new e.Marker(new e.Point(this.warpWeptValone.lngVal,this.warpWeptValone.latVal));this.setProjectMap.addOverlay(o),this.setProjectMap.panTo(new e.Point(this.warpWeptValone.lngVal,this.warpWeptValone.latVal))}this.setProjectMap.enableScrollWheelZoom(),this.setProjectMap.addEventListener("click",this.showInfo),t.setInputValue(this.projectPosValue)},resizeMapPosition:function(){var e=this,t=1;this.setProjectMap.addEventListener("tilesloaded",(function(){1===t&&(e.setProjectMap.setCenter(new BMap.Point(e.warpWeptVal.lngVal,e.warpWeptVal.latVal)),t++)}))},getValue:function(){var e=this,t=new BMap.Autocomplete({input:this.inputId});t.setInputValue(this.projectPosValue),t.addEventListener("onconfirm",(function(t){if(t&&t.preventDefault)t.preventDefault();else{var a=t.item.value,o=a.province+a.city+a.district+a.street+a.business;e.projectPosValue=o,e.$emit("input",e.projectPosValue),e.setPlace(o)}}))},setPlace:function(e){var t=this,a=new BMap.LocalSearch(this.setProjectMap,{onSearchComplete:function(){var e={},o=a.getResults().getPoi(0).point;e.lngVal=o,"salesOffPosition"===t.type?(e.type="salesOffPosition",t.$emit("getLngVal",e)):"project"===t.type&&(e.type="project",t.$emit("getLngVal",e))},renderOptions:{map:this.setProjectMap}});a.search(e)},showInfo:function(e){if(this.inputIsShow){var t={};this.setProjectMap.clearOverlays();var a=new BMap.Point(e.point.lng,e.point.lat),o=new BMap.Marker(a);this.setProjectMap.addOverlay(o),this.setProjectMap.panTo(a),t.lngVal=e.point,"salesOffPosition"===this.type?(t.type="salesOffPosition",this.$emit("getLngVal",t)):"project"===this.type&&(t.type="project",this.$emit("getLngVal",t))}},setPositionLays:function(){var e;this.setProjectMap.clearOverlays(),"salesOffPosition"===this.type?e=new BMap.Point(this.warpWeptVal.lngVal,this.warpWeptVal.latVal):"project"===this.type&&(e=new BMap.Point(this.warpWeptValone.lngVal,this.warpWeptValone.latVal));var t=new BMap.Marker(e);this.setProjectMap.addOverlay(t),this.setProjectMap.panTo(e)}}};t.default=i},"085b":function(e,t,a){"use strict";a("4de4"),a("4160"),a("a630"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={loadBMap:function(){return new Promise((function(e,t){if("undefined"!=typeof BMap)return e(BMap),!0;window.onBMapCallback=function(){e(BMap)};var a=document.createElement("script");a.type="text/javascript",a.setAttribute("id","mapScript"),a.src="//api.map.baidu.com/api?v=3.0&ak=MACS7AerwZBS2G7cUIX1kyIGKYgg1oXH&callback=onBMapCallback",a.onerror=t,document.body.appendChild(a)}))},deleteSameScript:function(){var e=document.body.getElementsByTagName("script"),t=(e.length>0?Array.from(e):[]).filter((function(e){return"map-tag"===e.getAttribute("data-map")})),a=t.length;t.forEach((function(e,t){t<a-1&&e.remove()}))},loadMap:function(){var e=this;return new Promise((function(t,a){if("undefined"!=typeof BMap)return t(BMap),!0;var o=document.createElement("script");window.BMAP_PROTOCOL=window.location.protocol.split(":")[0],window.BMap_loadScriptTime=(new Date).getTime(),o.type="text/javascript",o.setAttribute("data-map","map-tag"),o.src="//api.map.baidu.com/getscript?v=3.0&ak=MACS7AerwZBS2G7cUIX1kyIGKYgg1oXH&services=&t=20210111174932",o.onerror=a,o.addEventListener?o.addEventListener("load",(function(){e.deleteSameScript(),t(BMap)}),!1):o.attachEvent&&o.attachEvent("onreadystatechange",(function(a){"loaded"==(a.target||a.srcElement).readyState&&(e.deleteSameScript(),t(BMap))})),document.body.appendChild(o)}))}};t.default=o},"0f57":function(e,t,a){var o=a("1b51");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("57934d42",o,!0,{sourceMap:!1,shadowMode:!1})},"163c":function(e,t,a){"use strict";var o=a("4ea4");a("4160"),a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("b64b"),a("d3b7"),a("2532"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=o(a("1da1")),i=o(a("8fa0")),r=a("7223"),l={name:"BuildingInfo",props:{datas:{type:Object,default:function(){return{}}}},data:function(){return{tableData:[],operation:[],houseOptions:[],pageName:""}},computed:{allSelectedHouseType:function(){var e=[];return this.operation.map((function(t){t.target_id&&e.push(t.target_id)})),e},options:function(){var e=this;return this.houseOptions.map((function(t){var a=Object.assign({},t);return e.allSelectedHouseType.includes(t.id)&&(a.disabled=!0),a}))}},created:function(){this.getHouseOptions()},watch:{datas:{handler:function(e){this.formatData(e)}}},filters:{formatArr:function(e){return e&&Array.isArray(e)?e.join("，"):e||""}},methods:{getHouseOptions:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,o,n,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.$route.query.projectId},t.next=4,i.default.getProjectBuildingListdata(a);case 4:o=t.sent,n=o.data,r=n.code,l=n.data,0===r&&(e.houseOptions=l),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},formatData:function(e){var t=this;this.pageName=e.page_name;var a=[];e.data.forEach((function(o,n){t.operation[n]=o.task_audit_operation;var i=0;Object.keys(o).forEach((function(t){if("task_audit_operation"!==t){var r=o[t].data,l=r.id?r.id:"";r.id&&delete r.id,Object.keys(r).forEach((function(s,d){i++;var u={pageName:e.page_name,pageKey:n,moduleName:o[t].module_name,moduleKey:t,fieldName:r[s].field_desc||"",value:r[s].field_value||"",fieldText:r[s].field_text||"",fieldKey:r[s].field_name||"",oldValue:r[s].old_data||"",operation:o.task_audit_operation,id:l,moduleRow:0===d?Object.keys(r).length:0};u.initData=r[s],a.push(u)}))}})),a[n*i].pageRow=i})),this.tableData=a},objectSpanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);return 0===a||5===a?t.pageRow?{rowspan:t.pageRow,colspan:1}:{rowspan:0,colspan:0}:1===a?t.moduleRow?{rowspan:t.moduleRow,colspan:1}:{rowspan:0,colspan:0}:void 0},changeOperation:function(e,t,a,o){var n=this;this.operation[e]||(this.operation[e]={}),this.operation[e][a]=t,"operation_type"===a&&(this.tableData.forEach((function(t){t.pageKey===e&&(t.oldValue="",t.id&&(t.id.old_data=""))})),this.operation[e].target_id="",this.operation[e].target_name="",o.target_id="",o.target_name=""),"target_id"===a&&this.getSelectInfo(t).then((function(t){n.tableData.forEach((function(a){a.pageKey===e&&t.hasOwnProperty(a.fieldKey)&&(t[a.fieldKey]&&t[a.fieldKey].constructor===Object?a.oldValue=t[a.fieldKey].name:a.oldValue=t[a.fieldKey],a.id&&(a.id.old_data=t.id))}))})).catch((function(e){n.$message.error(e)}))},getSelectInfo:function(e){return new Promise(function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(a,o){var n,r,l,s,d,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={building_id:e},t.next=4,i.default.getBuildingInfo(n);case 4:r=t.sent,l=r.data,s=l.code,d=l.data,u=l.msg,0===s?a(d):o(u),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),o(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}())},save:function(){for(var e=0;e<this.operation.length;e++){var t=this.operation[e];if(!t.operation_type||"2"===t.operation_type&&!t.target_id)return!1}return!0},getSaveData:function(){return this.reFormatData()},reFormatData:function(){var e=this,t=this.tableData,a=[];return t.forEach((function(t,o){a[t.pageKey]||(a[t.pageKey]={}),a[t.pageKey].task_audit_operation||(a[t.pageKey].task_audit_operation=e.operation[t.pageKey]),a[t.pageKey][t.moduleKey]||(a[t.pageKey][t.moduleKey]={module_name:t.moduleName,data:{}});var n=a[t.pageKey][t.moduleKey].data;"building_base_detail"!==t.moduleKey||n.id||(n.id=t.id),n[t.fieldKey]||(n[t.fieldKey]=r.commonFun.deepClone(t.initData),n[t.fieldKey].old_data=t.oldValue||"")})),{data:a,page_name:this.pageName}}}};t.default=l},"17ca":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".el-radio-group[data-v-9e1453d8]{margin-bottom:10px}.el-radio[data-v-9e1453d8]{margin-right:10px}",""]),e.exports=t},"17d6":function(e,t,a){"use strict";a.r(t);var o=a("c9d3"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t.default=n.a},"1b51":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".el-radio-group[data-v-b3a701d8]{margin-bottom:10px}.el-radio[data-v-b3a701d8]{margin-right:10px}.apart-img-list li[data-v-b3a701d8]{float:left;position:relative;width:100px;height:100px;border:1px solid #eee;margin:4px}.apart-img-list li img[data-v-b3a701d8]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.apart-img-list li .img-storey[data-v-b3a701d8]{position:absolute;bottom:0;background:rgba(0,0,0,.6);color:#fff;width:100%;text-align:center}",""]),e.exports=t},"1f80":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".item-list-box[data-v-ed082b7e]{width:100%}.item-list-box .form-input-box[data-v-ed082b7e]{width:47%}.item-list-box .form-input-box[data-v-ed082b7e] .el-input{width:90%}.item-list-box .form-input-box .map-style[data-v-ed082b7e]{width:90%;height:400px}",""]),e.exports=t},2532:function(e,t,a){"use strict";var o=a("23e7"),n=a("5a34"),i=a("1d80");o({target:"String",proto:!0,forced:!a("ab13")("includes")},{includes:function(e){return!!~String(i(this)).indexOf(n(e),arguments.length>1?arguments[1]:void 0)}})},"362b":function(e,t,a){"use strict";a.r(t);var o=a("c2ba"),n=a("580b");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("6251");var r=a("2877"),l=Object(r.a)(n.default,o.a,o.b,!1,null,"d108f73a",null);t.default=l.exports},"4eb1":function(e,t,a){"use strict";var o=a("4ea4");a("b0c0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=o(a("1da1")),i=o(a("f0ba")),r=o(a("8fa0")),l=o(a("5470")),s=o(a("e543")),d=o(a("fed0")),u=a("2af9"),c={name:"ExpandAuditTaskDetail",components:{ProjectAuditInfoDetail:l.default,HouseTypeInfo:s.default,BuildingInfo:d.default,RejectDialog:u.RejectDialog,ConfirmDialog:u.ConfirmDialog,AlertDialog:u.AlertDialog},data:function(){return{projectTitle:"",active:0,loading:!1,initData:null,initHouseInfo:null,initBuildingInfo:null,rejectDialog:!1,confirmDialog:!1,saveInfo:{},projectInfo:{},houseInfo:{},buildingInfo:{},dialogVisible:!1}},created:function(){this.getProjectInfo(),this.getInitDataInfo(),this.getconfigDataList()},methods:{getconfigDataList:function(){this.$store.dispatch("getOssOriginHost",{cate:"Upload/project/house_type"})},getInitDataInfo:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,o,n,r,l,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.loading=!0,a={task_id:e.$route.query.taskId},"ShowAuditTaskDetail"!==e.$route.name){t.next=9;break}return t.next=6,i.default.getAuditResult(a);case 6:o=t.sent,t.next=12;break;case 9:return t.next=11,i.default.getTaskInfo(a);case 11:o=t.sent;case 12:n=o.data,r=n.code,l=n.data,s=n.msg,0===r?(e.initData=l,e.initHouseInfo=l.house_type_detail_page,e.initBuildingInfo=l.building_detail_page,e.loading=!1):(e.$message.error(s),e.loading=!1,e.toList()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},getProjectInfo:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,o,n,i,l,s,d,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.$route.query.projectId},t.next=4,r.default.getProjectInfoById(a);case 4:o=t.sent,n=o.data,i=n.code,l=n.data,s=n.msg,0===i?(d=l.project_type_text?"（"+l.project_type_text+"）":"",u=l.city_id_text?l.city_id_text+"   ":"",e.projectTitle=u+l.name+d):e.$message.error(s),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},prev:function(){this.active--},next:function(){var e="childInfo"+this.active;this.$refs[e].save()?this.active++:this.confirmDialog=!0},confirmFinish:function(){this.confirmDialog=!1},save:function(){this.$refs.childInfo2.save()?(this.projectInfo=this.$refs.childInfo0.getSaveData(),this.houseInfo.house_type_detail_page=this.$refs.childInfo1.getSaveData(),this.buildingInfo.building_detail_page=this.$refs.childInfo2.getSaveData(),this.saveInfo=Object.assign({},this.projectInfo,this.houseInfo,this.buildingInfo),this.passAudit()):this.confirmDialog=!0},passAudit:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,o,n,r,l,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={task_id:e.$route.query.taskId,project_id:e.$route.query.projectId},o=Object.assign({},a,e.saveInfo),t.next=5,i.default.approveAudit({data:JSON.stringify(o)});case 5:n=t.sent,r=n.data,l=r.code,s=r.msg,0===l?e.dialogVisible=!0:e.$message.error(s),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),e.rejectDialog=!1;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},toList:function(){this.$router.push({path:"/building/expandTaskList"})},reject:function(){this.rejectDialog=!0},confirmReject:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var o,n,r,l,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o={id:t.$route.query.taskId,remark:e},a.next=4,i.default.rejectAudit(o);case 4:n=a.sent,r=n.data,l=r.code,s=r.msg,0===l?(t.rejectDialog=!1,t.toList()):(t.rejectDialog=!1,t.$message.error(s)),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0),t.rejectDialog=!1;case 15:case"end":return a.stop()}}),a,null,[[0,11]])})))()},toStep:function(e){"ShowAuditTaskDetail"===this.$route.name&&(this.active=e)}}};t.default=c},5470:function(e,t,a){"use strict";a.r(t);var o=a("6d37"),n=a("17d6");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("d98d");var r=a("2877"),l=Object(r.a)(n.default,o.a,o.b,!1,null,"19e71f34",null);t.default=l.exports},5482:function(e,t,a){var o=a("0496");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("31dbe47a",o,!0,{sourceMap:!1,shadowMode:!1})},"580b":function(e,t,a){"use strict";a.r(t);var o=a("4eb1"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t.default=n.a},"5a34":function(e,t,a){var o=a("44e7");e.exports=function(e){if(o(e))throw TypeError("The method doesn't accept regular expressions");return e}},6164:function(e,t,a){"use strict";a.r(t);var o=a("163c"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t.default=n.a},6251:function(e,t,a){"use strict";a("5482")},"6d1a":function(e,t,a){"use strict";a.r(t);var o=a("9542"),n=a("d4e5");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("86f0");var r=a("2877"),l=Object(r.a)(n.default,o.a,o.b,!1,null,"ed082b7e",null);t.default=l.exports},"6d37":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expand-list-box"},[a("el-table",{attrs:{data:e.tableData,"span-method":e.objectSpanMethod,"header-cell-style":{background:"#f8f8f8"},border:""}},[a("el-table-column",{attrs:{align:"left",prop:"pageName",label:"页面",width:"160"}}),a("el-table-column",{attrs:{align:"left",prop:"moduleName",label:"模块"}}),a("el-table-column",{attrs:{align:"left",prop:"fieldName",label:"字段"}}),a("el-table-column",{attrs:{align:"left",prop:"value",label:"变更后的值"},scopedSlots:e._u([{key:"default",fn:function(t){return["coordinate"===t.row.fieldKey||"lat_lng"===t.row.fieldKey?a("div",[a("span",{staticClass:"router-link",on:{click:function(a){return e.showLatLng(t.row.fieldName,t.row.value)}}},[e._v(e._s(t.row.fieldText||t.row.value))])]):a("div",[e._v(" "+e._s(e._f("formatArr")(t.row.fieldText||t.row.value))+" ")])]}}])}),a("el-table-column",{attrs:{align:"left",prop:"oldValue",label:"变更前的值"},scopedSlots:e._u([{key:"default",fn:function(t){return["coordinate"===t.row.fieldKey||"lat_lng"===t.row.fieldKey?a("div",[a("span",{staticClass:"router-link",on:{click:function(a){return e.showLatLng(t.row.fieldName,t.row.oldValue)}}},[e._v(e._s(t.row.oldValue))])]):a("div",[e._v(" "+e._s(e._f("formatArr")(t.row.oldValue))+" ")])]}}])}),a("el-table-column",{attrs:{align:"left",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.operation&&t.row.operation.is_have_add?a("div",[a("el-radio-group",{attrs:{disabled:"ShowAuditTaskDetail"===e.$route.name},on:{change:function(a){return e.changeRadio(t.row.operation.module,a,t.row.operation)}},model:{value:t.row.operation.operation_type,callback:function(a){e.$set(t.row.operation,"operation_type",a)},expression:"scope.row.operation.operation_type"}},[a("el-radio",{attrs:{label:"1"}},[e._v("新增")]),a("el-radio",{attrs:{label:"2"}},[e._v("覆盖")]),a("el-radio",{attrs:{label:"3"}},[e._v("不入库")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.row.operation.operation_type,expression:"scope.row.operation.operation_type === '2'"}],staticClass:"operation-type-box"},[a("div",[e._v(e._s(t.row.operation.tips))]),"ExpandAuditTaskDetail"===e.$route.name?a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.changeOperation(t.row.operation.module,a,t.row.operation)}},model:{value:t.row.operation.target_id,callback:function(a){e.$set(t.row.operation,"target_id",a)},expression:"scope.row.operation.target_id"}},e._l(e.allOptions[t.row.operation.module],(function(o){return a("el-option",{key:o.value,attrs:{label:o.name,value:o.value,disabled:o.disabled},nativeOn:{click:function(a){return e.handleOption(o.name,t.row.operation)}}})})),1):e._e(),"ShowAuditTaskDetail"===e.$route.name?a("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:t.row.operation.target_id,callback:function(a){e.$set(t.row.operation,"target_id",a)},expression:"scope.row.operation.target_id"}},[a("el-option",{attrs:{value:t.row.operation.target_id,label:t.row.operation.target_name}})],1):e._e()],1)],1):a("div",[a("el-radio-group",{attrs:{disabled:"ShowAuditTaskDetail"===e.$route.name},model:{value:t.row.operation,callback:function(a){e.$set(t.row,"operation",a)},expression:"scope.row.operation"}},["project_type"!==t.row.fieldKey&&"name"!==t.row.fieldKey?a("el-radio",{attrs:{label:"2"}},[e._v("覆盖")]):e._e(),a("el-radio",{attrs:{label:"3"}},[e._v("不入库")])],1)],1)]}}])})],1),a("el-dialog",{staticClass:"lat-lng-dialog",attrs:{title:e.latLngTitle,visible:e.latLngDialog,width:"550px",center:""},on:{"update:visible":function(t){e.latLngDialog=t}}},[a("el-form",{staticClass:"my-form"},[a("building-map",{staticClass:"map-content",attrs:{warpWeptVal:e.warpWeptVal,isShow:e.latLngDialog,type:"salesOffPosition",inputIsShow:!1,mapId:"mapContanerOne",inputId:"suggestIdOne"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.latLngDialog=!1}}},[e._v("确定")])],1)],1)],1)},n=[]},7379:function(e,t,a){"use strict";var o=a("4ea4");a("4160"),a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("b64b"),a("d3b7"),a("2532"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=o(a("1da1")),i=o(a("5530")),r=a("2f62"),l=o(a("8fa0")),s=a("7223"),d={name:"HouseTypeInfo",props:{datas:{type:Object,default:function(){return{}}}},data:function(){return{tableData:[],operation:[],houseOptions:[],pageName:""}},computed:(0,i.default)((0,i.default)({},(0,r.mapState)({host:function(e){return e.buildingDictionary.ossOriginHost}})),{},{allSelectedHouseType:function(){var e=[];return this.operation.map((function(t){t.target_id&&e.push(t.target_id)})),e},options:function(){var e=this;return this.houseOptions.map((function(t){var a=Object.assign({},t);return e.allSelectedHouseType.includes(t.id)&&(a.disabled=!0),a}))}}),created:function(){this.getHouseOptions()},watch:{datas:{handler:function(e){this.formatData(e)}}},filters:{formatArr:function(e){return e&&Array.isArray(e)?e.join("，"):e||""}},methods:{getHouseOptions:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,o,n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={project_id:e.$route.query.projectId,select_false:0},t.next=4,l.default.getHouseTypeListData(a);case 4:o=t.sent,n=o.data,i=n.code,r=n.data,0===i&&(e.houseOptions=r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},formatData:function(e){var t=this;this.pageName=e.page_name;var a=[];e.data.forEach((function(o,n){t.operation[n]=o.task_audit_operation;var i=0;Object.keys(o).forEach((function(t){if("task_audit_operation"!==t)if("house_type_detail_imgs"!==t){var r=o[t].data,l=r.house_type_id?r.house_type_id:"";r.house_type_id&&delete r.house_type_id,Object.keys(r).forEach((function(s,d){i++;var u={pageName:e.page_name,pageKey:n,moduleName:o[t].module_name,moduleKey:t,fieldName:r[s].field_desc||"",value:r[s].field_value||"",fieldText:r[s].field_text||"",fieldKey:r[s].field_name||"",oldValue:r[s].old_data||"",operation:o.task_audit_operation,moduleRow:0===d?Object.keys(r).length:0};"house_type_base_detail"===t&&(u.house_type_id=l),u.initData=r[s],a.push(u)}))}else i++,a.push({pageName:e.page_name,pageKey:n,moduleName:o[t].module_name,moduleKey:t,fieldName:o[t].module_name,value:o[t].data.apart_img,fieldText:o[t].data.apart_img,fieldKey:"apart_img",oldValue:o[t].data.old_data,operation:o.task_audit_operation,moduleRow:1,initData:o[t].data})})),a[n*i].pageRow=i})),this.tableData=a},objectSpanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);return 0===a||5===a?t.pageRow?{rowspan:t.pageRow,colspan:1}:{rowspan:0,colspan:0}:1===a?t.moduleRow?{rowspan:t.moduleRow,colspan:1}:{rowspan:0,colspan:0}:void 0},changeOperation:function(e,t,a,o){var n=this;this.operation[e]||(this.operation[e]={}),this.operation[e][a]=t,"operation_type"===a&&(this.tableData.forEach((function(t){t.pageKey===e&&(t.oldValue="",t.house_type_id&&(t.house_type_id.old_data=""))})),this.operation[e].target_id="",this.operation[e].target_name="",o.target_id="",o.target_name=""),"target_id"===a&&this.getSelectInfo(t).then((function(t){n.tableData.forEach((function(a){a.pageKey===e&&t.hasOwnProperty(a.fieldKey)&&(t[a.fieldKey]&&t[a.fieldKey].constructor===Object?a.oldValue=t[a.fieldKey].name:a.oldValue=t[a.fieldKey],a.house_type_id&&(a.house_type_id.old_data=t.house_type_id))}))})).catch((function(e){n.$message.error(e)}))},getSelectInfo:function(e){return new Promise(function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(a,o){var n,i,r,d,u,c,p,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={house_type_id:e,is_images:1,is_building:1},t.next=4,l.default.getHouseTypeInfo(n);case 4:i=t.sent,r=i.data,d=r.code,u=r.data,c=r.msg,0===d?(p=[],u.building_relation.forEach((function(e){p.push(e.building_name)})),(f=s.commonFun.deepClone(u.house_type)).relation_buildings=p.join("，"),f.apart_img=s.commonFun.deepClone(u.house_type_img),a(f)):o(c),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),o(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}())},save:function(){for(var e=0;e<this.operation.length;e++){var t=this.operation[e];if(!t.operation_type||"2"===t.operation_type&&!t.target_id)return!1}return!0},getSaveData:function(){return this.reFormatData()},reFormatData:function(){var e=this,t=this.tableData,a=[];return t.forEach((function(t,o){a[t.pageKey]||(a[t.pageKey]={}),a[t.pageKey].task_audit_operation||(a[t.pageKey].task_audit_operation=e.operation[t.pageKey]),a[t.pageKey][t.moduleKey]||(a[t.pageKey][t.moduleKey]={module_name:t.moduleName,data:{}});var n=a[t.pageKey][t.moduleKey].data;"house_type_base_detail"!==t.moduleKey||n.house_type_id||(n.house_type_id=t.house_type_id),n[t.fieldKey]||("apart_img"!==t.fieldKey?(n[t.fieldKey]=s.commonFun.deepClone(t.initData),n[t.fieldKey].old_data=t.oldValue||""):(n[t.fieldKey]=s.commonFun.deepClone(t.initData.apart_img),n.old_data=t.oldValue||[]))})),{data:a,page_name:this.pageName}}}};t.default=d},"7a83":function(e,t,a){"use strict";a("0f57")},"7d31":function(e,t,a){var o=a("1f80");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("9a3846d4",o,!0,{sourceMap:!1,shadowMode:!1})},"86f0":function(e,t,a){"use strict";a("7d31")},"8a9c":function(e,t,a){"use strict";a("e966")},"8e00":function(e,t,a){"use strict";a.r(t);var o=a("7379"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t.default=n.a},"8eac":function(e,t,a){var o=a("f99d");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("06b934ec",o,!0,{sourceMap:!1,shadowMode:!1})},9183:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"house-type-wrap"},[a("el-table",{attrs:{data:e.tableData,"span-method":e.objectSpanMethod,"header-cell-style":{background:"#f8f8f8"},border:""}},[a("el-table-column",{attrs:{align:"left",prop:"pageName",label:"页面",width:"100"}}),a("el-table-column",{attrs:{align:"left",prop:"moduleName",label:"模块"}}),a("el-table-column",{attrs:{align:"left",prop:"fieldName",label:"字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fieldName)+" ")]}}])}),a("el-table-column",{attrs:{align:"left",prop:"value",label:"变更后的值"},scopedSlots:e._u([{key:"default",fn:function(t){return["apart_img"!==t.row.fieldKey?a("div",[e._v(" "+e._s(e._f("formatArr")(t.row.fieldText||t.row.value))+" ")]):a("div",[a("ul",{staticClass:"apart-img-list"},e._l(t.row.fieldText,(function(t,o){return a("li",{key:o},[a("img",{attrs:{src:e.host+t.apart_img.field_value,alt:"户型图"}}),t.storey?a("div",{staticClass:"img-storey"},[e._v(e._s(t.storey.field_text))]):e._e()])})),0)])]}}])}),a("el-table-column",{attrs:{align:"left",prop:"oldValue",label:"变更前的值"},scopedSlots:e._u([{key:"default",fn:function(t){return["apart_img"!==t.row.fieldKey?a("div",[e._v(" "+e._s(t.row.oldValue)+" ")]):a("div",[a("ul",{staticClass:"apart-img-list"},e._l(t.row.oldValue,(function(t,o){return a("li",{key:o},[a("img",{attrs:{src:e.host+t.apart_img,alt:"户型图"}}),t.storey?a("div",{staticClass:"img-storey"},[e._v(e._s(t.storey.name))]):e._e()])})),0)])]}}])}),a("el-table-column",{attrs:{align:"left",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio-group",{attrs:{disabled:"ShowAuditTaskDetail"===e.$route.name},on:{change:function(a){return e.changeOperation(t.row.pageKey,a,"operation_type",t.row.operation)}},model:{value:t.row.operation.operation_type,callback:function(a){e.$set(t.row.operation,"operation_type",a)},expression:"scope.row.operation.operation_type"}},[a("el-radio",{attrs:{label:"1"}},[e._v("新增")]),a("el-radio",{attrs:{label:"2"}},[e._v("覆盖")]),a("el-radio",{attrs:{label:"3"}},[e._v("不入库")])],1),"2"===t.row.operation.operation_type?a("div",[a("div",[e._v(e._s(t.row.operation.tips))]),"ExpandAuditTaskDetail"===e.$route.name?a("el-select",{attrs:{placeholder:"请选择",filterable:"",disabled:"ShowAuditTaskDetail"===e.$route.name},on:{change:function(a){return e.changeOperation(t.row.pageKey,a,"target_id")},focus:e.getHouseOptions},model:{value:t.row.operation.target_id,callback:function(a){e.$set(t.row.operation,"target_id",a)},expression:"scope.row.operation.target_id"}},e._l(e.options,(function(o){return a("el-option",{key:o.id,attrs:{label:o.text,value:o.id,disabled:o.disabled},nativeOn:{click:function(a){return e.changeOperation(t.row.pageKey,o.text,"target_name")}}})})),1):e._e(),"ShowAuditTaskDetail"===e.$route.name?a("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:t.row.operation.target_id,callback:function(a){e.$set(t.row.operation,"target_id",a)},expression:"scope.row.operation.target_id"}},[a("el-option",{attrs:{value:t.row.operation.target_id,label:t.row.operation.target_name}})],1):e._e()],1):e._e()]}}])})],1)],1)},n=[]},9542:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-list-box"},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.inputIsShow,expression:"inputIsShow"}],attrs:{label:e.labelName}},[a("div",{staticClass:"form-input-box"},[a("el-input",{attrs:{placeholder:"请输入",id:e.inputId},on:{focus:e.getValue},model:{value:e.projectPosValue,callback:function(t){e.projectPosValue=t},expression:"projectPosValue"}})],1)]),a("el-form-item",[a("div",{staticClass:"form-input-box"},[a("div",{staticClass:"map-style",attrs:{id:e.mapId}})])])],1)},n=[]},"9fca":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"house-type-wrap"},[a("el-table",{attrs:{data:e.tableData,"span-method":e.objectSpanMethod,"header-cell-style":{background:"#f8f8f8"},border:""}},[a("el-table-column",{attrs:{align:"left",prop:"pageName",label:"页面",width:"100"}}),a("el-table-column",{attrs:{align:"left",prop:"moduleName",label:"模块"}}),a("el-table-column",{attrs:{align:"left",prop:"fieldName",label:"字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fieldName)+" ")]}}])}),a("el-table-column",{attrs:{align:"left",prop:"value",label:"变更后的值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatArr")(t.row.fieldText||t.row.value))+" ")]}}])}),a("el-table-column",{attrs:{align:"left",prop:"oldValue",label:"变更前的值"}}),a("el-table-column",{attrs:{align:"left",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio-group",{attrs:{disabled:"ShowAuditTaskDetail"===e.$route.name},on:{change:function(a){return e.changeOperation(t.row.pageKey,a,"operation_type",t.row.operation)}},model:{value:t.row.operation.operation_type,callback:function(a){e.$set(t.row.operation,"operation_type",a)},expression:"scope.row.operation.operation_type"}},[a("el-radio",{attrs:{label:"1"}},[e._v("新增")]),a("el-radio",{attrs:{label:"2"}},[e._v("覆盖")]),a("el-radio",{attrs:{label:"3"}},[e._v("不入库")])],1),"2"===t.row.operation.operation_type?a("div",[a("div",[e._v(e._s(t.row.operation.tips))]),"ExpandAuditTaskDetail"===e.$route.name?a("el-select",{attrs:{placeholder:"请选择",filterable:"",disabled:"ShowAuditTaskDetail"===e.$route.name},on:{change:function(a){return e.changeOperation(t.row.pageKey,a,"target_id")},focus:e.getHouseOptions},model:{value:t.row.operation.target_id,callback:function(a){e.$set(t.row.operation,"target_id",a)},expression:"scope.row.operation.target_id"}},e._l(e.options,(function(o){return a("el-option",{key:o.id,attrs:{label:o.text,value:o.id,disabled:o.disabled},nativeOn:{click:function(a){return e.changeOperation(t.row.pageKey,o.text,"target_name")}}})})),1):e._e(),"ShowAuditTaskDetail"===e.$route.name?a("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:t.row.operation.target_id,callback:function(a){e.$set(t.row.operation,"target_id",a)},expression:"scope.row.operation.target_id"}},[a("el-option",{attrs:{value:t.row.operation.target_id,label:t.row.operation.target_name}})],1):e._e()],1):e._e()]}}])})],1)],1)},n=[]},a15b:function(e,t,a){"use strict";var o=a("23e7"),n=a("44ad"),i=a("fc6a"),r=a("a640"),l=[].join,s=n!=Object,d=r("join",",");o({target:"Array",proto:!0,forced:s||!d},{join:function(e){return l.call(i(this),void 0===e?",":e)}})},ab13:function(e,t,a){var o=a("b622")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[o]=!1,"/./"[e](t)}catch(e){}}return!1}},c2ba:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expand-list-box"},[a("div",{staticClass:"content-box"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",{attrs:{to:{path:"/building/ExpandTaskList"}}},[e._v("楼盘任务列表")]),a("el-breadcrumb-item",[e._v("审核详情页")])],1),a("h2",[e._v(e._s(e.projectTitle))]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content-text"},[a("el-steps",{attrs:{active:e.active,"align-center":"","finish-status":"success"}},[a("el-step",{attrs:{title:"楼盘信息"},nativeOn:{click:function(t){return e.toStep(0)}}}),a("el-step",{attrs:{title:"户型信息"},nativeOn:{click:function(t){return e.toStep(1)}}}),a("el-step",{attrs:{title:"楼栋信息"},nativeOn:{click:function(t){return e.toStep(2)}}})],1),a("project-audit-info-detail",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}],ref:"childInfo0",attrs:{datas:e.initData}}),a("house-type-info",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}],ref:"childInfo1",attrs:{datas:e.initHouseInfo}}),a("building-info",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}],ref:"childInfo2",attrs:{datas:e.initBuildingInfo}}),"ExpandAuditTaskDetail"===e.$route.name?a("div",{staticClass:"footer-box"},[a("el-button",{attrs:{type:"danger"},on:{click:e.reject}},[e._v("驳回")]),e.active>0?a("el-button",{attrs:{type:"primary"},on:{click:e.prev}},[e._v("上一步")]):e._e(),e.active<2?a("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步")]):e._e(),2===e.active?a("el-button",{attrs:{type:"success"},on:{click:e.save}},[e._v("任务通过")]):e._e()],1):e._e()],1)],1),a("reject-dialog",{attrs:{title:"任务审核驳回",visible:e.rejectDialog},on:{close:function(t){e.rejectDialog=!1},confirm:e.confirmReject}}),a("confirm-dialog",{attrs:{title:"温馨提示",content:"您还没有完成当前页面的审核，请先完成再进行下一步！",visible:e.confirmDialog,width:"300px",confirmBtn:"去完成"},on:{cancel:function(t){e.confirmDialog=!1},confirm:e.confirmFinish}}),a("alert-dialog",{attrs:{title:"保存成功",visible:e.dialogVisible,width:"300px"},on:{"update:visible":function(t){e.dialogVisible=t},confirm:e.toList}},[a("div",[e._v("信息审核入库需要时间，请耐心等待！")])])],1)},n=[]},c9d3:function(e,t,a){"use strict";var o=a("4ea4");a("4160"),a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("b64b"),a("d3b7"),a("ac1f"),a("2532"),a("1276"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=o(a("1da1")),i=a("7223"),r=o(a("8fa0")),l=o(a("6d1a")),s={name:"ExpandAuditTaskDetail",props:{datas:{type:Object,default:function(){return{}}}},components:{BuildingMap:l.default},data:function(){return{tableData:[],latLngTitle:"",warpWeptVal:{},latLngDialog:!1,options:{},moduleRowList:{}}},watch:{datas:{handler:function(e){this.formatData(e)}}},computed:{allSelectedVal:function(){var e={};return this.tableData.forEach((function(t){t.operation.constructor===Object&&t.operation.target_id&&(e[t.operation.module]||(e[t.operation.module]=[]),e[t.operation.module].push(t.operation.target_id))})),e},allOptions:function(){var e=this,t={};for(var a in this.options)t[a]=this.options[a].map((function(t){var o=Object.assign({},t);return e.allSelectedVal[a]&&e.allSelectedVal[a].includes(t.value)&&(o.disabled=!0),o}));return t}},filters:{formatArr:function(e){return e&&Array.isArray(e)?e.join("，"):e||""}},methods:{formatData:function(e){var t=this;if(!e)return!1;var a={};Object.keys(e).forEach((function(t){"house_type_detail_page"!==t&&"building_detail_page"!==t&&(a[t]=e[t])}));var o=[],n=[];Object.keys(a).forEach((function(e,r){var l=0,s=a[e].data;Object.keys(s).forEach((function(n,r){if(!Array.isArray(s[n].data)){var d=[];d.push(i.commonFun.deepClone(s[n].data)),s[n].data=d}var u=0;s[n].data.forEach((function(i,r){var d=i.id?i.id:"";i.id&&delete i.id;var c=i.task_audit_operation?i.task_audit_operation:"";i.task_audit_operation&&delete i.task_audit_operation;var p=Object.keys(Object.assign(i)).length;p>0&&(u+=p,t.moduleRowList[n]=u,Object.keys(i).forEach((function(t,u){var f;l++,f=c?0===u?p:0:1;var g={pageName:a[e].page_name,pageKey:e,moduleName:s[n].module_name,moduleKey:n,subModuleIndex:r,fieldName:i[t].field_desc||"",fieldText:i[t].field_text||"",fieldKey:i[t].field_name||"",value:i[t].field_value||"",oldValue:i[t].old_data||"",operation:c||i[t].task_audit_operation||"",id:d,fieldRow:f,moduleRow:0===r&&0===u?s[n].data.length*p:0};g.initData=i[t],o.push(g)})))}))}));var d=0;n[r]={pageRow:l},0!==r&&(d=t.getPageKey(n)),l>0&&(o[d].pageRow=l)})),this.tableData=o},getPageKey:function(e){for(var t=0,a=e.length-1,o=0;o<a;o++)t+=e[o].pageRow;return t},objectSpanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);return 0===a?t.pageRow?{rowspan:t.pageRow,colspan:1}:{rowspan:0,colspan:0}:1===a?t.moduleRow?{rowspan:this.moduleRowList[t.moduleKey],colspan:1}:{rowspan:0,colspan:0}:5===a?t.fieldRow?{rowspan:t.fieldRow,colspan:1}:{rowspan:0,colspan:0}:void 0},changeRadio:function(e,t,a){this.tableData.forEach((function(e){e.operation.constructor===Object&&e.operation.target_id===a.target_id&&(e.oldValue="",e.id.old_data="")})),a.target_id="",a.target_name="","2"!==t||this.options[e]||this.getOptions(e)},changeOperation:function(e,t,a){var o=this;this.getOptionsInfo(e,t).then((function(e){o.tableData.forEach((function(a){if(a.operation.constructor===Object&&a.operation.target_id===t&&(a.id.old_data=e.id,e.hasOwnProperty(a.fieldKey)))if("relation_buildings"===a.fieldKey){var o=e[a.fieldKey].map((function(e){return e.building_name}));a.oldValue=o.join("，")}else if("relation_house_types"===a.fieldKey){var n=e[a.fieldKey].map((function(e){return e.house_type_num}));a.oldValue=n.join("，")}else e[a.fieldKey]&&e[a.fieldKey].constructor===Object?a.oldValue=e[a.fieldKey].name:a.oldValue=e[a.fieldKey]}))})).catch((function(e){o.$message.error(e)}))},handleOption:function(e,t){t.target_name=e},getOptions:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var o,n,i,l,s,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o={project_id:t.$route.query.projectId},a.next=4,r.default.getAuditListData(o,e);case 4:n=a.sent,i=n.data,l=i.code,s=i.data,d=i.msg,0===l?t.$set(t.options,e,s.list):t.$message.error(d),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()},getOptionsInfo:function(e,t){return new Promise(function(){var a=(0,n.default)(regeneratorRuntime.mark((function a(o,n){var i,l,s,d,u,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i={id:t,extend_data:"volume_living_volume_info"===e?"relation_building,relation_house_type":"relation_building"},a.next=4,r.default.getAuditDetailData(i,e);case 4:l=a.sent,s=l.data,d=s.code,u=s.data,c=s.msg,0===d?o(u):n(c),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),n(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}())},save:function(){for(var e=0;e<this.tableData.length;e++){var t=this.tableData[e].operation;if(t.constructor===Object){if(!t.operation_type||"2"===t.operation_type&&!t.target_id)return!1}else if(!t)return!1}return!0},getSaveData:function(){return this.reFormatData()},reFormatData:function(){var e=this.tableData,t={};return e.forEach((function(e,a){t[e.pageKey]||(t[e.pageKey]={data:{},page_name:e.pageName}),t[e.pageKey].data[e.moduleKey]||(t[e.pageKey].data[e.moduleKey]={module_name:e.moduleName,data:e.operation.constructor===Object?[]:{}});var o=t[e.pageKey].data[e.moduleKey].data;e.operation.constructor===Object?(o[e.subModuleIndex]||(o[e.subModuleIndex]={id:e.id,task_audit_operation:e.operation}),o[e.subModuleIndex][e.fieldKey]||(o[e.subModuleIndex][e.fieldKey]=i.commonFun.deepClone(e.initData),o[e.subModuleIndex][e.fieldKey].old_data=e.oldValue||"")):o[e.fieldKey]||(o[e.fieldKey]=i.commonFun.deepClone(e.initData),o[e.fieldKey].task_audit_operation=e.operation)})),t},showLatLng:function(e,t){this.latLngTitle=e,this.latLngDialog=!0;var a=t.split(",");this.warpWeptVal={lngVal:a[0],latVal:a[1]}}}};t.default=s},caad:function(e,t,a){"use strict";var o=a("23e7"),n=a("4d64").includes,i=a("44d2");o({target:"Array",proto:!0,forced:!a("ae40")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d4e5:function(e,t,a){"use strict";a.r(t);var o=a("0531"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t.default=n.a},d98d:function(e,t,a){"use strict";a("8eac")},e543:function(e,t,a){"use strict";a.r(t);var o=a("9183"),n=a("8e00");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("7a83");var r=a("2877"),l=Object(r.a)(n.default,o.a,o.b,!1,null,"b3a701d8",null);t.default=l.exports},e966:function(e,t,a){var o=a("17ca");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("4cd33a4a",o,!0,{sourceMap:!1,shadowMode:!1})},f0ba:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a("23f7"),n={getTaskInfo:function(e){return o.axios.get("/backend-api/project/qd-audit/get-task-info",{params:e})},rejectAudit:function(e){return o.axios.post("/backend-api/project/cj-qd-project-task/reject",e)},approveAudit:function(e){return o.axios.post("/backend-api/project/cj-qd-project-task/save-pass",e)},getAuditResult:function(e){return o.axios.get("/backend-api/project/qd-audit/get-audit-result",{params:e})}};t.default=n},f99d:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".operation-type-box[data-v-19e71f34]{margin-top:10px}.el-radio[data-v-19e71f34]{margin-right:10px}.router-link[data-v-19e71f34]{color:#08c;text-decoration:underline;cursor:pointer}.lat-lng-dialog[data-v-19e71f34] .el-dialog__body{padding:10px 25px 0}.map-content.item-list-box[data-v-19e71f34] .form-input-box,.map-content.item-list-box[data-v-19e71f34] .form-input-box .map-style{width:100%}",""]),e.exports=t},fed0:function(e,t,a){"use strict";a.r(t);var o=a("9fca"),n=a("6164");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("8a9c");var r=a("2877"),l=Object(r.a)(n.default,o.a,o.b,!1,null,"9e1453d8",null);t.default=l.exports}}]);