(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-fa9b7aca"],{"0114":function(e,t,a){var o=a("5665");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("a122ee76",o,!0,{sourceMap:!1,shadowMode:!1})},"0784":function(e,t,a){"use strict";a("bc75")},"196f":function(e,t,a){"use strict";a.r(t);var o=a("3293"),i=a.n(o);for(var l in o)["default"].indexOf(l)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(l);t.default=i.a},3293:function(e,t,a){"use strict";var o=a("4ea4");a("99af"),a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=o(a("1da1")),l=o(a("ab3a")),r=o(a("f946")),n={name:"follow-up-employee-list",components:{SearchSelectRadio:a("2af9").SearchSelectRadio},data:function(){return{loading:!1,id:"",cityId:"",cityList:[],complaintType:"",complaintTypeList:[],followUpEmployee:"",followUpEmployeeList:[],status:"",statusList:[],distributeStatus:"",distributeStatusList:[],distributeTime:[],tableList:[],pageSize:20,page:1,total:0,canCreate:!1,operationData:{isShow:!1,id:"",type:"0",cityId:"",cityObj:{},complaintType:"",followUpEmployee:"",followUpEmployeeObj:{}},rules:{cityId:[{required:!0,message:"城市不能为空",trigger:"blur"}],complaintType:[{required:!0,message:"投诉类型不能为空",trigger:"blur"}],followUpEmployee:[{required:!0,message:"跟进人不能为空",trigger:"blur"}]},tipsDialog:!1,tipsDialogTitle:"",tipsDialogText:"",flag:!0,cityApi:{api:r.default.getDetailCityListData,params:{q:"",type:2,param:"withAll",all_text:"全国"}},employeeApi:{api:l.default.getComplaintEmployee,params:{q:""}},userApi:{api:r.default.getStaffList,params:{q:"",role:"all",status:"1"}}}},created:function(){this.searchData(1)},methods:{searchData:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var o,i,r,n,s,p;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.flag){a.next=2;break}return a.abrupt("return");case 2:return e&&(t.page=e),t.flag=!1,t.loading=!0,a.prev=5,t.distributeTime=t.distributeTime?t.distributeTime:[],o={id:t.id,city_id:t.cityId,complaint_type:t.complaintType,employee_id:t.followUpEmployee,is_alloc:t.distributeStatus,stop_time_min:t.distributeTime[0]?t.distributeTime[0]/1e3:"",stop_time_max:t.distributeTime[1]?t.distributeTime[1]/1e3:"",employee_status:t.status,page:e},a.next=10,l.default.complaintEmployeeList(o);case 10:i=a.sent,r=i.data,n=r.code,s=r.msg,p=r.data,0===n?(t.tableList=p.list,t.complaintTypeList=p.complaint_type_list,t.statusList=p.employee_status_list,t.distributeStatusList=p.is_alloc_list,t.total=Number(p.totalCount),t.canCreate=p.can_create):t.$message(s),t.loading=!1,t.flag=!0,a.next=24;break;case 20:a.prev=20,a.t0=a.catch(5),console.log(a.t0),t.flag=!0;case 24:case"end":return a.stop()}}),a,null,[[5,20]])})))()},resetSearch:function(){this.id="",this.cityId="",this.complaintType="",this.followUpEmployee="",this.status="",this.distributeStatus="",this.distributeTime="",this.searchData(1)},operationBtn:function(e,t){switch(t){case"edit":this.operation(e);break;case"delete":this.deleteFun(e);break;case"pause":case"open":this.operateDistrubution(e)}},operation:function(e){this.operationData.isShow=!0,e?(this.operationData.type="1",this.operationData.id=e.id,this.operationData.cityId=e.city_id,this.operationData.followUpEmployee=e.employee_id,this.operationData.cityObj={value:e.city_id,name:e.city_name},this.operationData.followUpEmployeeObj={value:e.employee_id,name:e.employee_name},this.operationData.complaintType=e.complaint_type):this.operationData.type="0"},resetForm:function(){this.operationData.isShow=!1,this.$refs.operationData.resetFields(),this.operationData.cityId="",this.operationData.complaintType="",this.operationData.followUpEmployee=""},submitForm:function(){var e=this;this.flag&&(this.flag=!1,this.$refs.operationData.validate(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(a){var o,i,r,n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=20;break}return o={city_id:e.operationData.cityId,complaint_type:e.operationData.complaintType,employee_id:e.operationData.followUpEmployee},"1"===e.operationData.type&&(o.id=e.operationData.id),t.prev=3,t.next=6,l.default.complaintEmployeeSave(o);case 6:i=t.sent,r=i.data,n=r.code,s=r.msg,e.flag=!0,0===n?(e.operationData.isShow=!1,e.searchData(1),e.$message({message:"保存成功",type:"success"})):(e.tipsDialog=!0,e.tipsDialogText=s,e.tipsDialogTitle="提示"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),console.log(t.t0),e.flag=!0;case 18:t.next=21;break;case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}()))},deleteFun:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var o,i,r,n,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o={id:e.id},a.prev=1,a.next=4,l.default.complaintEmployeeDelete(o);case 4:i=a.sent,r=i.data,n=r.code,s=r.msg,0===n?(t.$message(s),t.searchData(t.page)):(t.tipsDialog=!0,t.tipsDialogText=s,t.tipsDialogTitle="删除跟进人"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))()},operateDistrubution:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var o,i,r,n,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o={id:e.id,is_alloc:"1"===e.is_alloc?"2":"1"},a.prev=1,a.next=4,l.default.complaintEmployeeChangeAlloc(o);case 4:i=a.sent,r=i.data,n=r.code,s=r.msg,0===n?(t.$message({type:"success",message:s}),t.searchData(t.page)):(t.tipsDialog=!0,t.tipsDialogText=s,t.tipsDialogTitle="暂停任务分配"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))()},tableHeaderColor:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"background-color: #f9f9f9;color: #333;"}},computed:{countRange:function(){var e=(this.page-1)*this.pageSize+1,t=this.page*this.pageSize>this.total?this.total:this.page*this.pageSize;return"".concat(e,"-").concat(t)}}};t.default=n},5665:function(e,t,a){(t=a("24fb")(!1)).push([e.i,".follow-up-box[data-v-08a6f586]{padding:0}.follow-up-box .hd[data-v-08a6f586]{padding-left:20px}.form-table-box[data-v-08a6f586]{padding-top:20px}.form-table-box .s-query>li[data-v-08a6f586]{width:334px}.form-table-box .data-stat[data-v-08a6f586]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:40px;margin-bottom:10px}.form-table-box .pagination[data-v-08a6f586]{text-align:center;margin:25px 0 10px}",""]),e.exports=t},"86b6":function(e,t,a){(t=a("24fb")(!1)).push([e.i,'.order-search[data-v-08a6f586]{overflow:hidden}.order-search[data-v-08a6f586] .el-date-editor,.order-search[data-v-08a6f586] .el-select{width:100%;height:40px;-webkit-box-sizing:border-box;box-sizing:border-box}.order-search[data-v-08a6f586] .el-select>>>.el-input{height:40px}.order-search[data-v-08a6f586] .el-range-input{background-color:#fff;font-size:12px;line-height:32px}.order-search[data-v-08a6f586] .el-date-editor .el-range-separator{font-size:12px}.order-search[data-v-08a6f586] .el-range-editor.el-input__inner{padding:3px 6px}.order-search[data-v-08a6f586] .el-date-editor .el-range__close-icon{font-size:12px;width:22px}.order-search .fixHeight[data-v-08a6f586]{height:40px}.order-search[data-v-08a6f586] .el-date-editor .date-tip-logo{display:none}.form-table-box .filter-link-more[data-v-08a6f586]{float:right;padding:9px 20px;margin-top:6px}.order-search>.s-query>li .td[data-v-08a6f586]{height:40px}.s-query>li.long-column[data-v-08a6f586]{width:360px}.s-query>li.margin-next[data-v-08a6f586]{margin-left:20px}.pagination[data-v-08a6f586] .el-pagination.is-background .btn-next,.pagination[data-v-08a6f586] .el-pagination.is-background .btn-prev{background-color:#fff}.pagination[data-v-08a6f586] .el-pagination.is-background .el-pager li:not(.disabled).active{background-color:#409eff;color:#fff}.table-wrap-new[data-v-08a6f586] .el-table__header .el-table-column--selection .cell .el-checkbox{font-size:12px}.table-wrap-new[data-v-08a6f586] .el-table__header .el-table-column--selection .cell .el-checkbox:after{color:#333;content:"全选";font-size:12px;margin-left:6px;font-weight:500}',""]),e.exports=t},9101:function(e,t,a){"use strict";a("0114")},ab3a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a("23f7"),i={commonOptions:function(){return o.axios.post("/backend-api/complaint/common-options")},getTransferInfo:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/get-transfer-info",e)},getAdjustLeaderInfo:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/get-adjust-leader-info",e)},getComplaintDetail:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/detail",e)},getFollowDetail:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/follow-detail",e)},addComplaint:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/create-complaint",e)},editComplaint:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/update-complaint",e)},saveHeadFollow:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/head-follow",e)},saveProjectFollow:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/project-follow",e)},saveResultFollow:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/result-follow",e)},saveAppealFollow:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/complaint",e)},saveSuggestion:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/suggestion",e)},rejectTask:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/reject-task",e)},commonFollow:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/common-follow",e)},complaintEmployeeList:function(e){return o.axios.post("/backend-api/employee_order/yw-complaint-employee/list",e)},getComplaintEmployee:function(e){return o.axios.post("/backend-api/select2/select2/get-complaint-employee",e)},complaintEmployeeSave:function(e){return o.axios.post("/backend-api/employee_order/yw-complaint-employee/save",e)},complaintEmployeeDelete:function(e){return o.axios.post("/backend-api/employee_order/yw-complaint-employee/delete",e)},complaintEmployeeChangeAlloc:function(e){return o.axios.post("/backend-api/employee_order/yw-complaint-employee/change-alloc",e)},ywComplaintsList:function(e){return o.axios.get("/backend-api/employee_order/yw-complaints/list",{params:e})},changeEmployee:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/change-employee",e)},importReason:function(e){return o.axios.post("/backend-api/employee_order/yw-complaints/import-category",e)}};t.default=i},bc75:function(e,t,a){var o=a("86b6");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,a("499e").default)("6edc81aa",o,!0,{sourceMap:!1,shadowMode:!1})},cb2b:function(e,t,a){"use strict";a.r(t);var o=a("e554"),i=a("196f");for(var l in i)["default"].indexOf(l)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(l);a("0784"),a("9101");var r=a("2877"),n=Object(r.a)(i.default,o.a,o.b,!1,null,"08a6f586",null);t.default=n.exports},e554:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-box"},[a("el-breadcrumb",{staticClass:"bread-crumb-box",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",[e._v("客诉跟进人管理")])],1),a("div",{staticClass:"v-box form-table-box follow-up-box"},[e._m(0),a("div",{staticClass:"bd"},[a("div",{staticClass:"order-search"},[a("ul",{staticClass:"s-query"},[a("li",[a("div",{staticClass:"th"},[e._v("ID：")]),a("div",{staticClass:"td"},[a("el-input",{attrs:{type:"text",clearable:""},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}})],1)]),a("li",[a("div",{staticClass:"th"},[e._v("城市：")]),a("div",{staticClass:"td"},[a("search-select-radio",{attrs:{clearable:!0,placeholder:"请选择",apiInfo:e.cityApi},model:{value:e.cityId,callback:function(t){e.cityId=t},expression:"cityId"}})],1)]),a("li",[a("div",{staticClass:"th"},[e._v("投诉类型：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.complaintType,callback:function(t){e.complaintType=t},expression:"complaintType"}},e._l(e.complaintTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[e._v("跟进人：")]),a("div",{staticClass:"td"},[a("search-select-radio",{attrs:{clearable:!0,placeholder:"请选择",apiInfo:e.employeeApi},model:{value:e.followUpEmployee,callback:function(t){e.followUpEmployee=t},expression:"followUpEmployee"}})],1)]),a("li",[a("div",{staticClass:"th"},[e._v("在职状态：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[e._v("分配状态：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.distributeStatus,callback:function(t){e.distributeStatus=t},expression:"distributeStatus"}},e._l(e.distributeStatusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[e._v("暂停任务分配时间：")]),a("div",{staticClass:"td"},[a("el-date-picker",{staticClass:"form-date-range-box",attrs:{clearable:"",type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.distributeTime,callback:function(t){e.distributeTime=t},expression:"distributeTime"}})],1)])])]),a("div",{staticClass:"btn-area"},[a("el-button",{on:{click:e.resetSearch}},[e._v("重置")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.searchData(1)}}},[e._v("搜索")])],1)])]),a("div",{staticClass:"v-box form-table-box"},[a("div",{staticClass:"bd"},[a("div",{staticClass:"search-result"},[a("div",{staticClass:"data-stat"},[a("div",{staticClass:"total-box"},[e._v(" 第"+e._s(e.countRange)+"条，共"+e._s(e.total)+"条数据 ")]),e.canCreate?a("div",{staticClass:"total-box"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.operation("")}}},[e._v("新增")])],1):e._e()]),a("div",{staticClass:"table-wrap-box"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableFixedWrap",attrs:{border:"",data:e.tableList,size:"small","row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"header-cell-style":e.tableHeaderColor}},[a("el-table-column",{attrs:{"min-width":"80",align:"center",prop:"id",label:"ID"}}),a("el-table-column",{attrs:{"min-width":"100",align:"center",prop:"city_name",label:"城市"}}),a("el-table-column",{attrs:{"min-width":"100",align:"center",prop:"complaint_type_text",label:"投诉类型"}}),a("el-table-column",{attrs:{"min-width":"100",align:"center",prop:"employee_name",label:"跟进人"}}),a("el-table-column",{attrs:{"min-width":"100",align:"center",prop:"employee_status",label:"在职状态"}}),a("el-table-column",{attrs:{"min-width":"100",align:"center",prop:"is_alloc_text",label:"分配状态"}}),a("el-table-column",{attrs:{"min-width":"100",align:"center",prop:"stop_time",label:"暂停任务分配时间"}}),a("el-table-column",{attrs:{"min-width":"150",align:"center",fixed:"right",prop:"actions",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.actions,(function(o,i){return a("el-button",{key:i,attrs:{type:"text"},on:{click:function(a){return e.operationBtn(t.row,o.value)}}},[e._v(" "+e._s(o.name)+" ")])}))}}])})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,"hide-on-single-page":"","current-page":e.page,total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.searchData}})],1)])])]),a("el-dialog",{staticClass:"operation-dialog",attrs:{title:"0"===e.operationData.type?"新增客诉跟进人":"编辑客诉跟进人",visible:e.operationData.isShow,width:"420px",center:""},on:{"update:visible":function(t){return e.$set(e.operationData,"isShow",t)},close:e.resetForm}},[a("div",[a("el-form",{ref:"operationData",attrs:{model:e.operationData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"城市：",prop:"cityId"}},[a("search-select-radio",{attrs:{placeholder:"请选择",clearable:!0,apiInfo:e.cityApi,chosenObj:e.operationData.cityObj},model:{value:e.operationData.cityId,callback:function(t){e.$set(e.operationData,"cityId",t)},expression:"operationData.cityId"}})],1),a("el-form-item",{attrs:{label:"投诉类型：",prop:"complaintType"}},[a("el-select",{attrs:{filterable:"",clearable:!0,placeholder:"请选择",loading:e.loading},model:{value:e.operationData.complaintType,callback:function(t){e.$set(e.operationData,"complaintType",t)},expression:"operationData.complaintType"}},e._l(e.complaintTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"跟进人：",prop:"followUpEmployee"}},[a("search-select-radio",{attrs:{placeholder:"请选择",apiInfo:e.userApi,clearable:!0,chosenObj:e.operationData.followUpEmployeeObj},model:{value:e.operationData.followUpEmployee,callback:function(t){e.$set(e.operationData,"followUpEmployee",t)},expression:"operationData.followUpEmployee"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保 存")])],1)]),a("el-dialog",{attrs:{title:e.tipsDialogTitle,visible:e.tipsDialog,width:"400px",center:""},on:{"update:visible":function(t){e.tipsDialog=t}}},[a("span",[e._v(e._s(e.tipsDialogText))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tipsDialog=!1}}},[e._v("我知道了")])],1)])],1)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hd"},[t("h2",[this._v("客诉跟进人管理")])])}]}}]);