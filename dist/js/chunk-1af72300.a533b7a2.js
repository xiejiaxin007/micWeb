(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1af72300"],{"0a86":function(t,e,a){"use strict";a.r(e);var i=a("0ba2"),r=a("f5ef");for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(n);a("2703");var s=a("2877"),c=Object(s.a)(r.default,i.a,i.b,!1,null,"7e4a799c",null);e.default=c.exports},"0ba2":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-row build-message-box"},[a("el-col",{staticClass:"content-main",attrs:{span:24}},[a("el-breadcrumb",{staticClass:"bread-crumb-box",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[t._v("首页")])]),a("el-breadcrumb-item",[t._v("楼盘动销信息审核")])],1),a("div",{staticClass:"v-box form-table-box"},[a("div",{staticClass:"hd"},[a("h2",[t._v("搜索条件")])]),a("div",{staticClass:"bd"},[a("div",{staticClass:"order-search"},[a("ul",{staticClass:"s-query"},[a("li",[a("div",{staticClass:"th"},[t._v("核对id：")]),a("div",{staticClass:"td"},[a("el-input",{attrs:{oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:t.checkId,callback:function(e){t.checkId=e},expression:"checkId"}})],1)]),a("li",[a("div",{staticClass:"th"},[t._v("城市：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.cityId,callback:function(e){t.cityId=e},expression:"cityId"}},t._l(t.cityList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.id+""}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[t._v("楼盘名称：")]),a("div",{staticClass:"td"},[a("el-autocomplete",{attrs:{"fetch-suggestions":t.searchHouse},on:{select:t.affirmHouse},model:{value:t.buildObj.text,callback:function(e){t.$set(t.buildObj,"text",e)},expression:"buildObj.text"}})],1)]),a("li",[a("div",{staticClass:"th"},[t._v("变更人：")]),a("div",{staticClass:"td"},[a("el-autocomplete",{attrs:{"fetch-suggestions":t.searchPerson},on:{select:t.affirmPerson},model:{value:t.perInfo.text,callback:function(e){t.$set(t.perInfo,"text",e)},expression:"perInfo.text"}})],1)]),a("li",[a("div",{staticClass:"th"},[t._v("反馈内容：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"全部"},model:{value:t.feedBack,callback:function(e){t.feedBack=e},expression:"feedBack"}},t._l(t.feedBackList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.id+""}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[t._v("反馈结果：")]),a("div",{staticClass:"td"},[a("el-select",{attrs:{placeholder:"全部"},model:{value:t.feedBackRes,callback:function(e){t.feedBackRes=e},expression:"feedBackRes"}},t._l(t.feedBackResult,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.id+""}})})),1)],1)]),a("li",[a("div",{staticClass:"th"},[t._v("变更时间：")]),a("div",{staticClass:"td"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.changeTime,callback:function(e){t.changeTime=e},expression:"changeTime"}})],1)])])]),a("div",{staticClass:"btn-area"},[a("el-button",{on:{click:t.resetBtn}},[t._v("重置")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.searchData("search")}}},[t._v("搜索")])],1)])]),a("div",{staticClass:"v-box form-table-box v-table"},[a("div",{staticClass:"bd"},[a("div",{staticClass:"table-box-wrapper"},[a("div",{staticClass:"el-row tab-info"},[a("div",{staticClass:"el-col-title"},[t._v("第"),a("span",[t._v(t._s(t.currentStart))]),t._v(" - "),a("span",[t._v(t._s(t.currentEnd))]),t._v("条，共 "),a("span",[t._v(t._s(t.totalSum))]),t._v(" 条数据")])]),a("div",{staticClass:"table-box-row"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tablebLoading,expression:"tablebLoading"}],key:Math.random(),attrs:{border:"",data:t.tableData}},[a("el-table-column",{attrs:{prop:"id","min-width":"100"}},[a("template",{slot:"header"},[a("span",{staticClass:"inverted",on:{click:t.editOrder}},[t._v("核对ID "),a("i",{class:1==t.isInverted?"iconfont iconxiajiantou-":"iconfont iconshangjiantou-",attrs:{"aria-hidden":"true"}})])])],2),a("el-table-column",{attrs:{prop:"city_name",label:"城市","min-width":"100"}}),a("el-table-column",{attrs:{prop:"name",label:"楼盘","min-width":"150"}}),a("el-table-column",{attrs:{prop:"creator",label:"反馈人","min-width":"150"}}),a("el-table-column",{attrs:{prop:"module",label:"反馈内容","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.module.text))])]}}])}),a("el-table-column",{attrs:{prop:"create_datetime",label:"变更时间","min-width":"200"}}),a("el-table-column",{attrs:{prop:"status",label:"反馈结果","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.status.text))])]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"href",on:{click:function(a){return t.clickDetail(e.row.id)}}},[t._v("查看详情")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-size":t.pageSize,layout:"prev, pager, next","current-page":t.currentPage,total:t.totalSum},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.pageChange}})],1)],1)])])])],1)],1)},r=[]},2703:function(t,e,a){"use strict";a("31e9")},"31e9":function(t,e,a){var i=a("ffd3");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("499e").default)("47a90524",i,!0,{sourceMap:!1,shadowMode:!1})},b85c:function(t,e,a){"use strict";a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=(0,r.default)(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,o=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return c=t.done,t},e:function(t){o=!0,s=t},f:function(){try{c||null==a.return||a.return()}finally{if(o)throw s}}}};var i,r=(i=a("06c5"))&&i.__esModule?i:{default:i}},f071:function(t,e,a){"use strict";var i=a("4ea4");a("a9e3"),a("b64b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("53ca")),n=i(a("b85c")),s=i(a("c1df")),c={name:"build-message-audit",data:function(){return{isInverted:!0,tablebLoading:!1,buildObj:{},perInfo:{},checkId:"",cityId:"",cityList:[{id:"",text:""}],feedBack:"",feedBackList:[],feedBackRes:"",feedBackResult:[],changeTime:[],currentPage:1,totalSum:0,leftPage:"",currentStart:"",currentEnd:"",pageNum:"",pageSize:20,tableData:[]}},mounted:function(){var t=this;this.buildObj.id=this.$route.query.id?this.$route.query.id:"",this.buildObj.text=this.$route.query.projectName?this.$route.query.projectName:"",this.feedBack=this.$route.query.projectModule?this.$route.query.projectModule+"":"",this.$nextTick((function(){t.searchData(),t.getCity()}))},methods:{clickDetail:function(t){var e=this.$router.resolve({path:"changedetails?id=".concat(t)});window.open(e.href,"_blank")},compareUp:function(t){return function(e,a){return e[t]-a[t]}},compareDown:function(t){return function(e,a){var i=e[t];return a[t]-i}},editOrder:function(){this.isInverted?(this.tableData.sort(this.compareUp("id")),this.isInverted=!this.isInverted):(this.tableData.sort(this.compareDown("id")),this.isInverted=!this.isInverted)},editTable:function(){0!==this.totalSum?(this.pageNum=Math.ceil(this.totalSum/this.pageSize),this.leftPage=parseInt(this.totalSum%this.pageSize),1===this.pageNum?(this.currentStart=1,this.currentEnd=this.totalSum):1===this.currentPage&&(this.currentStart=1,this.currentEnd=this.pageSize)):(this.totalSum=0,this.currentStart=0,this.currentEnd=0,this.currentPage=1,this.isPage=!1)},pageChange:function(t){this.currentPage=t,0===this.leftPage?(this.currentStart=(this.currentPage-1)*this.pageSize+1,this.currentEnd=this.currentPage*this.pageSize):this.currentPage===this.pageNum?(this.currentStart=(this.currentPage-1)*this.pageSize+1,this.currentEnd=this.currentStart-1+this.leftPage):(this.currentStart=(this.currentPage-1)*this.pageSize+1,this.currentEnd=this.currentPage*this.pageSize),this.searchData()},resetBtn:function(){this.checkId="",this.cityId="",this.perInfo={},this.buildObj={},this.feedBack="",this.feedBackRes="",this.changeTime=[],this.searchData("search")},searchData:function(t){var e=this;"search"==t&&(this.currentPage=1);var a={id:this.checkId,project_id:this.buildObj.id,city_id:this.cityId,creator:this.perInfo.id,module:this.feedBack,status:this.feedBackRes,start_time:this.changeTime.length>0?(0,s.default)(this.changeTime[0]).format("YYYY-MM-DD"):"",end_time:this.changeTime.length>0?(0,s.default)(this.changeTime[1]).format("YYYY-MM-DD"):"",page:this.currentPage};this.axios.get("/backend-api/project-audit/list",{params:a}).then((function(t){0==t.data.code&&(e.tableData=t.data.data.data,e.totalSum=parseInt(t.data.data.page.total_count),e.isInverted=!0,e.isInverted&&e.tableData.sort(e.compareDown("id")))})).then((function(){e.editTable(),e.getOptList()})).catch((function(t){console.log(t)}))},deteleObject:function(t){for(var e=[],a={},i=0;i<t.length;i++){var r=Object.keys(t[i]);r.sort((function(t,e){return Number(t)-Number(e)}));for(var n="",s=0;s<r.length;s++)n+=JSON.stringify(r[s]),n+=JSON.stringify(t[i][r[s]]);a.hasOwnProperty(n)||(e.push(t[i]),a[n]=!0)}return e},getCity:function(){var t=this;this.axios.get("/backend-api/common/get-city-list",{params:{type:1}}).then((function(e){if(0==e.data.code){var a=e.data.data;t.cityList=a}})).catch((function(t){console.log(t)}))},affirmHouse:function(t){this.buildObj.id=t.id,this.buildObj.text=t.text},affirmPerson:function(t){this.perInfo.id=t.id,this.perInfo.text=t.text},searchHouse:function(t,e){""===t&&(this.buildObj={});var a=[{}],i={q:t,city_id:this.cityId,search_alias:!0};this.axios.get("/backend-api/common/get-project-list",{params:i}).then((function(t){var i=t.data;if(0===i.code){if("{}"==JSON.stringify(i.data))a=[{value:"暂无数据"}];else{var r,s=(0,n.default)(i.data);try{for(s.s();!(r=s.n()).done;){var c=r.value;c.value=c.text}}catch(t){s.e(t)}finally{s.f()}a=i.data}e(a)}})).catch((function(t){console.log(t)}))},searchPerson:function(t,e){""===t&&(this.perInfo={});var a=[{}],i={q:t};this.axios.get("/backend-api/employee/get-employee-dropdown-list",{params:i}).then((function(t){var i=t.data;if(0===i.code){if("{}"==JSON.stringify(i.data))a=[{value:"暂无数据"}];else{var r,s=(0,n.default)(i.data);try{for(s.s();!(r=s.n()).done;){var c=r.value;c.value=c.text}}catch(t){s.e(t)}finally{s.f()}a=i.data}e(a)}})).catch((function(t){console.log(t)}))},getOptList:function(){var t=this,e={type:["15","16"],city_id:this.cityId};this.axios.post("/backend-api/common/get-project-config",e).then((function(e){if(0===e.data.code){var a=e.data.data;t.feedBackList=a.audit_content_type,t.feedBackResult=a.audit_result_type}})).catch((function(t){console.log(t)}))},deepCopy:function(t){var e=Array.isArray(t)?[]:{};for(var a in t)t.hasOwnProperty(a)&&("object"===(0,r.default)(t[a])?e[a]=this.deepCopy(t[a]):e[a]=t[a]);return e}},components:{},watch:{}};e.default=c},f5ef:function(t,e,a){"use strict";a.r(e);var i=a("f071"),r=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e.default=r.a},ffd3:function(t,e,a){(e=a("24fb")(!1)).push([t.i,".content-main[data-v-7e4a799c]{padding:0 15px}.build-message-box .href[data-v-7e4a799c]{color:#33a1ff;text-decoration:underline;cursor:default}.build-message-box .order-search[data-v-7e4a799c]{overflow:hidden}.build-message-box .order-search .s-query>li[data-v-7e4a799c]:last-child{width:auto}.build-message-box .order-search .s-query[data-v-7e4a799c] .el-autocomplete,.build-message-box .order-search .s-query[data-v-7e4a799c] .el-select{width:100%}.build-message-box .table-box-wrapper .tab-info[data-v-7e4a799c]{margin-bottom:5px}.build-message-box .table-box-wrapper .tab-info span[data-v-7e4a799c]{font-weight:700}.build-message-box .table-box-wrapper .inverted[data-v-7e4a799c]{color:#33a1ff}.build-message-box .pagination[data-v-7e4a799c]{text-align:center;padding:20px 0;background:#fff}",""]),t.exports=e}}]);