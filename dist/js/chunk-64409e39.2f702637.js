(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-64409e39"],{"07ac":function(e,t,a){var r=a("23e7"),n=a("6f53").values;r({target:"Object",stat:!0},{values:function(e){return n(e)}})},"09f0":function(e,t,a){"use strict";a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}return a}},"0cd0":function(e,t,a){"use strict";a("aa5d")},"0d21":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return e}},"11c7":function(e,t,a){"use strict";a.r(t);var r=a("6d51"),n=a.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t.default=n.a},"13d5":function(e,t,a){"use strict";var r=a("23e7"),n=a("d58f").left,o=a("a640"),i=a("ae40"),c=a("2d00"),l=a("605d"),s=o("reduce"),u=i("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u||!l&&c>79&&c<83},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1a74":function(e,t,a){"use strict";var r=a("4ea4");a("13d5"),a("07ac"),Object.defineProperty(t,"__esModule",{value:!0}),t.curPageTotal=t.getDataByOptions=t.dateChange=void 0;var n=r(a("3835"));t.dateChange=function(e,t){var a=this;if(e){var r=+t-1,o=(0,n.default)(e,2),i=o[0],c=o[1],l=new Date(i).getMonth()+r;new Date(+new Date(i)).setMonth(l)<+new Date(c)&&(this.$message.warning("所选最大范围不得超过".concat(t,"个月")),this.contractForm.monthRange=[])}else setTimeout((function(){a.contractForm.monthRange=["",""]}))};t.getDataByOptions=function(e){this.pages.curPage=1;var t=Object.values(this.contractForm).reduce((function(e,t){return e+t.length}),0);0!==t?2===t&&this.contractForm.monthRange.length>0?this.$message.error("不能只筛选记录月份"):e():this.$message.error("筛选项不能为空")};t.curPageTotal=function(){return Math.ceil(this.pages.total/20)>this.pages.curPage?20:this.pages.total%20}},2084:function(e,t,a){"use strict";var r=a("4ea4");a("99af"),a("a15b"),a("dca8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=r(a("1da1")),o=r(a("f946")),i=r(a("e21a")),c=r(a("29ea")),l=r(a("eb6d")),s=r(a("4328")),u=a("1a74"),p=a("2af9"),d={name:"CooperateHistoryList",components:{ExportDialog:l.default,SearchSelectRadio:p.SearchSelectRadio,TablePagination:p.TablePagination},data:function(){return{contractForm:{monthRange:[],projectId:"",cooperateType:"",contractFollower:"",markNew:""},cooperateTypeOps:[],markNewOps:[],pages:{curPage:1,pageSize:20,total:0},canExportStatus:!1,tableLoading:!1,tableList:[],showExport:!1,approveDialog:{cityVal:[],rangeVal:[],rangeMonthVal:[],cityOps:[],dataRangeOps:[],dataRangeMonth:[]},dimensionType:1}},computed:{rangeData:function(){return 1===this.dimensionType?this.approveDialog.dataRangeMonth:this.approveDialog.dataRangeOps},rangeVal:function(){return 1===this.dimensionType?this.approveDialog.rangeMonthVal:this.approveDialog.rangeVal}},created:function(){this.oProject={api:i.default.getProjectAndType,params:{q:""}},this.oCreater={api:o.default.getStaffList,params:{q:"",status:0,role:"all"}}},mounted:function(){this.getInitInfo()},methods:{dateChange:u.dateChange,getDataByOptions:u.getDataByOptions,changeDimension:function(e){this.dimensionType=e},confirmExport:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var r,n,o,i,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=e.cityId,n=e.dataDimension,o=e.dataRange,i={city:r.join(",")},1===n?i.month=o.join(","):i.quater=o.join(","),"/backend-api/expand/project-co/export",c="".concat("/backend-api/expand/project-co/export","?").concat(s.default.stringify(i)),location.href=c,t.showExport=!1,t.clearExportDlg();case 8:case"end":return a.stop()}}),a)})))()},getInitInfo:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.default.cooperateListInit();case 3:a=t.sent,r=a.data,n=r.code,o=r.data,i=r.msg,0===n?(e.backupInitData=o,e.cooperateTypeOps=Object.freeze(o.cooperate_type),e.markNewOps=Object.freeze(o.mark_new),e.approveDialog.cityOps=Object.freeze(o.city_list),e.approveDialog.cityVal=o.default_city,e.approveDialog.dataRangeOps=Object.freeze(o.quater),e.approveDialog.rangeVal=o.default_quater,e.approveDialog.dataRangeMonth=Object.freeze(o.month),e.approveDialog.rangeMonthVal=o.default_month,e.canExportStatus=1===o.can_export):e.$message.error(i),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getContractTableInfo:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,r,n,o,i,l,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.tableLoading=!0,a=e.contractForm,r=e.pages,n={page:r.curPage,"per-page":r.pageSize,project_id:a.projectId,cooperate_type:a.cooperateType,follow_employee_id:a.contractFollower,record_month_start:a.monthRange[0],record_month_end:a.monthRange[1],mark_new:a.markNew},t.next=6,c.default.getCooperateList(n);case 6:o=t.sent,i=o.data,l=i.code,s=i.data,u=i.msg,e.tableLoading=!1,0===l?(e.tableList=s.list,e.pages.total=s.total):e.$message.error(u),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),e.tableLoading=!1,console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},pageChange:function(e){this.pages.curPage=e,this.getContractTableInfo()},resetForm:function(){this.$refs.contractForm.resetFields(),this.tableList=[],this.pages.total=0,this.pages.curPage=1},exportExcel:function(){this.resetExportDlg(),this.showExport=!0},resetExportDlg:function(){var e=this.backupInitData;this.approveDialog.cityVal=e.default_city,this.approveDialog.rangeVal=e.default_quater,this.approveDialog.rangeMonthVal=e.default_month},clearExportDlg:function(){this.approveDialog.cityVal=[],this.approveDialog.rangeVal=[]}}};t.default=d},"29ea":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("23f7"),n={cooperateListInit:function(){return r.axios.get("/backend-api/expand/project-co/list-init")},getCooperateList:function(e){return r.axios.get("/backend-api/expand/project-co/list",{params:e})}};t.default=n},3835:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e)||(0,n.default)(e,t)||(0,o.default)(e,t)||(0,i.default)()};var r=c(a("0d21")),n=c(a("09f0")),o=c(a("06c5")),i=c(a("3d8c"));function c(e){return e&&e.__esModule?e:{default:e}}},"3d8c":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},4090:function(e,t,a){(t=a("24fb")(!1)).push([e.i,"[data-v-2cc3d55e] .el-table th.gutter{display:table-cell!important}.a-link[data-v-2cc3d55e]{color:#409eff}.cooperate-history-list[data-v-2cc3d55e]{padding:0 30px}.bread-nav[data-v-2cc3d55e]{padding:20px 0}.contract-form[data-v-2cc3d55e]{background-color:#fff;padding:20px 0 10px}.contract-form[data-v-2cc3d55e] .el-input{width:200px}.contract-form .form-item-center[data-v-2cc3d55e]{display:block;text-align:center}.contract-form[data-v-2cc3d55e] .el-range-input{background-color:#fff}.table-wrap-new[data-v-2cc3d55e]{margin-top:10px}.table-tools[data-v-2cc3d55e]{padding:10px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pagination[data-v-2cc3d55e]{margin:20px auto}",""]),e.exports=t},"4e9a":function(e,t,a){(t=a("24fb")(!1)).push([e.i,".el-select[data-v-5d4b4e59]{width:600px}",""]),e.exports=t},"6d51":function(e,t,a){"use strict";var r=a("4ea4");a("dca8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("5530"));a("96cf");var o=r(a("1da1")),i={name:"ExportDialog",inheritAttrs:!1,props:{title:{type:String,default:"提示"},cityVal:{type:Array,default:function(){return[]}},rangeVal:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},cityOps:{type:Array,default:function(){return[]}},dataRangeOps:{type:Array,default:function(){return[]}}},data:function(){return{forms:{cityId:[],dataDimension:1,dataRange:[]},dataDimensionOps:Object.freeze([{value:1,name:"月份"},{value:2,name:"季度"}]),dialogVisble:this.visible,rules:{cityId:[{required:!0,message:"请选择楼盘城市",trigger:"change"}],dataRange:[{type:"array",required:!0,message:"请选择数据范围",trigger:"change"}]}}},watch:{visible:function(e){this.dialogVisble=e},cityVal:function(e){this.forms.cityId=e},rangeVal:function(e){this.forms.dataRange=e}},methods:{confirm:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.signForm.validate();case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:e.$emit("confirmExport",(0,n.default)({},e.forms)),setTimeout((function(){e.forms.dataDimension=1})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},cancel:function(){this.dialogVisble=!1,this.forms.dataDimension=1,this.$emit("cancelExport"),this.$emit("update:visible",!1),this.$emit("changeDimension",1)}}};t.default=i},"6f53":function(e,t,a){var r=a("83ab"),n=a("df75"),o=a("fc6a"),i=a("d1e7").f,c=function(e){return function(t){for(var a,c=o(t),l=n(c),s=l.length,u=0,p=[];s>u;)a=l[u++],r&&!i.call(c,a)||p.push(e?[a,c[a]]:c[a]);return p}};e.exports={entries:c(!0),values:c(!1)}},7958:function(e,t,a){"use strict";a.r(t);var r=a("2084"),n=a.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t.default=n.a},a15b:function(e,t,a){"use strict";var r=a("23e7"),n=a("44ad"),o=a("fc6a"),i=a("a640"),c=[].join,l=n!=Object,s=i("join",",");r({target:"Array",proto:!0,forced:l||!s},{join:function(e){return c.call(o(this),void 0===e?",":e)}})},aa1a:function(e,t,a){"use strict";a("fe3c")},aa5d:function(e,t,a){var r=a("4090");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("4b4d8c0a",r,!0,{sourceMap:!1,shadowMode:!1})},b202:function(e,t,a){"use strict";a.r(t);var r=a("c854"),n=a("7958");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("0cd0");var i=a("2877"),c=Object(i.a)(n.default,r.a,r.b,!1,null,"2cc3d55e",null);t.default=c.exports},bb2f:function(e,t,a){var r=a("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c854:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cooperate-history-list"},[a("el-breadcrumb",{staticClass:"bread-nav",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",[e._v("合作楼盘历史记录")])],1),a("el-form",{ref:"contractForm",staticClass:"contract-form",attrs:{model:e.contractForm,size:"small","label-width":"114px",inline:!0}},[a("el-form-item",{attrs:{prop:"monthRange",label:"记录月份："}},[a("el-date-picker",{attrs:{type:"monthrange","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份","value-format":"yyyy-MM"},on:{change:function(t){return e.dateChange(t,3)}},model:{value:e.contractForm.monthRange,callback:function(t){e.$set(e.contractForm,"monthRange",t)},expression:"contractForm.monthRange"}})],1),a("el-form-item",{attrs:{prop:"projectId",label:"楼盘名称："}},[a("search-select-radio",{attrs:{clearable:"",placeholder:"请选择",apiInfo:e.oProject},model:{value:e.contractForm.projectId,callback:function(t){e.$set(e.contractForm,"projectId",t)},expression:"contractForm.projectId"}})],1),a("el-form-item",{attrs:{prop:"cooperateType",label:"合作方式："}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.contractForm.cooperateType,callback:function(t){e.$set(e.contractForm,"cooperateType",t)},expression:"contractForm.cooperateType"}},e._l(e.cooperateTypeOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{prop:"contractFollower",label:"合同跟进人："}},[a("search-select-radio",{attrs:{clearable:"",placeholder:"请选择",apiInfo:e.oCreater},model:{value:e.contractForm.contractFollower,callback:function(t){e.$set(e.contractForm,"contractFollower",t)},expression:"contractForm.contractFollower"}})],1),a("el-form-item",{attrs:{prop:"markNew",label:"标记新增："}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.contractForm.markNew,callback:function(t){e.$set(e.contractForm,"markNew",t)},expression:"contractForm.markNew"}},e._l(e.markNewOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"form-item-center"},[a("el-button",{on:{click:e.resetForm}},[e._v(" 重置 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getDataByOptions(e.getContractTableInfo)}}},[e._v(" 搜索 ")])],1)],1),a("div",{staticClass:"table-wrap-new"},[a("table-pagination",{attrs:{total:e.pages.total,page:e.pages.curPage},on:{pageChange:e.pageChange},scopedSlots:e._u([{key:"btns",fn:function(){return[e.canExportStatus?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportExcel}},[e._v(" 导出新增楼盘数据 ")]):e._e()]},proxy:!0},{key:"table",fn:function(){return[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"contractTable",attrs:{border:"",data:e.tableList,size:"small","highlight-current-row":!0,"header-cell-style":{backgroundColor:"#f9f9f9",color:"#333"}}},[a("el-table-column",{attrs:{prop:"record_date",label:"记录日期",align:"center"}}),a("el-table-column",{attrs:{prop:"city_name",label:"地理城市",align:"center"}}),a("el-table-column",{attrs:{prop:"project_id",label:"楼盘ID",align:"center"}}),a("el-table-column",{attrs:{prop:"project_name",label:"楼盘名称",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"合同ID","class-name":"more-info-td",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("a",{staticClass:"a-link",attrs:{href:r.contract_url}},[e._v(e._s(r.id))])]}}])}),a("el-table-column",{attrs:{label:"合作方",prop:"partner",align:"center"}}),a("el-table-column",{attrs:{label:"合作方式",prop:"cooperate_type",align:"center"}}),a("el-table-column",{attrs:{prop:"direct_sign_type",label:"直签类型",align:"center"}}),a("el-table-column",{attrs:{prop:"follow_employee",label:"合同跟进人",align:"center"}}),a("el-table-column",{attrs:{prop:"contract_begin_datetime",label:"合同开始时间",align:"center"}}),a("el-table-column",{attrs:{prop:"contract_end_datetime",label:"合同结束时间",align:"center"}}),a("el-table-column",{attrs:{prop:"contract_file_time",label:"合同归档时间",align:"center"}}),a("el-table-column",{attrs:{prop:"total_platform_sign_days",label:"累计天数（平台）",align:"center"}}),a("el-table-column",{attrs:{prop:"total_direct_sign_days",label:"累计天数（直签）",align:"center"}})],1)]},proxy:!0}])})],1),a("export-dialog",{attrs:{title:"导出新增楼盘数据",visible:e.showExport,"data-range-ops":e.rangeData,"range-val":e.rangeVal,"city-val":e.approveDialog.cityVal,"city-ops":e.approveDialog.cityOps,hasDimension:""},on:{"update:visible":function(t){e.showExport=t},changeDimension:e.changeDimension,confirmExport:e.confirmExport,cancelExport:e.clearExportDlg}})],1)},n=[]},d693:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"export-dialog-wrap"},[a("el-dialog",{attrs:{visible:e.dialogVisble,"close-on-click-modal":!1,width:"800px",title:e.title,center:""},on:{"update:visible":function(t){e.dialogVisble=t},close:e.cancel}},[a("el-form",{ref:"signForm",attrs:{model:e.forms,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{prop:"cityId",label:"楼盘城市："}},[a("el-select",{attrs:{clearable:"",multiple:"",filterable:""},model:{value:e.forms.cityId,callback:function(t){e.$set(e.forms,"cityId",t)},expression:"forms.cityId"}},e._l(e.cityOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),void 0!==e.$attrs.hasDimension?a("el-form-item",{attrs:{prop:"dataDimension",label:"数据维度："}},[a("el-radio-group",{on:{change:function(t){return e.$emit("changeDimension",t)}},model:{value:e.forms.dataDimension,callback:function(t){e.$set(e.forms,"dataDimension",t)},expression:"forms.dataDimension"}},e._l(e.dataDimensionOps,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1):e._e(),a("el-form-item",{attrs:{prop:"dataRange",label:"数据范围："}},[a("el-select",{attrs:{clearable:"",filterable:"",multiple:""},model:{value:e.forms.dataRange,callback:function(t){e.$set(e.forms,"dataRange",t)},expression:"forms.dataRange"}},e._l(e.dataRangeOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)],1)],1)},n=[]},dca8:function(e,t,a){var r=a("23e7"),n=a("bb2f"),o=a("d039"),i=a("861d"),c=a("f183").onFreeze,l=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){l(1)})),sham:!n},{freeze:function(e){return l&&i(e)?l(c(e)):e}})},e21a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("23f7"),n={getProjectAndType:function(e){return r.axios.get("/backend-api/common/get-project-and-type",{params:e})},getSupplierList:function(e){return r.axios.get("/backend-api/common/get-supplier",{params:e})},getCityList:function(e){return r.axios.get("/backend-api/select2/bank/get-city-dropdown-list",{params:e})}};t.default=n},eb6d:function(e,t,a){"use strict";a.r(t);var r=a("d693"),n=a("11c7");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("aa1a");var i=a("2877"),c=Object(i.a)(n.default,r.a,r.b,!1,null,"5d4b4e59",null);t.default=c.exports},f183:function(e,t,a){var r=a("d012"),n=a("861d"),o=a("5135"),i=a("9bf2").f,c=a("90e3"),l=a("bb2f"),s=c("meta"),u=0,p=Object.isExtensible||function(){return!0},d=function(e){i(e,s,{value:{objectID:"O"+ ++u,weakData:{}}})},f=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,s)){if(!p(e))return"F";if(!t)return"E";d(e)}return e[s].objectID},getWeakData:function(e,t){if(!o(e,s)){if(!p(e))return!0;if(!t)return!1;d(e)}return e[s].weakData},onFreeze:function(e){return l&&f.REQUIRED&&p(e)&&!o(e,s)&&d(e),e}};r[s]=!0},fe3c:function(e,t,a){var r=a("4e9a");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,a("499e").default)("37a99518",r,!0,{sourceMap:!1,shadowMode:!1})}}]);