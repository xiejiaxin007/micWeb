(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-721027ec"],{"281a":function(e,t,i){"use strict";i("cd23")},"50db":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("23f7"),n={initStandard:function(e){return a.axios.get("/backend-api/expand/ex-commission-bill/init-create",{params:e})},updateStandard:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/update",e)},getStandardList:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/get-bill-select2-list",e)},createStandard:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/create",e)},getStandardData:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/list",e)},deleteStandard:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/delete",e)},getStandardInfo:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/detail",e)},getStandardHistoryInfo:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/history-detail",e)},getDealDetail:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/deal-detail",e)},updateReport:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/deal-detail-report-upload",e)},auditReport:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/deal-detail-report-audit",e)},customRevisit:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/deal-detail-return-visit",e)},checkDeal:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/deal-detail-check",e)},auditAvailability:function(e){return a.axios.post("/backend-api/expand/ex-commission-bill/audit-availability",e)},initAuditAvailability:function(){return a.axios.get("/backend-api/expand/ex-commission-bill/init-audit-availability")}};t.default=n},"617c":function(e,t,i){"use strict";i.r(t);var a=i("c02a"),n=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t.default=n.a},"7d35":function(e,t,i){(t=i("24fb")(!1)).push([e.i,'.commission-edit-box[data-v-70f8b25b]{padding:0 20px;-webkit-box-sizing:border-box;box-sizing:border-box}.materials-title[data-v-70f8b25b]{font-size:14px;color:#606266}.materials-title[data-v-70f8b25b]:before{content:"*";color:#f56c6c;margin-right:4px}.commission-form[data-v-70f8b25b] .el-form-item{margin-bottom:20px}.materials-item .item-title[data-v-70f8b25b]{margin:20px 0 10px;font-weight:700;font-size:14px}.materials-item-box[data-v-70f8b25b]{display:-webkit-box;display:-ms-flexbox;display:flex;border:1px dashed #999;padding:16px;-webkit-box-sizing:border-box;box-sizing:border-box}.materials-item-box .report-box[data-v-70f8b25b]{margin-bottom:10px}.materials-item-box .item-content[data-v-70f8b25b]{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:33%;margin-right:20px}.materials-item-box .item-content[data-v-70f8b25b]:last-of-type{margin-right:0}.materials-item-box[data-v-70f8b25b] .jl-file-upload-wrap{display:inline-block}.materials-item-box[data-v-70f8b25b] .jl-file-upload-wrap .el-button{padding:8px 10px}.img-list-box[data-v-70f8b25b]{margin-top:16px}.img-list-box .img-box[data-v-70f8b25b]{position:relative;border:1px solid #ccc}.img-list-box .img-box>img[data-v-70f8b25b]{width:60px;height:60px;-o-object-fit:contain;object-fit:contain}.img-list-box .img-box>img.btn-del[data-v-70f8b25b]{position:absolute;width:20px;height:20px;top:-8px;right:-8px;cursor:pointer;background-color:#fff;border-radius:50%}.img-list-box .img-item[data-v-70f8b25b]{display:inline-block;margin-right:16px}.img-list-box .img-item[data-v-70f8b25b]:last-of-type{margin-right:0}.btn-area[data-v-70f8b25b]{margin:20px 0}',""]),e.exports=t},a02f:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commission-edit-box"},[a("el-breadcrumb",{staticClass:"bread-crumb-box",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("首页")])]),a("el-breadcrumb-item",[e._v(e._s(e.$route.query.id?"结佣单据标准编辑页":"结佣单据标准录入页"))])],1),a("div",{staticClass:"content-box"},[a("el-form",{ref:"sigleForm",staticClass:"commission-form",attrs:{model:e.sigleForm,"label-width":"150px"}},[e.$route.query.id?e._e():a("el-form-item",{attrs:{label:"复制已有单据标准：",prop:"receiptId"}},[a("search-select-radio",{attrs:{placeholder:"请选择",isBlurByChange:e.isBlurByChange,apiInfo:e.receiptApi},on:{getOption:e.changeSelect},model:{value:e.sigleForm.receiptId,callback:function(t){e.$set(e.sigleForm,"receiptId",t)},expression:"sigleForm.receiptId"}})],1),a("el-form-item",{attrs:{label:"结佣单据标准名称：",rules:{required:!0,message:"请填写结佣单据标准名称",validator:e.changeInput,trigger:"blur"},prop:"name"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.sigleForm.name,callback:function(t){e.$set(e.sigleForm,"name",t)},expression:"sigleForm.name"}})],1)],1),a("el-form",{ref:"ruleForm",staticClass:"commission-form",attrs:{model:e.ruleForm,"label-width":"0"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"materials-box"},[a("p",{staticClass:"materials-title"},[e._v("以下哪些材料，结佣时必须提供请勾选")]),e._l(e.ruleForm,(function(t,n,r){return a("div",{key:"formItem-"+r,staticClass:"materials-item"},[a("div",{staticClass:"item-title"},[e._v(e._s(e.voucherTit[n]))]),a("div",{staticClass:"materials-item-box"},e._l(t,(function(t,r){return a("div",{key:"see-"+r,staticClass:"item-content"},[a("div",{staticClass:"item-content-box"},[a("el-checkbox",{staticClass:"report-box",attrs:{"true-label":"1","false-label":"2",disabled:"2"===t.is_change},model:{value:t.is_check,callback:function(i){e.$set(t,"is_check",i)},expression:"form.is_check"}},[e._v(e._s(t.cat_child_name))]),"1"===t.is_check?a("el-form-item",{staticClass:"form-input-item",attrs:{rules:{required:!0,message:"请填写对应凭证的要求",validator:e.changeInput,trigger:"blur"},prop:n+"."+r+".cat_child_desc"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxlength:"100",resize:"none"},model:{value:t.cat_child_desc,callback:function(i){e.$set(t,"cat_child_desc",i)},expression:"form.cat_child_desc"}})],1):e._e(),"1"===t.is_check&&t.file_list&&t.file_list.length<5?a("jl-file-upload",{ref:"uploadImg-"+r,refInFor:!0,attrs:{fileMaxSize:"10mb",fileType:"jpg,png,jpeg",limit:e.imgLimit,upID:"commission-report-upload-"+n+"-"+r,ossData:e.ossData},on:{beforeUpdate:function(t){e.loading=!0},getFileURL:function(i){return e.getFileURL(i,t.file_list)}}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传图片")])],1):e._e(),"1"===t.is_check?a("div",{staticClass:"img-list-box"},e._l(t.file_list,(function(n,r){return a("a",{key:n,staticClass:"img-item",attrs:{href:""+e.imgDomain+n,target:"_blank",rel:"noopener noreferrer"}},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:""+e.imgDomain+n,alt:"上传图片"}}),a("img",{staticClass:"btn-del",attrs:{src:i("a65a"),alt:"删除按钮"},on:{click:function(i){return i.preventDefault(),e.delImg(t.file_list,r)}}})])])})),0):e._e()],1)])})),0)])}))],2)])],1),a("div",{staticClass:"btn-area"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirom}},[e._v("确定")])],1),a("confirm-dialog",{attrs:{title:"信息",content:"复制此标准后，此页面会刷新？",visible:e.copyDialog},on:{cancel:function(t){e.copyDialog=!1},confirm:e.confirmDialog}})],1)},n=[]},a611:function(e,t,i){"use strict";i.r(t);var a=i("a02f"),n=i("617c");for(var r in n)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(r);i("281a");var o=i("2877"),s=Object(o.a)(n.default,a.a,a.b,!1,null,"70f8b25b",null);t.default=s.exports},a65a:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAstJREFUSA21Vk1v00AQfbu2o1CJAwVKm48C4oKQKhA/AqlFIkI9cOHSA1ckfkHF/6jUC0cqCFJbif/AZwFx4UKC2wLlgtQ2dmwzz46dtZNarUT3EO/uzLw3OzM7G4WSsbax0Yi8qAWl7iLCtQioUV0Brvx8QxStq4pqLy4sdI+CEd3R0W6/rnlR8BQIl0RqjWrkdgJAr1aUtdxq3XFzElmMEKy1N+9FCJ9FEc4WlcvWSuGvgn642Jp/Zeppc/H85ebjMApfnBScGLShLTFMzOwE9JwKIsyRmsrHnIda6fvpSWICxtyH/9X0/OKFSXqF33t/SnFnGzX0+wHcnd1Mj+Fy4FxnTmzuJgkdxrw2PYXbN+dEEqHr7uD91pfM2JzcmruBRm1athRs28L3bpJjOuqBRYJHmqU4qJbMlp7bjo1qtYrZRh0EKg7uUUYdrRWCQIopN8IlYuu4zguluL37E52OC9/3Uak4IyQpOGWe56PT3caP7WGIBjwWse3kEonLhfHmwxbCMERTYpySUMWyLNRnpuO9BNzFu63PBevBUi6ozRs6XorMsEgy9LwEnKCCbafXv5REaq1ZT05CvYODw7hqjvR8AEbs49V8IYIMk3h3rCH5l8ZVMpjQNESMued5cfy5N666TChi67grmrvGfLRa3LhiSJQmvpREOq4kOVoXzHkDN56OAzdjnp7qcrMOaQ14+/FTEYINal2zn4skd0vOT56T2k+SOq4USdSRW0uZ4zi4eqWJmUtTRYKA2Dp5LPSqKZ2YOINQrvP+/kEMZHqe6qUkh4c99CQvShpQfuhVYse9iI+Fj/ABewiV6F3Q78Oy7XieNxyuSPJrbw+9niffYVNMmp21TM2M9rTadXYP2L/lRXoipOHQxxPPQmKkbwGtsxOkUKf6ZJKE7Hws5GFbkWWuulInCl8++iu0MT1PdUZOkAr4/R9/W/4BZoddbuCJpr8AAAAASUVORK5CYII="},c02a:function(e,t,i){"use strict";var a=i("4ea4");i("a434"),i("b0c0"),i("d3b7"),i("ac1f"),i("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var n=a(i("1da1")),r=a(i("f946")),o=a(i("50db")),s=i("2af9"),l={1:"报备凭证",2:"带看凭证",3:"交易凭证",4:"业绩凭证"},c={name:"commission-edit-in",data:function(){return{isBlurByChange:!1,voucherTit:l,copyDialog:!1,sigleForm:{receiptId:"",name:""},receiptApi:{api:o.default.getStandardList,params:{q:""}},ruleForm:{},imgLimit:5,ossData:{},loading:!1,isSubmiting:!1,imgDomain:""}},components:{SearchSelectRadio:s.SearchSelectRadio,ConfirmDialog:s.ConfirmDialog},mounted:function(){this.getSignCode(),this.getData(),this.$route.query.id?document.title="结佣单据标准编辑页":document.title="结佣单据标准录入页"},methods:{changeInput:function(e,t,i){t&&t.replace(/\s+/g,"")?i():i(new Error("请填写对应凭证的要求"))},getData:function(e,t){var i=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var n,r,s,l,c,d,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i.loading=!0,n=null,r={},i.$route.query.id?(n=o.default.getStandardInfo,r.bill_id=i.$route.query.id):"get"===e?(n=o.default.getStandardInfo,r.bill_id=t):n=o.default.initStandard,a.next=7,n(r);case 7:s=a.sent,l=s.data,c=l.code,d=l.msg,u=l.data,0===c?(i.ruleForm=u.list,i.sigleForm.name="get"!==e?u.bill_name:i.nativeName,i.imgDomain=u.img_domain):i.$message({message:d,type:"warning"}),i.loading=!1,a.next=20;break;case 16:a.prev=16,a.t0=a.catch(0),i.loading=!1,console.log(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,16]])})))()},changeSelect:function(e){this.nativeName=e.text,this.isBlurByChange=!this.isBlurByChange,this.copyDialog=!0},confirmDialog:function(){this.copyDialog=!1,this.getData("get",this.sigleForm.receiptId)},sumbitForm:function(e){var t=this;return new Promise((function(i,a){t.$refs[e].validate((function(e){e?i(!0):a()}))}))},confirom:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.sumbitForm("sigleForm");case 3:return i=t.sent,t.next=6,e.sumbitForm("ruleForm");case 6:a=t.sent,i&&a&&e.saveData(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},saveData:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i,a,n,r,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSubmiting||(e.isSubmiting=!0),t.prev=1,i=null,a={bill_name:e.sigleForm.name,list:e.ruleForm},e.$route.query.id?(i=o.default.updateStandard,a.id=e.$route.query.id):i=o.default.createStandard,t.next=7,i(a);case 7:n=t.sent,r=n.data,s=r.code,l=r.msg,0===s?e.$router.push({path:"/contract/commissionList"}):e.$message({message:l,type:"warning"}),e.isSubmiting=!1,t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),e.isSubmiting=!1,console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})))()},cancel:function(){this.$router.push({path:"/contract/commissionList"})},delImg:function(e,t){e.splice(t,1)},getSignCode:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={cate:"commission"},t.prev=1,t.next=4,r.default.getSign(i);case 4:a=t.sent,0===(n=a.data).code&&(e.ossData=n.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getFileURL:function(e,t){this.loading=!1,0!==e.length?t.push(e[0].upURL):this.$message("上传失败,请重新上传")}}};t.default=c},cd23:function(e,t,i){var a=i("7d35");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i("499e").default)("8568fa4c",a,!0,{sourceMap:!1,shadowMode:!1})}}]);